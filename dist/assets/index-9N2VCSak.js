var y5=Object.defineProperty;var v5=(e,t,n)=>t in e?y5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var uo=(e,t,n)=>v5(e,typeof t!="symbol"?t+"":t,n);function x5(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var An=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function w5(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var nR={exports:{}},ly={},rR={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf=Symbol.for("react.element"),b5=Symbol.for("react.portal"),S5=Symbol.for("react.fragment"),C5=Symbol.for("react.strict_mode"),E5=Symbol.for("react.profiler"),k5=Symbol.for("react.provider"),_5=Symbol.for("react.context"),N5=Symbol.for("react.forward_ref"),P5=Symbol.for("react.suspense"),A5=Symbol.for("react.memo"),T5=Symbol.for("react.lazy"),Gk=Symbol.iterator;function R5(e){return e===null||typeof e!="object"?null:(e=Gk&&e[Gk]||e["@@iterator"],typeof e=="function"?e:null)}var sR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oR=Object.assign,iR={};function eu(e,t,n){this.props=e,this.context=t,this.refs=iR,this.updater=n||sR}eu.prototype.isReactComponent={};eu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};eu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aR(){}aR.prototype=eu.prototype;function K1(e,t,n){this.props=e,this.context=t,this.refs=iR,this.updater=n||sR}var J1=K1.prototype=new aR;J1.constructor=K1;oR(J1,eu.prototype);J1.isPureReactComponent=!0;var Kk=Array.isArray,lR=Object.prototype.hasOwnProperty,Y1={current:null},cR={key:!0,ref:!0,__self:!0,__source:!0};function uR(e,t,n){var r,s={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)lR.call(t,r)&&!cR.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Jf,type:e,key:o,ref:i,props:s,_owner:Y1.current}}function j5(e,t){return{$$typeof:Jf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function X1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jf}function O5(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Jk=/\/+/g;function Zv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?O5(""+e.key):t.toString(36)}function Ap(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Jf:case b5:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+Zv(i,0):r,Kk(s)?(n="",e!=null&&(n=e.replace(Jk,"$&/")+"/"),Ap(s,t,n,"",function(c){return c})):s!=null&&(X1(s)&&(s=j5(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Jk,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",Kk(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+Zv(o,a);i+=Ap(o,t,n,l,s)}else if(l=R5(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+Zv(o,a++),i+=Ap(o,t,n,l,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function bh(e,t,n){if(e==null)return e;var r=[],s=0;return Ap(e,r,"","",function(o){return t.call(n,o,s++)}),r}function M5(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Vn={current:null},Tp={transition:null},I5={ReactCurrentDispatcher:Vn,ReactCurrentBatchConfig:Tp,ReactCurrentOwner:Y1};function dR(){throw Error("act(...) is not supported in production builds of React.")}Be.Children={map:bh,forEach:function(e,t,n){bh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bh(e,function(){t++}),t},toArray:function(e){return bh(e,function(t){return t})||[]},only:function(e){if(!X1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Be.Component=eu;Be.Fragment=S5;Be.Profiler=E5;Be.PureComponent=K1;Be.StrictMode=C5;Be.Suspense=P5;Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I5;Be.act=dR;Be.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=oR({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Y1.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)lR.call(t,l)&&!cR.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Jf,type:e.type,key:s,ref:o,props:r,_owner:i}};Be.createContext=function(e){return e={$$typeof:_5,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:k5,_context:e},e.Consumer=e};Be.createElement=uR;Be.createFactory=function(e){var t=uR.bind(null,e);return t.type=e,t};Be.createRef=function(){return{current:null}};Be.forwardRef=function(e){return{$$typeof:N5,render:e}};Be.isValidElement=X1;Be.lazy=function(e){return{$$typeof:T5,_payload:{_status:-1,_result:e},_init:M5}};Be.memo=function(e,t){return{$$typeof:A5,type:e,compare:t===void 0?null:t}};Be.startTransition=function(e){var t=Tp.transition;Tp.transition={};try{e()}finally{Tp.transition=t}};Be.unstable_act=dR;Be.useCallback=function(e,t){return Vn.current.useCallback(e,t)};Be.useContext=function(e){return Vn.current.useContext(e)};Be.useDebugValue=function(){};Be.useDeferredValue=function(e){return Vn.current.useDeferredValue(e)};Be.useEffect=function(e,t){return Vn.current.useEffect(e,t)};Be.useId=function(){return Vn.current.useId()};Be.useImperativeHandle=function(e,t,n){return Vn.current.useImperativeHandle(e,t,n)};Be.useInsertionEffect=function(e,t){return Vn.current.useInsertionEffect(e,t)};Be.useLayoutEffect=function(e,t){return Vn.current.useLayoutEffect(e,t)};Be.useMemo=function(e,t){return Vn.current.useMemo(e,t)};Be.useReducer=function(e,t,n){return Vn.current.useReducer(e,t,n)};Be.useRef=function(e){return Vn.current.useRef(e)};Be.useState=function(e){return Vn.current.useState(e)};Be.useSyncExternalStore=function(e,t,n){return Vn.current.useSyncExternalStore(e,t,n)};Be.useTransition=function(){return Vn.current.useTransition()};Be.version="18.3.1";rR.exports=Be;var y=rR.exports;const M=zo(y),fR=x5({__proto__:null,default:M},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D5=y,$5=Symbol.for("react.element"),L5=Symbol.for("react.fragment"),F5=Object.prototype.hasOwnProperty,B5=D5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z5={key:!0,ref:!0,__self:!0,__source:!0};function hR(e,t,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)F5.call(t,r)&&!z5.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:$5,type:e,key:o,ref:i,props:s,_owner:B5.current}}ly.Fragment=L5;ly.jsx=hR;ly.jsxs=hR;nR.exports=ly;var f=nR.exports,pR={exports:{}},Pr={},mR={exports:{}},gR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,A){var $=j.length;j.push(A);e:for(;0<$;){var B=$-1>>>1,I=j[B];if(0<s(I,A))j[B]=A,j[$]=I,$=B;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var A=j[0],$=j.pop();if($!==A){j[0]=$;e:for(var B=0,I=j.length,H=I>>>1;B<H;){var V=2*(B+1)-1,W=j[V],Y=V+1,Z=j[Y];if(0>s(W,$))Y<I&&0>s(Z,W)?(j[B]=Z,j[Y]=$,B=Y):(j[B]=W,j[V]=$,B=V);else if(Y<I&&0>s(Z,$))j[B]=Z,j[Y]=$,B=Y;else break e}}return A}function s(j,A){var $=j.sortIndex-A.sortIndex;return $!==0?$:j.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,m=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(j){for(var A=n(c);A!==null;){if(A.callback===null)r(c);else if(A.startTime<=j)r(c),A.sortIndex=A.expirationTime,t(l,A);else break;A=n(c)}}function S(j){if(g=!1,b(j),!m)if(n(l)!==null)m=!0,O(C);else{var A=n(c);A!==null&&F(S,A.startTime-j)}}function C(j,A){m=!1,g&&(g=!1,x(N),N=-1),p=!0;var $=h;try{for(b(A),d=n(l);d!==null&&(!(d.expirationTime>A)||j&&!R());){var B=d.callback;if(typeof B=="function"){d.callback=null,h=d.priorityLevel;var I=B(d.expirationTime<=A);A=e.unstable_now(),typeof I=="function"?d.callback=I:d===n(l)&&r(l),b(A)}else r(l);d=n(l)}if(d!==null)var H=!0;else{var V=n(c);V!==null&&F(S,V.startTime-A),H=!1}return H}finally{d=null,h=$,p=!1}}var E=!1,k=null,N=-1,P=5,T=-1;function R(){return!(e.unstable_now()-T<P)}function L(){if(k!==null){var j=e.unstable_now();T=j;var A=!0;try{A=k(!0,j)}finally{A?z():(E=!1,k=null)}}else E=!1}var z;if(typeof w=="function")z=function(){w(L)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,D=_.port2;_.port1.onmessage=L,z=function(){D.postMessage(null)}}else z=function(){v(L,0)};function O(j){k=j,E||(E=!0,z())}function F(j,A){N=v(function(){j(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,O(C))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(j){switch(h){case 1:case 2:case 3:var A=3;break;default:A=h}var $=h;h=A;try{return j()}finally{h=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,A){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=h;h=j;try{return A()}finally{h=$}},e.unstable_scheduleCallback=function(j,A,$){var B=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?B+$:B):$=B,j){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=$+I,j={id:u++,callback:A,priorityLevel:j,startTime:$,expirationTime:I,sortIndex:-1},$>B?(j.sortIndex=$,t(c,j),n(l)===null&&j===n(c)&&(g?(x(N),N=-1):g=!0,F(S,$-B))):(j.sortIndex=I,t(l,j),m||p||(m=!0,O(C))),j},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(j){var A=h;return function(){var $=h;h=A;try{return j.apply(this,arguments)}finally{h=$}}}})(gR);mR.exports=gR;var U5=mR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H5=y,_r=U5;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yR=new Set,Ud={};function ul(e,t){Nc(e,t),Nc(e+"Capture",t)}function Nc(e,t){for(Ud[e]=t,e=0;e<t.length;e++)yR.add(t[e])}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uw=Object.prototype.hasOwnProperty,V5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yk={},Xk={};function W5(e){return uw.call(Xk,e)?!0:uw.call(Yk,e)?!1:V5.test(e)?Xk[e]=!0:(Yk[e]=!0,!1)}function q5(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function G5(e,t,n,r){if(t===null||typeof t>"u"||q5(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Wn(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yn[e]=new Wn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yn[t]=new Wn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yn[e]=new Wn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yn[e]=new Wn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yn[e]=new Wn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yn[e]=new Wn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yn[e]=new Wn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yn[e]=new Wn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yn[e]=new Wn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Q1=/[\-:]([a-z])/g;function Z1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Q1,Z1);yn[t]=new Wn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Q1,Z1);yn[t]=new Wn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Q1,Z1);yn[t]=new Wn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yn[e]=new Wn(e,1,!1,e.toLowerCase(),null,!1,!1)});yn.xlinkHref=new Wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yn[e]=new Wn(e,1,!1,e.toLowerCase(),null,!0,!0)});function eS(e,t,n,r){var s=yn.hasOwnProperty(t)?yn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(G5(t,n,s,r)&&(n=null),r||s===null?W5(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Uo=H5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sh=Symbol.for("react.element"),Bl=Symbol.for("react.portal"),zl=Symbol.for("react.fragment"),tS=Symbol.for("react.strict_mode"),dw=Symbol.for("react.profiler"),vR=Symbol.for("react.provider"),xR=Symbol.for("react.context"),nS=Symbol.for("react.forward_ref"),fw=Symbol.for("react.suspense"),hw=Symbol.for("react.suspense_list"),rS=Symbol.for("react.memo"),si=Symbol.for("react.lazy"),wR=Symbol.for("react.offscreen"),Qk=Symbol.iterator;function Cu(e){return e===null||typeof e!="object"?null:(e=Qk&&e[Qk]||e["@@iterator"],typeof e=="function"?e:null)}var gt=Object.assign,e0;function Ju(e){if(e0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);e0=t&&t[1]||""}return`
`+e0+e}var t0=!1;function n0(e,t){if(!e||t0)return"";t0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var l=`
`+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=a);break}}}finally{t0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ju(e):""}function K5(e){switch(e.tag){case 5:return Ju(e.type);case 16:return Ju("Lazy");case 13:return Ju("Suspense");case 19:return Ju("SuspenseList");case 0:case 2:case 15:return e=n0(e.type,!1),e;case 11:return e=n0(e.type.render,!1),e;case 1:return e=n0(e.type,!0),e;default:return""}}function pw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zl:return"Fragment";case Bl:return"Portal";case dw:return"Profiler";case tS:return"StrictMode";case fw:return"Suspense";case hw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xR:return(e.displayName||"Context")+".Consumer";case vR:return(e._context.displayName||"Context")+".Provider";case nS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rS:return t=e.displayName||null,t!==null?t:pw(e.type)||"Memo";case si:t=e._payload,e=e._init;try{return pw(e(t))}catch{}}return null}function J5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pw(t);case 8:return t===tS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Y5(e){var t=bR(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ch(e){e._valueTracker||(e._valueTracker=Y5(e))}function SR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=bR(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function mw(e,t){var n=t.checked;return gt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Zk(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Vi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function CR(e,t){t=t.checked,t!=null&&eS(e,"checked",t,!1)}function gw(e,t){CR(e,t);var n=Vi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yw(e,t.type,n):t.hasOwnProperty("defaultValue")&&yw(e,t.type,Vi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function e_(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function yw(e,t,n){(t!=="number"||hm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Yu=Array.isArray;function nc(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Vi(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function vw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return gt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function t_(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ne(92));if(Yu(n)){if(1<n.length)throw Error(ne(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Vi(n)}}function ER(e,t){var n=Vi(t.value),r=Vi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function n_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function kR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Eh,_R=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Eh=Eh||document.createElement("div"),Eh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Eh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var pd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},X5=["Webkit","ms","Moz","O"];Object.keys(pd).forEach(function(e){X5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pd[t]=pd[e]})});function NR(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||pd.hasOwnProperty(e)&&pd[e]?(""+t).trim():t+"px"}function PR(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=NR(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Q5=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ww(e,t){if(t){if(Q5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function bw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sw=null;function sS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cw=null,rc=null,sc=null;function r_(e){if(e=Qf(e)){if(typeof Cw!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=hy(t),Cw(e.stateNode,e.type,t))}}function AR(e){rc?sc?sc.push(e):sc=[e]:rc=e}function TR(){if(rc){var e=rc,t=sc;if(sc=rc=null,r_(e),t)for(e=0;e<t.length;e++)r_(t[e])}}function RR(e,t){return e(t)}function jR(){}var r0=!1;function OR(e,t,n){if(r0)return e(t,n);r0=!0;try{return RR(e,t,n)}finally{r0=!1,(rc!==null||sc!==null)&&(jR(),TR())}}function Vd(e,t){var n=e.stateNode;if(n===null)return null;var r=hy(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ne(231,t,typeof n));return n}var Ew=!1;if(jo)try{var Eu={};Object.defineProperty(Eu,"passive",{get:function(){Ew=!0}}),window.addEventListener("test",Eu,Eu),window.removeEventListener("test",Eu,Eu)}catch{Ew=!1}function Z5(e,t,n,r,s,o,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var md=!1,pm=null,mm=!1,kw=null,e6={onError:function(e){md=!0,pm=e}};function t6(e,t,n,r,s,o,i,a,l){md=!1,pm=null,Z5.apply(e6,arguments)}function n6(e,t,n,r,s,o,i,a,l){if(t6.apply(this,arguments),md){if(md){var c=pm;md=!1,pm=null}else throw Error(ne(198));mm||(mm=!0,kw=c)}}function dl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function MR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function s_(e){if(dl(e)!==e)throw Error(ne(188))}function r6(e){var t=e.alternate;if(!t){if(t=dl(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return s_(s),e;if(o===r)return s_(s),t;o=o.sibling}throw Error(ne(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?e:t}function IR(e){return e=r6(e),e!==null?DR(e):null}function DR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=DR(e);if(t!==null)return t;e=e.sibling}return null}var $R=_r.unstable_scheduleCallback,o_=_r.unstable_cancelCallback,s6=_r.unstable_shouldYield,o6=_r.unstable_requestPaint,Pt=_r.unstable_now,i6=_r.unstable_getCurrentPriorityLevel,oS=_r.unstable_ImmediatePriority,LR=_r.unstable_UserBlockingPriority,gm=_r.unstable_NormalPriority,a6=_r.unstable_LowPriority,FR=_r.unstable_IdlePriority,cy=null,Zs=null;function l6(e){if(Zs&&typeof Zs.onCommitFiberRoot=="function")try{Zs.onCommitFiberRoot(cy,e,void 0,(e.current.flags&128)===128)}catch{}}var Cs=Math.clz32?Math.clz32:d6,c6=Math.log,u6=Math.LN2;function d6(e){return e>>>=0,e===0?32:31-(c6(e)/u6|0)|0}var kh=64,_h=4194304;function Xu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ym(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=Xu(a):(o&=i,o!==0&&(r=Xu(o)))}else i=n&~s,i!==0?r=Xu(i):o!==0&&(r=Xu(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Cs(t),s=1<<n,r|=e[n],t&=~s;return r}function f6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h6(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Cs(o),a=1<<i,l=s[i];l===-1?(!(a&n)||a&r)&&(s[i]=f6(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function _w(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function BR(){var e=kh;return kh<<=1,!(kh&4194240)&&(kh=64),e}function s0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Yf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Cs(t),e[t]=n}function p6(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Cs(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function iS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Cs(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Xe=0;function zR(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var UR,aS,HR,VR,WR,Nw=!1,Nh=[],_i=null,Ni=null,Pi=null,Wd=new Map,qd=new Map,hi=[],m6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function i_(e,t){switch(e){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Wd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qd.delete(t.pointerId)}}function ku(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Qf(t),t!==null&&aS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function g6(e,t,n,r,s){switch(t){case"focusin":return _i=ku(_i,e,t,n,r,s),!0;case"dragenter":return Ni=ku(Ni,e,t,n,r,s),!0;case"mouseover":return Pi=ku(Pi,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Wd.set(o,ku(Wd.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,qd.set(o,ku(qd.get(o)||null,e,t,n,r,s)),!0}return!1}function qR(e){var t=_a(e.target);if(t!==null){var n=dl(t);if(n!==null){if(t=n.tag,t===13){if(t=MR(n),t!==null){e.blockedOn=t,WR(e.priority,function(){HR(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Pw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Sw=r,n.target.dispatchEvent(r),Sw=null}else return t=Qf(n),t!==null&&aS(t),e.blockedOn=n,!1;t.shift()}return!0}function a_(e,t,n){Rp(e)&&n.delete(t)}function y6(){Nw=!1,_i!==null&&Rp(_i)&&(_i=null),Ni!==null&&Rp(Ni)&&(Ni=null),Pi!==null&&Rp(Pi)&&(Pi=null),Wd.forEach(a_),qd.forEach(a_)}function _u(e,t){e.blockedOn===t&&(e.blockedOn=null,Nw||(Nw=!0,_r.unstable_scheduleCallback(_r.unstable_NormalPriority,y6)))}function Gd(e){function t(s){return _u(s,e)}if(0<Nh.length){_u(Nh[0],e);for(var n=1;n<Nh.length;n++){var r=Nh[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_i!==null&&_u(_i,e),Ni!==null&&_u(Ni,e),Pi!==null&&_u(Pi,e),Wd.forEach(t),qd.forEach(t),n=0;n<hi.length;n++)r=hi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<hi.length&&(n=hi[0],n.blockedOn===null);)qR(n),n.blockedOn===null&&hi.shift()}var oc=Uo.ReactCurrentBatchConfig,vm=!0;function v6(e,t,n,r){var s=Xe,o=oc.transition;oc.transition=null;try{Xe=1,lS(e,t,n,r)}finally{Xe=s,oc.transition=o}}function x6(e,t,n,r){var s=Xe,o=oc.transition;oc.transition=null;try{Xe=4,lS(e,t,n,r)}finally{Xe=s,oc.transition=o}}function lS(e,t,n,r){if(vm){var s=Pw(e,t,n,r);if(s===null)p0(e,t,r,xm,n),i_(e,r);else if(g6(s,e,t,n,r))r.stopPropagation();else if(i_(e,r),t&4&&-1<m6.indexOf(e)){for(;s!==null;){var o=Qf(s);if(o!==null&&UR(o),o=Pw(e,t,n,r),o===null&&p0(e,t,r,xm,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else p0(e,t,r,null,n)}}var xm=null;function Pw(e,t,n,r){if(xm=null,e=sS(r),e=_a(e),e!==null)if(t=dl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=MR(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xm=e,null}function GR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i6()){case oS:return 1;case LR:return 4;case gm:case a6:return 16;case FR:return 536870912;default:return 16}default:return 16}}var xi=null,cS=null,jp=null;function KR(){if(jp)return jp;var e,t=cS,n=t.length,r,s="value"in xi?xi.value:xi.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return jp=s.slice(e,1<r?1-r:void 0)}function Op(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ph(){return!0}function l_(){return!1}function Ar(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ph:l_,this.isPropagationStopped=l_,this}return gt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ph)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ph)},persist:function(){},isPersistent:Ph}),t}var tu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uS=Ar(tu),Xf=gt({},tu,{view:0,detail:0}),w6=Ar(Xf),o0,i0,Nu,uy=gt({},Xf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nu&&(Nu&&e.type==="mousemove"?(o0=e.screenX-Nu.screenX,i0=e.screenY-Nu.screenY):i0=o0=0,Nu=e),o0)},movementY:function(e){return"movementY"in e?e.movementY:i0}}),c_=Ar(uy),b6=gt({},uy,{dataTransfer:0}),S6=Ar(b6),C6=gt({},Xf,{relatedTarget:0}),a0=Ar(C6),E6=gt({},tu,{animationName:0,elapsedTime:0,pseudoElement:0}),k6=Ar(E6),_6=gt({},tu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),N6=Ar(_6),P6=gt({},tu,{data:0}),u_=Ar(P6),A6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=R6[e])?!!t[e]:!1}function dS(){return j6}var O6=gt({},Xf,{key:function(e){if(e.key){var t=A6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Op(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?T6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dS,charCode:function(e){return e.type==="keypress"?Op(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Op(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),M6=Ar(O6),I6=gt({},uy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d_=Ar(I6),D6=gt({},Xf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dS}),$6=Ar(D6),L6=gt({},tu,{propertyName:0,elapsedTime:0,pseudoElement:0}),F6=Ar(L6),B6=gt({},uy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),z6=Ar(B6),U6=[9,13,27,32],fS=jo&&"CompositionEvent"in window,gd=null;jo&&"documentMode"in document&&(gd=document.documentMode);var H6=jo&&"TextEvent"in window&&!gd,JR=jo&&(!fS||gd&&8<gd&&11>=gd),f_=" ",h_=!1;function YR(e,t){switch(e){case"keyup":return U6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XR(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ul=!1;function V6(e,t){switch(e){case"compositionend":return XR(t);case"keypress":return t.which!==32?null:(h_=!0,f_);case"textInput":return e=t.data,e===f_&&h_?null:e;default:return null}}function W6(e,t){if(Ul)return e==="compositionend"||!fS&&YR(e,t)?(e=KR(),jp=cS=xi=null,Ul=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return JR&&t.locale!=="ko"?null:t.data;default:return null}}var q6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!q6[e.type]:t==="textarea"}function QR(e,t,n,r){AR(r),t=wm(t,"onChange"),0<t.length&&(n=new uS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var yd=null,Kd=null;function G6(e){cj(e,0)}function dy(e){var t=Wl(e);if(SR(t))return e}function K6(e,t){if(e==="change")return t}var ZR=!1;if(jo){var l0;if(jo){var c0="oninput"in document;if(!c0){var m_=document.createElement("div");m_.setAttribute("oninput","return;"),c0=typeof m_.oninput=="function"}l0=c0}else l0=!1;ZR=l0&&(!document.documentMode||9<document.documentMode)}function g_(){yd&&(yd.detachEvent("onpropertychange",ej),Kd=yd=null)}function ej(e){if(e.propertyName==="value"&&dy(Kd)){var t=[];QR(t,Kd,e,sS(e)),OR(G6,t)}}function J6(e,t,n){e==="focusin"?(g_(),yd=t,Kd=n,yd.attachEvent("onpropertychange",ej)):e==="focusout"&&g_()}function Y6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dy(Kd)}function X6(e,t){if(e==="click")return dy(t)}function Q6(e,t){if(e==="input"||e==="change")return dy(t)}function Z6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ns=typeof Object.is=="function"?Object.is:Z6;function Jd(e,t){if(Ns(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!uw.call(t,s)||!Ns(e[s],t[s]))return!1}return!0}function y_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function v_(e,t){var n=y_(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=y_(n)}}function tj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nj(){for(var e=window,t=hm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hm(e.document)}return t}function hS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eU(e){var t=nj(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&tj(n.ownerDocument.documentElement,n)){if(r!==null&&hS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=v_(n,o);var i=v_(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tU=jo&&"documentMode"in document&&11>=document.documentMode,Hl=null,Aw=null,vd=null,Tw=!1;function x_(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tw||Hl==null||Hl!==hm(r)||(r=Hl,"selectionStart"in r&&hS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vd&&Jd(vd,r)||(vd=r,r=wm(Aw,"onSelect"),0<r.length&&(t=new uS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Hl)))}function Ah(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vl={animationend:Ah("Animation","AnimationEnd"),animationiteration:Ah("Animation","AnimationIteration"),animationstart:Ah("Animation","AnimationStart"),transitionend:Ah("Transition","TransitionEnd")},u0={},rj={};jo&&(rj=document.createElement("div").style,"AnimationEvent"in window||(delete Vl.animationend.animation,delete Vl.animationiteration.animation,delete Vl.animationstart.animation),"TransitionEvent"in window||delete Vl.transitionend.transition);function fy(e){if(u0[e])return u0[e];if(!Vl[e])return e;var t=Vl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in rj)return u0[e]=t[n];return e}var sj=fy("animationend"),oj=fy("animationiteration"),ij=fy("animationstart"),aj=fy("transitionend"),lj=new Map,w_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ea(e,t){lj.set(e,t),ul(t,[e])}for(var d0=0;d0<w_.length;d0++){var f0=w_[d0],nU=f0.toLowerCase(),rU=f0[0].toUpperCase()+f0.slice(1);ea(nU,"on"+rU)}ea(sj,"onAnimationEnd");ea(oj,"onAnimationIteration");ea(ij,"onAnimationStart");ea("dblclick","onDoubleClick");ea("focusin","onFocus");ea("focusout","onBlur");ea(aj,"onTransitionEnd");Nc("onMouseEnter",["mouseout","mouseover"]);Nc("onMouseLeave",["mouseout","mouseover"]);Nc("onPointerEnter",["pointerout","pointerover"]);Nc("onPointerLeave",["pointerout","pointerover"]);ul("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ul("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ul("onBeforeInput",["compositionend","keypress","textInput","paste"]);ul("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ul("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ul("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qu));function b_(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,n6(r,t,void 0,e),e.currentTarget=null}function cj(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break e;b_(s,a,c),o=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break e;b_(s,a,c),o=l}}}if(mm)throw e=kw,mm=!1,kw=null,e}function it(e,t){var n=t[Iw];n===void 0&&(n=t[Iw]=new Set);var r=e+"__bubble";n.has(r)||(uj(t,e,2,!1),n.add(r))}function h0(e,t,n){var r=0;t&&(r|=4),uj(n,e,r,t)}var Th="_reactListening"+Math.random().toString(36).slice(2);function Yd(e){if(!e[Th]){e[Th]=!0,yR.forEach(function(n){n!=="selectionchange"&&(sU.has(n)||h0(n,!1,e),h0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Th]||(t[Th]=!0,h0("selectionchange",!1,t))}}function uj(e,t,n,r){switch(GR(t)){case 1:var s=v6;break;case 4:s=x6;break;default:s=lS}n=s.bind(null,t,n,e),s=void 0,!Ew||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function p0(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;i=i.return}for(;a!==null;){if(i=_a(a),i===null)return;if(l=i.tag,l===5||l===6){r=o=i;continue e}a=a.parentNode}}r=r.return}OR(function(){var c=o,u=sS(n),d=[];e:{var h=lj.get(e);if(h!==void 0){var p=uS,m=e;switch(e){case"keypress":if(Op(n)===0)break e;case"keydown":case"keyup":p=M6;break;case"focusin":m="focus",p=a0;break;case"focusout":m="blur",p=a0;break;case"beforeblur":case"afterblur":p=a0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=c_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=S6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=$6;break;case sj:case oj:case ij:p=k6;break;case aj:p=F6;break;case"scroll":p=w6;break;case"wheel":p=z6;break;case"copy":case"cut":case"paste":p=N6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=d_}var g=(t&4)!==0,v=!g&&e==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var w=c,b;w!==null;){b=w;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,x!==null&&(S=Vd(w,x),S!=null&&g.push(Xd(w,S,b)))),v)break;w=w.return}0<g.length&&(h=new p(h,m,null,n,u),d.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Sw&&(m=n.relatedTarget||n.fromElement)&&(_a(m)||m[Oo]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?_a(m):null,m!==null&&(v=dl(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=c_,S="onMouseLeave",x="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(g=d_,S="onPointerLeave",x="onPointerEnter",w="pointer"),v=p==null?h:Wl(p),b=m==null?h:Wl(m),h=new g(S,w+"leave",p,n,u),h.target=v,h.relatedTarget=b,S=null,_a(u)===c&&(g=new g(x,w+"enter",m,n,u),g.target=b,g.relatedTarget=v,S=g),v=S,p&&m)t:{for(g=p,x=m,w=0,b=g;b;b=vl(b))w++;for(b=0,S=x;S;S=vl(S))b++;for(;0<w-b;)g=vl(g),w--;for(;0<b-w;)x=vl(x),b--;for(;w--;){if(g===x||x!==null&&g===x.alternate)break t;g=vl(g),x=vl(x)}g=null}else g=null;p!==null&&S_(d,h,p,g,!1),m!==null&&v!==null&&S_(d,v,m,g,!0)}}e:{if(h=c?Wl(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var C=K6;else if(p_(h))if(ZR)C=Q6;else{C=Y6;var E=J6}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=X6);if(C&&(C=C(e,c))){QR(d,C,n,u);break e}E&&E(e,h,c),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&yw(h,"number",h.value)}switch(E=c?Wl(c):window,e){case"focusin":(p_(E)||E.contentEditable==="true")&&(Hl=E,Aw=c,vd=null);break;case"focusout":vd=Aw=Hl=null;break;case"mousedown":Tw=!0;break;case"contextmenu":case"mouseup":case"dragend":Tw=!1,x_(d,n,u);break;case"selectionchange":if(tU)break;case"keydown":case"keyup":x_(d,n,u)}var k;if(fS)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ul?YR(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(JR&&n.locale!=="ko"&&(Ul||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ul&&(k=KR()):(xi=u,cS="value"in xi?xi.value:xi.textContent,Ul=!0)),E=wm(c,N),0<E.length&&(N=new u_(N,e,null,n,u),d.push({event:N,listeners:E}),k?N.data=k:(k=XR(n),k!==null&&(N.data=k)))),(k=H6?V6(e,n):W6(e,n))&&(c=wm(c,"onBeforeInput"),0<c.length&&(u=new u_("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=k))}cj(d,t)})}function Xd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function wm(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Vd(e,n),o!=null&&r.unshift(Xd(e,o,s)),o=Vd(e,t),o!=null&&r.push(Xd(e,o,s))),e=e.return}return r}function vl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function S_(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Vd(n,o),l!=null&&i.unshift(Xd(n,l,a))):s||(l=Vd(n,o),l!=null&&i.push(Xd(n,l,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var oU=/\r\n?/g,iU=/\u0000|\uFFFD/g;function C_(e){return(typeof e=="string"?e:""+e).replace(oU,`
`).replace(iU,"")}function Rh(e,t,n){if(t=C_(t),C_(e)!==t&&n)throw Error(ne(425))}function bm(){}var Rw=null,jw=null;function Ow(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mw=typeof setTimeout=="function"?setTimeout:void 0,aU=typeof clearTimeout=="function"?clearTimeout:void 0,E_=typeof Promise=="function"?Promise:void 0,lU=typeof queueMicrotask=="function"?queueMicrotask:typeof E_<"u"?function(e){return E_.resolve(null).then(e).catch(cU)}:Mw;function cU(e){setTimeout(function(){throw e})}function m0(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Gd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Gd(t)}function Ai(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function k_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var nu=Math.random().toString(36).slice(2),Ks="__reactFiber$"+nu,Qd="__reactProps$"+nu,Oo="__reactContainer$"+nu,Iw="__reactEvents$"+nu,uU="__reactListeners$"+nu,dU="__reactHandles$"+nu;function _a(e){var t=e[Ks];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oo]||n[Ks]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=k_(e);e!==null;){if(n=e[Ks])return n;e=k_(e)}return t}e=n,n=e.parentNode}return null}function Qf(e){return e=e[Ks]||e[Oo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function hy(e){return e[Qd]||null}var Dw=[],ql=-1;function ta(e){return{current:e}}function lt(e){0>ql||(e.current=Dw[ql],Dw[ql]=null,ql--)}function rt(e,t){ql++,Dw[ql]=e.current,e.current=t}var Wi={},Rn=ta(Wi),or=ta(!1),Ka=Wi;function Pc(e,t){var n=e.type.contextTypes;if(!n)return Wi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ir(e){return e=e.childContextTypes,e!=null}function Sm(){lt(or),lt(Rn)}function __(e,t,n){if(Rn.current!==Wi)throw Error(ne(168));rt(Rn,t),rt(or,n)}function dj(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(ne(108,J5(e)||"Unknown",s));return gt({},n,r)}function Cm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wi,Ka=Rn.current,rt(Rn,e),rt(or,or.current),!0}function N_(e,t,n){var r=e.stateNode;if(!r)throw Error(ne(169));n?(e=dj(e,t,Ka),r.__reactInternalMemoizedMergedChildContext=e,lt(or),lt(Rn),rt(Rn,e)):lt(or),rt(or,n)}var Eo=null,py=!1,g0=!1;function fj(e){Eo===null?Eo=[e]:Eo.push(e)}function fU(e){py=!0,fj(e)}function na(){if(!g0&&Eo!==null){g0=!0;var e=0,t=Xe;try{var n=Eo;for(Xe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Eo=null,py=!1}catch(s){throw Eo!==null&&(Eo=Eo.slice(e+1)),$R(oS,na),s}finally{Xe=t,g0=!1}}return null}var Gl=[],Kl=0,Em=null,km=0,Hr=[],Vr=0,Ja=null,ko=1,_o="";function ya(e,t){Gl[Kl++]=km,Gl[Kl++]=Em,Em=e,km=t}function hj(e,t,n){Hr[Vr++]=ko,Hr[Vr++]=_o,Hr[Vr++]=Ja,Ja=e;var r=ko;e=_o;var s=32-Cs(r)-1;r&=~(1<<s),n+=1;var o=32-Cs(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,ko=1<<32-Cs(t)+s|n<<s|r,_o=o+e}else ko=1<<o|n<<s|r,_o=e}function pS(e){e.return!==null&&(ya(e,1),hj(e,1,0))}function mS(e){for(;e===Em;)Em=Gl[--Kl],Gl[Kl]=null,km=Gl[--Kl],Gl[Kl]=null;for(;e===Ja;)Ja=Hr[--Vr],Hr[Vr]=null,_o=Hr[--Vr],Hr[Vr]=null,ko=Hr[--Vr],Hr[Vr]=null}var Sr=null,xr=null,dt=!1,gs=null;function pj(e,t){var n=Gr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function P_(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Sr=e,xr=Ai(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Sr=e,xr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ja!==null?{id:ko,overflow:_o}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Sr=e,xr=null,!0):!1;default:return!1}}function $w(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Lw(e){if(dt){var t=xr;if(t){var n=t;if(!P_(e,t)){if($w(e))throw Error(ne(418));t=Ai(n.nextSibling);var r=Sr;t&&P_(e,t)?pj(r,n):(e.flags=e.flags&-4097|2,dt=!1,Sr=e)}}else{if($w(e))throw Error(ne(418));e.flags=e.flags&-4097|2,dt=!1,Sr=e}}}function A_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Sr=e}function jh(e){if(e!==Sr)return!1;if(!dt)return A_(e),dt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ow(e.type,e.memoizedProps)),t&&(t=xr)){if($w(e))throw mj(),Error(ne(418));for(;t;)pj(e,t),t=Ai(t.nextSibling)}if(A_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xr=Ai(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xr=null}}else xr=Sr?Ai(e.stateNode.nextSibling):null;return!0}function mj(){for(var e=xr;e;)e=Ai(e.nextSibling)}function Ac(){xr=Sr=null,dt=!1}function gS(e){gs===null?gs=[e]:gs.push(e)}var hU=Uo.ReactCurrentBatchConfig;function Pu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,e))}return e}function Oh(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function T_(e){var t=e._init;return t(e._payload)}function gj(e){function t(x,w){if(e){var b=x.deletions;b===null?(x.deletions=[w],x.flags|=16):b.push(w)}}function n(x,w){if(!e)return null;for(;w!==null;)t(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function s(x,w){return x=Oi(x,w),x.index=0,x.sibling=null,x}function o(x,w,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<w?(x.flags|=2,w):b):(x.flags|=2,w)):(x.flags|=1048576,w)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function a(x,w,b,S){return w===null||w.tag!==6?(w=C0(b,x.mode,S),w.return=x,w):(w=s(w,b),w.return=x,w)}function l(x,w,b,S){var C=b.type;return C===zl?u(x,w,b.props.children,S,b.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===si&&T_(C)===w.type)?(S=s(w,b.props),S.ref=Pu(x,w,b),S.return=x,S):(S=Bp(b.type,b.key,b.props,null,x.mode,S),S.ref=Pu(x,w,b),S.return=x,S)}function c(x,w,b,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=E0(b,x.mode,S),w.return=x,w):(w=s(w,b.children||[]),w.return=x,w)}function u(x,w,b,S,C){return w===null||w.tag!==7?(w=La(b,x.mode,S,C),w.return=x,w):(w=s(w,b),w.return=x,w)}function d(x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=C0(""+w,x.mode,b),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Sh:return b=Bp(w.type,w.key,w.props,null,x.mode,b),b.ref=Pu(x,null,w),b.return=x,b;case Bl:return w=E0(w,x.mode,b),w.return=x,w;case si:var S=w._init;return d(x,S(w._payload),b)}if(Yu(w)||Cu(w))return w=La(w,x.mode,b,null),w.return=x,w;Oh(x,w)}return null}function h(x,w,b,S){var C=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:a(x,w,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Sh:return b.key===C?l(x,w,b,S):null;case Bl:return b.key===C?c(x,w,b,S):null;case si:return C=b._init,h(x,w,C(b._payload),S)}if(Yu(b)||Cu(b))return C!==null?null:u(x,w,b,S,null);Oh(x,b)}return null}function p(x,w,b,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(b)||null,a(w,x,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Sh:return x=x.get(S.key===null?b:S.key)||null,l(w,x,S,C);case Bl:return x=x.get(S.key===null?b:S.key)||null,c(w,x,S,C);case si:var E=S._init;return p(x,w,b,E(S._payload),C)}if(Yu(S)||Cu(S))return x=x.get(b)||null,u(w,x,S,C,null);Oh(w,S)}return null}function m(x,w,b,S){for(var C=null,E=null,k=w,N=w=0,P=null;k!==null&&N<b.length;N++){k.index>N?(P=k,k=null):P=k.sibling;var T=h(x,k,b[N],S);if(T===null){k===null&&(k=P);break}e&&k&&T.alternate===null&&t(x,k),w=o(T,w,N),E===null?C=T:E.sibling=T,E=T,k=P}if(N===b.length)return n(x,k),dt&&ya(x,N),C;if(k===null){for(;N<b.length;N++)k=d(x,b[N],S),k!==null&&(w=o(k,w,N),E===null?C=k:E.sibling=k,E=k);return dt&&ya(x,N),C}for(k=r(x,k);N<b.length;N++)P=p(k,x,N,b[N],S),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?N:P.key),w=o(P,w,N),E===null?C=P:E.sibling=P,E=P);return e&&k.forEach(function(R){return t(x,R)}),dt&&ya(x,N),C}function g(x,w,b,S){var C=Cu(b);if(typeof C!="function")throw Error(ne(150));if(b=C.call(b),b==null)throw Error(ne(151));for(var E=C=null,k=w,N=w=0,P=null,T=b.next();k!==null&&!T.done;N++,T=b.next()){k.index>N?(P=k,k=null):P=k.sibling;var R=h(x,k,T.value,S);if(R===null){k===null&&(k=P);break}e&&k&&R.alternate===null&&t(x,k),w=o(R,w,N),E===null?C=R:E.sibling=R,E=R,k=P}if(T.done)return n(x,k),dt&&ya(x,N),C;if(k===null){for(;!T.done;N++,T=b.next())T=d(x,T.value,S),T!==null&&(w=o(T,w,N),E===null?C=T:E.sibling=T,E=T);return dt&&ya(x,N),C}for(k=r(x,k);!T.done;N++,T=b.next())T=p(k,x,N,T.value,S),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?N:T.key),w=o(T,w,N),E===null?C=T:E.sibling=T,E=T);return e&&k.forEach(function(L){return t(x,L)}),dt&&ya(x,N),C}function v(x,w,b,S){if(typeof b=="object"&&b!==null&&b.type===zl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Sh:e:{for(var C=b.key,E=w;E!==null;){if(E.key===C){if(C=b.type,C===zl){if(E.tag===7){n(x,E.sibling),w=s(E,b.props.children),w.return=x,x=w;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===si&&T_(C)===E.type){n(x,E.sibling),w=s(E,b.props),w.ref=Pu(x,E,b),w.return=x,x=w;break e}n(x,E);break}else t(x,E);E=E.sibling}b.type===zl?(w=La(b.props.children,x.mode,S,b.key),w.return=x,x=w):(S=Bp(b.type,b.key,b.props,null,x.mode,S),S.ref=Pu(x,w,b),S.return=x,x=S)}return i(x);case Bl:e:{for(E=b.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(x,w.sibling),w=s(w,b.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else t(x,w);w=w.sibling}w=E0(b,x.mode,S),w.return=x,x=w}return i(x);case si:return E=b._init,v(x,w,E(b._payload),S)}if(Yu(b))return m(x,w,b,S);if(Cu(b))return g(x,w,b,S);Oh(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(x,w.sibling),w=s(w,b),w.return=x,x=w):(n(x,w),w=C0(b,x.mode,S),w.return=x,x=w),i(x)):n(x,w)}return v}var Tc=gj(!0),yj=gj(!1),_m=ta(null),Nm=null,Jl=null,yS=null;function vS(){yS=Jl=Nm=null}function xS(e){var t=_m.current;lt(_m),e._currentValue=t}function Fw(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ic(e,t){Nm=e,yS=Jl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rr=!0),e.firstContext=null)}function rs(e){var t=e._currentValue;if(yS!==e)if(e={context:e,memoizedValue:t,next:null},Jl===null){if(Nm===null)throw Error(ne(308));Jl=e,Nm.dependencies={lanes:0,firstContext:e}}else Jl=Jl.next=e;return t}var Na=null;function wS(e){Na===null?Na=[e]:Na.push(e)}function vj(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,wS(t)):(n.next=s.next,s.next=n),t.interleaved=n,Mo(e,r)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var oi=!1;function bS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ao(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ti(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Mo(e,n)}return s=r.interleaved,s===null?(t.next=t,wS(r)):(t.next=s.next,s.next=t),r.interleaved=t,Mo(e,n)}function Mp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iS(e,n)}}function R_(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pm(e,t,n,r){var s=e.updateQueue;oi=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?o=c:i.next=c,i=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==i&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=s.baseState;i=0,u=c=l=null,a=o;do{var h=a.lane,p=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,g=a;switch(h=t,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(p,d,h):m,h==null)break e;d=gt({},d,h);break e;case 2:oi=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,i|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Xa|=i,e.lanes=i,e.memoizedState=d}}function j_(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ne(191,s));s.call(r)}}}var Zf={},eo=ta(Zf),Zd=ta(Zf),ef=ta(Zf);function Pa(e){if(e===Zf)throw Error(ne(174));return e}function SS(e,t){switch(rt(ef,t),rt(Zd,e),rt(eo,Zf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xw(t,e)}lt(eo),rt(eo,t)}function Rc(){lt(eo),lt(Zd),lt(ef)}function wj(e){Pa(ef.current);var t=Pa(eo.current),n=xw(t,e.type);t!==n&&(rt(Zd,e),rt(eo,n))}function CS(e){Zd.current===e&&(lt(eo),lt(Zd))}var pt=ta(0);function Am(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var y0=[];function ES(){for(var e=0;e<y0.length;e++)y0[e]._workInProgressVersionPrimary=null;y0.length=0}var Ip=Uo.ReactCurrentDispatcher,v0=Uo.ReactCurrentBatchConfig,Ya=0,mt=null,Lt=null,Jt=null,Tm=!1,xd=!1,tf=0,pU=0;function En(){throw Error(ne(321))}function kS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ns(e[n],t[n]))return!1;return!0}function _S(e,t,n,r,s,o){if(Ya=o,mt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ip.current=e===null||e.memoizedState===null?vU:xU,e=n(r,s),xd){o=0;do{if(xd=!1,tf=0,25<=o)throw Error(ne(301));o+=1,Jt=Lt=null,t.updateQueue=null,Ip.current=wU,e=n(r,s)}while(xd)}if(Ip.current=Rm,t=Lt!==null&&Lt.next!==null,Ya=0,Jt=Lt=mt=null,Tm=!1,t)throw Error(ne(300));return e}function NS(){var e=tf!==0;return tf=0,e}function Us(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?mt.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function ss(){if(Lt===null){var e=mt.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=Jt===null?mt.memoizedState:Jt.next;if(t!==null)Jt=t,Lt=e;else{if(e===null)throw Error(ne(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Jt===null?mt.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function nf(e,t){return typeof t=="function"?t(e):t}function x0(e){var t=ss(),n=t.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var r=Lt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=i=null,l=null,c=o;do{var u=c.lane;if((Ya&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,i=r):l=l.next=d,mt.lanes|=u,Xa|=u}c=c.next}while(c!==null&&c!==o);l===null?i=r:l.next=a,Ns(r,t.memoizedState)||(rr=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,mt.lanes|=o,Xa|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function w0(e){var t=ss(),n=t.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);Ns(o,t.memoizedState)||(rr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function bj(){}function Sj(e,t){var n=mt,r=ss(),s=t(),o=!Ns(r.memoizedState,s);if(o&&(r.memoizedState=s,rr=!0),r=r.queue,PS(kj.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Jt!==null&&Jt.memoizedState.tag&1){if(n.flags|=2048,rf(9,Ej.bind(null,n,r,s,t),void 0,null),Qt===null)throw Error(ne(349));Ya&30||Cj(n,t,s)}return s}function Cj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ej(e,t,n,r){t.value=n,t.getSnapshot=r,_j(t)&&Nj(e)}function kj(e,t,n){return n(function(){_j(t)&&Nj(e)})}function _j(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ns(e,n)}catch{return!0}}function Nj(e){var t=Mo(e,1);t!==null&&Es(t,e,1,-1)}function O_(e){var t=Us();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nf,lastRenderedState:e},t.queue=e,e=e.dispatch=yU.bind(null,mt,e),[t.memoizedState,e]}function rf(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Pj(){return ss().memoizedState}function Dp(e,t,n,r){var s=Us();mt.flags|=e,s.memoizedState=rf(1|t,n,void 0,r===void 0?null:r)}function my(e,t,n,r){var s=ss();r=r===void 0?null:r;var o=void 0;if(Lt!==null){var i=Lt.memoizedState;if(o=i.destroy,r!==null&&kS(r,i.deps)){s.memoizedState=rf(t,n,o,r);return}}mt.flags|=e,s.memoizedState=rf(1|t,n,o,r)}function M_(e,t){return Dp(8390656,8,e,t)}function PS(e,t){return my(2048,8,e,t)}function Aj(e,t){return my(4,2,e,t)}function Tj(e,t){return my(4,4,e,t)}function Rj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jj(e,t,n){return n=n!=null?n.concat([e]):null,my(4,4,Rj.bind(null,t,e),n)}function AS(){}function Oj(e,t){var n=ss();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&kS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Mj(e,t){var n=ss();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&kS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ij(e,t,n){return Ya&21?(Ns(n,t)||(n=BR(),mt.lanes|=n,Xa|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rr=!0),e.memoizedState=n)}function mU(e,t){var n=Xe;Xe=n!==0&&4>n?n:4,e(!0);var r=v0.transition;v0.transition={};try{e(!1),t()}finally{Xe=n,v0.transition=r}}function Dj(){return ss().memoizedState}function gU(e,t,n){var r=ji(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$j(e))Lj(t,n);else if(n=vj(e,t,n,r),n!==null){var s=Fn();Es(n,e,r,s),Fj(n,t,r)}}function yU(e,t,n){var r=ji(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($j(e))Lj(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,Ns(a,i)){var l=t.interleaved;l===null?(s.next=s,wS(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=vj(e,t,s,r),n!==null&&(s=Fn(),Es(n,e,r,s),Fj(n,t,r))}}function $j(e){var t=e.alternate;return e===mt||t!==null&&t===mt}function Lj(e,t){xd=Tm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Fj(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iS(e,n)}}var Rm={readContext:rs,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},vU={readContext:rs,useCallback:function(e,t){return Us().memoizedState=[e,t===void 0?null:t],e},useContext:rs,useEffect:M_,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Dp(4194308,4,Rj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Dp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Dp(4,2,e,t)},useMemo:function(e,t){var n=Us();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Us();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gU.bind(null,mt,e),[r.memoizedState,e]},useRef:function(e){var t=Us();return e={current:e},t.memoizedState=e},useState:O_,useDebugValue:AS,useDeferredValue:function(e){return Us().memoizedState=e},useTransition:function(){var e=O_(!1),t=e[0];return e=mU.bind(null,e[1]),Us().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mt,s=Us();if(dt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=t(),Qt===null)throw Error(ne(349));Ya&30||Cj(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,M_(kj.bind(null,r,o,e),[e]),r.flags|=2048,rf(9,Ej.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Us(),t=Qt.identifierPrefix;if(dt){var n=_o,r=ko;n=(r&~(1<<32-Cs(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=tf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=pU++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},xU={readContext:rs,useCallback:Oj,useContext:rs,useEffect:PS,useImperativeHandle:jj,useInsertionEffect:Aj,useLayoutEffect:Tj,useMemo:Mj,useReducer:x0,useRef:Pj,useState:function(){return x0(nf)},useDebugValue:AS,useDeferredValue:function(e){var t=ss();return Ij(t,Lt.memoizedState,e)},useTransition:function(){var e=x0(nf)[0],t=ss().memoizedState;return[e,t]},useMutableSource:bj,useSyncExternalStore:Sj,useId:Dj,unstable_isNewReconciler:!1},wU={readContext:rs,useCallback:Oj,useContext:rs,useEffect:PS,useImperativeHandle:jj,useInsertionEffect:Aj,useLayoutEffect:Tj,useMemo:Mj,useReducer:w0,useRef:Pj,useState:function(){return w0(nf)},useDebugValue:AS,useDeferredValue:function(e){var t=ss();return Lt===null?t.memoizedState=e:Ij(t,Lt.memoizedState,e)},useTransition:function(){var e=w0(nf)[0],t=ss().memoizedState;return[e,t]},useMutableSource:bj,useSyncExternalStore:Sj,useId:Dj,unstable_isNewReconciler:!1};function ds(e,t){if(e&&e.defaultProps){t=gt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Bw(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:gt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var gy={isMounted:function(e){return(e=e._reactInternals)?dl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Fn(),s=ji(e),o=Ao(r,s);o.payload=t,n!=null&&(o.callback=n),t=Ti(e,o,s),t!==null&&(Es(t,e,s,r),Mp(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Fn(),s=ji(e),o=Ao(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ti(e,o,s),t!==null&&(Es(t,e,s,r),Mp(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Fn(),r=ji(e),s=Ao(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ti(e,s,r),t!==null&&(Es(t,e,r,n),Mp(t,e,r))}};function I_(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Jd(n,r)||!Jd(s,o):!0}function Bj(e,t,n){var r=!1,s=Wi,o=t.contextType;return typeof o=="object"&&o!==null?o=rs(o):(s=ir(t)?Ka:Rn.current,r=t.contextTypes,o=(r=r!=null)?Pc(e,s):Wi),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gy,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function D_(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gy.enqueueReplaceState(t,t.state,null)}function zw(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},bS(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=rs(o):(o=ir(t)?Ka:Rn.current,s.context=Pc(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Bw(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&gy.enqueueReplaceState(s,s.state,null),Pm(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function jc(e,t){try{var n="",r=t;do n+=K5(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function b0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Uw(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bU=typeof WeakMap=="function"?WeakMap:Map;function zj(e,t,n){n=Ao(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Om||(Om=!0,Qw=r),Uw(e,t)},n}function Uj(e,t,n){n=Ao(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Uw(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Uw(e,t),typeof r!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function $_(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bU;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=IU.bind(null,e,t,n),t.then(e,e))}function L_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function F_(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ao(-1,1),t.tag=2,Ti(n,t,1))),n.lanes|=1),e)}var SU=Uo.ReactCurrentOwner,rr=!1;function Ln(e,t,n,r){t.child=e===null?yj(t,null,n,r):Tc(t,e.child,n,r)}function B_(e,t,n,r,s){n=n.render;var o=t.ref;return ic(t,s),r=_S(e,t,n,r,o,s),n=NS(),e!==null&&!rr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Io(e,t,s)):(dt&&n&&pS(t),t.flags|=1,Ln(e,t,r,s),t.child)}function z_(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!$S(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Hj(e,t,o,r,s)):(e=Bp(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Jd,n(i,r)&&e.ref===t.ref)return Io(e,t,s)}return t.flags|=1,e=Oi(o,r),e.ref=t.ref,e.return=t,t.child=e}function Hj(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Jd(o,r)&&e.ref===t.ref)if(rr=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(rr=!0);else return t.lanes=e.lanes,Io(e,t,s)}return Hw(e,t,n,r,s)}function Vj(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Xl,gr),gr|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rt(Xl,gr),gr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,rt(Xl,gr),gr|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,rt(Xl,gr),gr|=r;return Ln(e,t,s,n),t.child}function Wj(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hw(e,t,n,r,s){var o=ir(n)?Ka:Rn.current;return o=Pc(t,o),ic(t,s),n=_S(e,t,n,r,o,s),r=NS(),e!==null&&!rr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Io(e,t,s)):(dt&&r&&pS(t),t.flags|=1,Ln(e,t,n,s),t.child)}function U_(e,t,n,r,s){if(ir(n)){var o=!0;Cm(t)}else o=!1;if(ic(t,s),t.stateNode===null)$p(e,t),Bj(t,n,r),zw(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=rs(c):(c=ir(n)?Ka:Rn.current,c=Pc(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&D_(t,i,r,c),oi=!1;var h=t.memoizedState;i.state=h,Pm(t,r,i,s),l=t.memoizedState,a!==r||h!==l||or.current||oi?(typeof u=="function"&&(Bw(t,n,u,r),l=t.memoizedState),(a=oi||I_(t,n,a,r,h,l,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,xj(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ds(t.type,a),i.props=c,d=t.pendingProps,h=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=rs(l):(l=ir(n)?Ka:Rn.current,l=Pc(t,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||h!==l)&&D_(t,i,r,l),oi=!1,h=t.memoizedState,i.state=h,Pm(t,r,i,s);var m=t.memoizedState;a!==d||h!==m||or.current||oi?(typeof p=="function"&&(Bw(t,n,p,r),m=t.memoizedState),(c=oi||I_(t,n,c,r,h,m,l)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,m,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,m,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Vw(e,t,n,r,o,s)}function Vw(e,t,n,r,s,o){Wj(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&N_(t,n,!1),Io(e,t,o);r=t.stateNode,SU.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Tc(t,e.child,null,o),t.child=Tc(t,null,a,o)):Ln(e,t,a,o),t.memoizedState=r.state,s&&N_(t,n,!0),t.child}function qj(e){var t=e.stateNode;t.pendingContext?__(e,t.pendingContext,t.pendingContext!==t.context):t.context&&__(e,t.context,!1),SS(e,t.containerInfo)}function H_(e,t,n,r,s){return Ac(),gS(s),t.flags|=256,Ln(e,t,n,r),t.child}var Ww={dehydrated:null,treeContext:null,retryLane:0};function qw(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gj(e,t,n){var r=t.pendingProps,s=pt.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),rt(pt,s&1),e===null)return Lw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=xy(i,r,0,null),e=La(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=qw(n),t.memoizedState=Ww,e):TS(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return CU(e,t,i,r,a,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Oi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=Oi(a,o):(o=La(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?qw(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=Ww,r}return o=e.child,e=o.sibling,r=Oi(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function TS(e,t){return t=xy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mh(e,t,n,r){return r!==null&&gS(r),Tc(t,e.child,null,n),e=TS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function CU(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=b0(Error(ne(422))),Mh(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=xy({mode:"visible",children:r.children},s,0,null),o=La(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Tc(t,e.child,null,i),t.child.memoizedState=qw(i),t.memoizedState=Ww,o);if(!(t.mode&1))return Mh(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ne(419)),r=b0(o,r,void 0),Mh(e,t,i,r)}if(a=(i&e.childLanes)!==0,rr||a){if(r=Qt,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Mo(e,s),Es(r,e,s,-1))}return DS(),r=b0(Error(ne(421))),Mh(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=DU.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,xr=Ai(s.nextSibling),Sr=t,dt=!0,gs=null,e!==null&&(Hr[Vr++]=ko,Hr[Vr++]=_o,Hr[Vr++]=Ja,ko=e.id,_o=e.overflow,Ja=t),t=TS(t,r.children),t.flags|=4096,t)}function V_(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Fw(e.return,t,n)}function S0(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Kj(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(Ln(e,t,r.children,n),r=pt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&V_(e,n,t);else if(e.tag===19)V_(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(rt(pt,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Am(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),S0(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Am(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}S0(t,!0,n,null,o);break;case"together":S0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $p(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Io(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Xa|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,n=Oi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Oi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function EU(e,t,n){switch(t.tag){case 3:qj(t),Ac();break;case 5:wj(t);break;case 1:ir(t.type)&&Cm(t);break;case 4:SS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;rt(_m,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(rt(pt,pt.current&1),t.flags|=128,null):n&t.child.childLanes?Gj(e,t,n):(rt(pt,pt.current&1),e=Io(e,t,n),e!==null?e.sibling:null);rt(pt,pt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Kj(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rt(pt,pt.current),r)break;return null;case 22:case 23:return t.lanes=0,Vj(e,t,n)}return Io(e,t,n)}var Jj,Gw,Yj,Xj;Jj=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gw=function(){};Yj=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Pa(eo.current);var o=null;switch(n){case"input":s=mw(e,s),r=mw(e,r),o=[];break;case"select":s=gt({},s,{value:void 0}),r=gt({},r,{value:void 0}),o=[];break;case"textarea":s=vw(e,s),r=vw(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=bm)}ww(n,r);var i;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ud.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ud.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&it("scroll",e),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};Xj=function(e,t,n,r){n!==r&&(t.flags|=4)};function Au(e,t){if(!dt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function kn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function kU(e,t,n){var r=t.pendingProps;switch(mS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(t),null;case 1:return ir(t.type)&&Sm(),kn(t),null;case 3:return r=t.stateNode,Rc(),lt(or),lt(Rn),ES(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(jh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gs!==null&&(tb(gs),gs=null))),Gw(e,t),kn(t),null;case 5:CS(t);var s=Pa(ef.current);if(n=t.type,e!==null&&t.stateNode!=null)Yj(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ne(166));return kn(t),null}if(e=Pa(eo.current),jh(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Ks]=t,r[Qd]=o,e=(t.mode&1)!==0,n){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(s=0;s<Qu.length;s++)it(Qu[s],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":Zk(r,o),it("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},it("invalid",r);break;case"textarea":t_(r,o),it("invalid",r)}ww(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Rh(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Rh(r.textContent,a,e),s=["children",""+a]):Ud.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&it("scroll",r)}switch(n){case"input":Ch(r),e_(r,o,!0);break;case"textarea":Ch(r),n_(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=bm)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kR(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Ks]=t,e[Qd]=r,Jj(e,t,!1,!1),t.stateNode=e;e:{switch(i=bw(n,r),n){case"dialog":it("cancel",e),it("close",e),s=r;break;case"iframe":case"object":case"embed":it("load",e),s=r;break;case"video":case"audio":for(s=0;s<Qu.length;s++)it(Qu[s],e);s=r;break;case"source":it("error",e),s=r;break;case"img":case"image":case"link":it("error",e),it("load",e),s=r;break;case"details":it("toggle",e),s=r;break;case"input":Zk(e,r),s=mw(e,r),it("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=gt({},r,{value:void 0}),it("invalid",e);break;case"textarea":t_(e,r),s=vw(e,r),it("invalid",e);break;default:s=r}ww(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?PR(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_R(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Hd(e,l):typeof l=="number"&&Hd(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ud.hasOwnProperty(o)?l!=null&&o==="onScroll"&&it("scroll",e):l!=null&&eS(e,o,l,i))}switch(n){case"input":Ch(e),e_(e,r,!1);break;case"textarea":Ch(e),n_(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Vi(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?nc(e,!!r.multiple,o,!1):r.defaultValue!=null&&nc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=bm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kn(t),null;case 6:if(e&&t.stateNode!=null)Xj(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ne(166));if(n=Pa(ef.current),Pa(eo.current),jh(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ks]=t,(o=r.nodeValue!==n)&&(e=Sr,e!==null))switch(e.tag){case 3:Rh(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Rh(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ks]=t,t.stateNode=r}return kn(t),null;case 13:if(lt(pt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(dt&&xr!==null&&t.mode&1&&!(t.flags&128))mj(),Ac(),t.flags|=98560,o=!1;else if(o=jh(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ne(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ne(317));o[Ks]=t}else Ac(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kn(t),o=!1}else gs!==null&&(tb(gs),gs=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||pt.current&1?zt===0&&(zt=3):DS())),t.updateQueue!==null&&(t.flags|=4),kn(t),null);case 4:return Rc(),Gw(e,t),e===null&&Yd(t.stateNode.containerInfo),kn(t),null;case 10:return xS(t.type._context),kn(t),null;case 17:return ir(t.type)&&Sm(),kn(t),null;case 19:if(lt(pt),o=t.memoizedState,o===null)return kn(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)Au(o,!1);else{if(zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Am(e),i!==null){for(t.flags|=128,Au(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return rt(pt,pt.current&1|2),t.child}e=e.sibling}o.tail!==null&&Pt()>Oc&&(t.flags|=128,r=!0,Au(o,!1),t.lanes=4194304)}else{if(!r)if(e=Am(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Au(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!dt)return kn(t),null}else 2*Pt()-o.renderingStartTime>Oc&&n!==1073741824&&(t.flags|=128,r=!0,Au(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Pt(),t.sibling=null,n=pt.current,rt(pt,r?n&1|2:n&1),t):(kn(t),null);case 22:case 23:return IS(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gr&1073741824&&(kn(t),t.subtreeFlags&6&&(t.flags|=8192)):kn(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function _U(e,t){switch(mS(t),t.tag){case 1:return ir(t.type)&&Sm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rc(),lt(or),lt(Rn),ES(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return CS(t),null;case 13:if(lt(pt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));Ac()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return lt(pt),null;case 4:return Rc(),null;case 10:return xS(t.type._context),null;case 22:case 23:return IS(),null;case 24:return null;default:return null}}var Ih=!1,Pn=!1,NU=typeof WeakSet=="function"?WeakSet:Set,de=null;function Yl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bt(e,t,r)}else n.current=null}function Kw(e,t,n){try{n()}catch(r){bt(e,t,r)}}var W_=!1;function PU(e,t){if(Rw=vm,e=nj(),hS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var p;d!==n||s!==0&&d.nodeType!==3||(a=i+s),d!==o||r!==0&&d.nodeType!==3||(l=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===s&&(a=i),h===o&&++u===r&&(l=i),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(jw={focusedElem:e,selectionRange:n},vm=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,v=m.memoizedState,x=t.stateNode,w=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:ds(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(S){bt(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return m=W_,W_=!1,m}function wd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Kw(t,n,o)}s=s.next}while(s!==r)}}function yy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Jw(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Qj(e){var t=e.alternate;t!==null&&(e.alternate=null,Qj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ks],delete t[Qd],delete t[Iw],delete t[uU],delete t[dU])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zj(e){return e.tag===5||e.tag===3||e.tag===4}function q_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=bm));else if(r!==4&&(e=e.child,e!==null))for(Yw(e,t,n),e=e.sibling;e!==null;)Yw(e,t,n),e=e.sibling}function Xw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Xw(e,t,n),e=e.sibling;e!==null;)Xw(e,t,n),e=e.sibling}var cn=null,hs=!1;function Ko(e,t,n){for(n=n.child;n!==null;)eO(e,t,n),n=n.sibling}function eO(e,t,n){if(Zs&&typeof Zs.onCommitFiberUnmount=="function")try{Zs.onCommitFiberUnmount(cy,n)}catch{}switch(n.tag){case 5:Pn||Yl(n,t);case 6:var r=cn,s=hs;cn=null,Ko(e,t,n),cn=r,hs=s,cn!==null&&(hs?(e=cn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):cn.removeChild(n.stateNode));break;case 18:cn!==null&&(hs?(e=cn,n=n.stateNode,e.nodeType===8?m0(e.parentNode,n):e.nodeType===1&&m0(e,n),Gd(e)):m0(cn,n.stateNode));break;case 4:r=cn,s=hs,cn=n.stateNode.containerInfo,hs=!0,Ko(e,t,n),cn=r,hs=s;break;case 0:case 11:case 14:case 15:if(!Pn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Kw(n,t,i),s=s.next}while(s!==r)}Ko(e,t,n);break;case 1:if(!Pn&&(Yl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){bt(n,t,a)}Ko(e,t,n);break;case 21:Ko(e,t,n);break;case 22:n.mode&1?(Pn=(r=Pn)||n.memoizedState!==null,Ko(e,t,n),Pn=r):Ko(e,t,n);break;default:Ko(e,t,n)}}function G_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new NU),t.forEach(function(r){var s=$U.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cs(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:cn=a.stateNode,hs=!1;break e;case 3:cn=a.stateNode.containerInfo,hs=!0;break e;case 4:cn=a.stateNode.containerInfo,hs=!0;break e}a=a.return}if(cn===null)throw Error(ne(160));eO(o,i,s),cn=null,hs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){bt(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tO(t,e),t=t.sibling}function tO(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(cs(t,e),Fs(e),r&4){try{wd(3,e,e.return),yy(3,e)}catch(g){bt(e,e.return,g)}try{wd(5,e,e.return)}catch(g){bt(e,e.return,g)}}break;case 1:cs(t,e),Fs(e),r&512&&n!==null&&Yl(n,n.return);break;case 5:if(cs(t,e),Fs(e),r&512&&n!==null&&Yl(n,n.return),e.flags&32){var s=e.stateNode;try{Hd(s,"")}catch(g){bt(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&CR(s,o),bw(a,i);var c=bw(a,o);for(i=0;i<l.length;i+=2){var u=l[i],d=l[i+1];u==="style"?PR(s,d):u==="dangerouslySetInnerHTML"?_R(s,d):u==="children"?Hd(s,d):eS(s,u,d,c)}switch(a){case"input":gw(s,o);break;case"textarea":ER(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?nc(s,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?nc(s,!!o.multiple,o.defaultValue,!0):nc(s,!!o.multiple,o.multiple?[]:"",!1))}s[Qd]=o}catch(g){bt(e,e.return,g)}}break;case 6:if(cs(t,e),Fs(e),r&4){if(e.stateNode===null)throw Error(ne(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(g){bt(e,e.return,g)}}break;case 3:if(cs(t,e),Fs(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gd(t.containerInfo)}catch(g){bt(e,e.return,g)}break;case 4:cs(t,e),Fs(e);break;case 13:cs(t,e),Fs(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(OS=Pt())),r&4&&G_(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Pn=(c=Pn)||u,cs(t,e),Pn=c):cs(t,e),Fs(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(de=e,u=e.child;u!==null;){for(d=de=u;de!==null;){switch(h=de,p=h.child,h.tag){case 0:case 11:case 14:case 15:wd(4,h,h.return);break;case 1:Yl(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){bt(r,n,g)}}break;case 5:Yl(h,h.return);break;case 22:if(h.memoizedState!==null){J_(d);continue}}p!==null?(p.return=h,de=p):J_(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=NR("display",i))}catch(g){bt(e,e.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){bt(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:cs(t,e),Fs(e),r&4&&G_(e);break;case 21:break;default:cs(t,e),Fs(e)}}function Fs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Zj(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Hd(s,""),r.flags&=-33);var o=q_(e);Xw(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=q_(e);Yw(e,a,i);break;default:throw Error(ne(161))}}catch(l){bt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function AU(e,t,n){de=e,nO(e)}function nO(e,t,n){for(var r=(e.mode&1)!==0;de!==null;){var s=de,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||Ih;if(!i){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Pn;a=Ih;var c=Pn;if(Ih=i,(Pn=l)&&!c)for(de=s;de!==null;)i=de,l=i.child,i.tag===22&&i.memoizedState!==null?Y_(s):l!==null?(l.return=i,de=l):Y_(s);for(;o!==null;)de=o,nO(o),o=o.sibling;de=s,Ih=a,Pn=c}K_(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,de=o):K_(e)}}function K_(e){for(;de!==null;){var t=de;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pn||yy(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Pn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ds(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&j_(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}j_(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Gd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Pn||t.flags&512&&Jw(t)}catch(h){bt(t,t.return,h)}}if(t===e){de=null;break}if(n=t.sibling,n!==null){n.return=t.return,de=n;break}de=t.return}}function J_(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var n=t.sibling;if(n!==null){n.return=t.return,de=n;break}de=t.return}}function Y_(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yy(4,t)}catch(l){bt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){bt(t,s,l)}}var o=t.return;try{Jw(t)}catch(l){bt(t,o,l)}break;case 5:var i=t.return;try{Jw(t)}catch(l){bt(t,i,l)}}}catch(l){bt(t,t.return,l)}if(t===e){de=null;break}var a=t.sibling;if(a!==null){a.return=t.return,de=a;break}de=t.return}}var TU=Math.ceil,jm=Uo.ReactCurrentDispatcher,RS=Uo.ReactCurrentOwner,Qr=Uo.ReactCurrentBatchConfig,Ke=0,Qt=null,jt=null,gn=0,gr=0,Xl=ta(0),zt=0,sf=null,Xa=0,vy=0,jS=0,bd=null,Zn=null,OS=0,Oc=1/0,bo=null,Om=!1,Qw=null,Ri=null,Dh=!1,wi=null,Mm=0,Sd=0,Zw=null,Lp=-1,Fp=0;function Fn(){return Ke&6?Pt():Lp!==-1?Lp:Lp=Pt()}function ji(e){return e.mode&1?Ke&2&&gn!==0?gn&-gn:hU.transition!==null?(Fp===0&&(Fp=BR()),Fp):(e=Xe,e!==0||(e=window.event,e=e===void 0?16:GR(e.type)),e):1}function Es(e,t,n,r){if(50<Sd)throw Sd=0,Zw=null,Error(ne(185));Yf(e,n,r),(!(Ke&2)||e!==Qt)&&(e===Qt&&(!(Ke&2)&&(vy|=n),zt===4&&pi(e,gn)),ar(e,r),n===1&&Ke===0&&!(t.mode&1)&&(Oc=Pt()+500,py&&na()))}function ar(e,t){var n=e.callbackNode;h6(e,t);var r=ym(e,e===Qt?gn:0);if(r===0)n!==null&&o_(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&o_(n),t===1)e.tag===0?fU(X_.bind(null,e)):fj(X_.bind(null,e)),lU(function(){!(Ke&6)&&na()}),n=null;else{switch(zR(r)){case 1:n=oS;break;case 4:n=LR;break;case 16:n=gm;break;case 536870912:n=FR;break;default:n=gm}n=uO(n,rO.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rO(e,t){if(Lp=-1,Fp=0,Ke&6)throw Error(ne(327));var n=e.callbackNode;if(ac()&&e.callbackNode!==n)return null;var r=ym(e,e===Qt?gn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Im(e,r);else{t=r;var s=Ke;Ke|=2;var o=oO();(Qt!==e||gn!==t)&&(bo=null,Oc=Pt()+500,$a(e,t));do try{OU();break}catch(a){sO(e,a)}while(!0);vS(),jm.current=o,Ke=s,jt!==null?t=0:(Qt=null,gn=0,t=zt)}if(t!==0){if(t===2&&(s=_w(e),s!==0&&(r=s,t=eb(e,s))),t===1)throw n=sf,$a(e,0),pi(e,r),ar(e,Pt()),n;if(t===6)pi(e,r);else{if(s=e.current.alternate,!(r&30)&&!RU(s)&&(t=Im(e,r),t===2&&(o=_w(e),o!==0&&(r=o,t=eb(e,o))),t===1))throw n=sf,$a(e,0),pi(e,r),ar(e,Pt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(ne(345));case 2:va(e,Zn,bo);break;case 3:if(pi(e,r),(r&130023424)===r&&(t=OS+500-Pt(),10<t)){if(ym(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Fn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Mw(va.bind(null,e,Zn,bo),t);break}va(e,Zn,bo);break;case 4:if(pi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-Cs(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=Pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TU(r/1960))-r,10<r){e.timeoutHandle=Mw(va.bind(null,e,Zn,bo),r);break}va(e,Zn,bo);break;case 5:va(e,Zn,bo);break;default:throw Error(ne(329))}}}return ar(e,Pt()),e.callbackNode===n?rO.bind(null,e):null}function eb(e,t){var n=bd;return e.current.memoizedState.isDehydrated&&($a(e,t).flags|=256),e=Im(e,t),e!==2&&(t=Zn,Zn=n,t!==null&&tb(t)),e}function tb(e){Zn===null?Zn=e:Zn.push.apply(Zn,e)}function RU(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Ns(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pi(e,t){for(t&=~jS,t&=~vy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Cs(t),r=1<<n;e[n]=-1,t&=~r}}function X_(e){if(Ke&6)throw Error(ne(327));ac();var t=ym(e,0);if(!(t&1))return ar(e,Pt()),null;var n=Im(e,t);if(e.tag!==0&&n===2){var r=_w(e);r!==0&&(t=r,n=eb(e,r))}if(n===1)throw n=sf,$a(e,0),pi(e,t),ar(e,Pt()),n;if(n===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,va(e,Zn,bo),ar(e,Pt()),null}function MS(e,t){var n=Ke;Ke|=1;try{return e(t)}finally{Ke=n,Ke===0&&(Oc=Pt()+500,py&&na())}}function Qa(e){wi!==null&&wi.tag===0&&!(Ke&6)&&ac();var t=Ke;Ke|=1;var n=Qr.transition,r=Xe;try{if(Qr.transition=null,Xe=1,e)return e()}finally{Xe=r,Qr.transition=n,Ke=t,!(Ke&6)&&na()}}function IS(){gr=Xl.current,lt(Xl)}function $a(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,aU(n)),jt!==null)for(n=jt.return;n!==null;){var r=n;switch(mS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sm();break;case 3:Rc(),lt(or),lt(Rn),ES();break;case 5:CS(r);break;case 4:Rc();break;case 13:lt(pt);break;case 19:lt(pt);break;case 10:xS(r.type._context);break;case 22:case 23:IS()}n=n.return}if(Qt=e,jt=e=Oi(e.current,null),gn=gr=t,zt=0,sf=null,jS=vy=Xa=0,Zn=bd=null,Na!==null){for(t=0;t<Na.length;t++)if(n=Na[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}Na=null}return e}function sO(e,t){do{var n=jt;try{if(vS(),Ip.current=Rm,Tm){for(var r=mt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Tm=!1}if(Ya=0,Jt=Lt=mt=null,xd=!1,tf=0,RS.current=null,n===null||n.return===null){zt=1,sf=t,jt=null;break}e:{var o=e,i=n.return,a=n,l=t;if(t=gn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=L_(i);if(p!==null){p.flags&=-257,F_(p,i,a,o,t),p.mode&1&&$_(o,c,t),t=p,l=c;var m=t.updateQueue;if(m===null){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}else{if(!(t&1)){$_(o,c,t),DS();break e}l=Error(ne(426))}}else if(dt&&a.mode&1){var v=L_(i);if(v!==null){!(v.flags&65536)&&(v.flags|=256),F_(v,i,a,o,t),gS(jc(l,a));break e}}o=l=jc(l,a),zt!==4&&(zt=2),bd===null?bd=[o]:bd.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=zj(o,l,t);R_(o,x);break e;case 1:a=l;var w=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ri===null||!Ri.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=Uj(o,a,t);R_(o,S);break e}}o=o.return}while(o!==null)}aO(n)}catch(C){t=C,jt===n&&n!==null&&(jt=n=n.return);continue}break}while(!0)}function oO(){var e=jm.current;return jm.current=Rm,e===null?Rm:e}function DS(){(zt===0||zt===3||zt===2)&&(zt=4),Qt===null||!(Xa&268435455)&&!(vy&268435455)||pi(Qt,gn)}function Im(e,t){var n=Ke;Ke|=2;var r=oO();(Qt!==e||gn!==t)&&(bo=null,$a(e,t));do try{jU();break}catch(s){sO(e,s)}while(!0);if(vS(),Ke=n,jm.current=r,jt!==null)throw Error(ne(261));return Qt=null,gn=0,zt}function jU(){for(;jt!==null;)iO(jt)}function OU(){for(;jt!==null&&!s6();)iO(jt)}function iO(e){var t=cO(e.alternate,e,gr);e.memoizedProps=e.pendingProps,t===null?aO(e):jt=t,RS.current=null}function aO(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_U(n,t),n!==null){n.flags&=32767,jt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{zt=6,jt=null;return}}else if(n=kU(n,t,gr),n!==null){jt=n;return}if(t=t.sibling,t!==null){jt=t;return}jt=t=e}while(t!==null);zt===0&&(zt=5)}function va(e,t,n){var r=Xe,s=Qr.transition;try{Qr.transition=null,Xe=1,MU(e,t,n,r)}finally{Qr.transition=s,Xe=r}return null}function MU(e,t,n,r){do ac();while(wi!==null);if(Ke&6)throw Error(ne(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(p6(e,o),e===Qt&&(jt=Qt=null,gn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dh||(Dh=!0,uO(gm,function(){return ac(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Qr.transition,Qr.transition=null;var i=Xe;Xe=1;var a=Ke;Ke|=4,RS.current=null,PU(e,n),tO(n,e),eU(jw),vm=!!Rw,jw=Rw=null,e.current=n,AU(n),o6(),Ke=a,Xe=i,Qr.transition=o}else e.current=n;if(Dh&&(Dh=!1,wi=e,Mm=s),o=e.pendingLanes,o===0&&(Ri=null),l6(n.stateNode),ar(e,Pt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Om)throw Om=!1,e=Qw,Qw=null,e;return Mm&1&&e.tag!==0&&ac(),o=e.pendingLanes,o&1?e===Zw?Sd++:(Sd=0,Zw=e):Sd=0,na(),null}function ac(){if(wi!==null){var e=zR(Mm),t=Qr.transition,n=Xe;try{if(Qr.transition=null,Xe=16>e?16:e,wi===null)var r=!1;else{if(e=wi,wi=null,Mm=0,Ke&6)throw Error(ne(331));var s=Ke;for(Ke|=4,de=e.current;de!==null;){var o=de,i=o.child;if(de.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(de=c;de!==null;){var u=de;switch(u.tag){case 0:case 11:case 15:wd(8,u,o)}var d=u.child;if(d!==null)d.return=u,de=d;else for(;de!==null;){u=de;var h=u.sibling,p=u.return;if(Qj(u),u===c){de=null;break}if(h!==null){h.return=p,de=h;break}de=p}}}var m=o.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}de=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,de=i;else e:for(;de!==null;){if(o=de,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wd(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,de=x;break e}de=o.return}}var w=e.current;for(de=w;de!==null;){i=de;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,de=b;else e:for(i=w;de!==null;){if(a=de,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yy(9,a)}}catch(C){bt(a,a.return,C)}if(a===i){de=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,de=S;break e}de=a.return}}if(Ke=s,na(),Zs&&typeof Zs.onPostCommitFiberRoot=="function")try{Zs.onPostCommitFiberRoot(cy,e)}catch{}r=!0}return r}finally{Xe=n,Qr.transition=t}}return!1}function Q_(e,t,n){t=jc(n,t),t=zj(e,t,1),e=Ti(e,t,1),t=Fn(),e!==null&&(Yf(e,1,t),ar(e,t))}function bt(e,t,n){if(e.tag===3)Q_(e,e,n);else for(;t!==null;){if(t.tag===3){Q_(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ri===null||!Ri.has(r))){e=jc(n,e),e=Uj(t,e,1),t=Ti(t,e,1),e=Fn(),t!==null&&(Yf(t,1,e),ar(t,e));break}}t=t.return}}function IU(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Fn(),e.pingedLanes|=e.suspendedLanes&n,Qt===e&&(gn&n)===n&&(zt===4||zt===3&&(gn&130023424)===gn&&500>Pt()-OS?$a(e,0):jS|=n),ar(e,t)}function lO(e,t){t===0&&(e.mode&1?(t=_h,_h<<=1,!(_h&130023424)&&(_h=4194304)):t=1);var n=Fn();e=Mo(e,t),e!==null&&(Yf(e,t,n),ar(e,n))}function DU(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lO(e,n)}function $U(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(t),lO(e,n)}var cO;cO=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||or.current)rr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return rr=!1,EU(e,t,n);rr=!!(e.flags&131072)}else rr=!1,dt&&t.flags&1048576&&hj(t,km,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$p(e,t),e=t.pendingProps;var s=Pc(t,Rn.current);ic(t,n),s=_S(null,t,r,e,s,n);var o=NS();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ir(r)?(o=!0,Cm(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bS(t),s.updater=gy,t.stateNode=s,s._reactInternals=t,zw(t,r,e,n),t=Vw(null,t,r,!0,o,n)):(t.tag=0,dt&&o&&pS(t),Ln(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch($p(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=FU(r),e=ds(r,e),s){case 0:t=Hw(null,t,r,e,n);break e;case 1:t=U_(null,t,r,e,n);break e;case 11:t=B_(null,t,r,e,n);break e;case 14:t=z_(null,t,r,ds(r.type,e),n);break e}throw Error(ne(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ds(r,s),Hw(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ds(r,s),U_(e,t,r,s,n);case 3:e:{if(qj(t),e===null)throw Error(ne(387));r=t.pendingProps,o=t.memoizedState,s=o.element,xj(e,t),Pm(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=jc(Error(ne(423)),t),t=H_(e,t,r,n,s);break e}else if(r!==s){s=jc(Error(ne(424)),t),t=H_(e,t,r,n,s);break e}else for(xr=Ai(t.stateNode.containerInfo.firstChild),Sr=t,dt=!0,gs=null,n=yj(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ac(),r===s){t=Io(e,t,n);break e}Ln(e,t,r,n)}t=t.child}return t;case 5:return wj(t),e===null&&Lw(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,Ow(r,s)?i=null:o!==null&&Ow(r,o)&&(t.flags|=32),Wj(e,t),Ln(e,t,i,n),t.child;case 6:return e===null&&Lw(t),null;case 13:return Gj(e,t,n);case 4:return SS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Tc(t,null,r,n):Ln(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ds(r,s),B_(e,t,r,s,n);case 7:return Ln(e,t,t.pendingProps,n),t.child;case 8:return Ln(e,t,t.pendingProps.children,n),t.child;case 12:return Ln(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,rt(_m,r._currentValue),r._currentValue=i,o!==null)if(Ns(o.value,i)){if(o.children===s.children&&!or.current){t=Io(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Ao(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Fw(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(ne(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Fw(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ln(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ic(t,n),s=rs(s),r=r(s),t.flags|=1,Ln(e,t,r,n),t.child;case 14:return r=t.type,s=ds(r,t.pendingProps),s=ds(r.type,s),z_(e,t,r,s,n);case 15:return Hj(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ds(r,s),$p(e,t),t.tag=1,ir(r)?(e=!0,Cm(t)):e=!1,ic(t,n),Bj(t,r,s),zw(t,r,s,n),Vw(null,t,r,!0,e,n);case 19:return Kj(e,t,n);case 22:return Vj(e,t,n)}throw Error(ne(156,t.tag))};function uO(e,t){return $R(e,t)}function LU(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(e,t,n,r){return new LU(e,t,n,r)}function $S(e){return e=e.prototype,!(!e||!e.isReactComponent)}function FU(e){if(typeof e=="function")return $S(e)?1:0;if(e!=null){if(e=e.$$typeof,e===nS)return 11;if(e===rS)return 14}return 2}function Oi(e,t){var n=e.alternate;return n===null?(n=Gr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bp(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")$S(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case zl:return La(n.children,s,o,t);case tS:i=8,s|=8;break;case dw:return e=Gr(12,n,t,s|2),e.elementType=dw,e.lanes=o,e;case fw:return e=Gr(13,n,t,s),e.elementType=fw,e.lanes=o,e;case hw:return e=Gr(19,n,t,s),e.elementType=hw,e.lanes=o,e;case wR:return xy(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vR:i=10;break e;case xR:i=9;break e;case nS:i=11;break e;case rS:i=14;break e;case si:i=16,r=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=Gr(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function La(e,t,n,r){return e=Gr(7,e,r,t),e.lanes=n,e}function xy(e,t,n,r){return e=Gr(22,e,r,t),e.elementType=wR,e.lanes=n,e.stateNode={isHidden:!1},e}function C0(e,t,n){return e=Gr(6,e,null,t),e.lanes=n,e}function E0(e,t,n){return t=Gr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function BU(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=s0(0),this.expirationTimes=s0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=s0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function LS(e,t,n,r,s,o,i,a,l){return e=new BU(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Gr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bS(o),e}function zU(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function dO(e){if(!e)return Wi;e=e._reactInternals;e:{if(dl(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var n=e.type;if(ir(n))return dj(e,n,t)}return t}function fO(e,t,n,r,s,o,i,a,l){return e=LS(n,r,!0,e,s,o,i,a,l),e.context=dO(null),n=e.current,r=Fn(),s=ji(n),o=Ao(r,s),o.callback=t??null,Ti(n,o,s),e.current.lanes=s,Yf(e,s,r),ar(e,r),e}function wy(e,t,n,r){var s=t.current,o=Fn(),i=ji(s);return n=dO(n),t.context===null?t.context=n:t.pendingContext=n,t=Ao(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ti(s,t,i),e!==null&&(Es(e,s,i,o),Mp(e,s,i)),i}function Dm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Z_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function FS(e,t){Z_(e,t),(e=e.alternate)&&Z_(e,t)}function UU(){return null}var hO=typeof reportError=="function"?reportError:function(e){console.error(e)};function BS(e){this._internalRoot=e}by.prototype.render=BS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));wy(e,t,null,null)};by.prototype.unmount=BS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qa(function(){wy(null,e,null,null)}),t[Oo]=null}};function by(e){this._internalRoot=e}by.prototype.unstable_scheduleHydration=function(e){if(e){var t=VR();e={blockedOn:null,target:e,priority:t};for(var n=0;n<hi.length&&t!==0&&t<hi[n].priority;n++);hi.splice(n,0,e),n===0&&qR(e)}};function zS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eN(){}function HU(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var c=Dm(i);o.call(c)}}var i=fO(t,r,e,0,null,!1,!1,"",eN);return e._reactRootContainer=i,e[Oo]=i.current,Yd(e.nodeType===8?e.parentNode:e),Qa(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Dm(l);a.call(c)}}var l=LS(e,0,!1,null,null,!1,!1,"",eN);return e._reactRootContainer=l,e[Oo]=l.current,Yd(e.nodeType===8?e.parentNode:e),Qa(function(){wy(t,l,n,r)}),l}function Cy(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var l=Dm(i);a.call(l)}}wy(t,i,e,s)}else i=HU(n,t,e,s,r);return Dm(i)}UR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Xu(t.pendingLanes);n!==0&&(iS(t,n|1),ar(t,Pt()),!(Ke&6)&&(Oc=Pt()+500,na()))}break;case 13:Qa(function(){var r=Mo(e,1);if(r!==null){var s=Fn();Es(r,e,1,s)}}),FS(e,1)}};aS=function(e){if(e.tag===13){var t=Mo(e,134217728);if(t!==null){var n=Fn();Es(t,e,134217728,n)}FS(e,134217728)}};HR=function(e){if(e.tag===13){var t=ji(e),n=Mo(e,t);if(n!==null){var r=Fn();Es(n,e,t,r)}FS(e,t)}};VR=function(){return Xe};WR=function(e,t){var n=Xe;try{return Xe=e,t()}finally{Xe=n}};Cw=function(e,t,n){switch(t){case"input":if(gw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=hy(r);if(!s)throw Error(ne(90));SR(r),gw(r,s)}}}break;case"textarea":ER(e,n);break;case"select":t=n.value,t!=null&&nc(e,!!n.multiple,t,!1)}};RR=MS;jR=Qa;var VU={usingClientEntryPoint:!1,Events:[Qf,Wl,hy,AR,TR,MS]},Tu={findFiberByHostInstance:_a,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WU={bundleType:Tu.bundleType,version:Tu.version,rendererPackageName:Tu.rendererPackageName,rendererConfig:Tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Uo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=IR(e),e===null?null:e.stateNode},findFiberByHostInstance:Tu.findFiberByHostInstance||UU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{cy=$h.inject(WU),Zs=$h}catch{}}Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VU;Pr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zS(t))throw Error(ne(200));return zU(e,t,null,n)};Pr.createRoot=function(e,t){if(!zS(e))throw Error(ne(299));var n=!1,r="",s=hO;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=LS(e,1,!1,null,null,n,!1,r,s),e[Oo]=t.current,Yd(e.nodeType===8?e.parentNode:e),new BS(t)};Pr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=IR(t),e=e===null?null:e.stateNode,e};Pr.flushSync=function(e){return Qa(e)};Pr.hydrate=function(e,t,n){if(!Sy(t))throw Error(ne(200));return Cy(null,e,t,!0,n)};Pr.hydrateRoot=function(e,t,n){if(!zS(e))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=hO;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=fO(t,null,e,1,n??null,s,!1,o,i),e[Oo]=t.current,Yd(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new by(t)};Pr.render=function(e,t,n){if(!Sy(t))throw Error(ne(200));return Cy(null,e,t,!1,n)};Pr.unmountComponentAtNode=function(e){if(!Sy(e))throw Error(ne(40));return e._reactRootContainer?(Qa(function(){Cy(null,null,e,!1,function(){e._reactRootContainer=null,e[Oo]=null})}),!0):!1};Pr.unstable_batchedUpdates=MS;Pr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sy(n))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return Cy(e,t,n,!1,r)};Pr.version="18.3.1-next-f1338f8080-20240426";function pO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pO)}catch(e){console.error(e)}}pO(),pR.exports=Pr;var Kr=pR.exports;const US=zo(Kr);var mO,tN=Kr;mO=tN.createRoot,tN.hydrateRoot;/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function of(){return of=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},of.apply(this,arguments)}var bi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(bi||(bi={}));const nN="popstate";function qU(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:i,hash:a}=r.location;return nb("",{pathname:o,search:i,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:$m(s)}return KU(t,n,null,e)}function Tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gO(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function GU(){return Math.random().toString(36).substr(2,8)}function rN(e,t){return{usr:e.state,key:e.key,idx:t}}function nb(e,t,n,r){return n===void 0&&(n=null),of({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ru(t):t,{state:n,key:t&&t.key||r||GU()})}function $m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ru(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function KU(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,a=bi.Pop,l=null,c=u();c==null&&(c=0,i.replaceState(of({},i.state,{idx:c}),""));function u(){return(i.state||{idx:null}).idx}function d(){a=bi.Pop;let v=u(),x=v==null?null:v-c;c=v,l&&l({action:a,location:g.location,delta:x})}function h(v,x){a=bi.Push;let w=nb(g.location,v,x);c=u()+1;let b=rN(w,c),S=g.createHref(w);try{i.pushState(b,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(S)}o&&l&&l({action:a,location:g.location,delta:1})}function p(v,x){a=bi.Replace;let w=nb(g.location,v,x);c=u();let b=rN(w,c),S=g.createHref(w);i.replaceState(b,"",S),o&&l&&l({action:a,location:g.location,delta:0})}function m(v){let x=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof v=="string"?v:$m(v);return w=w.replace(/ $/,"%20"),Tt(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let g={get action(){return a},get location(){return e(s,i)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(nN,d),l=v,()=>{s.removeEventListener(nN,d),l=null}},createHref(v){return t(s,v)},createURL:m,encodeLocation(v){let x=m(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:p,go(v){return i.go(v)}};return g}var sN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(sN||(sN={}));function JU(e,t,n){return n===void 0&&(n="/"),YU(e,t,n,!1)}function YU(e,t,n,r){let s=typeof t=="string"?ru(t):t,o=HS(s.pathname||"/",n);if(o==null)return null;let i=yO(e);XU(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=l8(o);a=i8(i[l],c,r)}return a}function yO(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,i,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};l.relativePath.startsWith("/")&&(Tt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Mi([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(Tt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),yO(o.children,t,u,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:s8(c,o.index),routesMeta:u})};return e.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let l of vO(o.path))s(o,i,l)}),t}function vO(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=vO(r.join("/")),a=[];return a.push(...i.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...i),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function XU(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:o8(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const QU=/^:[\w-]+$/,ZU=3,e8=2,t8=1,n8=10,r8=-2,oN=e=>e==="*";function s8(e,t){let n=e.split("/"),r=n.length;return n.some(oN)&&(r+=r8),t&&(r+=e8),n.filter(s=>!oN(s)).reduce((s,o)=>s+(QU.test(o)?ZU:o===""?t8:n8),r)}function o8(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function i8(e,t,n){let{routesMeta:r}=e,s={},o="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=o==="/"?t:t.slice(o.length)||"/",d=iN({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=iN({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:Mi([o,d.pathname]),pathnameBase:f8(Mi([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=Mi([o,d.pathnameBase]))}return i}function iN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=a8(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let g=a[d]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[d];return p&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:i,pattern:e}}function a8(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),gO(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function l8(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gO(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function HS(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function c8(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?ru(e):e;return{pathname:n?n.startsWith("/")?n:u8(n,t):t,search:h8(r),hash:p8(s)}}function u8(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function k0(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function d8(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function VS(e,t){let n=d8(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function WS(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=ru(e):(s=of({},e),Tt(!s.pathname||!s.pathname.includes("?"),k0("?","pathname","search",s)),Tt(!s.pathname||!s.pathname.includes("#"),k0("#","pathname","hash",s)),Tt(!s.search||!s.search.includes("#"),k0("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,a;if(i==null)a=n;else{let d=t.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?t[d]:"/"}let l=c8(s,a),c=i&&i!=="/"&&i.endsWith("/"),u=(o||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Mi=e=>e.join("/").replace(/\/\/+/g,"/"),f8=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),h8=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,p8=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function m8(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const xO=["post","put","patch","delete"];new Set(xO);const g8=["get",...xO];new Set(g8);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function af(){return af=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},af.apply(this,arguments)}const qS=y.createContext(null),y8=y.createContext(null),ra=y.createContext(null),Ey=y.createContext(null),Ho=y.createContext({outlet:null,matches:[],isDataRoute:!1}),wO=y.createContext(null);function v8(e,t){let{relative:n}=t===void 0?{}:t;su()||Tt(!1);let{basename:r,navigator:s}=y.useContext(ra),{hash:o,pathname:i,search:a}=SO(e,{relative:n}),l=i;return r!=="/"&&(l=i==="/"?r:Mi([r,i])),s.createHref({pathname:l,search:a,hash:o})}function su(){return y.useContext(Ey)!=null}function Vo(){return su()||Tt(!1),y.useContext(Ey).location}function bO(e){y.useContext(ra).static||y.useLayoutEffect(e)}function bn(){let{isDataRoute:e}=y.useContext(Ho);return e?R8():x8()}function x8(){su()||Tt(!1);let e=y.useContext(qS),{basename:t,future:n,navigator:r}=y.useContext(ra),{matches:s}=y.useContext(Ho),{pathname:o}=Vo(),i=JSON.stringify(VS(s,n.v7_relativeSplatPath)),a=y.useRef(!1);return bO(()=>{a.current=!0}),y.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=WS(c,JSON.parse(i),o,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Mi([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,i,o,e])}function ao(){let{matches:e}=y.useContext(Ho),t=e[e.length-1];return t?t.params:{}}function SO(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=y.useContext(ra),{matches:s}=y.useContext(Ho),{pathname:o}=Vo(),i=JSON.stringify(VS(s,r.v7_relativeSplatPath));return y.useMemo(()=>WS(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function w8(e,t){return b8(e,t)}function b8(e,t,n,r){su()||Tt(!1);let{navigator:s,static:o}=y.useContext(ra),{matches:i}=y.useContext(Ho),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Vo(),d;if(t){var h;let x=typeof t=="string"?ru(t):t;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||Tt(!1),d=x}else d=u;let p=d.pathname||"/",m=p;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=!o&&n&&n.matches&&n.matches.length>0?n.matches:JU(e,{pathname:m}),v=_8(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Mi([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Mi([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r);return t&&v?y.createElement(Ey.Provider,{value:{location:af({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:bi.Pop}},v):v}function S8(){let e=T8(),t=m8(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),n?y.createElement("pre",{style:s},n):null,null)}const C8=y.createElement(S8,null);class E8 extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?y.createElement(Ho.Provider,{value:this.props.routeContext},y.createElement(wO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function k8(e){let{routeContext:t,match:n,children:r}=e,s=y.useContext(qS);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(Ho.Provider,{value:t},r)}function _8(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Tt(!1),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=n,m=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,h)=>{let p,m=!1,g=null,v=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||C8,l&&(c<0&&h===0?(m=!0,v=null):c===h&&(m=!0,v=d.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,h+1)),w=()=>{let b;return p?b=g:m?b=v:d.route.Component?b=y.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,y.createElement(k8,{match:d,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?y.createElement(E8,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}var CO=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(CO||{}),Lm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Lm||{});function N8(e){let t=y.useContext(qS);return t||Tt(!1),t}function P8(e){let t=y.useContext(y8);return t||Tt(!1),t}function A8(e){let t=y.useContext(Ho);return t||Tt(!1),t}function EO(e){let t=A8(),n=t.matches[t.matches.length-1];return n.route.id||Tt(!1),n.route.id}function T8(){var e;let t=y.useContext(wO),n=P8(Lm.UseRouteError),r=EO(Lm.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function R8(){let{router:e}=N8(CO.UseNavigateStable),t=EO(Lm.UseNavigateStable),n=y.useRef(!1);return bO(()=>{n.current=!0}),y.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,af({fromRouteId:t},o)))},[e,t])}function j8(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function kO(e){let{to:t,replace:n,state:r,relative:s}=e;su()||Tt(!1);let{future:o,static:i}=y.useContext(ra),{matches:a}=y.useContext(Ho),{pathname:l}=Vo(),c=bn(),u=WS(t,VS(a,o.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(u);return y.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function Yn(e){Tt(!1)}function O8(e){let{basename:t="/",children:n=null,location:r,navigationType:s=bi.Pop,navigator:o,static:i=!1,future:a}=e;su()&&Tt(!1);let l=t.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:l,navigator:o,static:i,future:af({v7_relativeSplatPath:!1},a)}),[l,a,o,i]);typeof r=="string"&&(r=ru(r));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:m="default"}=r,g=y.useMemo(()=>{let v=HS(u,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:p,key:m},navigationType:s}},[l,u,d,h,p,m,s]);return g==null?null:y.createElement(ra.Provider,{value:c},y.createElement(Ey.Provider,{children:n,value:g}))}function M8(e){let{children:t,location:n}=e;return w8(rb(t),n)}new Promise(()=>{});function rb(e,t){t===void 0&&(t=[]);let n=[];return y.Children.forEach(e,(r,s)=>{if(!y.isValidElement(r))return;let o=[...t,s];if(r.type===y.Fragment){n.push.apply(n,rb(r.props.children,o));return}r.type!==Yn&&Tt(!1),!r.props.index||!r.props.children||Tt(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=rb(r.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sb(){return sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sb.apply(this,arguments)}function I8(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function D8(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function $8(e,t){return e.button===0&&(!t||t==="_self")&&!D8(e)}const L8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],F8="6";try{window.__reactRouterVersion=F8}catch{}const B8="startTransition",aN=fR[B8];function z8(e){let{basename:t,children:n,future:r,window:s}=e,o=y.useRef();o.current==null&&(o.current=qU({window:s,v5Compat:!0}));let i=o.current,[a,l]=y.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},u=y.useCallback(d=>{c&&aN?aN(()=>l(d)):l(d)},[l,c]);return y.useLayoutEffect(()=>i.listen(u),[i,u]),y.useEffect(()=>j8(r),[r]),y.createElement(O8,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:i,future:r})}const U8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",H8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lN=y.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:i,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=t,h=I8(t,L8),{basename:p}=y.useContext(ra),m,g=!1;if(typeof c=="string"&&H8.test(c)&&(m=c,U8))try{let b=new URL(window.location.href),S=c.startsWith("//")?new URL(b.protocol+c):new URL(c),C=HS(S.pathname,p);S.origin===b.origin&&C!=null?c=C+S.search+S.hash:g=!0}catch{}let v=v8(c,{relative:s}),x=V8(c,{replace:i,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function w(b){r&&r(b),b.defaultPrevented||x(b)}return y.createElement("a",sb({},h,{href:m||v,onClick:g||o?r:w,ref:n,target:l}))});var cN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(cN||(cN={}));var uN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(uN||(uN={}));function V8(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:i,viewTransition:a}=t===void 0?{}:t,l=bn(),c=Vo(),u=SO(e,{relative:i});return y.useCallback(d=>{if($8(d,n)){d.preventDefault();let h=r!==void 0?r:$m(c)===$m(u);l(e,{replace:h,state:s,preventScrollReset:o,relative:i,viewTransition:a})}},[c,l,u,r,s,n,e,o,i,a])}var W8=typeof Element<"u",q8=typeof Map=="function",G8=typeof Set=="function",K8=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function zp(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!zp(e[r],t[r]))return!1;return!0}var o;if(q8&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;for(o=e.entries();!(r=o.next()).done;)if(!zp(r.value[1],t.get(r.value[0])))return!1;return!0}if(G8&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(K8&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;if(W8&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&e.$$typeof)&&!zp(e[s[r]],t[s[r]]))return!1;return!0}return e!==e&&t!==t}var J8=function(t,n){try{return zp(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Y8=zo(J8);var X8=function(e,t,n,r,s,o,i,a){if(!e){var l;if(t===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,s,o,i,a],u=0;l=new Error(t.replace(/%s/g,function(){return c[u++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},Q8=X8;const dN=zo(Q8);var Z8=function(t,n,r,s){var o=r?r.call(s,t,n):void 0;if(o!==void 0)return!!o;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),c=0;c<i.length;c++){var u=i[c];if(!l(u))return!1;var d=t[u],h=n[u];if(o=r?r.call(s,d,h,u):void 0,o===!1||o===void 0&&d!==h)return!1}return!0};const eH=zo(Z8);var _O=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(_O||{}),_0={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},fN=Object.values(_O),GS={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},tH=Object.entries(GS).reduce((e,[t,n])=>(e[n]=t,e),{}),xs="data-rh",lc={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},cc=(e,t)=>{for(let n=e.length-1;n>=0;n-=1){const r=e[n];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},nH=e=>{let t=cc(e,"title");const n=cc(e,lc.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,()=>t);const r=cc(e,lc.DEFAULT_TITLE);return t||r||void 0},rH=e=>cc(e,lc.ON_CHANGE_CLIENT_STATE)||(()=>{}),N0=(e,t)=>t.filter(n=>typeof n[e]<"u").map(n=>n[e]).reduce((n,r)=>({...n,...r}),{}),sH=(e,t)=>t.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let o=0;o<s.length;o+=1){const a=s[o].toLowerCase();if(e.indexOf(a)!==-1&&r[a])return n.concat(r)}}return n},[]),oH=e=>console&&typeof console.warn=="function"&&console.warn(e),Ru=(e,t,n)=>{const r={};return n.filter(s=>Array.isArray(s[e])?!0:(typeof s[e]<"u"&&oH(`Helmet: ${e} should be of type "Array". Instead found type "${typeof s[e]}"`),!1)).map(s=>s[e]).reverse().reduce((s,o)=>{const i={};o.filter(l=>{let c;const u=Object.keys(l);for(let h=0;h<u.length;h+=1){const p=u[h],m=p.toLowerCase();t.indexOf(m)!==-1&&!(c==="rel"&&l[c].toLowerCase()==="canonical")&&!(m==="rel"&&l[m].toLowerCase()==="stylesheet")&&(c=m),t.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(c=p)}if(!c||!l[c])return!1;const d=l[c].toLowerCase();return r[c]||(r[c]={}),i[c]||(i[c]={}),r[c][d]?!1:(i[c][d]=!0,!0)}).reverse().forEach(l=>s.push(l));const a=Object.keys(i);for(let l=0;l<a.length;l+=1){const c=a[l],u={...r[c],...i[c]};r[c]=u}return s},[]).reverse()},iH=(e,t)=>{if(Array.isArray(e)&&e.length){for(let n=0;n<e.length;n+=1)if(e[n][t])return!0}return!1},aH=e=>({baseTag:sH(["href"],e),bodyAttributes:N0("bodyAttributes",e),defer:cc(e,lc.DEFER),encode:cc(e,lc.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:N0("htmlAttributes",e),linkTags:Ru("link",["rel","href"],e),metaTags:Ru("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:Ru("noscript",["innerHTML"],e),onChangeClientState:rH(e),scriptTags:Ru("script",["src","innerHTML"],e),styleTags:Ru("style",["cssText"],e),title:nH(e),titleAttributes:N0("titleAttributes",e),prioritizeSeoTags:iH(e,lc.PRIORITIZE_SEO_TAGS)}),NO=e=>Array.isArray(e)?e.join(""):e,lH=(e,t)=>{const n=Object.keys(e);for(let r=0;r<n.length;r+=1)if(t[n[r]]&&t[n[r]].includes(e[n[r]]))return!0;return!1},P0=(e,t)=>Array.isArray(e)?e.reduce((n,r)=>(lH(r,t)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:e,priority:[]},hN=(e,t)=>({...e,[t]:void 0}),cH=["noscript","script","style"],ob=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),PO=e=>Object.keys(e).reduce((t,n)=>{const r=typeof e[n]<"u"?`${n}="${e[n]}"`:`${n}`;return t?`${t} ${r}`:r},""),uH=(e,t,n,r)=>{const s=PO(n),o=NO(t);return s?`<${e} ${xs}="true" ${s}>${ob(o,r)}</${e}>`:`<${e} ${xs}="true">${ob(o,r)}</${e}>`},dH=(e,t,n=!0)=>t.reduce((r,s)=>{const o=s,i=Object.keys(o).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,u)=>{const d=typeof o[u]>"u"?u:`${u}="${ob(o[u],n)}"`;return c?`${c} ${d}`:d},""),a=o.innerHTML||o.cssText||"",l=cH.indexOf(e)===-1;return`${r}<${e} ${xs}="true" ${i}${l?"/>":`>${a}</${e}>`}`},""),AO=(e,t={})=>Object.keys(e).reduce((n,r)=>{const s=GS[r];return n[s||r]=e[r],n},t),fH=(e,t,n)=>{const r={key:t,[xs]:!0},s=AO(n,r);return[M.createElement("title",s,t)]},Up=(e,t)=>t.map((n,r)=>{const s={key:r,[xs]:!0};return Object.keys(n).forEach(o=>{const a=GS[o]||o;if(a==="innerHTML"||a==="cssText"){const l=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:l}}else s[a]=n[o]}),M.createElement(e,s)}),Br=(e,t,n=!0)=>{switch(e){case"title":return{toComponent:()=>fH(e,t.title,t.titleAttributes),toString:()=>uH(e,t.title,t.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>AO(t),toString:()=>PO(t)};default:return{toComponent:()=>Up(e,t),toString:()=>dH(e,t,n)}}},hH=({metaTags:e,linkTags:t,scriptTags:n,encode:r})=>{const s=P0(e,_0.meta),o=P0(t,_0.link),i=P0(n,_0.script);return{priorityMethods:{toComponent:()=>[...Up("meta",s.priority),...Up("link",o.priority),...Up("script",i.priority)],toString:()=>`${Br("meta",s.priority,r)} ${Br("link",o.priority,r)} ${Br("script",i.priority,r)}`},metaTags:s.default,linkTags:o.default,scriptTags:i.default}},pH=e=>{const{baseTag:t,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:o,styleTags:i,title:a="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:u,metaTags:d,scriptTags:h}=e,p={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:p,linkTags:u,metaTags:d,scriptTags:h}=hH(e)),{priority:p,base:Br("base",t,r),bodyAttributes:Br("bodyAttributes",n,r),htmlAttributes:Br("htmlAttributes",s,r),link:Br("link",u,r),meta:Br("meta",d,r),noscript:Br("noscript",o,r),script:Br("script",h,r),style:Br("style",i,r),title:Br("title",{title:a,titleAttributes:l},r)}},ib=pH,Lh=[],TO=!!(typeof window<"u"&&window.document&&window.document.createElement),ab=class{constructor(e,t){uo(this,"instances",[]);uo(this,"canUseDOM",TO);uo(this,"context");uo(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Lh:this.instances,add:e=>{(this.canUseDOM?Lh:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Lh:this.instances).indexOf(e);(this.canUseDOM?Lh:this.instances).splice(t,1)}}});this.context=e,this.canUseDOM=t||!1,t||(e.helmet=ib({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},mH={},RO=M.createContext(mH),Da,jO=(Da=class extends y.Component{constructor(n){super(n);uo(this,"helmetData");this.helmetData=new ab(this.props.context||{},Da.canUseDOM)}render(){return M.createElement(RO.Provider,{value:this.helmetData.value},this.props.children)}},uo(Da,"canUseDOM",TO),Da),xl=(e,t)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${e}[${xs}]`),s=[].slice.call(r),o=[];let i;return t&&t.length&&t.forEach(a=>{const l=document.createElement(e);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c))if(c==="innerHTML")l.innerHTML=a.innerHTML;else if(c==="cssText")l.styleSheet?l.styleSheet.cssText=a.cssText:l.appendChild(document.createTextNode(a.cssText));else{const u=c,d=typeof a[u]>"u"?"":a[u];l.setAttribute(c,d)}l.setAttribute(xs,"true"),s.some((c,u)=>(i=u,l.isEqualNode(c)))?s.splice(i,1):o.push(l)}),s.forEach(a=>{var l;return(l=a.parentNode)==null?void 0:l.removeChild(a)}),o.forEach(a=>n.appendChild(a)),{oldTags:s,newTags:o}},lb=(e,t)=>{const n=document.getElementsByTagName(e)[0];if(!n)return;const r=n.getAttribute(xs),s=r?r.split(","):[],o=[...s],i=Object.keys(t);for(const a of i){const l=t[a]||"";n.getAttribute(a)!==l&&n.setAttribute(a,l),s.indexOf(a)===-1&&s.push(a);const c=o.indexOf(a);c!==-1&&o.splice(c,1)}for(let a=o.length-1;a>=0;a-=1)n.removeAttribute(o[a]);s.length===o.length?n.removeAttribute(xs):n.getAttribute(xs)!==i.join(",")&&n.setAttribute(xs,i.join(","))},gH=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=NO(e)),lb("title",t)},pN=(e,t)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:o,metaTags:i,noscriptTags:a,onChangeClientState:l,scriptTags:c,styleTags:u,title:d,titleAttributes:h}=e;lb("body",r),lb("html",s),gH(d,h);const p={baseTag:xl("base",n),linkTags:xl("link",o),metaTags:xl("meta",i),noscriptTags:xl("noscript",a),scriptTags:xl("script",c),styleTags:xl("style",u)},m={},g={};Object.keys(p).forEach(v=>{const{newTags:x,oldTags:w}=p[v];x.length&&(m[v]=x),w.length&&(g[v]=p[v].oldTags)}),t&&t(),l(e,m,g)},ju=null,yH=e=>{ju&&cancelAnimationFrame(ju),e.defer?ju=requestAnimationFrame(()=>{pN(e,()=>{ju=null})}):(pN(e),ju=null)},vH=yH,mN=class extends y.Component{constructor(){super(...arguments);uo(this,"rendered",!1)}shouldComponentUpdate(t){return!eH(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:n}=this.props.context;let r=null;const s=aH(t.get().map(o=>{const i={...o.props};return delete i.context,i}));jO.canUseDOM?vH(s):ib&&(r=ib(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},cw,xH=(cw=class extends y.Component{shouldComponentUpdate(e){return!Y8(hN(this.props,"helmetData"),hN(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,n,r){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,n,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...n}};case"body":return{...t,bodyAttributes:{...n}};case"html":return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach(r=>{n={...n,[r]:e[r]}}),n}warnOnInvalidChildren(e,t){return dN(fN.some(n=>e.type===n),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${fN.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),dN(!t||typeof t=="string"||Array.isArray(t)&&!t.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let n={};return M.Children.forEach(e,r=>{if(!r||!r.props)return;const{children:s,...o}=r.props,i=Object.keys(o).reduce((l,c)=>(l[tH[c]||c]=o[c],l),{});let{type:a}=r;switch(typeof a=="symbol"?a=a.toString():this.warnOnInvalidChildren(r,s),a){case"Symbol(react.fragment)":t=this.mapChildrenToProps(s,t);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,i,s);break;default:t=this.mapObjectTypeChildren(r,t,i,s);break}}),this.mapArrayTypeChildrenToProps(n,t)}render(){const{children:e,...t}=this.props;let n={...t},{helmetData:r}=t;if(e&&(n=this.mapChildrenToProps(e,n)),r&&!(r instanceof ab)){const s=r;r=new ab(s.context,!0),delete n.helmetData}return r?M.createElement(mN,{...n,context:r.value}):M.createElement(RO.Consumer,null,s=>M.createElement(mN,{...n,context:s}))}},uo(cw,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),cw);const wH="modulepreload",bH=function(e){return"/"+e},gN={},Mc=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=bH(l),l in gN)return;gN[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":wH,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},SH=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Mc(async()=>{const{default:r}=await Promise.resolve().then(()=>ou);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class KS extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class CH extends KS{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class EH extends KS{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class kH extends KS{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var cb;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(cb||(cb={}));var _H=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class NH{constructor(t,{headers:n={},customFetch:r,region:s=cb.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=SH(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return _H(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=i):typeof i=="string"?(a["Content-Type"]="text/plain",c=i):typeof FormData<"u"&&i instanceof FormData?c=i:(a["Content-Type"]="application/json",c=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(m=>{throw new CH(m)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new EH(u);if(!u.ok)throw new kH(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield u.json():h==="application/octet-stream"?p=yield u.blob():h==="text/event-stream"?p=u:h==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var er={},JS={},ky={},eh={},_y={},Ny={},PH=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ic=PH();const AH=Ic.fetch,OO=Ic.fetch.bind(Ic),MO=Ic.Headers,TH=Ic.Request,RH=Ic.Response,ou=Object.freeze(Object.defineProperty({__proto__:null,Headers:MO,Request:TH,Response:RH,default:OO,fetch:AH},Symbol.toStringTag,{value:"Module"})),jH=w5(ou);var Py={};Object.defineProperty(Py,"__esModule",{value:!0});let OH=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Py.default=OH;var IO=An&&An.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ny,"__esModule",{value:!0});const MH=IO(jH),IH=IO(Py);let DH=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=MH.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,a,l;let c=null,u=null,d=null,h=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const x=await o.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=x:u=JSON.parse(x))}const g=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),v=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&v&&v.length>1&&(d=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await o.text();try{c=JSON.parse(g),Array.isArray(c)&&o.status===404&&(u=[],c=null,h=200,p="OK")}catch{o.status===404&&g===""?(h=204,p="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,p="OK"),c&&this.shouldThrowOnError)throw new IH.default(c)}return{error:c,data:u,count:d,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,a,l;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};Ny.default=DH;var $H=An&&An.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_y,"__esModule",{value:!0});const LH=$H(Ny);let FH=class extends LH.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};_y.default=FH;var BH=An&&An.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eh,"__esModule",{value:!0});const zH=BH(_y);let UH=class extends zH.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${i}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};eh.default=UH;var HH=An&&An.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ky,"__esModule",{value:!0});const Ou=HH(eh);let VH=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new Ou.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(i.length>0){const a=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ou.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:o=!0}={}){const i="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ou.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Ou.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ou.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ky.default=VH;var Ay={},Ty={};Object.defineProperty(Ty,"__esModule",{value:!0});Ty.version=void 0;Ty.version="0.0.0-automated";Object.defineProperty(Ay,"__esModule",{value:!0});Ay.DEFAULT_HEADERS=void 0;const WH=Ty;Ay.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${WH.version}`};var DO=An&&An.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(JS,"__esModule",{value:!0});const qH=DO(ky),GH=DO(eh),KH=Ay;let JH=class $O{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},KH.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new qH.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new $O(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:o}={}){let i;const a=new URL(`${this.url}/rpc/${t}`);let l;r||s?(i=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(i="POST",l=n);const c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new GH.default({method:i,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};JS.default=JH;var iu=An&&An.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(er,"__esModule",{value:!0});er.PostgrestError=er.PostgrestBuilder=er.PostgrestTransformBuilder=er.PostgrestFilterBuilder=er.PostgrestQueryBuilder=er.PostgrestClient=void 0;const LO=iu(JS);er.PostgrestClient=LO.default;const FO=iu(ky);er.PostgrestQueryBuilder=FO.default;const BO=iu(eh);er.PostgrestFilterBuilder=BO.default;const zO=iu(_y);er.PostgrestTransformBuilder=zO.default;const UO=iu(Ny);er.PostgrestBuilder=UO.default;const HO=iu(Py);er.PostgrestError=HO.default;var YH=er.default={PostgrestClient:LO.default,PostgrestQueryBuilder:FO.default,PostgrestFilterBuilder:BO.default,PostgrestTransformBuilder:zO.default,PostgrestBuilder:UO.default,PostgrestError:HO.default};const{PostgrestClient:XH,PostgrestQueryBuilder:Yve,PostgrestFilterBuilder:Xve,PostgrestTransformBuilder:Qve,PostgrestBuilder:Zve,PostgrestError:e0e}=YH,QH="2.11.2",ZH={"X-Client-Info":`realtime-js/${QH}`},eV="1.0.0",VO=1e4,tV=1e3;var uc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(uc||(uc={}));var pr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(pr||(pr={}));var ps;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ps||(ps={}));var ub;(function(e){e.websocket="websocket"})(ub||(ub={}));var Sa;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Sa||(Sa={}));class nV{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),o=n.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(t.slice(i,i+s));i=i+s;const l=r.decode(t.slice(i,i+o));i=i+o;const c=JSON.parse(r.decode(t.slice(i,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}let WO=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var nt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(nt||(nt={}));const yN=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((o,i)=>(o[i]=rV(i,e,t,s),o),{})},rV=(e,t,n,r)=>{const s=t.find(a=>a.name===e),o=s==null?void 0:s.type,i=n[e];return o&&!r.includes(o)?qO(o,i):db(i)},qO=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return aV(t,n)}switch(e){case nt.bool:return sV(t);case nt.float4:case nt.float8:case nt.int2:case nt.int4:case nt.int8:case nt.numeric:case nt.oid:return oV(t);case nt.json:case nt.jsonb:return iV(t);case nt.timestamp:return lV(t);case nt.abstime:case nt.date:case nt.daterange:case nt.int4range:case nt.int8range:case nt.money:case nt.reltime:case nt.text:case nt.time:case nt.timestamptz:case nt.timetz:case nt.tsrange:case nt.tstzrange:return db(t);default:return db(t)}},db=e=>e,sV=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},oV=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},iV=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},aV=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const i=e.slice(1,n);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>qO(t,a))}return e},lV=e=>typeof e=="string"?e.replace(" ","T"):e,GO=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class A0{constructor(t,n,r={},s=VO){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var vN;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(vN||(vN={}));class Cd{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Cd.syncState(this.state,s,o,i),this.pendingDiffs.forEach(l=>{this.state=Cd.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Cd.syncDiff(this.state,s,o,i),a())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const o=this.cloneDeep(t),i=this.transformState(n),a={},l={};return this.map(o,(c,u)=>{i[c]||(l[c]=u)}),this.map(i,(c,u)=>{const d=o[c];if(d){const h=u.map(v=>v.presence_ref),p=d.map(v=>v.presence_ref),m=u.filter(v=>p.indexOf(v.presence_ref)<0),g=d.filter(v=>h.indexOf(v.presence_ref)<0);m.length>0&&(a[c]=m),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(o,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:o,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const d=t[a].map(p=>p.presence_ref),h=u.filter(p=>d.indexOf(p.presence_ref)<0);t[a].unshift(...h)}r(a,u,l)}),this.map(i,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xN;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(xN||(xN={}));var wN;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(wN||(wN={}));var So;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(So||(So={}));class YS{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=pr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new A0(this,ps.join,this.params,this.timeout),this.rejoinTimer=new WO(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ps.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Cd(this),this.broadcastEndpointURL=GO(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:i,private:a}}=this.params;this._onError(u=>t==null?void 0:t(So.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(So.CLOSED));const l={},c={broadcast:o,presence:i,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){t==null||t(So.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,m=[];for(let g=0;g<p;g++){const v=h[g],{filter:{event:x,schema:w,table:b,filter:S}}=v,C=u&&u[g];if(C&&C.event===x&&C.schema===w&&C.table===b&&C.filter===S)m.push(Object.assign(Object.assign({},v),{id:C.id}));else{this.unsubscribe(),t==null||t(So.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(So.SUBSCRIBED);return}}).receive("error",u=>{t==null||t(So.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(So.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ps.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new A0(this,ps.leave,{},t);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(t,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),i}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new A0(this,t,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,o;const i=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ps;if(r&&[a,l,c,u].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,g,v;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(g=p.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===i}).map(p=>p.callback(h,r)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var m,g,v,x,w,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const S=p.id,C=(m=p.filter)===null||m===void 0?void 0:m.event;return S&&((g=n.ids)===null||g===void 0?void 0:g.includes(S))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const S=(w=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return S==="*"||S===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:g,table:v,commit_timestamp:x,type:w,errors:b}=m;h=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:x,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(m))}p.callback(h,r)})}_isClosed(){return this.state===pr.closed}_isJoined(){return this.state===pr.joined}_isJoining(){return this.state===pr.joining}_isLeaving(){return this.state===pr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&YS.isEqual(s.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ps.close,{},t)}_onError(t){this._on(ps.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=yN(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=yN(t.columns,t.old_record)),n}}const cV=()=>{},uV=typeof WebSocket<"u",dV=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fV{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=ZH,this.params={},this.timeout=VO,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=cV,this.conn=null,this.sendBuffer=[],this.serializer=new nV,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...a)=>Mc(async()=>{const{default:l}=await Promise.resolve().then(()=>ou);return{default:l}},void 0).then(({default:l})=>l(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${t}/${ub.websocket}`,this.httpEndpoint=GO(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,i)=>i(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new WO(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(uV){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new hV(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Mc(async()=>{const{default:t}=await import("./browser-CoO9QBpQ.js").then(n=>n.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:eV}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case uc.connecting:return Sa.Connecting;case uc.open:return Sa.Open;case uc.closing:return Sa.Closing;default:return Sa.Closed}}isConnected(){return this.connectionState()===Sa.Open}channel(t,n={config:{}}){const r=new YS(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:s,ref:o}=t,i=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(ps.access_token,{access_token:n})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(tV,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:s,payload:o,ref:i}=n;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${s} ${i&&"("+i+")"||""}`,o),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,o,i)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ps.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([dV],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class hV{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=uc.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class XS extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Kt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class pV extends XS{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class fb extends XS{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var mV=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const KO=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Mc(async()=>{const{default:r}=await Promise.resolve().then(()=>ou);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},gV=()=>mV(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Mc(()=>Promise.resolve().then(()=>ou),void 0)).Response:Response}),hb=e=>{if(Array.isArray(e))return e.map(n=>hb(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=hb(r)}),t};var fl=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const T0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),yV=(e,t,n)=>fl(void 0,void 0,void 0,function*(){const r=yield gV();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{t(new pV(T0(s),e.status||500))}).catch(s=>{t(new fb(T0(s),s))}):t(new fb(T0(e),e))}),vV=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function th(e,t,n,r,s,o){return fl(this,void 0,void 0,function*(){return new Promise((i,a)=>{e(n,vV(t,r,s,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>yV(l,a,r))})})}function Fm(e,t,n,r){return fl(this,void 0,void 0,function*(){return th(e,"GET",t,n,r)})}function ii(e,t,n,r,s){return fl(this,void 0,void 0,function*(){return th(e,"POST",t,r,s,n)})}function xV(e,t,n,r,s){return fl(this,void 0,void 0,function*(){return th(e,"PUT",t,r,s,n)})}function wV(e,t,n,r){return fl(this,void 0,void 0,function*(){return th(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function JO(e,t,n,r,s){return fl(this,void 0,void 0,function*(){return th(e,"DELETE",t,r,s,n)})}var Jn=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const bV={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class SV{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=KO(s)}uploadOrUpdate(t,n,r,s){return Jn(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},bN),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:o,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(o){if(Kt(o))return{data:null,error:o};throw o}})}upload(t,n,r){return Jn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Jn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:bN.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:o,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(Kt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Jn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield ii(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new XS("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:a},error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Jn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Jn(this,void 0,void 0,function*(){try{return{data:yield ii(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Jn(this,void 0,void 0,function*(){try{return{data:{path:(yield ii(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Jn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield ii(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Jn(this,void 0,void 0,function*(){try{const s=yield ii(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}download(t,n){return Jn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=o?`?${o}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield Fm(this.fetch,`${this.url}/${s}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Kt(a))return{data:null,error:a};throw a}})}info(t){return Jn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Fm(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:hb(r),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}exists(t){return Jn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield wV(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Kt(r)&&r instanceof fb){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return Jn(this,void 0,void 0,function*(){try{return{data:yield JO(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Jn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},bV),n),{prefix:t||""});return{data:yield ii(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const CV="2.7.1",EV={"X-Client-Info":`storage-js/${CV}`};var wl=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class kV{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},EV),n),this.fetch=KO(r)}listBuckets(){return wl(this,void 0,void 0,function*(){try{return{data:yield Fm(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Kt(t))return{data:null,error:t};throw t}})}getBucket(t){return wl(this,void 0,void 0,function*(){try{return{data:yield Fm(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return wl(this,void 0,void 0,function*(){try{return{data:yield ii(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return wl(this,void 0,void 0,function*(){try{return{data:yield xV(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return wl(this,void 0,void 0,function*(){try{return{data:yield ii(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return wl(this,void 0,void 0,function*(){try{return{data:yield JO(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}}class _V extends kV{constructor(t,n={},r){super(t,n,r)}from(t){return new SV(this.url,this.headers,t,this.fetch)}}const NV="2.49.1";let Zu="";typeof Deno<"u"?Zu="deno":typeof document<"u"?Zu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zu="react-native":Zu="node";const PV={"X-Client-Info":`supabase-js-${Zu}/${NV}`},AV={headers:PV},TV={schema:"public"},RV={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jV={};var OV=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const MV=e=>{let t;return e?t=e:typeof fetch>"u"?t=OO:t=fetch,(...n)=>t(...n)},IV=()=>typeof Headers>"u"?MO:Headers,DV=(e,t,n)=>{const r=MV(n),s=IV();return(o,i)=>OV(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},i),{headers:c}))})};var $V=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};function LV(e){return e.replace(/\/$/,"")}function FV(e,t){const{db:n,auth:r,realtime:s,global:o}=e,{db:i,auth:a,realtime:l,global:c}=t,u={db:Object.assign(Object.assign({},i),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),o),accessToken:()=>$V(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}const YO="2.68.0",Ml=30*1e3,pb=3,R0=pb*Ml,BV="http://localhost:9999",zV="supabase.auth.token",UV={"X-Client-Info":`gotrue-js/${YO}`},mb="X-Supabase-Api-Version",XO={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function HV(e){return Math.round(Date.now()/1e3)+e}function VV(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const zs=()=>typeof window<"u"&&typeof document<"u",ha={tested:!1,writable:!1},Ed=()=>{if(!zs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ha.tested)return ha.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ha.tested=!0,ha.writable=!0}catch{ha.tested=!0,ha.writable=!1}return ha.writable};function WV(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const QO=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Mc(async()=>{const{default:r}=await Promise.resolve().then(()=>ou);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},qV=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ZO=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Fh=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Bh=async(e,t)=>{await e.removeItem(t)};function GV(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,s,o,i,a,l,c,u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)i=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),r=i<<2|a>>4,s=(a&15)<<4|l>>2,o=(l&3)<<6|c,n=n+String.fromCharCode(r),l!=64&&s!=0&&(n=n+String.fromCharCode(s)),c!=64&&o!=0&&(n=n+String.fromCharCode(o));return n}class Ry{constructor(){this.promise=new Ry.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ry.promiseConstructor=Promise;function SN(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=e.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(GV(r))}async function KV(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function JV(e,t){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){r(i);return}}catch(i){if(!t(o,i)){s(i);return}}})()})}function YV(e){return("0"+e.toString(16)).substr(-2)}function XV(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,YV).join("")}async function QV(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}function ZV(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function eW(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await QV(e);return ZV(n)}async function bl(e,t,n=!1){const r=XV();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ZO(e,`${t}-code-verifier`,s);const o=await eW(r);return[o,r===o?"plain":"s256"]}const tW=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nW(e){const t=e.headers.get(mb);if(!t||!t.match(tW))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class QS extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class rW extends QS{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function sW(e){return Me(e)&&e.name==="AuthApiError"}class eM extends QS{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class hl extends QS{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class ei extends hl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function oW(e){return Me(e)&&e.name==="AuthSessionMissingError"}class j0 extends hl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zh extends hl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Uh extends hl{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iW(e){return Me(e)&&e.name==="AuthImplicitGrantRedirectError"}class CN extends hl{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gb extends hl{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function O0(e){return Me(e)&&e.name==="AuthRetryableFetchError"}class EN extends hl{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var aW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const xa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lW=[502,503,504];async function kN(e){var t;if(!qV(e))throw new gb(xa(e),0);if(lW.includes(e.status))throw new gb(xa(e),e.status);let n;try{n=await e.json()}catch(o){throw new eM(xa(o),o)}let r;const s=nW(e);if(s&&s.getTime()>=XO["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new EN(xa(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ei}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new EN(xa(n),e.status,n.weak_password.reasons);throw new rW(xa(n),e.status||500,r)}const cW=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ue(e,t,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[mb]||(o[mb]=XO["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await uW(e,t,n+a,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function uW(e,t,n,r,s,o){const i=cW(t,r,s,o);let a;try{a=await e(n,Object.assign({},i))}catch(l){throw console.error(l),new gb(xa(l),0)}if(a.ok||await kN(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await kN(l)}}function ti(e){var t;let n=null;pW(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=HV(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function _N(e){const t=ti(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function mi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function dW(e){return{data:e,error:null}}function fW(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=e,i=aW(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function hW(e){return e}function pW(e){return e.access_token&&e.refresh_token&&e.expires_in}var mW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class gW{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=QO(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:mi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=mW(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:fW,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Me(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:mi})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,o,i,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:hW});if(u.error)throw u.error;const d=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);c[`${v}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Me(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:mi})}catch(n){if(Me(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:mi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:mi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:n,error:r}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}}const yW={getItem:e=>Ed()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ed()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ed()&&globalThis.localStorage.removeItem(e)}};function NN(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function vW(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Sl={debug:!!(globalThis&&Ed()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tM extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class xW extends tM{}async function wW(e,t,n){Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new xW(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Sl.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}vW();const bW={url:BV,storageKey:zV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:UV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function PN(e,t,n){return await n()}class lf{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=lf.nextInstanceID,lf.nextInstanceID+=1,this.instanceID>0&&zs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},bW),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new gW({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=QO(s.fetch),this.lock=s.lock||PN,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:zs()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=wW:this.lock=PN,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ed()?this.storage=yW:(this.memoryStorage={},this.storage=NN(this.memoryStorage)):(this.memoryStorage={},this.storage=NN(this.memoryStorage)),zs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${YO}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=WV(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),zs()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),iW(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Me(n)?{error:n}:{error:new eM("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const o=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:ti}),{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,r,s;try{let o;if("email"in t){const{email:u,password:d,options:h}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await bl(this.storage,this.storageKey)),o=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},xform:ti})}else if("phone"in t){const{phone:u,password:d,options:h}=t;o=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ti})}else throw new zh("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:i,options:a}=t;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:_N})}else if("phone"in t){const{phone:o,password:i,options:a}=t;n=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:_N})}else throw new zh("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new j0}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await Fh(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:i}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ti});if(await Bh(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new j0}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(Me(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:o,nonce:i}=t,a=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ti}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new j0}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,o,i;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await bl(this.storage,this.storageKey));const{error:d}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new zh("You must provide either an email or phone number.")}catch(a){if(Me(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,o;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:ti});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,c=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await bl(this.storage,this.storageKey)),await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:dW})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ei;const{error:s}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:o}=t,{error:i}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:r,type:s,options:o}=t,{data:i,error:a}=await Ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new zh("You must provide either an email or phone number and a type")}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Fh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<R0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:mi}):await this._useSession(async n=>{var r,s,o;const{data:i,error:a}=n;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ei}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:mi})})}catch(n){if(Me(n))return oW(n)&&(await this._removeSession(),await Bh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new ei;const i=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await bl(this.storage,this.storageKey));const{data:c,error:u}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:mi});if(u)throw u;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}_decodeJWT(t){return SN(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ei;const n=Date.now()/1e3;let r=n,s=!0,o=null;const i=SN(t.access_token);if(i.exp&&(r=i.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Me(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:i,error:a}=n;if(a)throw a;t=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ei;const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Me(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!zs())throw new Uh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Uh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new CN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Uh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new CN("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:a,expires_at:l,token_type:c}=t;if(!o||!a||!i||!c)throw new Uh("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const p=h-u;p*1e3<=Ml&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const m=h-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,u);const{data:g,error:v}=await this._getUser(o);if(v)throw v;const x={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:d,expires_at:h,refresh_token:i,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(Me(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Fh(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,t);if(a&&!(sW(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Bh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=VV(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await bl(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var i,a,l,c,u;const{data:d,error:h}=o;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return zs()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Me(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:o,error:i}=n;if(i)throw i;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await JV(async s=>(s>0&&await KV(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ti})),(s,o)=>{const i=200*Math.pow(2,s);return o&&O0(o)&&Date.now()+i-r<Ml})}catch(r){if(this._debug(n,"error",r),Me(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),zs()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Fh(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<R0;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${R0}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),O0(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ei;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ry;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new ei;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(s,"error",o),Me(o)){const i={session:null,error:o};return O0(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ZO(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Bh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&zs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ml);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Ml);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ml}ms, refresh threshold is ${pb} ticks`),s<=pb&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof tM)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await bl(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ue(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:o,error:i}=n;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Me(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:i,error:a}=await Ue(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(n){if(Me(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ue(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Me(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(s.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}lf.nextInstanceID=0;const SW=lf;class CW extends SW{constructor(t){super(t)}}var EW=function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class kW{constructor(t,n,r){var s,o,i;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=LV(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:TV,realtime:jV,auth:Object.assign(Object.assign({},RV),{storageKey:l}),global:AV},u=FV(r??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=DV(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new XH(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new NH(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new _V(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return EW(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:o,flowType:i,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new CW({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:i,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new fV(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _W=(e,t,n)=>new kW(e,t,n),NW="https://lmomfddmypameoffnbcq.supabase.co",PW="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxtb21mZGRteXBhbWVvZmZuYmNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MDI5NzQsImV4cCI6MjA1NjE3ODk3NH0.PJ0tNyNIFQiH8qnDKoyVlmgHDfQ4SFAS_ND6TfIXlzc",AW=3,M0=1e3,TW=async(e,t)=>{var s;let n=0,r=null;for(;n<AW;)try{const i=new AbortController,a=setTimeout(()=>i.abort(),15e3),l=await fetch(e,{...t,signal:i.signal});if(clearTimeout(a),l.status===403){const c=await l.json();if((c==null?void 0:c.code)==="session_not_found"||(c==null?void 0:c.error)==="session_not_found"||(s=c==null?void 0:c.message)!=null&&s.includes("session_not_found")){const u=new Error("Session not found");throw u.name="AuthSessionError",u.body=JSON.stringify(c),u}}if(l.status===429){const c=parseInt(l.headers.get("retry-after")||"0",10),u=c>0?c*1e3:M0*Math.pow(2,n);console.log(`Rate limited, retrying after ${u}ms`),await new Promise(d=>setTimeout(d,u)),n++;continue}if(l.status===503){const c=M0*Math.pow(2,n);console.log(`Service unavailable (503), retrying after ${c}ms`),await new Promise(u=>setTimeout(u,c)),n++;continue}return l}catch(o){if(r=o,o instanceof DOMException&&o.name==="AbortError")throw new Error("Request timed out");if(o.name==="AuthSessionError")throw o;const i=M0*Math.pow(2,n);console.log(`Network error, retrying after ${i}ms`),await new Promise(a=>setTimeout(a,i)),n++}throw r||new Error("Request failed after maximum retries")},G=_W(NW,PW,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{fetch:TW,headers:{"X-Client-Info":"supabase-js/2.39.7"}},realtime:{params:{eventsPerSecond:1}}});let Bm=!1;window.addEventListener("online",()=>{Bm&&(console.log("Internet connection restored, refreshing authentication"),Bm=!1,G.auth.getSession().catch(e=>{console.warn("Failed to refresh session after reconnect:",e)}))});window.addEventListener("offline",()=>{console.log("Internet connection lost, entering offline mode"),Bm=!0});G.auth.onAuthStateChange((e,t)=>{console.log("Auth state changed:",e,!!t),(e==="SIGNED_OUT"||e==="USER_DELETED")&&localStorage.removeItem("fluxr_current_product")});const dn=e=>{var n,r,s,o,i;console.error("Supabase error:",e);let t;return(e==null?void 0:e.status)===503?t="Server is temporarily unavailable. Please check your connection and try again in a moment.":(e==null?void 0:e.status)===429?t="Too many requests. Please wait a moment and try again.":(e==null?void 0:e.code)==="PGRST116"?t="You don't have permission to perform this action.":(n=e==null?void 0:e.message)!=null&&n.includes("Invalid login credentials")?t="Email or password is incorrect. Please try again.":(r=e==null?void 0:e.message)!=null&&r.includes("Email not confirmed")?t="Please confirm your email address before signing in.":(e==null?void 0:e.name)==="AuthRetryableFetchError"||Bm?t="Connection issue detected. Please check your internet connection and try again.":(s=e==null?void 0:e.message)!=null&&s.includes("session_not_found")||(o=e==null?void 0:e.body)!=null&&o.includes("session_not_found")||(i=e==null?void 0:e.error)!=null&&i.includes("session_not_found")?t="Your session has expired. Please sign in again.":t=(e==null?void 0:e.message)||(e==null?void 0:e.error_description)||"An unexpected error occurred",new Error(t)},nM=y.createContext(void 0);function RW({children:e}){const[t,n]=y.useState(null),[r,s]=y.useState(!0),[o,i]=y.useState(null),[a,l]=y.useState(0),[c,u]=y.useState(!1),[d,h]=y.useState(!navigator.onLine);y.useEffect(()=>{const b=()=>h(!1),S=()=>h(!0);return window.addEventListener("online",b),window.addEventListener("offline",S),()=>{window.removeEventListener("online",b),window.removeEventListener("offline",S)}},[]);const p=b=>{var C,E,k;if(console.warn("Auth error detected:",b),(C=b==null?void 0:b.message)!=null&&C.includes("session_not_found")||(E=b==null?void 0:b.body)!=null&&E.includes("session_not_found")||(k=b==null?void 0:b.error)!=null&&k.includes("session_not_found")){console.log("Invalid session detected, signing out"),localStorage.removeItem("fluxr_current_product"),localStorage.removeItem("sb-"+G.supabaseUrl+"-auth-token"),n(null),G.auth.signOut({scope:"local"}).catch(N=>{console.warn("Error during forced sign out:",N)}),i("Your session has expired. Please sign in again."),s(!1);return}if((b==null?void 0:b.name)==="AuthRetryableFetchError"||d){i("Connection issue detected. Please check your internet connection and try again.");return}const S=dn(b);i(S.message)};y.useEffect(()=>{const b=async()=>{try{if(s(!0),d){i("You appear to be offline. Some features may be unavailable."),s(!1);return}const{data:{session:C},error:E}=await G.auth.getSession();if(E){if(console.warn("Session retrieval error:",E),p(E),E.status===503&&a<3){const k=Math.pow(2,a)*1e3;console.log(`Retrying auth initialization in ${k}ms`),l(N=>N+1),setTimeout(b,k);return}i(dn(E).message)}n((C==null?void 0:C.user)??null)}catch(C){console.error("Auth initialization error:",C),p(C)}finally{s(!1)}};b();const{data:{subscription:S}}=G.auth.onAuthStateChange(async(C,E)=>{console.log("Auth state changed:",C,!!E),C==="SIGNED_UP"&&(console.log("New user signed up, showing welcome popup"),u(!0)),n((E==null?void 0:E.user)??null),(C==="SIGNED_OUT"||C==="USER_DELETED")&&(localStorage.removeItem("fluxr_current_product"),localStorage.removeItem("sb-"+G.supabaseUrl+"-auth-token")),o&&i(null)});return()=>{S.unsubscribe()}},[a,d]);const m=async(b,S,C=!1)=>{try{if(i(null),d)throw new Error("You appear to be offline. Please check your internet connection and try again.");const{data:E,error:k}=await G.auth.signInWithPassword({email:b,password:S,options:{persistSession:C}});if(k)throw dn(k);return E}catch(E){throw p(E),E instanceof Error?E:new Error("An unexpected error occurred")}},g=async(b,S,C)=>{try{if(i(null),d)throw new Error("You appear to be offline. Please check your internet connection and try again.");const{data:E,error:k}=await G.auth.signUp({email:b,password:S,options:{data:{full_name:C},emailRedirectTo:`${window.location.origin}/auth/callback`}});if(k)throw dn(k);return u(!0),E}catch(E){throw p(E),E instanceof Error?E:new Error("An unexpected error occurred")}},v=async()=>{try{i(null),n(null),localStorage.removeItem("fluxr_current_product"),localStorage.removeItem("sb-"+G.supabaseUrl+"-auth-token");try{const{error:b}=await G.auth.signOut({scope:"global"});b&&(console.warn("Global sign out failed, falling back to local:",b),await G.auth.signOut({scope:"local"}))}catch(b){console.warn("Sign out error:",b)}}catch(b){console.error("Error during sign out:",b)}},x=async b=>{try{if(i(null),d)throw new Error("You appear to be offline. Please check your internet connection and try again.");const{error:S}=await G.auth.resetPasswordForEmail(b,{redirectTo:`${window.location.origin}/auth/reset-password`});if(S)throw dn(S)}catch(S){throw p(S),S instanceof Error?S:new Error("An unexpected error occurred")}},w=()=>{i(null)};return f.jsx(nM.Provider,{value:{user:t,loading:r,error:o,signIn:m,signUp:g,signOut:v,resetPassword:x,clearError:w,isWelcomePopupVisible:c,setWelcomePopupVisible:u},children:e})}function qn(){const e=y.useContext(nM);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const rM=y.createContext(void 0),Mu="fluxr_current_product";function jW({children:e}){const[t,n]=y.useState(null),{productSlug:r}=ao();y.useEffect(()=>{const i=localStorage.getItem(Mu);if(i)try{n(JSON.parse(i))}catch(a){console.error("Error parsing stored product:",a),localStorage.removeItem(Mu)}},[]),y.useEffect(()=>{t&&localStorage.setItem(Mu,JSON.stringify(t))},[t]),y.useEffect(()=>{r&&(!t||t.slug!==r)&&s(r).catch(i=>{console.error("Error auto-loading product:",i)})},[r]);const s=async i=>{try{const{data:a,error:l}=await G.from("products").select("*").eq("slug",i).single();return l?(console.error("Error loading product by slug:",l),null):a?(n(a),a):(console.warn("No product found with slug:",i),null)}catch(a){return console.error("Error loading product:",a),null}},o=i=>{n(i),i?localStorage.setItem(Mu,JSON.stringify(i)):localStorage.removeItem(Mu)};return f.jsx(rM.Provider,{value:{currentProduct:t,setCurrentProduct:o,loadProductBySlug:s},children:e})}function ZS(){const e=y.useContext(rM);if(e===void 0)throw new Error("useProduct must be used within a ProductProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MW=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ce=(e,t)=>{const n=y.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:a="",children:l,...c},u)=>y.createElement("svg",{ref:u,...OW,width:s,height:s,stroke:r,strokeWidth:i?Number(o)*24/Number(s):o,className:["lucide",`lucide-${MW(e)}`,a].join(" "),...c},[...t.map(([d,h])=>y.createElement(d,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=ce("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IW=ce("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DW=ce("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $W=ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LW=ce("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=ce("BookmarkPlus",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FW=ce("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=ce("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=ce("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zW=ce("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=ce("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HW=ce("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WW=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=ce("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=ce("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=ce("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=ce("CopyPlus",[["line",{x1:"15",x2:"15",y1:"12",y2:"18",key:"1p7wdc"}],["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=ce("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=ce("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=ce("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=ce("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=ce("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=ce("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=ce("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=ce("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=ce("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=ce("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=ce("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=ce("Kanban",[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=ce("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=ce("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=ce("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=ce("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=ce("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=ce("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=ce("PencilLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=ce("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=ce("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=ce("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=ce("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=ce("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=ce("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=ce("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=ce("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=ce("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=ce("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=ce("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=ce("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=ce("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=ce("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ON(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Oy(...e){return t=>{let n=!1;const r=e.map(s=>{const o=ON(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():ON(e[s],null)}}}}function Ut(...e){return y.useCallback(Oy(...e),e)}var Za=y.forwardRef((e,t)=>{const{children:n,...r}=e,s=y.Children.toArray(n),o=s.find(C7);if(o){const i=o.props.children,a=s.map(l=>l===o?y.Children.count(i)>1?y.Children.only(null):y.isValidElement(i)?i.props.children:null:l);return f.jsx(xb,{...r,ref:t,children:y.isValidElement(i)?y.cloneElement(i,void 0,a):null})}return f.jsx(xb,{...r,ref:t,children:n})});Za.displayName="Slot";var xb=y.forwardRef((e,t)=>{const{children:n,...r}=e;if(y.isValidElement(n)){const s=k7(n),o=E7(r,n.props);return n.type!==y.Fragment&&(o.ref=t?Oy(t,s):s),y.cloneElement(n,o)}return y.Children.count(n)>1?y.Children.only(null):null});xb.displayName="SlotClone";var dM=({children:e})=>f.jsx(f.Fragment,{children:e});function C7(e){return y.isValidElement(e)&&e.type===dM}function E7(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{o(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function k7(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function fM(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=fM(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function hM(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=fM(e))&&(r&&(r+=" "),r+=t);return r}const MN=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,IN=hM,_7=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return IN(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,i=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=o==null?void 0:o[c];if(u===null)return null;const h=MN(u)||MN(d);return s[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...p}=u;return Object.entries(p).every(m=>{let[g,v]=m;return Array.isArray(v)?v.includes({...o,...a}[g]):{...o,...a}[g]===v})?[...c,d,h]:c},[]);return IN(e,i,l,n==null?void 0:n.class,n==null?void 0:n.className)},nC="-",N7=e=>{const t=A7(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const a=i.split(nC);return a[0]===""&&a.length!==1&&a.shift(),pM(a,t)||P7(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},pM=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?pM(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(nC);return(i=t.validators.find(({validator:a})=>a(o)))==null?void 0:i.classGroupId},DN=/^\[(.+)\]$/,P7=e=>{if(DN.test(e)){const t=DN.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},A7=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return R7(Object.entries(e.classGroups),n).forEach(([o,i])=>{wb(i,r,o,t)}),r},wb=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:$N(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(T7(s)){wb(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,i])=>{wb(i,$N(t,o),n,r)})})},$N=(e,t)=>{let n=e;return t.split(nC).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},T7=e=>e.isThemeGetter,R7=(e,t)=>t?e.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,a])=>[t+i,a])):o);return[n,s]}):e,j7=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(o,i)=>{n.set(o,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return s(o,i),i},set(o,i){n.has(o)?n.set(o,i):s(o,i)}}},mM="!",O7=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],o=t.length,i=a=>{const l=[];let c=0,u=0,d;for(let v=0;v<a.length;v++){let x=a[v];if(c===0){if(x===s&&(r||a.slice(v,v+o)===t)){l.push(a.slice(u,v)),u=v+o;continue}if(x==="/"){d=v;continue}}x==="["?c++:x==="]"&&c--}const h=l.length===0?a:a.substring(u),p=h.startsWith(mM),m=p?h.substring(1):h,g=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:i}):i},M7=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},I7=e=>({cache:j7(e.cacheSize),parseClassName:O7(e),...N7(e)}),D7=/\s+/,$7=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,o=[],i=e.trim().split(D7);let a="";for(let l=i.length-1;l>=0;l-=1){const c=i[l],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=n(c);let m=!!p,g=r(m?h.substring(0,p):h);if(!g){if(!m){a=c+(a.length>0?" "+a:a);continue}if(g=r(h),!g){a=c+(a.length>0?" "+a:a);continue}m=!1}const v=M7(u).join(":"),x=d?v+mM:v,w=x+g;if(o.includes(w))continue;o.push(w);const b=s(g,m);for(let S=0;S<b.length;++S){const C=b[S];o.push(x+C)}a=c+(a.length>0?" "+a:a)}return a};function L7(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=gM(t))&&(r&&(r+=" "),r+=n);return r}const gM=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=gM(e[r]))&&(n&&(n+=" "),n+=t);return n};function F7(e,...t){let n,r,s,o=i;function i(l){const c=t.reduce((u,d)=>d(u),e());return n=I7(c),r=n.cache.get,s=n.cache.set,o=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=$7(l,n);return s(l,u),u}return function(){return o(L7.apply(null,arguments))}}const ot=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},yM=/^\[(?:([a-z-]+):)?(.+)\]$/i,B7=/^\d+\/\d+$/,z7=new Set(["px","full","screen"]),U7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,H7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,V7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,W7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,q7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fo=e=>dc(e)||z7.has(e)||B7.test(e),Jo=e=>lu(e,"length",e9),dc=e=>!!e&&!Number.isNaN(Number(e)),I0=e=>lu(e,"number",dc),Iu=e=>!!e&&Number.isInteger(Number(e)),G7=e=>e.endsWith("%")&&dc(e.slice(0,-1)),Te=e=>yM.test(e),Yo=e=>U7.test(e),K7=new Set(["length","size","percentage"]),J7=e=>lu(e,K7,vM),Y7=e=>lu(e,"position",vM),X7=new Set(["image","url"]),Q7=e=>lu(e,X7,n9),Z7=e=>lu(e,"",t9),Du=()=>!0,lu=(e,t,n)=>{const r=yM.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},e9=e=>H7.test(e)&&!V7.test(e),vM=()=>!1,t9=e=>W7.test(e),n9=e=>q7.test(e),r9=()=>{const e=ot("colors"),t=ot("spacing"),n=ot("blur"),r=ot("brightness"),s=ot("borderColor"),o=ot("borderRadius"),i=ot("borderSpacing"),a=ot("borderWidth"),l=ot("contrast"),c=ot("grayscale"),u=ot("hueRotate"),d=ot("invert"),h=ot("gap"),p=ot("gradientColorStops"),m=ot("gradientColorStopPositions"),g=ot("inset"),v=ot("margin"),x=ot("opacity"),w=ot("padding"),b=ot("saturate"),S=ot("scale"),C=ot("sepia"),E=ot("skew"),k=ot("space"),N=ot("translate"),P=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Te,t],L=()=>[Te,t],z=()=>["",fo,Jo],_=()=>["auto",dc,Te],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],O=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],A=()=>["","0",Te],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[dc,Te];return{cacheSize:500,separator:":",theme:{colors:[Du],spacing:[fo,Jo],blur:["none","",Yo,Te],brightness:B(),borderColor:[e],borderRadius:["none","","full",Yo,Te],borderSpacing:L(),borderWidth:z(),contrast:B(),grayscale:A(),hueRotate:B(),invert:A(),gap:L(),gradientColorStops:[e],gradientColorStopPositions:[G7,Jo],inset:R(),margin:R(),opacity:B(),padding:L(),saturate:B(),scale:B(),sepia:A(),skew:B(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",Te]}],container:["container"],columns:[{columns:[Yo]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),Te]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Iu,Te]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Te]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",Iu,Te]}],"grid-cols":[{"grid-cols":[Du]}],"col-start-end":[{col:["auto",{span:["full",Iu,Te]},Te]}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":[Du]}],"row-start-end":[{row:["auto",{span:[Iu,Te]},Te]}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Te]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Te]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Te,t]}],"min-w":[{"min-w":[Te,t,"min","max","fit"]}],"max-w":[{"max-w":[Te,t,"none","full","min","max","fit","prose",{screen:[Yo]},Yo]}],h:[{h:[Te,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Te,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Te,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Te,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Yo,Jo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",I0]}],"font-family":[{font:[Du]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Te]}],"line-clamp":[{"line-clamp":["none",dc,I0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fo,Te]}],"list-image":[{"list-image":["none",Te]}],"list-style-type":[{list:["none","disc","decimal",Te]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",fo,Jo]}],"underline-offset":[{"underline-offset":["auto",fo,Te]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),Y7]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",J7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Q7]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...O(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:O()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...O()]}],"outline-offset":[{"outline-offset":[fo,Te]}],"outline-w":[{outline:[fo,Jo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[fo,Jo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Yo,Z7]}],"shadow-color":[{shadow:[Du]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Yo,Te]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Te]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Te]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Te]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Iu,Te]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Te]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Te]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Te]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[fo,Jo,I0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},s9=F7(r9);function Le(...e){return s9(hM(e))}const rC=_7("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-brand-purple text-white shadow-sm hover:bg-brand-purple/90",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),K=y.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const i=r?Za:"button";return f.jsx(i,{className:Le(rC({variant:t,size:n,className:e})),ref:o,...s})});K.displayName="Button";function o9(){const[e,t]=y.useState(!1),n=r=>{const s=encodeURIComponent(r==="bug"?"Report Bug":r==="feature"?"Suggest Feature":"Get Support");window.location.href=`mailto:steve@fluxr.ai?subject=${s}`};return f.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col items-end gap-2",children:[e&&f.jsxs("div",{className:"flex flex-col gap-2 mb-2",children:[f.jsxs(K,{variant:"secondary",size:"sm",className:"shadow-lg",onClick:()=>n("bug"),children:[f.jsx(zW,{className:"w-4 h-4 mr-2"}),"Report Bug"]}),f.jsxs(K,{variant:"secondary",size:"sm",className:"shadow-lg",onClick:()=>n("feature"),children:[f.jsx(i7,{className:"w-4 h-4 mr-2"}),"Suggest Feature"]}),f.jsxs(K,{variant:"secondary",size:"sm",className:"shadow-lg",onClick:()=>n("support"),children:[f.jsx(o7,{className:"w-4 h-4 mr-2"}),"Get Support"]})]}),f.jsx(K,{variant:"secondary",size:"icon",className:"h-12 w-12 rounded-full shadow-lg",onClick:()=>t(!e),children:e?f.jsx(Gi,{className:"h-6 w-6"}):f.jsx(n7,{className:"h-6 w-6"})})]})}function Ne(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function i9(e,t){const n=y.createContext(t),r=o=>{const{children:i,...a}=o,l=y.useMemo(()=>a,Object.values(a));return f.jsx(n.Provider,{value:l,children:i})};r.displayName=e+"Provider";function s(o){const i=y.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function oa(e,t=[]){let n=[];function r(o,i){const a=y.createContext(i),l=n.length;n=[...n,i];const c=d=>{var x;const{scope:h,children:p,...m}=d,g=((x=h==null?void 0:h[e])==null?void 0:x[l])||a,v=y.useMemo(()=>m,Object.values(m));return f.jsx(g.Provider,{value:v,children:p})};c.displayName=o+"Provider";function u(d,h){var g;const p=((g=h==null?void 0:h[e])==null?void 0:g[l])||a,m=y.useContext(p);if(m)return m;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[c,u]}const s=()=>{const o=n.map(i=>y.createContext(i));return function(a){const l=(a==null?void 0:a[e])||o;return y.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return s.scopeName=e,[r,a9(s,...t)]}function a9(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function Ps(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),y.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function My({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=l9({defaultProp:t,onChange:n}),o=e!==void 0,i=o?e:r,a=Ps(n),l=y.useCallback(c=>{if(o){const d=typeof c=="function"?c(e):c;d!==e&&a(d)}else s(c)},[o,e,s,a]);return[i,l]}function l9({defaultProp:e,onChange:t}){const n=y.useState(e),[r]=n,s=y.useRef(r),o=Ps(t);return y.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),n}var c9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ct=c9.reduce((e,t)=>{const n=y.forwardRef((r,s)=>{const{asChild:o,...i}=r,a=o?Za:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(a,{...i,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function xM(e,t){e&&Kr.flushSync(()=>e.dispatchEvent(t))}function wM(e){const t=e+"CollectionProvider",[n,r]=oa(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=p=>{const{scope:m,children:g}=p,v=M.useRef(null),x=M.useRef(new Map).current;return f.jsx(s,{scope:m,itemMap:x,collectionRef:v,children:g})};i.displayName=t;const a=e+"CollectionSlot",l=M.forwardRef((p,m)=>{const{scope:g,children:v}=p,x=o(a,g),w=Ut(m,x.collectionRef);return f.jsx(Za,{ref:w,children:v})});l.displayName=a;const c=e+"CollectionItemSlot",u="data-radix-collection-item",d=M.forwardRef((p,m)=>{const{scope:g,children:v,...x}=p,w=M.useRef(null),b=Ut(m,w),S=o(c,g);return M.useEffect(()=>(S.itemMap.set(w,{ref:w,...x}),()=>void S.itemMap.delete(w))),f.jsx(Za,{[u]:"",ref:b,children:v})});d.displayName=c;function h(p){const m=o(e+"CollectionConsumer",p);return M.useCallback(()=>{const v=m.collectionRef.current;if(!v)return[];const x=Array.from(v.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((S,C)=>x.indexOf(S.ref.current)-x.indexOf(C.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:i,Slot:l,ItemSlot:d},h,r]}var u9=y.createContext(void 0);function sC(e){const t=y.useContext(u9);return e||t||"ltr"}function d9(e,t=globalThis==null?void 0:globalThis.document){const n=Ps(e);y.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var f9="DismissableLayer",bb="dismissableLayer.update",h9="dismissableLayer.pointerDownOutside",p9="dismissableLayer.focusOutside",LN,bM=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),oC=y.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:a,...l}=e,c=y.useContext(bM),[u,d]=y.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=y.useState({}),m=Ut(t,k=>d(k)),g=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(v),w=u?g.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=x,C=y9(k=>{const N=k.target,P=[...c.branches].some(T=>T.contains(N));!S||P||(s==null||s(k),i==null||i(k),k.defaultPrevented||a==null||a())},h),E=v9(k=>{const N=k.target;[...c.branches].some(T=>T.contains(N))||(o==null||o(k),i==null||i(k),k.defaultPrevented||a==null||a())},h);return d9(k=>{w===c.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),y.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(LN=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),FN(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=LN)}},[u,h,n,c]),y.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),FN())},[u,c]),y.useEffect(()=>{const k=()=>p({});return document.addEventListener(bb,k),()=>document.removeEventListener(bb,k)},[]),f.jsx(ct.div,{...l,ref:m,style:{pointerEvents:b?S?"auto":"none":void 0,...e.style},onFocusCapture:Ne(e.onFocusCapture,E.onFocusCapture),onBlurCapture:Ne(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Ne(e.onPointerDownCapture,C.onPointerDownCapture)})});oC.displayName=f9;var m9="DismissableLayerBranch",g9=y.forwardRef((e,t)=>{const n=y.useContext(bM),r=y.useRef(null),s=Ut(t,r);return y.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),f.jsx(ct.div,{...e,ref:s})});g9.displayName=m9;function y9(e,t=globalThis==null?void 0:globalThis.document){const n=Ps(e),r=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){SM(h9,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function v9(e,t=globalThis==null?void 0:globalThis.document){const n=Ps(e),r=y.useRef(!1);return y.useEffect(()=>{const s=o=>{o.target&&!r.current&&SM(p9,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function FN(){const e=new CustomEvent(bb);document.dispatchEvent(e)}function SM(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?xM(s,o):s.dispatchEvent(o)}var D0=0;function CM(){y.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??BN()),document.body.insertAdjacentElement("beforeend",e[1]??BN()),D0++,()=>{D0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),D0--}},[])}function BN(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var $0="focusScope.autoFocusOnMount",L0="focusScope.autoFocusOnUnmount",zN={bubbles:!1,cancelable:!0},x9="FocusScope",iC=y.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=e,[a,l]=y.useState(null),c=Ps(s),u=Ps(o),d=y.useRef(null),h=Ut(t,g=>l(g)),p=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let g=function(b){if(p.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:ni(d.current,{select:!0})},v=function(b){if(p.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||ni(d.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const C of b)C.removedNodes.length>0&&ni(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),w.disconnect()}}},[r,a,p.paused]),y.useEffect(()=>{if(a){HN.add(p);const g=document.activeElement;if(!a.contains(g)){const x=new CustomEvent($0,zN);a.addEventListener($0,c),a.dispatchEvent(x),x.defaultPrevented||(w9(k9(EM(a)),{select:!0}),document.activeElement===g&&ni(a))}return()=>{a.removeEventListener($0,c),setTimeout(()=>{const x=new CustomEvent(L0,zN);a.addEventListener(L0,u),a.dispatchEvent(x),x.defaultPrevented||ni(g??document.body,{select:!0}),a.removeEventListener(L0,u),HN.remove(p)},0)}}},[a,c,u,p]);const m=y.useCallback(g=>{if(!n&&!r||p.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(v&&x){const w=g.currentTarget,[b,S]=b9(w);b&&S?!g.shiftKey&&x===S?(g.preventDefault(),n&&ni(b,{select:!0})):g.shiftKey&&x===b&&(g.preventDefault(),n&&ni(S,{select:!0})):x===w&&g.preventDefault()}},[n,r,p.paused]);return f.jsx(ct.div,{tabIndex:-1,...i,ref:h,onKeyDown:m})});iC.displayName=x9;function w9(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ni(r,{select:t}),document.activeElement!==n)return}function b9(e){const t=EM(e),n=UN(t,e),r=UN(t.reverse(),e);return[n,r]}function EM(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function UN(e,t){for(const n of e)if(!S9(n,{upTo:t}))return n}function S9(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function C9(e){return e instanceof HTMLInputElement&&"select"in e}function ni(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&C9(e)&&t&&e.select()}}var HN=E9();function E9(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=VN(e,t),e.unshift(t)},remove(t){var n;e=VN(e,t),(n=e[0])==null||n.resume()}}}function VN(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function k9(e){return e.filter(t=>t.tagName!=="A")}var el=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},_9=fR.useId||(()=>{}),N9=0;function Ba(e){const[t,n]=y.useState(_9());return el(()=>{e||n(r=>r??String(N9++))},[e]),e||(t?`radix-${t}`:"")}const P9=["top","right","bottom","left"],Ki=Math.min,yr=Math.max,Um=Math.round,Hh=Math.floor,to=e=>({x:e,y:e}),A9={left:"right",right:"left",bottom:"top",top:"bottom"},T9={start:"end",end:"start"};function Sb(e,t,n){return yr(e,Ki(t,n))}function Do(e,t){return typeof e=="function"?e(t):e}function $o(e){return e.split("-")[0]}function cu(e){return e.split("-")[1]}function aC(e){return e==="x"?"y":"x"}function lC(e){return e==="y"?"height":"width"}function Ji(e){return["top","bottom"].includes($o(e))?"y":"x"}function cC(e){return aC(Ji(e))}function R9(e,t,n){n===void 0&&(n=!1);const r=cu(e),s=cC(e),o=lC(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Hm(i)),[i,Hm(i)]}function j9(e){const t=Hm(e);return[Cb(e),t,Cb(t)]}function Cb(e){return e.replace(/start|end/g,t=>T9[t])}function O9(e,t,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?o:i;default:return[]}}function M9(e,t,n,r){const s=cu(e);let o=O9($o(e),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(Cb)))),o}function Hm(e){return e.replace(/left|right|bottom|top/g,t=>A9[t])}function I9(e){return{top:0,right:0,bottom:0,left:0,...e}}function kM(e){return typeof e!="number"?I9(e):{top:e,right:e,bottom:e,left:e}}function Vm(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function WN(e,t,n){let{reference:r,floating:s}=e;const o=Ji(t),i=cC(t),a=lC(i),l=$o(t),c=o==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-s.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-s.width,y:d};break;default:p={x:r.x,y:r.y}}switch(cu(t)){case"start":p[i]-=h*(n&&c?-1:1);break;case"end":p[i]+=h*(n&&c?-1:1);break}return p}const D9=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:d}=WN(c,r,l),h=r,p={},m=0;for(let g=0;g<a.length;g++){const{name:v,fn:x}=a[g],{x:w,y:b,data:S,reset:C}=await x({x:u,y:d,initialPlacement:r,placement:h,strategy:s,middlewareData:p,rects:c,platform:i,elements:{reference:e,floating:t}});u=w??u,d=b??d,p={...p,[v]:{...p[v],...S}},C&&m<=50&&(m++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(c=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):C.rects),{x:u,y:d}=WN(c,h,l)),g=-1)}return{x:u,y:d,placement:h,strategy:s,middlewareData:p}};async function uf(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=Do(t,e),m=kM(p),v=a[h?d==="floating"?"reference":"floating":d],x=Vm(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),S=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},C=Vm(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:b,strategy:l}):w);return{top:(x.top-C.top+m.top)/S.y,bottom:(C.bottom-x.bottom+m.bottom)/S.y,left:(x.left-C.left+m.left)/S.x,right:(C.right-x.right+m.right)/S.x}}const $9=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=Do(e,t)||{};if(c==null)return{};const d=kM(u),h={x:n,y:r},p=cC(s),m=lC(p),g=await i.getDimensions(c),v=p==="y",x=v?"top":"left",w=v?"bottom":"right",b=v?"clientHeight":"clientWidth",S=o.reference[m]+o.reference[p]-h[p]-o.floating[m],C=h[p]-o.reference[p],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let k=E?E[b]:0;(!k||!await(i.isElement==null?void 0:i.isElement(E)))&&(k=a.floating[b]||o.floating[m]);const N=S/2-C/2,P=k/2-g[m]/2-1,T=Ki(d[x],P),R=Ki(d[w],P),L=T,z=k-g[m]-R,_=k/2-g[m]/2+N,D=Sb(L,_,z),O=!l.arrow&&cu(s)!=null&&_!==D&&o.reference[m]/2-(_<L?T:R)-g[m]/2<0,F=O?_<L?_-L:_-z:0;return{[p]:h[p]+F,data:{[p]:D,centerOffset:_-D-F,...O&&{alignmentOffset:F}},reset:O}}}),L9=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...v}=Do(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=$o(s),w=Ji(a),b=$o(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=h||(b||!g?[Hm(a)]:j9(a)),E=m!=="none";!h&&E&&C.push(...M9(a,g,m,S));const k=[a,...C],N=await uf(t,v),P=[];let T=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&P.push(N[x]),d){const _=R9(s,i,S);P.push(N[_[0]],N[_[1]])}if(T=[...T,{placement:s,overflows:P}],!P.every(_=>_<=0)){var R,L;const _=(((R=o.flip)==null?void 0:R.index)||0)+1,D=k[_];if(D)return{data:{index:_,overflows:T},reset:{placement:D}};let O=(L=T.filter(F=>F.overflows[0]<=0).sort((F,j)=>F.overflows[1]-j.overflows[1])[0])==null?void 0:L.placement;if(!O)switch(p){case"bestFit":{var z;const F=(z=T.filter(j=>{if(E){const A=Ji(j.placement);return A===w||A==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(A=>A>0).reduce((A,$)=>A+$,0)]).sort((j,A)=>j[1]-A[1])[0])==null?void 0:z[0];F&&(O=F);break}case"initialPlacement":O=a;break}if(s!==O)return{reset:{placement:O}}}return{}}}};function qN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function GN(e){return P9.some(t=>e[t]>=0)}const F9=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Do(e,t);switch(r){case"referenceHidden":{const o=await uf(t,{...s,elementContext:"reference"}),i=qN(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:GN(i)}}}case"escaped":{const o=await uf(t,{...s,altBoundary:!0}),i=qN(o,n.floating);return{data:{escapedOffsets:i,escaped:GN(i)}}}default:return{}}}}};async function B9(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=$o(n),a=cu(n),l=Ji(n)==="y",c=["left","top"].includes(i)?-1:1,u=o&&l?-1:1,d=Do(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const z9=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=t,l=await B9(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}},U9=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:v=>{let{x,y:w}=v;return{x,y:w}}},...l}=Do(e,t),c={x:n,y:r},u=await uf(t,l),d=Ji($o(s)),h=aC(d);let p=c[h],m=c[d];if(o){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=p+u[v],b=p-u[x];p=Sb(w,p,b)}if(i){const v=d==="y"?"top":"left",x=d==="y"?"bottom":"right",w=m+u[v],b=m-u[x];m=Sb(w,m,b)}const g=a.fn({...t,[h]:p,[d]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:o,[d]:i}}}}}},H9=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Do(e,t),u={x:n,y:r},d=Ji(s),h=aC(d);let p=u[h],m=u[d];const g=Do(a,t),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const b=h==="y"?"height":"width",S=o.reference[h]-o.floating[b]+v.mainAxis,C=o.reference[h]+o.reference[b]-v.mainAxis;p<S?p=S:p>C&&(p=C)}if(c){var x,w;const b=h==="y"?"width":"height",S=["top","left"].includes($o(s)),C=o.reference[d]-o.floating[b]+(S&&((x=i.offset)==null?void 0:x[d])||0)+(S?0:v.crossAxis),E=o.reference[d]+o.reference[b]+(S?0:((w=i.offset)==null?void 0:w[d])||0)-(S?v.crossAxis:0);m<C?m=C:m>E&&(m=E)}return{[h]:p,[d]:m}}}},V9=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:i,elements:a}=t,{apply:l=()=>{},...c}=Do(e,t),u=await uf(t,c),d=$o(s),h=cu(s),p=Ji(s)==="y",{width:m,height:g}=o.floating;let v,x;d==="top"||d==="bottom"?(v=d,x=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(x=d,v=h==="end"?"top":"bottom");const w=g-u.top-u.bottom,b=m-u.left-u.right,S=Ki(g-u[v],w),C=Ki(m-u[x],b),E=!t.middlewareData.shift;let k=S,N=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(k=w),E&&!h){const T=yr(u.left,0),R=yr(u.right,0),L=yr(u.top,0),z=yr(u.bottom,0);p?N=m-2*(T!==0||R!==0?T+R:yr(u.left,u.right)):k=g-2*(L!==0||z!==0?L+z:yr(u.top,u.bottom))}await l({...t,availableWidth:N,availableHeight:k});const P=await i.getDimensions(a.floating);return m!==P.width||g!==P.height?{reset:{rects:!0}}:{}}}};function Iy(){return typeof window<"u"}function uu(e){return _M(e)?(e.nodeName||"").toLowerCase():"#document"}function Cr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function lo(e){var t;return(t=(_M(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function _M(e){return Iy()?e instanceof Node||e instanceof Cr(e).Node:!1}function As(e){return Iy()?e instanceof Element||e instanceof Cr(e).Element:!1}function ro(e){return Iy()?e instanceof HTMLElement||e instanceof Cr(e).HTMLElement:!1}function KN(e){return!Iy()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Cr(e).ShadowRoot}function nh(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Ts(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function W9(e){return["table","td","th"].includes(uu(e))}function Dy(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function uC(e){const t=dC(),n=As(e)?Ts(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function q9(e){let t=Yi(e);for(;ro(t)&&!Dc(t);){if(uC(t))return t;if(Dy(t))return null;t=Yi(t)}return null}function dC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Dc(e){return["html","body","#document"].includes(uu(e))}function Ts(e){return Cr(e).getComputedStyle(e)}function $y(e){return As(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Yi(e){if(uu(e)==="html")return e;const t=e.assignedSlot||e.parentNode||KN(e)&&e.host||lo(e);return KN(t)?t.host:t}function NM(e){const t=Yi(e);return Dc(t)?e.ownerDocument?e.ownerDocument.body:e.body:ro(t)&&nh(t)?t:NM(t)}function df(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=NM(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),i=Cr(s);if(o){const a=Eb(i);return t.concat(i,i.visualViewport||[],nh(s)?s:[],a&&n?df(a):[])}return t.concat(s,df(s,[],n))}function Eb(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function PM(e){const t=Ts(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=ro(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r,a=Um(n)!==o||Um(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function fC(e){return As(e)?e:e.contextElement}function fc(e){const t=fC(e);if(!ro(t))return to(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=PM(t);let i=(o?Um(n.width):n.width)/r,a=(o?Um(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const G9=to(0);function AM(e){const t=Cr(e);return!dC()||!t.visualViewport?G9:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function K9(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Cr(e)?!1:t}function tl(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=fC(e);let i=to(1);t&&(r?As(r)&&(i=fc(r)):i=fc(e));const a=K9(o,n,r)?AM(o):to(0);let l=(s.left+a.x)/i.x,c=(s.top+a.y)/i.y,u=s.width/i.x,d=s.height/i.y;if(o){const h=Cr(o),p=r&&As(r)?Cr(r):r;let m=h,g=Eb(m);for(;g&&r&&p!==m;){const v=fc(g),x=g.getBoundingClientRect(),w=Ts(g),b=x.left+(g.clientLeft+parseFloat(w.paddingLeft))*v.x,S=x.top+(g.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=b,c+=S,m=Cr(g),g=Eb(m)}}return Vm({width:u,height:d,x:l,y:c})}function hC(e,t){const n=$y(e).scrollLeft;return t?t.left+n:tl(lo(e)).left+n}function TM(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:hC(e,r)),o=r.top+t.scrollTop;return{x:s,y:o}}function J9(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",i=lo(r),a=t?Dy(t.floating):!1;if(r===i||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=to(1);const u=to(0),d=ro(r);if((d||!d&&!o)&&((uu(r)!=="body"||nh(i))&&(l=$y(r)),ro(r))){const p=tl(r);c=fc(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const h=i&&!d&&!o?TM(i,l,!0):to(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function Y9(e){return Array.from(e.getClientRects())}function X9(e){const t=lo(e),n=$y(e),r=e.ownerDocument.body,s=yr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=yr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+hC(e);const a=-n.scrollTop;return Ts(r).direction==="rtl"&&(i+=yr(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}function Q9(e,t){const n=Cr(e),r=lo(e),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const c=dC();(!c||c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:a,y:l}}function Z9(e,t){const n=tl(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=ro(e)?fc(e):to(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,l=s*o.x,c=r*o.y;return{width:i,height:a,x:l,y:c}}function JN(e,t,n){let r;if(t==="viewport")r=Q9(e,n);else if(t==="document")r=X9(lo(e));else if(As(t))r=Z9(t,n);else{const s=AM(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Vm(r)}function RM(e,t){const n=Yi(e);return n===t||!As(n)||Dc(n)?!1:Ts(n).position==="fixed"||RM(n,t)}function eq(e,t){const n=t.get(e);if(n)return n;let r=df(e,[],!1).filter(a=>As(a)&&uu(a)!=="body"),s=null;const o=Ts(e).position==="fixed";let i=o?Yi(e):e;for(;As(i)&&!Dc(i);){const a=Ts(i),l=uC(i);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||nh(i)&&!l&&RM(e,i))?r=r.filter(u=>u!==i):s=a,i=Yi(i)}return t.set(e,r),r}function tq(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?Dy(t)?[]:eq(t,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const d=JN(t,u,s);return c.top=yr(d.top,c.top),c.right=Ki(d.right,c.right),c.bottom=Ki(d.bottom,c.bottom),c.left=yr(d.left,c.left),c},JN(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function nq(e){const{width:t,height:n}=PM(e);return{width:t,height:n}}function rq(e,t,n){const r=ro(t),s=lo(t),o=n==="fixed",i=tl(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=to(0);if(r||!r&&!o)if((uu(t)!=="body"||nh(s))&&(a=$y(t)),r){const h=tl(t,!0,o,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else s&&(l.x=hC(s));const c=s&&!r&&!o?TM(s,a):to(0),u=i.left+a.scrollLeft-l.x-c.x,d=i.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:i.width,height:i.height}}function F0(e){return Ts(e).position==="static"}function YN(e,t){if(!ro(e)||Ts(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return lo(e)===n&&(n=n.ownerDocument.body),n}function jM(e,t){const n=Cr(e);if(Dy(e))return n;if(!ro(e)){let s=Yi(e);for(;s&&!Dc(s);){if(As(s)&&!F0(s))return s;s=Yi(s)}return n}let r=YN(e,t);for(;r&&W9(r)&&F0(r);)r=YN(r,t);return r&&Dc(r)&&F0(r)&&!uC(r)?n:r||q9(e)||n}const sq=async function(e){const t=this.getOffsetParent||jM,n=this.getDimensions,r=await n(e.floating);return{reference:rq(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function oq(e){return Ts(e).direction==="rtl"}const iq={convertOffsetParentRelativeRectToViewportRelativeRect:J9,getDocumentElement:lo,getClippingRect:tq,getOffsetParent:jM,getElementRects:sq,getClientRects:Y9,getDimensions:nq,getScale:fc,isElement:As,isRTL:oq};function OM(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function aq(e,t){let n=null,r;const s=lo(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(a||t(),!h||!p)return;const m=Hh(d),g=Hh(s.clientWidth-(u+h)),v=Hh(s.clientHeight-(d+p)),x=Hh(u),b={rootMargin:-m+"px "+-g+"px "+-v+"px "+-x+"px",threshold:yr(0,Ki(1,l))||1};let S=!0;function C(E){const k=E[0].intersectionRatio;if(k!==l){if(!S)return i();k?i(!1,k):r=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!OM(c,e.getBoundingClientRect())&&i(),S=!1}try{n=new IntersectionObserver(C,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,b)}n.observe(e)}return i(!0),o}function lq(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=fC(e),u=s||o?[...c?df(c):[],...df(t)]:[];u.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const d=c&&a?aq(c,n):null;let h=-1,p=null;i&&(p=new ResizeObserver(x=>{let[w]=x;w&&w.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),n()}),c&&!l&&p.observe(c),p.observe(t));let m,g=l?tl(e):null;l&&v();function v(){const x=tl(e);g&&!OM(g,x)&&n(),g=x,m=requestAnimationFrame(v)}return n(),()=>{var x;u.forEach(w=>{s&&w.removeEventListener("scroll",n),o&&w.removeEventListener("resize",n)}),d==null||d(),(x=p)==null||x.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const cq=z9,uq=U9,dq=L9,fq=V9,hq=F9,XN=$9,pq=H9,mq=(e,t,n)=>{const r=new Map,s={platform:iq,...n},o={...s.platform,_c:r};return D9(e,t,{...s,platform:o})};var Hp=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Wm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Wm(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!Wm(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function MM(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function QN(e,t){const n=MM(e);return Math.round(t*n)/n}function B0(e){const t=y.useRef(e);return Hp(()=>{t.current=e}),t}function gq(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=y.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=y.useState(r);Wm(h,r)||p(r);const[m,g]=y.useState(null),[v,x]=y.useState(null),w=y.useCallback(j=>{j!==E.current&&(E.current=j,g(j))},[]),b=y.useCallback(j=>{j!==k.current&&(k.current=j,x(j))},[]),S=o||m,C=i||v,E=y.useRef(null),k=y.useRef(null),N=y.useRef(u),P=l!=null,T=B0(l),R=B0(s),L=B0(c),z=y.useCallback(()=>{if(!E.current||!k.current)return;const j={placement:t,strategy:n,middleware:h};R.current&&(j.platform=R.current),mq(E.current,k.current,j).then(A=>{const $={...A,isPositioned:L.current!==!1};_.current&&!Wm(N.current,$)&&(N.current=$,Kr.flushSync(()=>{d($)}))})},[h,t,n,R,L]);Hp(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(j=>({...j,isPositioned:!1})))},[c]);const _=y.useRef(!1);Hp(()=>(_.current=!0,()=>{_.current=!1}),[]),Hp(()=>{if(S&&(E.current=S),C&&(k.current=C),S&&C){if(T.current)return T.current(S,C,z);z()}},[S,C,z,T,P]);const D=y.useMemo(()=>({reference:E,floating:k,setReference:w,setFloating:b}),[w,b]),O=y.useMemo(()=>({reference:S,floating:C}),[S,C]),F=y.useMemo(()=>{const j={position:n,left:0,top:0};if(!O.floating)return j;const A=QN(O.floating,u.x),$=QN(O.floating,u.y);return a?{...j,transform:"translate("+A+"px, "+$+"px)",...MM(O.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:A,top:$}},[n,a,O.floating,u.x,u.y]);return y.useMemo(()=>({...u,update:z,refs:D,elements:O,floatingStyles:F}),[u,z,D,O,F])}const yq=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?XN({element:r.current,padding:s}).fn(n):{}:r?XN({element:r,padding:s}).fn(n):{}}}},vq=(e,t)=>({...cq(e),options:[e,t]}),xq=(e,t)=>({...uq(e),options:[e,t]}),wq=(e,t)=>({...pq(e),options:[e,t]}),bq=(e,t)=>({...dq(e),options:[e,t]}),Sq=(e,t)=>({...fq(e),options:[e,t]}),Cq=(e,t)=>({...hq(e),options:[e,t]}),Eq=(e,t)=>({...yq(e),options:[e,t]});var kq="Arrow",IM=y.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return f.jsx(ct.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});IM.displayName=kq;var _q=IM;function Nq(e){const[t,n]=y.useState(void 0);return el(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var pC="Popper",[DM,$M]=oa(pC),[Pq,LM]=DM(pC),FM=e=>{const{__scopePopper:t,children:n}=e,[r,s]=y.useState(null);return f.jsx(Pq,{scope:t,anchor:r,onAnchorChange:s,children:n})};FM.displayName=pC;var BM="PopperAnchor",zM=y.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=LM(BM,n),i=y.useRef(null),a=Ut(t,i);return y.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:f.jsx(ct.div,{...s,ref:a})});zM.displayName=BM;var mC="PopperContent",[Aq,Tq]=DM(mC),UM=y.forwardRef((e,t)=>{var Z,ae,se,re,De,me;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=e,v=LM(mC,n),[x,w]=y.useState(null),b=Ut(t,Ce=>w(Ce)),[S,C]=y.useState(null),E=Nq(S),k=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,P=r+(o!=="center"?"-"+o:""),T=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(c)?c:[c],L=R.length>0,z={padding:T,boundary:R.filter(jq),altBoundary:L},{refs:_,floatingStyles:D,placement:O,isPositioned:F,middlewareData:j}=gq({strategy:"fixed",placement:P,whileElementsMounted:(...Ce)=>lq(...Ce,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[vq({mainAxis:s+N,alignmentAxis:i}),l&&xq({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?wq():void 0,...z}),l&&bq({...z}),Sq({...z,apply:({elements:Ce,rects:U,availableWidth:q,availableHeight:he})=>{const{width:fe,height:Q}=U.reference,Ae=Ce.floating.style;Ae.setProperty("--radix-popper-available-width",`${q}px`),Ae.setProperty("--radix-popper-available-height",`${he}px`),Ae.setProperty("--radix-popper-anchor-width",`${fe}px`),Ae.setProperty("--radix-popper-anchor-height",`${Q}px`)}}),S&&Eq({element:S,padding:a}),Oq({arrowWidth:k,arrowHeight:N}),h&&Cq({strategy:"referenceHidden",...z})]}),[A,$]=WM(O),B=Ps(m);el(()=>{F&&(B==null||B())},[F,B]);const I=(Z=j.arrow)==null?void 0:Z.x,H=(ae=j.arrow)==null?void 0:ae.y,V=((se=j.arrow)==null?void 0:se.centerOffset)!==0,[W,Y]=y.useState();return el(()=>{x&&Y(window.getComputedStyle(x).zIndex)},[x]),f.jsx("div",{ref:_.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:F?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[(re=j.transformOrigin)==null?void 0:re.x,(De=j.transformOrigin)==null?void 0:De.y].join(" "),...((me=j.hide)==null?void 0:me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:f.jsx(Aq,{scope:n,placedSide:A,onArrowChange:C,arrowX:I,arrowY:H,shouldHideArrow:V,children:f.jsx(ct.div,{"data-side":A,"data-align":$,...g,ref:b,style:{...g.style,animation:F?void 0:"none"}})})})});UM.displayName=mC;var HM="PopperArrow",Rq={top:"bottom",right:"left",bottom:"top",left:"right"},VM=y.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=Tq(HM,r),i=Rq[o.placedSide];return f.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:f.jsx(_q,{...s,ref:n,style:{...s.style,display:"block"}})})});VM.displayName=HM;function jq(e){return e!==null}var Oq=e=>({name:"transformOrigin",options:e,fn(t){var v,x,w;const{placement:n,rects:r,middlewareData:s}=t,i=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[c,u]=WM(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,p=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let m="",g="";return c==="bottom"?(m=i?d:`${h}px`,g=`${-l}px`):c==="top"?(m=i?d:`${h}px`,g=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=i?d:`${p}px`):c==="left"&&(m=`${r.floating.width+l}px`,g=i?d:`${p}px`),{data:{x:m,y:g}}}});function WM(e){const[t,n="center"]=e.split("-");return[t,n]}var Mq=FM,Iq=zM,Dq=UM,$q=VM,Lq="Portal",gC=y.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[s,o]=y.useState(!1);el(()=>o(!0),[]);const i=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?US.createPortal(f.jsx(ct.div,{...r,ref:t}),i):null});gC.displayName=Lq;function Fq(e,t){return y.useReducer((n,r)=>t[n][r]??n,e)}var Wo=e=>{const{present:t,children:n}=e,r=Bq(t),s=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),o=Ut(r.ref,zq(s));return typeof n=="function"||r.isPresent?y.cloneElement(s,{ref:o}):null};Wo.displayName="Presence";function Bq(e){const[t,n]=y.useState(),r=y.useRef({}),s=y.useRef(e),o=y.useRef("none"),i=e?"mounted":"unmounted",[a,l]=Fq(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const c=Vh(r.current);o.current=a==="mounted"?c:"none"},[a]),el(()=>{const c=r.current,u=s.current;if(u!==e){const h=o.current,p=Vh(c);e?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),el(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=p=>{const g=Vh(r.current).includes(p.animationName);if(p.target===t&&g&&(l("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=p=>{p.target===t&&(o.current=Vh(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Vh(e){return(e==null?void 0:e.animationName)||"none"}function zq(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var z0="rovingFocusGroup.onEntryFocus",Uq={bubbles:!1,cancelable:!0},Ly="RovingFocusGroup",[kb,qM,Hq]=wM(Ly),[Vq,Fy]=oa(Ly,[Hq]),[Wq,qq]=Vq(Ly),GM=y.forwardRef((e,t)=>f.jsx(kb.Provider,{scope:e.__scopeRovingFocusGroup,children:f.jsx(kb.Slot,{scope:e.__scopeRovingFocusGroup,children:f.jsx(Gq,{...e,ref:t})})}));GM.displayName=Ly;var Gq=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,h=y.useRef(null),p=Ut(t,h),m=sC(o),[g=null,v]=My({prop:i,defaultProp:a,onChange:l}),[x,w]=y.useState(!1),b=Ps(c),S=qM(n),C=y.useRef(!1),[E,k]=y.useState(0);return y.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(z0,b),()=>N.removeEventListener(z0,b)},[b]),f.jsx(Wq,{scope:n,orientation:r,dir:m,loop:s,currentTabStopId:g,onItemFocus:y.useCallback(N=>v(N),[v]),onItemShiftTab:y.useCallback(()=>w(!0),[]),onFocusableItemAdd:y.useCallback(()=>k(N=>N+1),[]),onFocusableItemRemove:y.useCallback(()=>k(N=>N-1),[]),children:f.jsx(ct.div,{tabIndex:x||E===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:Ne(e.onMouseDown,()=>{C.current=!0}),onFocus:Ne(e.onFocus,N=>{const P=!C.current;if(N.target===N.currentTarget&&P&&!x){const T=new CustomEvent(z0,Uq);if(N.currentTarget.dispatchEvent(T),!T.defaultPrevented){const R=S().filter(O=>O.focusable),L=R.find(O=>O.active),z=R.find(O=>O.id===g),D=[L,z,...R].filter(Boolean).map(O=>O.ref.current);YM(D,u)}}C.current=!1}),onBlur:Ne(e.onBlur,()=>w(!1))})})}),KM="RovingFocusGroupItem",JM=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,...i}=e,a=Ba(),l=o||a,c=qq(KM,n),u=c.currentTabStopId===l,d=qM(n),{onFocusableItemAdd:h,onFocusableItemRemove:p}=c;return y.useEffect(()=>{if(r)return h(),()=>p()},[r,h,p]),f.jsx(kb.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:f.jsx(ct.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...i,ref:t,onMouseDown:Ne(e.onMouseDown,m=>{r?c.onItemFocus(l):m.preventDefault()}),onFocus:Ne(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:Ne(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const g=Yq(m,c.orientation,c.dir);if(g!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let x=d().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")x.reverse();else if(g==="prev"||g==="next"){g==="prev"&&x.reverse();const w=x.indexOf(m.currentTarget);x=c.loop?Xq(x,w+1):x.slice(w+1)}setTimeout(()=>YM(x))}})})})});JM.displayName=KM;var Kq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Jq(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Yq(e,t,n){const r=Jq(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Kq[r]}function YM(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Xq(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var XM=GM,QM=JM,Qq=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Cl=new WeakMap,Wh=new WeakMap,qh={},U0=0,ZM=function(e){return e&&(e.host||ZM(e.parentNode))},Zq=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=ZM(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},eG=function(e,t,n,r){var s=Zq(t,Array.isArray(e)?e:[e]);qh[n]||(qh[n]=new WeakMap);var o=qh[n],i=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var p=h.getAttribute(r),m=p!==null&&p!=="false",g=(Cl.get(h)||0)+1,v=(o.get(h)||0)+1;Cl.set(h,g),o.set(h,v),i.push(h),g===1&&m&&Wh.set(h,!0),v===1&&h.setAttribute(n,"true"),m||h.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return u(t),a.clear(),U0++,function(){i.forEach(function(d){var h=Cl.get(d)-1,p=o.get(d)-1;Cl.set(d,h),o.set(d,p),h||(Wh.has(d)||d.removeAttribute(r),Wh.delete(d)),p||d.removeAttribute(n)}),U0--,U0||(Cl=new WeakMap,Cl=new WeakMap,Wh=new WeakMap,qh={})}},eI=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=Qq(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),eG(r,s,n,"aria-hidden")):function(){return null}},Js=function(){return Js=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Js.apply(this,arguments)};function tI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function tG(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Vp="right-scroll-bar-position",Wp="width-before-scroll-bar",nG="with-scroll-bars-hidden",rG="--removed-body-scroll-bar-size";function H0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function sG(e,t){var n=y.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var oG=typeof window<"u"?y.useLayoutEffect:y.useEffect,ZN=new WeakMap;function iG(e,t){var n=sG(null,function(r){return e.forEach(function(s){return H0(s,r)})});return oG(function(){var r=ZN.get(n);if(r){var s=new Set(r),o=new Set(e),i=n.current;s.forEach(function(a){o.has(a)||H0(a,null)}),o.forEach(function(a){s.has(a)||H0(a,i)})}ZN.set(n,e)},[e]),n}function aG(e){return e}function lG(e,t){t===void 0&&(t=aG);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(o){for(r=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(o),i=n}var l=function(){var u=i;i=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){i.push(u),c()},filter:function(u){return i=i.filter(u),n}}}};return s}function cG(e){e===void 0&&(e={});var t=lG(null);return t.options=Js({async:!0,ssr:!1},e),t}var nI=function(e){var t=e.sideCar,n=tI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,Js({},n))};nI.isSideCarExport=!0;function uG(e,t){return e.useMedium(t),nI}var rI=cG(),V0=function(){},By=y.forwardRef(function(e,t){var n=y.useRef(null),r=y.useState({onScrollCapture:V0,onWheelCapture:V0,onTouchMoveCapture:V0}),s=r[0],o=r[1],i=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,p=e.noIsolation,m=e.inert,g=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,w=e.gapMode,b=tI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,C=iG([n,t]),E=Js(Js({},b),s);return y.createElement(y.Fragment,null,u&&y.createElement(S,{sideCar:rI,removeScrollBar:c,shards:d,noIsolation:p,inert:m,setCallbacks:o,allowPinchZoom:!!g,lockRef:n,gapMode:w}),i?y.cloneElement(y.Children.only(a),Js(Js({},E),{ref:C})):y.createElement(x,Js({},E,{className:l,ref:C}),a))});By.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};By.classNames={fullWidth:Wp,zeroRight:Vp};var dG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fG(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=dG();return t&&e.setAttribute("nonce",t),e}function hG(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function pG(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var mG=function(){var e=0,t=null;return{add:function(n){e==0&&(t=fG())&&(hG(t,n),pG(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},gG=function(){var e=mG();return function(t,n){y.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},sI=function(){var e=gG(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},yG={left:0,top:0,right:0,gap:0},W0=function(e){return parseInt(e||"",10)||0},vG=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[W0(n),W0(r),W0(s)]},xG=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return yG;var t=vG(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},wG=sI(),hc="data-scroll-locked",bG=function(e,t,n,r){var s=e.left,o=e.top,i=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(nG,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(hc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Vp,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Wp,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Vp," .").concat(Vp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Wp," .").concat(Wp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hc,`] {
    `).concat(rG,": ").concat(a,`px;
  }
`)},eP=function(){var e=parseInt(document.body.getAttribute(hc)||"0",10);return isFinite(e)?e:0},SG=function(){y.useEffect(function(){return document.body.setAttribute(hc,(eP()+1).toString()),function(){var e=eP()-1;e<=0?document.body.removeAttribute(hc):document.body.setAttribute(hc,e.toString())}},[])},CG=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;SG();var o=y.useMemo(function(){return xG(s)},[s]);return y.createElement(wG,{styles:bG(o,!t,s,n?"":"!important")})},_b=!1;if(typeof window<"u")try{var Gh=Object.defineProperty({},"passive",{get:function(){return _b=!0,!0}});window.addEventListener("test",Gh,Gh),window.removeEventListener("test",Gh,Gh)}catch{_b=!1}var El=_b?{passive:!1}:!1,EG=function(e){return e.tagName==="TEXTAREA"},oI=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!EG(e)&&n[t]==="visible")},kG=function(e){return oI(e,"overflowY")},_G=function(e){return oI(e,"overflowX")},tP=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=iI(e,r);if(s){var o=aI(e,r),i=o[1],a=o[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},NG=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},PG=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},iI=function(e,t){return e==="v"?kG(t):_G(t)},aI=function(e,t){return e==="v"?NG(t):PG(t)},AG=function(e,t){return e==="h"&&t==="rtl"?-1:1},TG=function(e,t,n,r,s){var o=AG(e,window.getComputedStyle(t).direction),i=o*r,a=n.target,l=t.contains(a),c=!1,u=i>0,d=0,h=0;do{var p=aI(e,a),m=p[0],g=p[1],v=p[2],x=g-v-o*m;(m||x)&&iI(e,a)&&(d+=x,h+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&(Math.abs(d)<1||!s)||!u&&(Math.abs(h)<1||!s))&&(c=!0),c},Kh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},nP=function(e){return[e.deltaX,e.deltaY]},rP=function(e){return e&&"current"in e?e.current:e},RG=function(e,t){return e[0]===t[0]&&e[1]===t[1]},jG=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},OG=0,kl=[];function MG(e){var t=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),s=y.useState(OG++)[0],o=y.useState(sI)[0],i=y.useRef(e);y.useEffect(function(){i.current=e},[e]),y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=tG([e.lockRef.current],(e.shards||[]).map(rP),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var a=y.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var x=Kh(g),w=n.current,b="deltaX"in g?g.deltaX:w[0]-x[0],S="deltaY"in g?g.deltaY:w[1]-x[1],C,E=g.target,k=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in g&&k==="h"&&E.type==="range")return!1;var N=tP(k,E);if(!N)return!0;if(N?C=k:(C=k==="v"?"h":"v",N=tP(k,E)),!N)return!1;if(!r.current&&"changedTouches"in g&&(b||S)&&(r.current=C),!C)return!0;var P=r.current||C;return TG(P,v,g,P==="h"?b:S,!0)},[]),l=y.useCallback(function(g){var v=g;if(!(!kl.length||kl[kl.length-1]!==o)){var x="deltaY"in v?nP(v):Kh(v),w=t.current.filter(function(C){return C.name===v.type&&(C.target===v.target||v.target===C.shadowParent)&&RG(C.delta,x)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var b=(i.current.shards||[]).map(rP).filter(Boolean).filter(function(C){return C.contains(v.target)}),S=b.length>0?a(v,b[0]):!i.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),c=y.useCallback(function(g,v,x,w){var b={name:g,delta:v,target:x,should:w,shadowParent:IG(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(S){return S!==b})},1)},[]),u=y.useCallback(function(g){n.current=Kh(g),r.current=void 0},[]),d=y.useCallback(function(g){c(g.type,nP(g),g.target,a(g,e.lockRef.current))},[]),h=y.useCallback(function(g){c(g.type,Kh(g),g.target,a(g,e.lockRef.current))},[]);y.useEffect(function(){return kl.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,El),document.addEventListener("touchmove",l,El),document.addEventListener("touchstart",u,El),function(){kl=kl.filter(function(g){return g!==o}),document.removeEventListener("wheel",l,El),document.removeEventListener("touchmove",l,El),document.removeEventListener("touchstart",u,El)}},[]);var p=e.removeScrollBar,m=e.inert;return y.createElement(y.Fragment,null,m?y.createElement(o,{styles:jG(s)}):null,p?y.createElement(CG,{gapMode:e.gapMode}):null)}function IG(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const DG=uG(rI,MG);var yC=y.forwardRef(function(e,t){return y.createElement(By,Js({},e,{ref:t,sideCar:DG}))});yC.classNames=By.classNames;var Nb=["Enter"," "],$G=["ArrowDown","PageUp","Home"],lI=["ArrowUp","PageDown","End"],LG=[...$G,...lI],FG={ltr:[...Nb,"ArrowRight"],rtl:[...Nb,"ArrowLeft"]},BG={ltr:["ArrowLeft"],rtl:["ArrowRight"]},rh="Menu",[ff,zG,UG]=wM(rh),[pl,cI]=oa(rh,[UG,$M,Fy]),zy=$M(),uI=Fy(),[HG,ml]=pl(rh),[VG,sh]=pl(rh),dI=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:o,modal:i=!0}=e,a=zy(t),[l,c]=y.useState(null),u=y.useRef(!1),d=Ps(o),h=sC(s);return y.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),f.jsx(Mq,{...a,children:f.jsx(HG,{scope:t,open:n,onOpenChange:d,content:l,onContentChange:c,children:f.jsx(VG,{scope:t,onClose:y.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:i,children:r})})})};dI.displayName=rh;var WG="MenuAnchor",vC=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=zy(n);return f.jsx(Iq,{...s,...r,ref:t})});vC.displayName=WG;var xC="MenuPortal",[qG,fI]=pl(xC,{forceMount:void 0}),hI=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,o=ml(xC,t);return f.jsx(qG,{scope:t,forceMount:n,children:f.jsx(Wo,{present:n||o.open,children:f.jsx(gC,{asChild:!0,container:s,children:r})})})};hI.displayName=xC;var Zr="MenuContent",[GG,wC]=pl(Zr),pI=y.forwardRef((e,t)=>{const n=fI(Zr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=ml(Zr,e.__scopeMenu),i=sh(Zr,e.__scopeMenu);return f.jsx(ff.Provider,{scope:e.__scopeMenu,children:f.jsx(Wo,{present:r||o.open,children:f.jsx(ff.Slot,{scope:e.__scopeMenu,children:i.modal?f.jsx(KG,{...s,ref:t}):f.jsx(JG,{...s,ref:t})})})})}),KG=y.forwardRef((e,t)=>{const n=ml(Zr,e.__scopeMenu),r=y.useRef(null),s=Ut(t,r);return y.useEffect(()=>{const o=r.current;if(o)return eI(o)},[]),f.jsx(bC,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ne(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),JG=y.forwardRef((e,t)=>{const n=ml(Zr,e.__scopeMenu);return f.jsx(bC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),bC=y.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,disableOutsideScroll:m,...g}=e,v=ml(Zr,n),x=sh(Zr,n),w=zy(n),b=uI(n),S=zG(n),[C,E]=y.useState(null),k=y.useRef(null),N=Ut(t,k,v.onContentChange),P=y.useRef(0),T=y.useRef(""),R=y.useRef(0),L=y.useRef(null),z=y.useRef("right"),_=y.useRef(0),D=m?yC:y.Fragment,O=m?{as:Za,allowPinchZoom:!0}:void 0,F=A=>{var Z,ae;const $=T.current+A,B=S().filter(se=>!se.disabled),I=document.activeElement,H=(Z=B.find(se=>se.ref.current===I))==null?void 0:Z.textValue,V=B.map(se=>se.textValue),W=aK(V,$,H),Y=(ae=B.find(se=>se.textValue===W))==null?void 0:ae.ref.current;(function se(re){T.current=re,window.clearTimeout(P.current),re!==""&&(P.current=window.setTimeout(()=>se(""),1e3))})($),Y&&setTimeout(()=>Y.focus())};y.useEffect(()=>()=>window.clearTimeout(P.current),[]),CM();const j=y.useCallback(A=>{var B,I;return z.current===((B=L.current)==null?void 0:B.side)&&cK(A,(I=L.current)==null?void 0:I.area)},[]);return f.jsx(GG,{scope:n,searchRef:T,onItemEnter:y.useCallback(A=>{j(A)&&A.preventDefault()},[j]),onItemLeave:y.useCallback(A=>{var $;j(A)||(($=k.current)==null||$.focus(),E(null))},[j]),onTriggerLeave:y.useCallback(A=>{j(A)&&A.preventDefault()},[j]),pointerGraceTimerRef:R,onPointerGraceIntentChange:y.useCallback(A=>{L.current=A},[]),children:f.jsx(D,{...O,children:f.jsx(iC,{asChild:!0,trapped:s,onMountAutoFocus:Ne(o,A=>{var $;A.preventDefault(),($=k.current)==null||$.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:f.jsx(oC,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,children:f.jsx(XM,{asChild:!0,...b,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:E,onEntryFocus:Ne(l,A=>{x.isUsingKeyboardRef.current||A.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(Dq,{role:"menu","aria-orientation":"vertical","data-state":TI(v.open),"data-radix-menu-content":"",dir:x.dir,...w,...g,ref:N,style:{outline:"none",...g.style},onKeyDown:Ne(g.onKeyDown,A=>{const B=A.target.closest("[data-radix-menu-content]")===A.currentTarget,I=A.ctrlKey||A.altKey||A.metaKey,H=A.key.length===1;B&&(A.key==="Tab"&&A.preventDefault(),!I&&H&&F(A.key));const V=k.current;if(A.target!==V||!LG.includes(A.key))return;A.preventDefault();const Y=S().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);lI.includes(A.key)&&Y.reverse(),oK(Y)}),onBlur:Ne(e.onBlur,A=>{A.currentTarget.contains(A.target)||(window.clearTimeout(P.current),T.current="")}),onPointerMove:Ne(e.onPointerMove,hf(A=>{const $=A.target,B=_.current!==A.clientX;if(A.currentTarget.contains($)&&B){const I=A.clientX>_.current?"right":"left";z.current=I,_.current=A.clientX}}))})})})})})})});pI.displayName=Zr;var YG="MenuGroup",SC=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return f.jsx(ct.div,{role:"group",...r,ref:t})});SC.displayName=YG;var XG="MenuLabel",mI=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return f.jsx(ct.div,{...r,ref:t})});mI.displayName=XG;var qm="MenuItem",sP="menu.itemSelect",Uy=y.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,o=y.useRef(null),i=sh(qm,e.__scopeMenu),a=wC(qm,e.__scopeMenu),l=Ut(t,o),c=y.useRef(!1),u=()=>{const d=o.current;if(!n&&d){const h=new CustomEvent(sP,{bubbles:!0,cancelable:!0});d.addEventListener(sP,p=>r==null?void 0:r(p),{once:!0}),xM(d,h),h.defaultPrevented?c.current=!1:i.onClose()}};return f.jsx(gI,{...s,ref:l,disabled:n,onClick:Ne(e.onClick,u),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),c.current=!0},onPointerUp:Ne(e.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:Ne(e.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||Nb.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Uy.displayName=qm;var gI=y.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=e,i=wC(qm,n),a=uI(n),l=y.useRef(null),c=Ut(t,l),[u,d]=y.useState(!1),[h,p]=y.useState("");return y.useEffect(()=>{const m=l.current;m&&p((m.textContent??"").trim())},[o.children]),f.jsx(ff.ItemSlot,{scope:n,disabled:r,textValue:s??h,children:f.jsx(QM,{asChild:!0,...a,focusable:!r,children:f.jsx(ct.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:c,onPointerMove:Ne(e.onPointerMove,hf(m=>{r?i.onItemLeave(m):(i.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ne(e.onPointerLeave,hf(m=>i.onItemLeave(m))),onFocus:Ne(e.onFocus,()=>d(!0)),onBlur:Ne(e.onBlur,()=>d(!1))})})})}),QG="MenuCheckboxItem",yI=y.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return f.jsx(SI,{scope:e.__scopeMenu,checked:n,children:f.jsx(Uy,{role:"menuitemcheckbox","aria-checked":Gm(n)?"mixed":n,...s,ref:t,"data-state":EC(n),onSelect:Ne(s.onSelect,()=>r==null?void 0:r(Gm(n)?!0:!n),{checkForDefaultPrevented:!1})})})});yI.displayName=QG;var vI="MenuRadioGroup",[ZG,eK]=pl(vI,{value:void 0,onValueChange:()=>{}}),xI=y.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,o=Ps(r);return f.jsx(ZG,{scope:e.__scopeMenu,value:n,onValueChange:o,children:f.jsx(SC,{...s,ref:t})})});xI.displayName=vI;var wI="MenuRadioItem",bI=y.forwardRef((e,t)=>{const{value:n,...r}=e,s=eK(wI,e.__scopeMenu),o=n===s.value;return f.jsx(SI,{scope:e.__scopeMenu,checked:o,children:f.jsx(Uy,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":EC(o),onSelect:Ne(r.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,n)},{checkForDefaultPrevented:!1})})})});bI.displayName=wI;var CC="MenuItemIndicator",[SI,tK]=pl(CC,{checked:!1}),CI=y.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,o=tK(CC,n);return f.jsx(Wo,{present:r||Gm(o.checked)||o.checked===!0,children:f.jsx(ct.span,{...s,ref:t,"data-state":EC(o.checked)})})});CI.displayName=CC;var nK="MenuSeparator",EI=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return f.jsx(ct.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});EI.displayName=nK;var rK="MenuArrow",kI=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=zy(n);return f.jsx($q,{...s,...r,ref:t})});kI.displayName=rK;var sK="MenuSub",[n0e,_I]=pl(sK),ed="MenuSubTrigger",NI=y.forwardRef((e,t)=>{const n=ml(ed,e.__scopeMenu),r=sh(ed,e.__scopeMenu),s=_I(ed,e.__scopeMenu),o=wC(ed,e.__scopeMenu),i=y.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=o,c={__scopeMenu:e.__scopeMenu},u=y.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return y.useEffect(()=>u,[u]),y.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),f.jsx(vC,{asChild:!0,...c,children:f.jsx(gI,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":TI(n.open),...e,ref:Oy(t,s.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ne(e.onPointerMove,hf(d=>{o.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Ne(e.onPointerLeave,hf(d=>{var p,m;u();const h=(p=n.content)==null?void 0:p.getBoundingClientRect();if(h){const g=(m=n.content)==null?void 0:m.dataset.side,v=g==="right",x=v?-5:5,w=h[v?"left":"right"],b=h[v?"right":"left"];o.onPointerGraceIntentChange({area:[{x:d.clientX+x,y:d.clientY},{x:w,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:w,y:h.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(d),d.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Ne(e.onKeyDown,d=>{var p;const h=o.searchRef.current!=="";e.disabled||h&&d.key===" "||FG[r.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});NI.displayName=ed;var PI="MenuSubContent",AI=y.forwardRef((e,t)=>{const n=fI(Zr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=ml(Zr,e.__scopeMenu),i=sh(Zr,e.__scopeMenu),a=_I(PI,e.__scopeMenu),l=y.useRef(null),c=Ut(t,l);return f.jsx(ff.Provider,{scope:e.__scopeMenu,children:f.jsx(Wo,{present:r||o.open,children:f.jsx(ff.Slot,{scope:e.__scopeMenu,children:f.jsx(bC,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Ne(e.onFocusOutside,u=>{u.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Ne(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:Ne(e.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),h=BG[i.dir].includes(u.key);d&&h&&(o.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});AI.displayName=PI;function TI(e){return e?"open":"closed"}function Gm(e){return e==="indeterminate"}function EC(e){return Gm(e)?"indeterminate":e?"checked":"unchecked"}function oK(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function iK(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function aK(e,t,n){const s=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=iK(e,Math.max(o,0));s.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function lK(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const a=t[o].x,l=t[o].y,c=t[i].x,u=t[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function cK(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return lK(n,t)}function hf(e){return t=>t.pointerType==="mouse"?e(t):void 0}var uK=dI,dK=vC,fK=hI,hK=pI,pK=SC,mK=mI,gK=Uy,yK=yI,vK=xI,xK=bI,wK=CI,bK=EI,SK=kI,CK=NI,EK=AI,kC="DropdownMenu",[kK,r0e]=oa(kC,[cI]),Gn=cI(),[_K,RI]=kK(kC),jI=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:i,modal:a=!0}=e,l=Gn(t),c=y.useRef(null),[u=!1,d]=My({prop:s,defaultProp:o,onChange:i});return f.jsx(_K,{scope:t,triggerId:Ba(),triggerRef:c,contentId:Ba(),open:u,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(h=>!h),[d]),modal:a,children:f.jsx(uK,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};jI.displayName=kC;var OI="DropdownMenuTrigger",MI=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,o=RI(OI,n),i=Gn(n);return f.jsx(dK,{asChild:!0,...i,children:f.jsx(ct.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Oy(t,o.triggerRef),onPointerDown:Ne(e.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:Ne(e.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});MI.displayName=OI;var NK="DropdownMenuPortal",II=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Gn(t);return f.jsx(fK,{...r,...n})};II.displayName=NK;var DI="DropdownMenuContent",$I=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=RI(DI,n),o=Gn(n),i=y.useRef(!1);return f.jsx(hK,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:t,onCloseAutoFocus:Ne(e.onCloseAutoFocus,a=>{var l;i.current||(l=s.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:Ne(e.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});$I.displayName=DI;var PK="DropdownMenuGroup",AK=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Gn(n);return f.jsx(pK,{...s,...r,ref:t})});AK.displayName=PK;var TK="DropdownMenuLabel",LI=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Gn(n);return f.jsx(mK,{...s,...r,ref:t})});LI.displayName=TK;var RK="DropdownMenuItem",FI=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Gn(n);return f.jsx(gK,{...s,...r,ref:t})});FI.displayName=RK;var jK="DropdownMenuCheckboxItem",BI=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Gn(n);return f.jsx(yK,{...s,...r,ref:t})});BI.displayName=jK;var OK="DropdownMenuRadioGroup",MK=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Gn(n);return f.jsx(vK,{...s,...r,ref:t})});MK.displayName=OK;var IK="DropdownMenuRadioItem",zI=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Gn(n);return f.jsx(xK,{...s,...r,ref:t})});zI.displayName=IK;var DK="DropdownMenuItemIndicator",UI=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Gn(n);return f.jsx(wK,{...s,...r,ref:t})});UI.displayName=DK;var $K="DropdownMenuSeparator",HI=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Gn(n);return f.jsx(bK,{...s,...r,ref:t})});HI.displayName=$K;var LK="DropdownMenuArrow",FK=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Gn(n);return f.jsx(SK,{...s,...r,ref:t})});FK.displayName=LK;var BK="DropdownMenuSubTrigger",VI=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Gn(n);return f.jsx(CK,{...s,...r,ref:t})});VI.displayName=BK;var zK="DropdownMenuSubContent",WI=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Gn(n);return f.jsx(EK,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});WI.displayName=zK;var UK=jI,HK=MI,VK=II,qI=$I,GI=LI,KI=FI,JI=BI,YI=zI,XI=UI,QI=HI,ZI=VI,eD=WI;const Km=UK,Jm=HK,WK=y.forwardRef(({className:e,inset:t,children:n,...r},s)=>f.jsxs(ZI,{ref:s,className:Le("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,f.jsx(VW,{className:"ml-auto h-4 w-4"})]}));WK.displayName=ZI.displayName;const qK=y.forwardRef(({className:e,...t},n)=>f.jsx(eD,{ref:n,className:Le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));qK.displayName=eD.displayName;const pf=y.forwardRef(({className:e,sideOffset:t=4,...n},r)=>f.jsx(VK,{children:f.jsx(qI,{ref:r,sideOffset:t,className:Le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-white p-1 text-gray-700 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));pf.displayName=qI.displayName;const Ys=y.forwardRef(({className:e,inset:t,...n},r)=>f.jsx(KI,{ref:r,className:Le("relative flex cursor-pointer select-none items-center rounded-lg px-3 py-2 text-sm outline-none transition-colors hover:bg-gray-100 focus:bg-gray-100 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Ys.displayName=KI.displayName;const Pb=y.forwardRef(({className:e,children:t,checked:n,...r},s)=>f.jsxs(JI,{ref:s,className:Le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(XI,{children:f.jsx(ks,{className:"h-4 w-4"})})}),t]}));Pb.displayName=JI.displayName;const GK=y.forwardRef(({className:e,children:t,...n},r)=>f.jsxs(YI,{ref:r,className:Le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(XI,{children:f.jsx(qW,{className:"h-2 w-2 fill-current"})})}),t]}));GK.displayName=YI.displayName;const KK=y.forwardRef(({className:e,inset:t,...n},r)=>f.jsx(GI,{ref:r,className:Le("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));KK.displayName=GI.displayName;const Ab=y.forwardRef(({className:e,...t},n)=>f.jsx(QI,{ref:n,className:Le("-mx-1 my-1 h-px bg-muted",e),...t}));Ab.displayName=QI.displayName;function JK({children:e}){const{user:t,signOut:n}=qn(),r=Vo(),s=bn(),{productSlug:o}=ao(),{currentProduct:i,loadProductBySlug:a}=ZS(),[l,c]=y.useState(""),[u,d]=y.useState(!1),[h,p]=y.useState(null),[m,g]=y.useState(!1),[v,x]=y.useState(null),[w,b]=y.useState(null),[S,C]=y.useState(null);y.useEffect(()=>{o?(C(o),!i||i.slug!==o?E():b(i.id)):i&&(C(i.slug),b(i.id))},[o,i]);const E=async()=>{if(o)try{const O=await a(o);O&&b(O.id)}catch(O){console.error("Error loading product data:",O)}},k=async()=>{try{await n()}catch(O){console.error("Error signing out:",O)}},N=async()=>{var j,A;if(p(null),g(!1),x(null),!l.trim()){p("Please enter a note before adding"),g(!0),setTimeout(()=>g(!1),5e3);return}let O=w,F=S;if(!O&&i&&(O=i.id,F=i.slug),!O||!F){p("Missing product context. Please navigate to a product page first"),g(!0),setTimeout(()=>g(!1),5e3);return}try{d(!0);const{data:$,error:B}=await G.from("notes").select("id, content").eq("product_id",O).order("created_at",{ascending:!1}).limit(1);if(B)throw p(`Error retrieving notes: ${B.message}`),g(!0),B;const I=$&&$.length>0?$[0]:null;if(I){let H=I.content;H&&(H.match(/[.!?]$/)||(H+="."),H+=`

`),H+=l;const{error:V}=await G.from("notes").update({content:H}).eq("id",I.id);if(V)throw V.code==="PGRST116"?p("You don't have permission to update this note."):(j=V.code)!=null&&j.startsWith("23")?p("Database constraint violation. Your note couldn't be saved."):p(`Error updating note: ${V.message}`),g(!0),V}else{const H=(i==null?void 0:i.name)||await P(O)||"Product",{error:V}=await G.from("notes").insert({title:`${H} Notes`,content:l,product_id:O});if(V)throw V.code==="PGRST116"?p("You don't have permission to create notes for this product."):(A=V.code)!=null&&A.startsWith("23")?p("Database constraint violation. Your note couldn't be created."):p(`Error creating note: ${V.message}`),g(!0),V}c(""),x("Note added successfully!"),setTimeout(()=>x(null),3e3)}catch($){console.error("Error adding note:",$),m||(p("An unexpected error occurred. Please try again."),g(!0),setTimeout(()=>g(!1),5e3))}finally{d(!1)}},P=async O=>{try{const{data:F,error:j}=await G.from("products").select("name").eq("id",O).single();return j||!F?null:F.name}catch(F){return console.error("Error fetching product name:",F),null}},T=()=>{S?s(`/product/${S}/notes`):i&&s(`/product/${i.slug}/notes`)},R=r.pathname.includes("/product/")&&S!=="new"||(i==null?void 0:i.slug)!==void 0,L=r.pathname.includes("/notes"),z=[{label:"Products",href:"/",icon:f.jsx(Si,{className:"w-4 h-4"})}],_=[{label:"PRD",href:`/product/${S||(i==null?void 0:i.slug)}/prd`,icon:f.jsx(Si,{className:"w-4 h-4"})},{label:"User Flows",href:`/product/${S||(i==null?void 0:i.slug)}/flows`,icon:f.jsx(iM,{className:"w-4 h-4"})},{label:"Development",href:`/product/${S||(i==null?void 0:i.slug)}/development`,icon:f.jsx(aM,{className:"w-4 h-4"})},{label:"Prompts",href:`/product/${S||(i==null?void 0:i.slug)}/prompts`,icon:f.jsx(u7,{className:"w-4 h-4"})}],D=R?_:z;return f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx("header",{className:"bg-white shadow-sm",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between items-center py-4",children:[f.jsxs("div",{className:"flex items-center gap-8",children:[f.jsx("h1",{className:"text-2xl font-bold text-brand-purple",children:f.jsx(lN,{to:"/",children:"Fluxr"})}),f.jsx("nav",{className:"flex items-center gap-1",children:D.map(O=>f.jsxs(lN,{to:O.href,className:Le("flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors",r.pathname===O.href?"bg-brand-purple text-white":"text-gray-600 hover:bg-gray-100"),children:[O.icon,O.label]},O.href))})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[R&&f.jsxs("div",{className:"flex-1 relative",children:[f.jsxs("div",{className:"flex items-center gap-2 pr-2",children:[f.jsx("input",{type:"text",value:l,onChange:O=>{c(O.target.value),h&&(p(null),g(!1))},placeholder:"Add a quick note...",className:Le("px-3 py-1 border rounded-md focus:outline-none focus:ring-1 text-sm w-60",h&&m?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-brand-purple focus:border-brand-purple")}),f.jsxs(K,{variant:"secondary",size:"sm",onClick:N,disabled:u||!l.trim(),className:"flex items-center gap-1 h-8",children:[u?f.jsx(We,{className:"w-3 h-3 animate-spin"}):f.jsx(f7,{className:"w-3 h-3"}),f.jsx("span",{children:"Add"})]}),f.jsxs(K,{variant:L?"secondary":"ghost",size:"sm",onClick:T,className:Le("flex items-center gap-1 h-8",L?"bg-brand-purple text-white":""),children:[f.jsx(v7,{className:"w-3 h-3"}),f.jsx("span",{children:"Notes"})]})]}),h&&m&&f.jsx("div",{className:"absolute top-full mt-2 right-0 bg-red-50 border border-red-300 text-red-700 px-4 py-2 rounded-md shadow-sm z-50 w-64 animate-in fade-in",children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(nr,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),f.jsx("span",{className:"text-xs",children:h})]}),f.jsx("button",{onClick:()=>g(!1),className:"text-red-500 hover:text-red-700 ml-2 flex-shrink-0",children:f.jsx(Gi,{className:"w-3 h-3"})})]})}),v&&f.jsx("div",{className:"absolute top-full mt-2 right-0 bg-green-50 border border-green-300 text-green-700 px-4 py-2 rounded-md shadow-sm z-50 w-64 animate-in fade-in",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-xs",children:v}),f.jsx("button",{onClick:()=>x(null),className:"text-green-500 hover:text-green-700 ml-2",children:f.jsx(Gi,{className:"w-3 h-3"})})]})})]}),t&&f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs(Km,{children:[f.jsx(Jm,{asChild:!0,children:f.jsxs(K,{variant:"ghost",className:"flex items-center gap-2",children:[f.jsx(jN,{className:"w-4 h-4"}),"Profile",f.jsx(zm,{className:"w-4 h-4"})]})}),f.jsxs(pf,{align:"end",children:[f.jsxs(Ys,{onClick:()=>s("/profile"),children:[f.jsx(jN,{className:"w-4 h-4 mr-2"}),"Settings"]}),f.jsxs(Ys,{onClick:k,children:[f.jsx(c7,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})})]})]})})}),f.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e}),f.jsx(o9,{})]})}const YK="Fluxr";function gl({title:e,suffix:t=!0}){const n=t?`${e} | ${YK}`:e;return f.jsx(xH,{children:f.jsx("title",{children:n})})}var _C="Dialog",[tD,nD]=oa(_C),[XK,Os]=tD(_C),rD=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!0}=e,a=y.useRef(null),l=y.useRef(null),[c=!1,u]=My({prop:r,defaultProp:s,onChange:o});return f.jsx(XK,{scope:t,triggerRef:a,contentRef:l,contentId:Ba(),titleId:Ba(),descriptionId:Ba(),open:c,onOpenChange:u,onOpenToggle:y.useCallback(()=>u(d=>!d),[u]),modal:i,children:n})};rD.displayName=_C;var sD="DialogTrigger",oD=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Os(sD,n),o=Ut(t,s.triggerRef);return f.jsx(ct.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":AC(s.open),...r,ref:o,onClick:Ne(e.onClick,s.onOpenToggle)})});oD.displayName=sD;var NC="DialogPortal",[QK,iD]=tD(NC,{forceMount:void 0}),aD=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=Os(NC,t);return f.jsx(QK,{scope:t,forceMount:n,children:y.Children.map(r,i=>f.jsx(Wo,{present:n||o.open,children:f.jsx(gC,{asChild:!0,container:s,children:i})}))})};aD.displayName=NC;var Ym="DialogOverlay",lD=y.forwardRef((e,t)=>{const n=iD(Ym,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=Os(Ym,e.__scopeDialog);return o.modal?f.jsx(Wo,{present:r||o.open,children:f.jsx(ZK,{...s,ref:t})}):null});lD.displayName=Ym;var ZK=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Os(Ym,n);return f.jsx(yC,{as:Za,allowPinchZoom:!0,shards:[s.contentRef],children:f.jsx(ct.div,{"data-state":AC(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),nl="DialogContent",cD=y.forwardRef((e,t)=>{const n=iD(nl,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=Os(nl,e.__scopeDialog);return f.jsx(Wo,{present:r||o.open,children:o.modal?f.jsx(eJ,{...s,ref:t}):f.jsx(tJ,{...s,ref:t})})});cD.displayName=nl;var eJ=y.forwardRef((e,t)=>{const n=Os(nl,e.__scopeDialog),r=y.useRef(null),s=Ut(t,n.contentRef,r);return y.useEffect(()=>{const o=r.current;if(o)return eI(o)},[]),f.jsx(uD,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ne(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Ne(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&o.preventDefault()}),onFocusOutside:Ne(e.onFocusOutside,o=>o.preventDefault())})}),tJ=y.forwardRef((e,t)=>{const n=Os(nl,e.__scopeDialog),r=y.useRef(!1),s=y.useRef(!1);return f.jsx(uD,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,a;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),uD=y.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=e,a=Os(nl,n),l=y.useRef(null),c=Ut(t,l);return CM(),f.jsxs(f.Fragment,{children:[f.jsx(iC,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:f.jsx(oC,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":AC(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(rJ,{titleId:a.titleId}),f.jsx(oJ,{contentRef:l,descriptionId:a.descriptionId})]})]})}),PC="DialogTitle",dD=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Os(PC,n);return f.jsx(ct.h2,{id:s.titleId,...r,ref:t})});dD.displayName=PC;var fD="DialogDescription",hD=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Os(fD,n);return f.jsx(ct.p,{id:s.descriptionId,...r,ref:t})});hD.displayName=fD;var pD="DialogClose",mD=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Os(pD,n);return f.jsx(ct.button,{type:"button",...r,ref:t,onClick:Ne(e.onClick,()=>s.onOpenChange(!1))})});mD.displayName=pD;function AC(e){return e?"open":"closed"}var gD="DialogTitleWarning",[nJ,yD]=i9(gD,{contentName:nl,titleName:PC,docsSlug:"dialog"}),rJ=({titleId:e})=>{const t=yD(gD),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return y.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},sJ="DialogDescriptionWarning",oJ=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yD(sJ).contentName}}.`;return y.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},vD=rD,xD=oD,wD=aD,TC=lD,RC=cD,jC=dD,OC=hD,MC=mD;const Et=vD,bD=xD,iJ=wD,SD=y.forwardRef(({className:e,...t},n)=>f.jsx(TC,{ref:n,className:Le("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));SD.displayName=TC.displayName;const yt=y.forwardRef(({className:e,children:t,...n},r)=>f.jsxs(iJ,{children:[f.jsx(SD,{}),f.jsxs(RC,{ref:r,className:Le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,f.jsxs(MC,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[f.jsx(Gi,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yt.displayName=RC.displayName;const vt=({className:e,...t})=>f.jsx("div",{className:Le("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});vt.displayName="DialogHeader";const Ht=({className:e,...t})=>f.jsx("div",{className:Le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ht.displayName="DialogFooter";const xt=y.forwardRef(({className:e,...t},n)=>f.jsx(jC,{ref:n,className:Le("text-lg font-semibold leading-none tracking-tight",e),...t}));xt.displayName=jC.displayName;const kt=y.forwardRef(({className:e,...t},n)=>f.jsx(OC,{ref:n,className:Le("text-sm text-muted-foreground",e),...t}));kt.displayName=OC.displayName;function aJ(){const e=bn(),{user:t}=qn(),{setCurrentProduct:n}=ZS(),[r,s]=y.useState([]),[o,i]=y.useState(!0),[a,l]=y.useState(null),[c,u]=y.useState(null);y.useEffect(()=>{async function p(){try{const{data:m,error:g}=await G.from("products").select("*").order("created_at",{ascending:!1});if(g)throw g;s(m||[])}catch(m){console.error("Error fetching products:",m),l("Failed to load products. Please try again.")}finally{i(!1)}}p()},[]);const d=p=>{if(!p.slug){console.error("Product slug is missing:",p);return}n(p),e(`/product/${p.slug}/prd`)},h=async()=>{if(c)try{const{error:p}=await G.from("products").delete().eq("id",c.id);if(p)throw p;s(r.filter(m=>m.id!==c.id)),u(null)}catch(p){console.error("Error deleting product:",p),l("Failed to delete product. Please try again.")}};return t?o?f.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-purple"})}):f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx(gl,{title:"Your Products"}),f.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-8",children:[f.jsxs("div",{className:"flex items-center gap-4 border-b border-gray-100 pb-4 mb-4",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Welcome to Fluxr"}),f.jsx("span",{className:"text-sm bg-brand-purple/10 text-brand-purple px-2 py-0.5 rounded-full font-medium",children:"BETA"})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 bg-brand-purple/10 rounded-lg flex items-center justify-center flex-shrink-0",children:f.jsx(QW,{className:"w-4 h-4 text-brand-purple"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Create/Upload PRD"}),f.jsx("p",{className:"text-xs text-gray-600",children:"Define your product requirements"})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 bg-brand-purple/10 rounded-lg flex items-center justify-center flex-shrink-0",children:f.jsx(iM,{className:"w-4 h-4 text-brand-purple"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Define User Flows"}),f.jsx("p",{className:"text-xs text-gray-600",children:"Map out user journeys"})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 bg-brand-purple/10 rounded-lg flex items-center justify-center flex-shrink-0",children:f.jsx(aM,{className:"w-4 h-4 text-brand-purple"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Track Development"}),f.jsx("p",{className:"text-xs text-gray-600",children:"Manage features & tasks"})]})]})]})]}),f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Products"}),f.jsxs(K,{onClick:()=>e("/product/new"),className:"flex items-center gap-2",children:[f.jsx(qi,{className:"w-4 h-4"}),"New Product"]})]}),a&&f.jsx("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg mb-6",children:a}),r.length===0?f.jsxs("div",{className:"text-center py-12",children:[f.jsx(Si,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products yet"}),f.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first product to get started with PRD generation."}),f.jsxs(K,{onClick:()=>e("/product/new"),className:"flex items-center gap-2 mx-auto",children:[f.jsx(qi,{className:"w-4 h-4"}),"Create First Product"]})]}):f.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:r.map(p=>f.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 cursor-pointer hover:text-brand-purple",onClick:()=>d(p),children:p.name}),f.jsx(K,{variant:"ghost",size:"sm",onClick:m=>{m.stopPropagation(),u(p)},className:"ml-2 hover:bg-gray-100",children:f.jsx(sa,{className:"w-4 h-4"})})]}),f.jsx("p",{className:"text-gray-600 text-sm mb-4 cursor-pointer",onClick:()=>d(p),children:p.description}),f.jsxs("div",{className:"text-sm text-gray-500",children:["Created ",new Date(p.created_at).toLocaleDateString()]})]},p.id))}),f.jsx(Et,{open:!!c,onOpenChange:()=>u(null),children:f.jsxs(yt,{children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Delete Product"}),f.jsxs(kt,{children:['Are you sure you want to delete "',c==null?void 0:c.name,'"? This action cannot be undone.']})]}),f.jsxs(Ht,{className:"flex gap-2",children:[f.jsx(K,{variant:"outline",onClick:()=>u(null),children:"Cancel"}),f.jsx(K,{variant:"destructive",onClick:h,children:"Delete"})]})]})})]}):(e("/"),null)}function lJ(){const e=bn(),t=Vo(),{user:n}=qn(),[r,s]=y.useState({name:"",description:""}),[o,i]=y.useState(!1),[a,l]=y.useState(null);M.useEffect(()=>{t.pathname!=="/product/new"&&e("/")},[t.pathname,e]);const c=d=>{const{name:h,value:p}=d.target;s(m=>({...m,[h]:p})),l(null)},u=async d=>{if(d.preventDefault(),!!n){if(!r.name.trim()){l("Product name is required");return}i(!0),l(null);try{const{data:h,error:p}=await G.rpc("create_product",{user_id:n.id,product_name:r.name,product_description:r.description});if(p)throw p;if(!h)throw new Error("No data returned from the server");const{data:m,error:g}=await G.from("products").select("slug").eq("id",h).single();if(g)throw g;if(!(m!=null&&m.slug))throw new Error("Product slug not found");e(`/product/${m.slug}/prd`)}catch(h){console.error("Error creating product:",h),l("Failed to create product. Please try again.")}finally{i(!1)}}};return f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsx(gl,{title:"Create New Product"}),f.jsxs("button",{onClick:()=>e("/"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[f.jsx(jy,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),f.jsxs("div",{className:"card",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Create New Product"}),a&&f.jsx("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg mb-6",children:a}),f.jsxs("form",{onSubmit:u,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),f.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:c,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent",placeholder:"Enter product name",disabled:o})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Description"}),f.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:c,required:!0,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent",placeholder:"Brief description of your product",disabled:o})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsx(K,{type:"submit",className:"btn-primary",disabled:o,children:o?"Creating...":"Create Product"})})]})]})]})}var cJ="Expected a function",oP=NaN,uJ="[object Symbol]",dJ=/^\s+|\s+$/g,fJ=/^[-+]0x[0-9a-f]+$/i,hJ=/^0b[01]+$/i,pJ=/^0o[0-7]+$/i,mJ=parseInt,gJ=typeof An=="object"&&An&&An.Object===Object&&An,yJ=typeof self=="object"&&self&&self.Object===Object&&self,vJ=gJ||yJ||Function("return this")(),xJ=Object.prototype,wJ=xJ.toString,bJ=Math.max,SJ=Math.min,q0=function(){return vJ.Date.now()};function CJ(e,t,n){var r,s,o,i,a,l,c=0,u=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(cJ);t=iP(t)||0,Tb(n)&&(u=!!n.leading,d="maxWait"in n,o=d?bJ(iP(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h);function p(E){var k=r,N=s;return r=s=void 0,c=E,i=e.apply(N,k),i}function m(E){return c=E,a=setTimeout(x,t),u?p(E):i}function g(E){var k=E-l,N=E-c,P=t-k;return d?SJ(P,o-N):P}function v(E){var k=E-l,N=E-c;return l===void 0||k>=t||k<0||d&&N>=o}function x(){var E=q0();if(v(E))return w(E);a=setTimeout(x,g(E))}function w(E){return a=void 0,h&&r?p(E):(r=s=void 0,i)}function b(){a!==void 0&&clearTimeout(a),c=0,r=l=s=a=void 0}function S(){return a===void 0?i:w(q0())}function C(){var E=q0(),k=v(E);if(r=arguments,s=this,l=E,k){if(a===void 0)return m(l);if(d)return a=setTimeout(x,t),p(l)}return a===void 0&&(a=setTimeout(x,t)),i}return C.cancel=b,C.flush=S,C}function Tb(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function EJ(e){return!!e&&typeof e=="object"}function kJ(e){return typeof e=="symbol"||EJ(e)&&wJ.call(e)==uJ}function iP(e){if(typeof e=="number")return e;if(kJ(e))return oP;if(Tb(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Tb(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(dJ,"");var n=hJ.test(e);return n||pJ.test(e)?mJ(e.slice(2),n?2:8):fJ.test(e)?oP:+e}var _J=CJ;const qp=zo(_J);function NJ({status:e,error:t}){return e==="saved"?f.jsxs("div",{className:"save-indicator save-indicator-saved",children:[f.jsx(ks,{className:"w-4 h-4"}),f.jsx("span",{children:"All changes saved"})]}):e==="saving"?f.jsxs("div",{className:"save-indicator save-indicator-saving",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),f.jsx("span",{children:"Saving changes..."})]}):e==="error"?f.jsxs("div",{className:"save-indicator save-indicator-error",title:t||void 0,children:[f.jsx(uM,{className:"w-4 h-4"}),f.jsx("span",{children:"Error saving changes"})]}):null}var PJ="Label",Xm=y.forwardRef((e,t)=>f.jsx(ct.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Xm.displayName=PJ;var CD=Xm;const Zt=y.forwardRef(({className:e,...t},n)=>f.jsx("textarea",{className:Le("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Zt.displayName="Textarea";const Rb="RFC3986",jb={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},AJ="RFC1738",TJ=Array.isArray,Bs=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),G0=1024,RJ=(e,t,n,r,s)=>{if(e.length===0)return e;let o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let i="";for(let a=0;a<o.length;a+=G0){const l=o.length>=G0?o.slice(a,a+G0):o,c=[];for(let u=0;u<l.length;++u){let d=l.charCodeAt(u);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||s===AJ&&(d===40||d===41)){c[c.length]=l.charAt(u);continue}if(d<128){c[c.length]=Bs[d];continue}if(d<2048){c[c.length]=Bs[192|d>>6]+Bs[128|d&63];continue}if(d<55296||d>=57344){c[c.length]=Bs[224|d>>12]+Bs[128|d>>6&63]+Bs[128|d&63];continue}u+=1,d=65536+((d&1023)<<10|l.charCodeAt(u)&1023),c[c.length]=Bs[240|d>>18]+Bs[128|d>>12&63]+Bs[128|d>>6&63]+Bs[128|d&63]}i+=c.join("")}return i};function jJ(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function aP(e,t){if(TJ(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const OJ=Object.prototype.hasOwnProperty,ED={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},qs=Array.isArray,MJ=Array.prototype.push,kD=function(e,t){MJ.apply(e,qs(t)?t:[t])},IJ=Date.prototype.toISOString,$t={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:RJ,encodeValuesOnly:!1,format:Rb,formatter:jb[Rb],indices:!1,serializeDate(e){return IJ.call(e)},skipNulls:!1,strictNullHandling:!1};function DJ(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const K0={};function _D(e,t,n,r,s,o,i,a,l,c,u,d,h,p,m,g,v,x){let w=e,b=x,S=0,C=!1;for(;(b=b.get(K0))!==void 0&&!C;){const T=b.get(e);if(S+=1,typeof T<"u"){if(T===S)throw new RangeError("Cyclic object value");C=!0}typeof b.get(K0)>"u"&&(S=0)}if(typeof c=="function"?w=c(t,w):w instanceof Date?w=h==null?void 0:h(w):n==="comma"&&qs(w)&&(w=aP(w,function(T){return T instanceof Date?h==null?void 0:h(T):T})),w===null){if(o)return l&&!g?l(t,$t.encoder,v,"key",p):t;w=""}if(DJ(w)||jJ(w)){if(l){const T=g?t:l(t,$t.encoder,v,"key",p);return[(m==null?void 0:m(T))+"="+(m==null?void 0:m(l(w,$t.encoder,v,"value",p)))]}return[(m==null?void 0:m(t))+"="+(m==null?void 0:m(String(w)))]}const E=[];if(typeof w>"u")return E;let k;if(n==="comma"&&qs(w))g&&l&&(w=aP(w,l)),k=[{value:w.length>0?w.join(",")||null:void 0}];else if(qs(c))k=c;else{const T=Object.keys(w);k=u?T.sort(u):T}const N=a?String(t).replace(/\./g,"%2E"):String(t),P=r&&qs(w)&&w.length===1?N+"[]":N;if(s&&qs(w)&&w.length===0)return P+"[]";for(let T=0;T<k.length;++T){const R=k[T],L=typeof R=="object"&&typeof R.value<"u"?R.value:w[R];if(i&&L===null)continue;const z=d&&a?R.replace(/\./g,"%2E"):R,_=qs(w)?typeof n=="function"?n(P,z):P:P+(d?"."+z:"["+z+"]");x.set(e,S);const D=new WeakMap;D.set(K0,x),kD(E,_D(L,_,n,r,s,o,i,a,n==="comma"&&g&&qs(w)?null:l,c,u,d,h,p,m,g,v,D))}return E}function $J(e=$t){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||$t.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Rb;if(typeof e.format<"u"){if(!OJ.call(jb,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=jb[n];let s=$t.filter;(typeof e.filter=="function"||qs(e.filter))&&(s=e.filter);let o;if(e.arrayFormat&&e.arrayFormat in ED?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=$t.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:$t.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:$t.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:$t.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:$t.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?$t.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:$t.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:$t.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:$t.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:$t.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:$t.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:$t.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:$t.strictNullHandling}}function LJ(e,t={}){let n=e;const r=$J(t);let s,o;typeof r.filter=="function"?(o=r.filter,n=o("",n)):qs(r.filter)&&(o=r.filter,s=o);const i=[];if(typeof n!="object"||n===null)return"";const a=ED[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const c=new WeakMap;for(let h=0;h<s.length;++h){const p=s[h];r.skipNulls&&n[p]===null||kD(i,_D(n[p],p,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const u=i.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""}const Il="4.85.4";let lP=!1,kd,ND,PD,Ob,AD,TD,RD,jD,OD;function FJ(e,t={auto:!1}){if(lP)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(kd)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${kd}'\``);lP=t.auto,kd=e.kind,ND=e.fetch,PD=e.FormData,Ob=e.File,AD=e.ReadableStream,TD=e.getMultipartRequestOptions,RD=e.getDefaultAgent,jD=e.fileFromPath,OD=e.isFsReadStream}class BJ{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function zJ({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,o;try{n=fetch,r=Request,s=Response,o=Headers}catch(i){throw new Error(`this environment is missing the following Web Fetch API type: ${i.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:o,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(i,a)=>({...a,body:new BJ(i)}),getDefaultAgent:i=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:i=>!1}}kd||FJ(zJ(),{auto:!0});let ze=class extends Error{};class xn extends ze{constructor(t,n,r,s){super(`${xn.makeMessage(t,n,r)}`),this.status=t,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"],this.error=n;const o=n;this.code=o==null?void 0:o.code,this.param=o==null?void 0:o.param,this.type=o==null?void 0:o.type}static makeMessage(t,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,r,s){if(!t||!s)return new Hy({message:r,cause:Ib(n)});const o=n==null?void 0:n.error;return t===400?new MD(t,o,r,s):t===401?new ID(t,o,r,s):t===403?new DD(t,o,r,s):t===404?new $D(t,o,r,s):t===409?new LD(t,o,r,s):t===422?new FD(t,o,r,s):t===429?new BD(t,o,r,s):t>=500?new zD(t,o,r,s):new xn(t,o,r,s)}}class ws extends xn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Hy extends xn{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class IC extends Hy{constructor({message:t}={}){super({message:t??"Request timed out."})}}class MD extends xn{}class ID extends xn{}class DD extends xn{}class $D extends xn{}class LD extends xn{}class FD extends xn{}class BD extends xn{}class zD extends xn{}class UD extends ze{constructor(){super("Could not parse response content as the length limit was reached")}}class HD extends ze{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Jh=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},pa=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},hr;class Vy{constructor(){hr.set(this,void 0),this.buffer=new Uint8Array,Jh(this,hr,null,"f")}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const s=[];let o;for(;(o=UJ(this.buffer,pa(this,hr,"f")))!=null;){if(o.carriage&&pa(this,hr,"f")==null){Jh(this,hr,o.index,"f");continue}if(pa(this,hr,"f")!=null&&(o.index!==pa(this,hr,"f")+1||o.carriage)){s.push(this.decodeText(this.buffer.slice(0,pa(this,hr,"f")-1))),this.buffer=this.buffer.slice(pa(this,hr,"f")),Jh(this,hr,null,"f");continue}const i=pa(this,hr,"f")!==null?o.preceding-1:o.preceding,a=this.decodeText(this.buffer.slice(0,i));s.push(a),this.buffer=this.buffer.slice(o.index),Jh(this,hr,null,"f")}return s}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new ze(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new ze(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new ze("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}hr=new WeakMap;Vy.NEWLINE_CHARS=new Set([`
`,"\r"]);Vy.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function UJ(e,t){for(let s=t??0;s<e.length;s++){if(e[s]===10)return{preceding:s,index:s+1,carriage:!1};if(e[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function HJ(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}function VD(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Xs{constructor(t,n){this.iterator=t,this.controller=n}static fromSSEResponse(t,n){let r=!1;async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const i of VJ(t,n))if(!o){if(i.data.startsWith("[DONE]")){o=!0;continue}if(i.event===null){let a;try{a=JSON.parse(i.data)}catch(l){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),l}if(a&&a.error)throw new xn(void 0,a.error,void 0,void 0);yield a}else{let a;try{a=JSON.parse(i.data)}catch(l){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),l}if(i.event=="error")throw new xn(void 0,a.error,a.message,void 0);yield{event:i.event,data:a}}}o=!0}catch(i){if(i instanceof Error&&i.name==="AbortError")return;throw i}finally{o||n.abort()}}return new Xs(s,n)}static fromReadableStream(t,n){let r=!1;async function*s(){const i=new Vy,a=VD(t);for await(const l of a)for(const c of i.decode(l))yield c;for(const l of i.flush())yield l}async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const a of s())i||a&&(yield JSON.parse(a));i=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{i||n.abort()}}return new Xs(o,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),s=o=>({next:()=>{if(o.length===0){const i=r.next();t.push(i),n.push(i)}return o.shift()}});return[new Xs(()=>s(t),this.controller),new Xs(()=>s(n),this.controller)]}toReadableStream(){const t=this;let n;const r=new TextEncoder;return new AD({async start(){n=t[Symbol.asyncIterator]()},async pull(s){try{const{value:o,done:i}=await n.next();if(i)return s.close();const a=r.encode(JSON.stringify(o)+`
`);s.enqueue(a)}catch(o){s.error(o)}},async cancel(){var s;await((s=n.return)==null?void 0:s.call(n))}})}}async function*VJ(e,t){if(!e.body)throw t.abort(),new ze("Attempted to iterate over a response with no body");const n=new qJ,r=new Vy,s=VD(e.body);for await(const o of WJ(s))for(const i of r.decode(o)){const a=n.decode(i);a&&(yield a)}for(const o of r.flush()){const i=n.decode(o);i&&(yield i)}}async function*WJ(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let s=new Uint8Array(t.length+r.length);s.set(t),s.set(r,t.length),t=s;let o;for(;(o=HJ(t))!==-1;)yield t.slice(0,o),t=t.slice(o)}t.length>0&&(yield t)}class qJ{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=GJ(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function GJ(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}const WD=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",qD=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Wy(e),Wy=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",KJ=e=>qD(e)||WD(e)||OD(e);async function GD(e,t,n){var s;if(e=await e,qD(e))return e;if(WD(e)){const o=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const i=Wy(o)?[await o.arrayBuffer()]:[o];return new Ob(i,t,n)}const r=await JJ(e);if(t||(t=XJ(e)??"unknown_file"),!(n!=null&&n.type)){const o=(s=r[0])==null?void 0:s.type;typeof o=="string"&&(n={...n,type:o})}return new Ob(r,t,n)}async function JJ(e){var n;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Wy(e))t.push(await e.arrayBuffer());else if(QJ(e))for await(const r of e)t.push(r);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(n=e==null?void 0:e.constructor)==null?void 0:n.name}; props: ${YJ(e)}`);return t}function YJ(e){return`[${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function XJ(e){var t;return J0(e.name)||J0(e.filename)||((t=J0(e.path))==null?void 0:t.split(/[\\/]/).pop())}const J0=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},QJ=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",cP=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",$c=async e=>{const t=await ZJ(e.body);return TD(t,e)},ZJ=async e=>{const t=new PD;return await Promise.all(Object.entries(e||{}).map(([n,r])=>Mb(t,n,r))),t},Mb=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(KJ(n)){const r=await GD(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Mb(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Mb(e,`${t}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var pc={},eY=function(e,t,n,r,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n},tY=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Yh;async function KD(e){const{response:t}=e;if(e.options.stream)return mc("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):Xs.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.includes("application/vnd.api+json"))){const o=await t.json();return mc("response",t.status,t.url,t.headers,o),JD(o,t)}const s=await t.text();return mc("response",t.status,t.url,t.headers,s),s}function JD(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class qy extends Promise{constructor(t,n=KD){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new qy(this.responsePromise,async n=>JD(t(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class nY{constructor({baseURL:t,maxRetries:n=2,timeout:r=6e5,httpAgent:s,fetch:o}){this.baseURL=t,this.maxRetries=Y0("maxRetries",n),this.timeout=Y0("timeout",r),this.httpAgent=s,this.fetch=o??ND}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...lY(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${fY()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(async s=>{const o=s&&Wy(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:t,path:n,...s,body:o}}))}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:n=0}={}){var m;t={...t};const{method:r,path:s,query:o,headers:i={}}=t,a=ArrayBuffer.isView(t.body)||t.__binaryRequest&&typeof t.body=="string"?t.body:cP(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,l=this.calculateContentLength(a),c=this.buildURL(s,o);"timeout"in t&&Y0("timeout",t.timeout),t.timeout=t.timeout??this.timeout;const u=t.httpAgent??this.httpAgent??RD(c),d=t.timeout+1e3;typeof((m=u==null?void 0:u.options)==null?void 0:m.timeout)=="number"&&d>(u.options.timeout??0)&&(u.options.timeout=d),this.idempotencyHeader&&r!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=t.idempotencyKey);const h=this.buildHeaders({options:t,headers:i,contentLength:l,retryCount:n});return{req:{method:r,...a&&{body:a},headers:h,...u&&{agent:u},signal:t.signal??null},url:c,timeout:t.timeout}}buildHeaders({options:t,headers:n,contentLength:r,retryCount:s}){const o={};r&&(o["content-length"]=r);const i=this.defaultHeaders(t);return hP(o,i),hP(o,n),cP(t.body)&&kd!=="node"&&delete o["content-type"],Qh(i,"x-stainless-retry-count")===void 0&&Qh(n,"x-stainless-retry-count")===void 0&&(o["x-stainless-retry-count"]=String(s)),Qh(i,"x-stainless-timeout")===void 0&&Qh(n,"x-stainless-timeout")===void 0&&t.timeout&&(o["x-stainless-timeout"]=String(t.timeout)),this.validateHeaders(o,n),o}async prepareOptions(t){}async prepareRequest(t,{url:n,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,r,s){return xn.generate(t,n,r,s)}request(t,n=null){return new qy(this.makeRequest(t,n))}async makeRequest(t,n){var d,h;const r=await t,s=r.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(r);const{req:o,url:i,timeout:a}=this.buildRequest(r,{retryCount:s-n});if(await this.prepareRequest(o,{url:i,options:r}),mc("request",i,r,o.headers),(d=r.signal)!=null&&d.aborted)throw new ws;const l=new AbortController,c=await this.fetchWithTimeout(i,o,a,l).catch(Ib);if(c instanceof Error){if((h=r.signal)!=null&&h.aborted)throw new ws;if(n)return this.retryRequest(r,n);throw c.name==="AbortError"?new IC:new Hy({cause:c})}const u=sY(c.headers);if(!c.ok){if(n&&this.shouldRetry(c)){const w=`retrying, ${n} attempts remaining`;return mc(`response (error; ${w})`,c.status,i,u),this.retryRequest(r,n,u)}const p=await c.text().catch(w=>Ib(w).message),m=cY(p),g=m?void 0:p;throw mc(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,c.status,i,u,g),this.makeStatusError(c.status,m,g,u)}return{response:c,options:r,controller:l}}requestAPIList(t,n){const r=this.makeRequest(n,null);return new rY(this,r,t)}buildURL(t,n){const r=dY(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return XD(s)||(n={...s,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ze(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,r,s){const{signal:o,...i}=n||{};o&&o.addEventListener("abort",()=>s.abort());const a=setTimeout(()=>s.abort(),r),l={signal:s.signal,...i};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,t,l).finally(()=>{clearTimeout(a)})}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r){let s;const o=r==null?void 0:r["retry-after-ms"];if(o){const a=parseFloat(o);Number.isNaN(a)||(s=a)}const i=r==null?void 0:r["retry-after"];if(i&&!s){const a=parseFloat(i);Number.isNaN(a)?s=Date.parse(i)-Date.now():s=a*1e3}if(!(s&&0<=s&&s<60*1e3)){const a=t.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,a)}return await oh(s),this.makeRequest(t,n-1)}calculateDefaultRetryTimeoutMillis(t,n){const o=n-t,i=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return i*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Il}`}}class YD{constructor(t,n,r,s){Yh.set(this,void 0),eY(this,Yh,t),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new ze("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in t&&typeof n.query=="object")n.query={...n.query,...t.params};else if("url"in t){const r=[...Object.entries(n.query||{}),...t.url.searchParams.entries()];for(const[s,o]of r)t.url.searchParams.set(s,o);n.query=void 0,n.path=t.url.toString()}return await tY(this,Yh,"f").requestAPIList(this.constructor,n)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(Yh=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class rY extends qy{constructor(t,n,r){super(n,async s=>new r(t,s.response,await KD(s),s.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const sY=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,n){const r=n.toString();return t[r.toLowerCase()]||t[r]}}),oY={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},jn=e=>typeof e=="object"&&e!==null&&!XD(e)&&Object.keys(e).every(t=>QD(oY,t)),iY=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Il,"X-Stainless-OS":dP(Deno.build.os),"X-Stainless-Arch":uP(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Il,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Il,"X-Stainless-OS":dP(process.platform),"X-Stainless-Arch":uP(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=aY();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Il,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Il,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function aY(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,o=r[2]||0,i=r[3]||0;return{browser:t,version:`${s}.${o}.${i}`}}}return null}const uP=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",dP=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let fP;const lY=()=>fP??(fP=iY()),cY=e=>{try{return JSON.parse(e)}catch{return}},uY=/^[a-z][a-z0-9+.-]*:/i,dY=e=>uY.test(e),oh=e=>new Promise(t=>setTimeout(t,e)),Y0=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ze(`${e} must be an integer`);if(t<0)throw new ze(`${e} must be a positive integer`);return t},Ib=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},Xh=e=>{var t,n,r,s;if(typeof process<"u")return((t=pc==null?void 0:pc[e])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(s=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,e))==null?void 0:s.trim()};function XD(e){if(!e)return!0;for(const t in e)return!1;return!0}function QD(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function hP(e,t){for(const n in t){if(!QD(t,n))continue;const r=n.toLowerCase();if(!r)continue;const s=t[n];s===null?delete e[r]:s!==void 0&&(e[r]=s)}}const pP=new Set(["authorization","api-key"]);function mc(e,...t){if(typeof process<"u"&&(pc==null?void 0:pc.DEBUG)==="true"){const n=t.map(r=>{if(!r)return r;if(r.headers){const o={...r,headers:{...r.headers}};for(const i in r.headers)pP.has(i.toLowerCase())&&(o.headers[i]="REDACTED");return o}let s=null;for(const o in r)pP.has(o.toLowerCase())&&(s??(s={...r}),s[o]="REDACTED");return s??r});console.log(`OpenAI:DEBUG:${e}`,...n)}}const fY=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),hY=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",pY=e=>typeof(e==null?void 0:e.get)=="function",Qh=(e,t)=>{var r;const n=t.toLowerCase();if(pY(e)){const s=((r=t[0])==null?void 0:r.toUpperCase())+t.substring(1).replace(/([^\w])(\w)/g,(o,i,a)=>i+a.toUpperCase());for(const o of[t,n,t.toUpperCase(),s]){const i=e.get(o);if(i)return i}}for(const[s,o]of Object.entries(e))if(s.toLowerCase()===n)return Array.isArray(o)?(o.length<=1||console.warn(`Received ${o.length} entries for the ${t} header, using the first entry.`),o[0]):o};function X0(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class mY extends YD{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Tr extends YD{constructor(t,n,r,s){super(t,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const n=Object.fromEntries(t.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const t=this.getPaginatedItems();if(!t.length)return null;const n=(r=t[t.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class Je{constructor(t){this._client=t}}let ZD=class extends Je{list(t,n={},r){return jn(n)?this.list(t,{},n):this._client.getAPIList(`/chat/completions/${t}/messages`,gY,{query:n,...r})}},Gy=class extends Je{constructor(){super(...arguments),this.messages=new ZD(this._client)}create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}retrieve(t,n){return this._client.get(`/chat/completions/${t}`,n)}update(t,n,r){return this._client.post(`/chat/completions/${t}`,{body:n,...r})}list(t={},n){return jn(t)?this.list({},t):this._client.getAPIList("/chat/completions",Ky,{query:t,...n})}del(t,n){return this._client.delete(`/chat/completions/${t}`,n)}};class Ky extends Tr{}class gY extends Tr{}Gy.ChatCompletionsPage=Ky;Gy.Messages=ZD;let Jy=class extends Je{constructor(){super(...arguments),this.completions=new Gy(this._client)}};Jy.Completions=Gy;Jy.ChatCompletionsPage=Ky;class e$ extends Je{create(t,n){return this._client.post("/audio/speech",{body:t,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class t$ extends Je{create(t,n){return this._client.post("/audio/transcriptions",$c({body:t,...n,__metadata:{model:t.model}}))}}class n$ extends Je{create(t,n){return this._client.post("/audio/translations",$c({body:t,...n,__metadata:{model:t.model}}))}}class ih extends Je{constructor(){super(...arguments),this.transcriptions=new t$(this._client),this.translations=new n$(this._client),this.speech=new e$(this._client)}}ih.Transcriptions=t$;ih.Translations=n$;ih.Speech=e$;class DC extends Je{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(`/batches/${t}`,n)}list(t={},n){return jn(t)?this.list({},t):this._client.getAPIList("/batches",$C,{query:t,...n})}cancel(t,n){return this._client.post(`/batches/${t}/cancel`,n)}}class $C extends Tr{}DC.BatchesPage=$C;class LC extends Je{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/assistants/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return jn(t)?this.list({},t):this._client.getAPIList("/assistants",FC,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class FC extends Tr{}LC.AssistantsPage=FC;function mP(e){return typeof e.parse=="function"}const gc=e=>(e==null?void 0:e.role)==="assistant",r$=e=>(e==null?void 0:e.role)==="function",s$=e=>(e==null?void 0:e.role)==="tool";var us=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},ft=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Db,Gp,Kp,td,nd,Jp,rd,xo,sd,Qm,Zm,Dl,o$;class i${constructor(){Db.add(this),this.controller=new AbortController,Gp.set(this,void 0),Kp.set(this,()=>{}),td.set(this,()=>{}),nd.set(this,void 0),Jp.set(this,()=>{}),rd.set(this,()=>{}),xo.set(this,{}),sd.set(this,!1),Qm.set(this,!1),Zm.set(this,!1),Dl.set(this,!1),us(this,Gp,new Promise((t,n)=>{us(this,Kp,t,"f"),us(this,td,n,"f")}),"f"),us(this,nd,new Promise((t,n)=>{us(this,Jp,t,"f"),us(this,rd,n,"f")}),"f"),ft(this,Gp,"f").catch(()=>{}),ft(this,nd,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},ft(this,Db,"m",o$).bind(this))},0)}_connected(){this.ended||(ft(this,Kp,"f").call(this),this._emit("connect"))}get ended(){return ft(this,sd,"f")}get errored(){return ft(this,Qm,"f")}get aborted(){return ft(this,Zm,"f")}abort(){this.controller.abort()}on(t,n){return(ft(this,xo,"f")[t]||(ft(this,xo,"f")[t]=[])).push({listener:n}),this}off(t,n){const r=ft(this,xo,"f")[t];if(!r)return this;const s=r.findIndex(o=>o.listener===n);return s>=0&&r.splice(s,1),this}once(t,n){return(ft(this,xo,"f")[t]||(ft(this,xo,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{us(this,Dl,!0,"f"),t!=="error"&&this.once("error",r),this.once(t,n)})}async done(){us(this,Dl,!0,"f"),await ft(this,nd,"f")}_emit(t,...n){if(ft(this,sd,"f"))return;t==="end"&&(us(this,sd,!0,"f"),ft(this,Jp,"f").call(this));const r=ft(this,xo,"f")[t];if(r&&(ft(this,xo,"f")[t]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),t==="abort"){const s=n[0];!ft(this,Dl,"f")&&!(r!=null&&r.length)&&Promise.reject(s),ft(this,td,"f").call(this,s),ft(this,rd,"f").call(this,s),this._emit("end");return}if(t==="error"){const s=n[0];!ft(this,Dl,"f")&&!(r!=null&&r.length)&&Promise.reject(s),ft(this,td,"f").call(this,s),ft(this,rd,"f").call(this,s),this._emit("end")}}_emitFinal(){}}Gp=new WeakMap,Kp=new WeakMap,td=new WeakMap,nd=new WeakMap,Jp=new WeakMap,rd=new WeakMap,xo=new WeakMap,sd=new WeakMap,Qm=new WeakMap,Zm=new WeakMap,Dl=new WeakMap,Db=new WeakSet,o$=function(t){if(us(this,Qm,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new ws),t instanceof ws)return us(this,Zm,!0,"f"),this._emit("abort",t);if(t instanceof ze)return this._emit("error",t);if(t instanceof Error){const n=new ze(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new ze(String(t)))};function a$(e){return(e==null?void 0:e.$brand)==="auto-parseable-response-format"}function ah(e){return(e==null?void 0:e.$brand)==="auto-parseable-tool"}function yY(e,t){return!t||!l$(t)?{...e,choices:e.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:BC(e,t)}function BC(e,t){const n=e.choices.map(r=>{var s;if(r.finish_reason==="length")throw new UD;if(r.finish_reason==="content_filter")throw new HD;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(o=>xY(t,o)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?vY(t,r.message.content):null}}});return{...e,choices:n}}function vY(e,t){var n,r;return((n=e.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=e.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function xY(e,t){var r;const n=(r=e.tools)==null?void 0:r.find(s=>{var o;return((o=s.function)==null?void 0:o.name)===t.function.name});return{...t,function:{...t.function,parsed_arguments:ah(n)?n.$parseRaw(t.function.arguments):n!=null&&n.function.strict?JSON.parse(t.function.arguments):null}}}function wY(e,t){var r;if(!e)return!1;const n=(r=e.tools)==null?void 0:r.find(s=>{var o;return((o=s.function)==null?void 0:o.name)===t.function.name});return ah(n)||(n==null?void 0:n.function.strict)||!1}function l$(e){var t;return a$(e.response_format)?!0:((t=e.tools)==null?void 0:t.some(n=>ah(n)||n.type==="function"&&n.function.strict===!0))??!1}function bY(e){for(const t of e??[]){if(t.type!=="function")throw new ze(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new ze(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Xn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},_n,$b,eg,Lb,Fb,Bb,c$,zb;const gP=10;class u$ extends i${constructor(){super(...arguments),_n.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){var r;this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=(r=t.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),(r$(t)||s$(t))&&t.content)this._emit("functionCallResult",t.content);else if(gc(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(gc(t)&&t.tool_calls)for(const r of t.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new ze("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),Xn(this,_n,"m",$b).call(this)}async finalMessage(){return await this.done(),Xn(this,_n,"m",eg).call(this)}async finalFunctionCall(){return await this.done(),Xn(this,_n,"m",Lb).call(this)}async finalFunctionCallResult(){return await this.done(),Xn(this,_n,"m",Fb).call(this)}async totalUsage(){return await this.done(),Xn(this,_n,"m",Bb).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=Xn(this,_n,"m",eg).call(this);n&&this._emit("finalMessage",n);const r=Xn(this,_n,"m",$b).call(this);r&&this._emit("finalContent",r);const s=Xn(this,_n,"m",Lb).call(this);s&&this._emit("finalFunctionCall",s);const o=Xn(this,_n,"m",Fb).call(this);o!=null&&this._emit("finalFunctionCallResult",o),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",Xn(this,_n,"m",Bb).call(this))}async _createChatCompletion(t,n,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Xn(this,_n,"m",c$).call(this,n);const o=await t.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(BC(o,n))}async _runChatCompletion(t,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(t,n,r)}async _runFunctions(t,n,r){var h;const s="function",{function_call:o="auto",stream:i,...a}=n,l=typeof o!="string"&&(o==null?void 0:o.name),{maxChatCompletions:c=gP}=r||{},u={};for(const p of n.functions)u[p.name||p.function.name]=p;const d=n.functions.map(p=>({name:p.name||p.function.name,parameters:p.parameters,description:p.description}));for(const p of n.messages)this._addMessage(p,!1);for(let p=0;p<c;++p){const g=(h=(await this._createChatCompletion(t,{...a,function_call:o,functions:d,messages:[...this.messages]},r)).choices[0])==null?void 0:h.message;if(!g)throw new ze("missing message in ChatCompletion response");if(!g.function_call)return;const{name:v,arguments:x}=g.function_call,w=u[v];if(w){if(l&&l!==v){const E=`Invalid function_call: ${JSON.stringify(v)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,name:v,content:E});continue}}else{const E=`Invalid function_call: ${JSON.stringify(v)}. Available options are: ${d.map(k=>JSON.stringify(k.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:v,content:E});continue}let b;try{b=mP(w)?await w.parse(x):x}catch(E){this._addMessage({role:s,name:v,content:E instanceof Error?E.message:String(E)});continue}const S=await w.function(b,this),C=Xn(this,_n,"m",zb).call(this,S);if(this._addMessage({role:s,name:v,content:C}),l)return}}async _runTools(t,n,r){var p,m,g;const s="tool",{tool_choice:o="auto",stream:i,...a}=n,l=typeof o!="string"&&((p=o==null?void 0:o.function)==null?void 0:p.name),{maxChatCompletions:c=gP}=r||{},u=n.tools.map(v=>{if(ah(v)){if(!v.$callback)throw new ze("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:v.$callback,name:v.function.name,description:v.function.description||"",parameters:v.function.parameters,parse:v.$parseRaw,strict:!0}}}return v}),d={};for(const v of u)v.type==="function"&&(d[v.function.name||v.function.function.name]=v.function);const h="tools"in n?u.map(v=>v.type==="function"?{type:"function",function:{name:v.function.name||v.function.function.name,parameters:v.function.parameters,description:v.function.description,strict:v.function.strict}}:v):void 0;for(const v of n.messages)this._addMessage(v,!1);for(let v=0;v<c;++v){const w=(m=(await this._createChatCompletion(t,{...a,tool_choice:o,tools:h,messages:[...this.messages]},r)).choices[0])==null?void 0:m.message;if(!w)throw new ze("missing message in ChatCompletion response");if(!((g=w.tool_calls)!=null&&g.length))return;for(const b of w.tool_calls){if(b.type!=="function")continue;const S=b.id,{name:C,arguments:E}=b.function,k=d[C];if(k){if(l&&l!==C){const R=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:S,content:R});continue}}else{const R=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(d).map(L=>JSON.stringify(L)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:S,content:R});continue}let N;try{N=mP(k)?await k.parse(E):E}catch(R){const L=R instanceof Error?R.message:String(R);this._addMessage({role:s,tool_call_id:S,content:L});continue}const P=await k.function(N,this),T=Xn(this,_n,"m",zb).call(this,P);if(this._addMessage({role:s,tool_call_id:S,content:T}),l)return}}}}_n=new WeakSet,$b=function(){return Xn(this,_n,"m",eg).call(this).content??null},eg=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(gc(n)){const{function_call:r,...s}=n,o={...s,content:n.content??null,refusal:n.refusal??null};return r&&(o.function_call=r),o}}throw new ze("stream ended without producing a ChatCompletionMessage with role=assistant")},Lb=function(){var t,n;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(gc(s)&&(s!=null&&s.function_call))return s.function_call;if(gc(s)&&((t=s==null?void 0:s.tool_calls)!=null&&t.length))return(n=s.tool_calls.at(-1))==null?void 0:n.function}},Fb=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(r$(n)&&n.content!=null||s$(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(o=>o.type==="function"&&o.id===n.tool_call_id))}))return n.content}},Bb=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},c$=function(t){if(t.n!=null&&t.n>1)throw new ze("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},zb=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class mf extends u${static runFunctions(t,n,r){const s=new mf,o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(t,n,o)),s}static runTools(t,n,r){const s=new mf,o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,o)),s}_addMessage(t,n=!0){super._addMessage(t,n),gc(t)&&t.content&&this._emit("content",t.content)}}const d$=1,f$=2,h$=4,p$=8,m$=16,g$=32,y$=64,v$=128,x$=256,w$=v$|x$,b$=m$|g$|w$|y$,S$=d$|f$|b$,C$=h$|p$,SY=S$|C$,Gt={STR:d$,NUM:f$,ARR:h$,OBJ:p$,NULL:m$,BOOL:g$,NAN:y$,INFINITY:v$,MINUS_INFINITY:x$,INF:w$,SPECIAL:b$,ATOM:S$,COLLECTION:C$,ALL:SY};class CY extends Error{}class EY extends Error{}function kY(e,t=Gt.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return _Y(e.trim(),t)}const _Y=(e,t)=>{const n=e.length;let r=0;const s=h=>{throw new CY(`${h} at position ${r}`)},o=h=>{throw new EY(`${h} at position ${r}`)},i=()=>(d(),r>=n&&s("Unexpected end of input"),e[r]==='"'?a():e[r]==="{"?l():e[r]==="["?c():e.substring(r,r+4)==="null"||Gt.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)==="true"||Gt.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)==="false"||Gt.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)==="Infinity"||Gt.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)==="-Infinity"||Gt.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)==="NaN"||Gt.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):u()),a=()=>{const h=r;let p=!1;for(r++;r<n&&(e[r]!=='"'||p&&e[r-1]==="\\");)p=e[r]==="\\"?!p:!1,r++;if(e.charAt(r)=='"')try{return JSON.parse(e.substring(h,++r-Number(p)))}catch(m){o(String(m))}else if(Gt.STR&t)try{return JSON.parse(e.substring(h,r-Number(p))+'"')}catch{return JSON.parse(e.substring(h,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{r++,d();const h={};try{for(;e[r]!=="}";){if(d(),r>=n&&Gt.OBJ&t)return h;const p=a();d(),r++;try{const m=i();Object.defineProperty(h,p,{value:m,writable:!0,enumerable:!0,configurable:!0})}catch(m){if(Gt.OBJ&t)return h;throw m}d(),e[r]===","&&r++}}catch{if(Gt.OBJ&t)return h;s("Expected '}' at end of object")}return r++,h},c=()=>{r++;const h=[];try{for(;e[r]!=="]";)h.push(i()),d(),e[r]===","&&r++}catch{if(Gt.ARR&t)return h;s("Expected ']' at end of array")}return r++,h},u=()=>{if(r===0){e==="-"&&Gt.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(p){if(Gt.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}o(String(p))}}const h=r;for(e[r]==="-"&&r++;e[r]&&!",]}".includes(e[r]);)r++;r==n&&!(Gt.NUM&t)&&s("Unterminated number literal");try{return JSON.parse(e.substring(h,r))}catch{e.substring(h,r)==="-"&&Gt.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(h,e.lastIndexOf("e")))}catch(m){o(String(m))}}},d=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return i()},yP=e=>kY(e,Gt.ALL^Gt.NUM);var _l=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},et=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Dt,ho,Nl,Xo,Q0,Zh,Z0,ex,tx,ep,nx,vP;class gf extends u${constructor(t){super(),Dt.add(this),ho.set(this,void 0),Nl.set(this,void 0),Xo.set(this,void 0),_l(this,ho,t,"f"),_l(this,Nl,[],"f")}get currentChatCompletionSnapshot(){return et(this,Xo,"f")}static fromReadableStream(t){const n=new gf(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){const s=new gf(n);return s._run(()=>s._runChatCompletion(t,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(t,n,r){var i;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),et(this,Dt,"m",Q0).call(this);const o=await t.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of o)et(this,Dt,"m",Z0).call(this,a);if((i=o.controller.signal)!=null&&i.aborted)throw new ws;return this._addChatCompletion(et(this,Dt,"m",ep).call(this))}async _fromReadableStream(t,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),et(this,Dt,"m",Q0).call(this),this._connected();const s=Xs.fromReadableStream(t,this.controller);let o;for await(const a of s)o&&o!==a.id&&this._addChatCompletion(et(this,Dt,"m",ep).call(this)),et(this,Dt,"m",Z0).call(this,a),o=a.id;if((i=s.controller.signal)!=null&&i.aborted)throw new ws;return this._addChatCompletion(et(this,Dt,"m",ep).call(this))}[(ho=new WeakMap,Nl=new WeakMap,Xo=new WeakMap,Dt=new WeakSet,Q0=function(){this.ended||_l(this,Xo,void 0,"f")},Zh=function(n){let r=et(this,Nl,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},et(this,Nl,"f")[n.index]=r,r)},Z0=function(n){var s,o,i,a,l,c,u,d,h,p,m,g,v,x,w;if(this.ended)return;const r=et(this,Dt,"m",vP).call(this,n);this._emit("chunk",n,r);for(const b of n.choices){const S=r.choices[b.index];b.delta.content!=null&&((s=S.message)==null?void 0:s.role)==="assistant"&&((o=S.message)!=null&&o.content)&&(this._emit("content",b.delta.content,S.message.content),this._emit("content.delta",{delta:b.delta.content,snapshot:S.message.content,parsed:S.message.parsed})),b.delta.refusal!=null&&((i=S.message)==null?void 0:i.role)==="assistant"&&((a=S.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:b.delta.refusal,snapshot:S.message.refusal}),((l=b.logprobs)==null?void 0:l.content)!=null&&((c=S.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=b.logprobs)==null?void 0:u.content,snapshot:((d=S.logprobs)==null?void 0:d.content)??[]}),((h=b.logprobs)==null?void 0:h.refusal)!=null&&((p=S.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(m=b.logprobs)==null?void 0:m.refusal,snapshot:((g=S.logprobs)==null?void 0:g.refusal)??[]});const C=et(this,Dt,"m",Zh).call(this,S);S.finish_reason&&(et(this,Dt,"m",tx).call(this,S),C.current_tool_call_index!=null&&et(this,Dt,"m",ex).call(this,S,C.current_tool_call_index));for(const E of b.delta.tool_calls??[])C.current_tool_call_index!==E.index&&(et(this,Dt,"m",tx).call(this,S),C.current_tool_call_index!=null&&et(this,Dt,"m",ex).call(this,S,C.current_tool_call_index)),C.current_tool_call_index=E.index;for(const E of b.delta.tool_calls??[]){const k=(v=S.message.tool_calls)==null?void 0:v[E.index];k!=null&&k.type&&((k==null?void 0:k.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(x=k.function)==null?void 0:x.name,index:E.index,arguments:k.function.arguments,parsed_arguments:k.function.parsed_arguments,arguments_delta:((w=E.function)==null?void 0:w.arguments)??""}):(k==null||k.type,void 0))}}},ex=function(n,r){var i,a,l;if(et(this,Dt,"m",Zh).call(this,n).done_tool_calls.has(r))return;const o=(i=n.message.tool_calls)==null?void 0:i[r];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){const c=(l=(a=et(this,ho,"f"))==null?void 0:a.tools)==null?void 0:l.find(u=>u.type==="function"&&u.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:r,arguments:o.function.arguments,parsed_arguments:ah(c)?c.$parseRaw(o.function.arguments):c!=null&&c.function.strict?JSON.parse(o.function.arguments):null})}else o.type},tx=function(n){var s,o;const r=et(this,Dt,"m",Zh).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const i=et(this,Dt,"m",nx).call(this);this._emit("content.done",{content:n.message.content,parsed:i?i.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(s=n.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(o=n.logprobs)!=null&&o.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},ep=function(){if(this.ended)throw new ze("stream has ended, this shouldn't happen");const n=et(this,Xo,"f");if(!n)throw new ze("request ended without sending any chunks");return _l(this,Xo,void 0,"f"),_l(this,Nl,[],"f"),NY(n,et(this,ho,"f"))},nx=function(){var r;const n=(r=et(this,ho,"f"))==null?void 0:r.response_format;return a$(n)?n:null},vP=function(n){var r,s,o,i;let a=et(this,Xo,"f");const{choices:l,...c}=n;a?Object.assign(a,c):a=_l(this,Xo,{...c,choices:[]},"f");for(const{delta:u,finish_reason:d,index:h,logprobs:p=null,...m}of n.choices){let g=a.choices[h];if(g||(g=a.choices[h]={finish_reason:d,index:h,message:{},logprobs:p,...m}),p)if(!g.logprobs)g.logprobs=Object.assign({},p);else{const{content:E,refusal:k,...N}=p;Object.assign(g.logprobs,N),E&&((r=g.logprobs).content??(r.content=[]),g.logprobs.content.push(...E)),k&&((s=g.logprobs).refusal??(s.refusal=[]),g.logprobs.refusal.push(...k))}if(d&&(g.finish_reason=d,et(this,ho,"f")&&l$(et(this,ho,"f")))){if(d==="length")throw new UD;if(d==="content_filter")throw new HD}if(Object.assign(g,m),!u)continue;const{content:v,refusal:x,function_call:w,role:b,tool_calls:S,...C}=u;if(Object.assign(g.message,C),x&&(g.message.refusal=(g.message.refusal||"")+x),b&&(g.message.role=b),w&&(g.message.function_call?(w.name&&(g.message.function_call.name=w.name),w.arguments&&((o=g.message.function_call).arguments??(o.arguments=""),g.message.function_call.arguments+=w.arguments)):g.message.function_call=w),v&&(g.message.content=(g.message.content||"")+v,!g.message.refusal&&et(this,Dt,"m",nx).call(this)&&(g.message.parsed=yP(g.message.content))),S){g.message.tool_calls||(g.message.tool_calls=[]);for(const{index:E,id:k,type:N,function:P,...T}of S){const R=(i=g.message.tool_calls)[E]??(i[E]={});Object.assign(R,T),k&&(R.id=k),N&&(R.type=N),P&&(R.function??(R.function={name:P.name??"",arguments:""})),P!=null&&P.name&&(R.function.name=P.name),P!=null&&P.arguments&&(R.function.arguments+=P.arguments,wY(et(this,ho,"f"),R)&&(R.function.parsed_arguments=yP(R.function.arguments)))}}}return a},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("chunk",s=>{const o=n.shift();o?o.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const o of n)o.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const o of n)o.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,i)=>n.push({resolve:o,reject:i})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Xs(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function NY(e,t){const{id:n,choices:r,created:s,model:o,system_fingerprint:i,...a}=e,l={...a,id:n,choices:r.map(({message:c,finish_reason:u,index:d,logprobs:h,...p})=>{if(!u)throw new ze(`missing finish_reason for choice ${d}`);const{content:m=null,function_call:g,tool_calls:v,...x}=c,w=c.role;if(!w)throw new ze(`missing role for choice ${d}`);if(g){const{arguments:b,name:S}=g;if(b==null)throw new ze(`missing function_call.arguments for choice ${d}`);if(!S)throw new ze(`missing function_call.name for choice ${d}`);return{...p,message:{content:m,function_call:{arguments:b,name:S},role:w,refusal:c.refusal??null},finish_reason:u,index:d,logprobs:h}}return v?{...p,index:d,finish_reason:u,logprobs:h,message:{...x,role:w,content:m,refusal:c.refusal??null,tool_calls:v.map((b,S)=>{const{function:C,type:E,id:k,...N}=b,{arguments:P,name:T,...R}=C||{};if(k==null)throw new ze(`missing choices[${d}].tool_calls[${S}].id
${tp(e)}`);if(E==null)throw new ze(`missing choices[${d}].tool_calls[${S}].type
${tp(e)}`);if(T==null)throw new ze(`missing choices[${d}].tool_calls[${S}].function.name
${tp(e)}`);if(P==null)throw new ze(`missing choices[${d}].tool_calls[${S}].function.arguments
${tp(e)}`);return{...N,id:k,type:E,function:{...R,name:T,arguments:P}}})}}:{...p,message:{...x,content:m,role:w,refusal:c.refusal??null},finish_reason:u,index:d,logprobs:h}}),created:s,model:o,object:"chat.completion",...i?{system_fingerprint:i}:{}};return yY(l,t)}function tp(e){return JSON.stringify(e)}class yc extends gf{static fromReadableStream(t){const n=new yc(null);return n._run(()=>n._fromReadableStream(t)),n}static runFunctions(t,n,r){const s=new yc(null),o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(t,n,o)),s}static runTools(t,n,r){const s=new yc(n),o={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(t,n,o)),s}}let E$=class extends Je{parse(t,n){return bY(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>BC(r,t))}runFunctions(t,n){return t.stream?yc.runFunctions(this._client,t,n):mf.runFunctions(this._client,t,n)}runTools(t,n){return t.stream?yc.runTools(this._client,t,n):mf.runTools(this._client,t,n)}stream(t,n){return gf.createChatCompletion(this._client,t,n)}};class Ub extends Je{constructor(){super(...arguments),this.completions=new E$(this._client)}}(function(e){e.Completions=E$})(Ub||(Ub={}));class k$ extends Je{create(t,n){return this._client.post("/realtime/sessions",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class zC extends Je{constructor(){super(...arguments),this.sessions=new k$(this._client)}}zC.Sessions=k$;var ve=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},dr=function(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},fn,Hb,Gs,Yp,fs,Aa,Ql,Ca,tg,mr,Xp,Qp,_d,od,id,xP,wP,bP,SP,CP,EP,kP;class bs extends i${constructor(){super(...arguments),fn.add(this),Hb.set(this,[]),Gs.set(this,{}),Yp.set(this,{}),fs.set(this,void 0),Aa.set(this,void 0),Ql.set(this,void 0),Ca.set(this,void 0),tg.set(this,void 0),mr.set(this,void 0),Xp.set(this,void 0),Qp.set(this,void 0),_d.set(this,void 0)}[(Hb=new WeakMap,Gs=new WeakMap,Yp=new WeakMap,fs=new WeakMap,Aa=new WeakMap,Ql=new WeakMap,Ca=new WeakMap,tg=new WeakMap,mr=new WeakMap,Xp=new WeakMap,Qp=new WeakMap,_d=new WeakMap,fn=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",s=>{const o=n.shift();o?o.resolve(s):t.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const o of n)o.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const o of n)o.reject(s);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,i)=>n.push({resolve:o,reject:i})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new bs;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Xs.fromReadableStream(t,this.controller);for await(const i of s)ve(this,fn,"m",od).call(this,i);if((o=s.controller.signal)!=null&&o.aborted)throw new ws;return this._addRun(ve(this,fn,"m",id).call(this))}toReadableStream(){return new Xs(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,s,o){const i=new bs;return i._run(()=>i._runToolAssistantStream(t,n,r,s,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(t,n,r,s,o){var c;const i=o==null?void 0:o.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...s,stream:!0},l=await t.submitToolOutputs(n,r,a,{...o,signal:this.controller.signal});this._connected();for await(const u of l)ve(this,fn,"m",od).call(this,u);if((c=l.controller.signal)!=null&&c.aborted)throw new ws;return this._addRun(ve(this,fn,"m",id).call(this))}static createThreadAssistantStream(t,n,r){const s=new bs;return s._run(()=>s._threadAssistantStream(t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(t,n,r,s){const o=new bs;return o._run(()=>o._runAssistantStream(t,n,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return ve(this,Xp,"f")}currentRun(){return ve(this,Qp,"f")}currentMessageSnapshot(){return ve(this,fs,"f")}currentRunStepSnapshot(){return ve(this,_d,"f")}async finalRunSteps(){return await this.done(),Object.values(ve(this,Gs,"f"))}async finalMessages(){return await this.done(),Object.values(ve(this,Yp,"f"))}async finalRun(){if(await this.done(),!ve(this,Aa,"f"))throw Error("Final run was not received.");return ve(this,Aa,"f")}async _createThreadAssistantStream(t,n,r){var a;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},i=await t.createAndRun(o,{...r,signal:this.controller.signal});this._connected();for await(const l of i)ve(this,fn,"m",od).call(this,l);if((a=i.controller.signal)!=null&&a.aborted)throw new ws;return this._addRun(ve(this,fn,"m",id).call(this))}async _createAssistantStream(t,n,r,s){var l;const o=s==null?void 0:s.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const i={...r,stream:!0},a=await t.create(n,i,{...s,signal:this.controller.signal});this._connected();for await(const c of a)ve(this,fn,"m",od).call(this,c);if((l=a.controller.signal)!=null&&l.aborted)throw new ws;return this._addRun(ve(this,fn,"m",id).call(this))}static accumulateDelta(t,n){for(const[r,s]of Object.entries(n)){if(!t.hasOwnProperty(r)){t[r]=s;continue}let o=t[r];if(o==null){t[r]=s;continue}if(r==="index"||r==="type"){t[r]=s;continue}if(typeof o=="string"&&typeof s=="string")o+=s;else if(typeof o=="number"&&typeof s=="number")o+=s;else if(X0(o)&&X0(s))o=this.accumulateDelta(o,s);else if(Array.isArray(o)&&Array.isArray(s)){if(o.every(i=>typeof i=="string"||typeof i=="number")){o.push(...s);continue}for(const i of s){if(!X0(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const a=i.index;if(a==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const l=o[a];l==null?o.push(i):o[a]=this.accumulateDelta(l,i)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${o}`);t[r]=o}return t}_addRun(t){return t}async _threadAssistantStream(t,n,r){return await this._createThreadAssistantStream(n,t,r)}async _runAssistantStream(t,n,r,s){return await this._createAssistantStream(n,t,r,s)}async _runToolAssistantStream(t,n,r,s,o){return await this._createToolAssistantStream(r,t,n,s,o)}}od=function(t){if(!this.ended)switch(dr(this,Xp,t,"f"),ve(this,fn,"m",bP).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ve(this,fn,"m",kP).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ve(this,fn,"m",wP).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ve(this,fn,"m",xP).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},id=function(){if(this.ended)throw new ze("stream has ended, this shouldn't happen");if(!ve(this,Aa,"f"))throw Error("Final run has not been received");return ve(this,Aa,"f")},xP=function(t){const[n,r]=ve(this,fn,"m",CP).call(this,t,ve(this,fs,"f"));dr(this,fs,n,"f"),ve(this,Yp,"f")[n.id]=n;for(const s of r){const o=n.content[s.index];(o==null?void 0:o.type)=="text"&&this._emit("textCreated",o.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const s of t.data.delta.content){if(s.type=="text"&&s.text){let o=s.text,i=n.content[s.index];if(i&&i.type=="text")this._emit("textDelta",o,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=ve(this,Ql,"f")){if(ve(this,Ca,"f"))switch(ve(this,Ca,"f").type){case"text":this._emit("textDone",ve(this,Ca,"f").text,ve(this,fs,"f"));break;case"image_file":this._emit("imageFileDone",ve(this,Ca,"f").image_file,ve(this,fs,"f"));break}dr(this,Ql,s.index,"f")}dr(this,Ca,n.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(ve(this,Ql,"f")!==void 0){const s=t.data.content[ve(this,Ql,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,ve(this,fs,"f"));break;case"text":this._emit("textDone",s.text,ve(this,fs,"f"));break}}ve(this,fs,"f")&&this._emit("messageDone",t.data),dr(this,fs,void 0,"f")}},wP=function(t){const n=ve(this,fn,"m",SP).call(this,t);switch(dr(this,_d,n,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const r=t.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const o of r.step_details.tool_calls)o.index==ve(this,tg,"f")?this._emit("toolCallDelta",o,n.step_details.tool_calls[o.index]):(ve(this,mr,"f")&&this._emit("toolCallDone",ve(this,mr,"f")),dr(this,tg,o.index,"f"),dr(this,mr,n.step_details.tool_calls[o.index],"f"),ve(this,mr,"f")&&this._emit("toolCallCreated",ve(this,mr,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":dr(this,_d,void 0,"f"),t.data.step_details.type=="tool_calls"&&ve(this,mr,"f")&&(this._emit("toolCallDone",ve(this,mr,"f")),dr(this,mr,void 0,"f")),this._emit("runStepDone",t.data,n);break}},bP=function(t){ve(this,Hb,"f").push(t),this._emit("event",t)},SP=function(t){switch(t.event){case"thread.run.step.created":return ve(this,Gs,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=ve(this,Gs,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=t.data;if(r.delta){const s=bs.accumulateDelta(n,r.delta);ve(this,Gs,"f")[t.data.id]=s}return ve(this,Gs,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ve(this,Gs,"f")[t.data.id]=t.data;break}if(ve(this,Gs,"f")[t.data.id])return ve(this,Gs,"f")[t.data.id];throw new Error("No snapshot available")},CP=function(t,n){let r=[];switch(t.event){case"thread.message.created":return[t.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=t.data;if(s.delta.content)for(const o of s.delta.content)if(o.index in n.content){let i=n.content[o.index];n.content[o.index]=ve(this,fn,"m",EP).call(this,o,i)}else n.content[o.index]=o,r.push(o);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},EP=function(t,n){return bs.accumulateDelta(n,t)},kP=function(t){switch(dr(this,Qp,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":dr(this,Aa,t.data,"f"),ve(this,mr,"f")&&(this._emit("toolCallDone",ve(this,mr,"f")),dr(this,mr,void 0,"f"));break}};class UC extends Je{create(t,n,r){return this._client.post(`/threads/${t}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,s){return this._client.post(`/threads/${t}/messages/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(t,n={},r){return jn(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/messages`,HC,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class HC extends Tr{}UC.MessagesPage=HC;class VC extends Je{retrieve(t,n,r,s={},o){return jn(s)?this.retrieve(t,n,r,{},s):this._client.get(`/threads/${t}/runs/${n}/steps/${r}`,{query:s,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(t,n,r={},s){return jn(r)?this.list(t,n,{},r):this._client.getAPIList(`/threads/${t}/runs/${n}/steps`,WC,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class WC extends Tr{}VC.RunStepsPage=WC;class lh extends Je{constructor(){super(...arguments),this.steps=new VC(this._client)}create(t,n,r){const{include:s,...o}=n;return this._client.post(`/threads/${t}/runs`,{query:{include:s},body:o,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(t,n,r){return this._client.get(`/threads/${t}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,s){return this._client.post(`/threads/${t}/runs/${n}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(t,n={},r){return jn(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/runs`,qC,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/threads/${t}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n,r);return await this.poll(t,s.id,r)}createAndStream(t,n,r){return bs.createAssistantStream(t,this._client.beta.threads.runs,n,r)}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:i}=await this.retrieve(t,n,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const l=i.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(a=c)}}await oh(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(t,n,r){return bs.createAssistantStream(t,this._client.beta.threads.runs,n,r)}submitToolOutputs(t,n,r,s){return this._client.post(`/threads/${t}/runs/${n}/submit_tool_outputs`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(t,n,r,s){const o=await this.submitToolOutputs(t,n,r,s);return await this.poll(t,o.id,s)}submitToolOutputsStream(t,n,r,s){return bs.createToolAssistantStream(t,n,this._client.beta.threads.runs,r,s)}}class qC extends Tr{}lh.RunsPage=qC;lh.Steps=VC;lh.RunStepsPage=WC;class du extends Je{constructor(){super(...arguments),this.runs=new lh(this._client),this.messages=new UC(this._client)}create(t={},n){return jn(t)?this.create({},t):this._client.post("/threads",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/threads/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n){return this._client.delete(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}async createAndRunPoll(t,n){const r=await this.createAndRun(t,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(t,n){return bs.createThreadAssistantStream(t,this._client.beta.threads,n)}}du.Runs=lh;du.RunsPage=qC;du.Messages=UC;du.MessagesPage=HC;const PY=async e=>{const t=await Promise.allSettled(e),n=t.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of t)s.status==="fulfilled"&&r.push(s.value);return r};let GC=class extends Je{create(t,n,r){return this._client.post(`/vector_stores/${t}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t,n={},r){return jn(n)?this.list(t,{},n):this._client.getAPIList(`/vector_stores/${t}/files`,Yy,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n,r);return await this.poll(t,s.id,r)}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const o=await this.retrieve(t,n,{...r,headers:s}).withResponse(),i=o.data;switch(i.status){case"in_progress":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const l=o.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(a=c)}}await oh(a);break;case"failed":case"completed":return i}}}async upload(t,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(t,{file_id:s.id},r)}async uploadAndPoll(t,n,r){const s=await this.upload(t,n,r);return await this.poll(t,s.id,r)}};class Yy extends Tr{}GC.VectorStoreFilesPage=Yy;class _$ extends Je{create(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const s=await this.create(t,n);return await this.poll(t,s.id,r)}listFiles(t,n,r={},s){return jn(r)?this.listFiles(t,n,{},r):this._client.getAPIList(`/vector_stores/${t}/file_batches/${n}/files`,Yy,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(t,n,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:o,response:i}=await this.retrieve(t,n,{...r,headers:s}).withResponse();switch(o.status){case"in_progress":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const l=i.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(a=c)}}await oh(a);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(t,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=(s==null?void 0:s.maxConcurrency)??5,i=Math.min(o,n.length),a=this._client,l=n.values(),c=[...r];async function u(h){for(let p of h){const m=await a.files.create({file:p,purpose:"assistants"},s);c.push(m.id)}}const d=Array(i).fill(l).map(u);return await PY(d),await this.createAndPoll(t,{file_ids:c})}}class fu extends Je{constructor(){super(...arguments),this.files=new GC(this._client),this.fileBatches=new _$(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/vector_stores/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return jn(t)?this.list({},t):this._client.getAPIList("/vector_stores",KC,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class KC extends Tr{}fu.VectorStoresPage=KC;fu.Files=GC;fu.VectorStoreFilesPage=Yy;fu.FileBatches=_$;class ia extends Je{constructor(){super(...arguments),this.realtime=new zC(this._client),this.vectorStores=new fu(this._client),this.chat=new Ub(this._client),this.assistants=new LC(this._client),this.threads=new du(this._client)}}ia.Realtime=zC;ia.VectorStores=fu;ia.VectorStoresPage=KC;ia.Assistants=LC;ia.AssistantsPage=FC;ia.Threads=du;class N$ extends Je{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}class P$ extends Je{create(t,n){return this._client.post("/embeddings",{body:t,...n})}}class JC extends Je{create(t,n){return this._client.post("/files",$c({body:t,...n}))}retrieve(t,n){return this._client.get(`/files/${t}`,n)}list(t={},n){return jn(t)?this.list({},t):this._client.getAPIList("/files",YC,{query:t,...n})}del(t,n){return this._client.delete(`/files/${t}`,n)}content(t,n){return this._client.get(`/files/${t}/content`,{...n,headers:{Accept:"application/binary",...n==null?void 0:n.headers},__binaryResponse:!0})}retrieveContent(t,n){return this._client.get(`/files/${t}/content`,n)}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),o=Date.now();let i=await this.retrieve(t);for(;!i.status||!s.has(i.status);)if(await oh(n),i=await this.retrieve(t),Date.now()-o>r)throw new IC({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return i}}class YC extends Tr{}JC.FileObjectsPage=YC;class XC extends Je{list(t,n={},r){return jn(n)?this.list(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/checkpoints`,QC,{query:n,...r})}}class QC extends Tr{}XC.FineTuningJobCheckpointsPage=QC;class hu extends Je{constructor(){super(...arguments),this.checkpoints=new XC(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(`/fine_tuning/jobs/${t}`,n)}list(t={},n){return jn(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",ZC,{query:t,...n})}cancel(t,n){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},r){return jn(n)?this.listEvents(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,eE,{query:n,...r})}}class ZC extends Tr{}class eE extends Tr{}hu.FineTuningJobsPage=ZC;hu.FineTuningJobEventsPage=eE;hu.Checkpoints=XC;hu.FineTuningJobCheckpointsPage=QC;class ch extends Je{constructor(){super(...arguments),this.jobs=new hu(this._client)}}ch.Jobs=hu;ch.FineTuningJobsPage=ZC;ch.FineTuningJobEventsPage=eE;class A$ extends Je{createVariation(t,n){return this._client.post("/images/variations",$c({body:t,...n}))}edit(t,n){return this._client.post("/images/edits",$c({body:t,...n}))}generate(t,n){return this._client.post("/images/generations",{body:t,...n})}}class tE extends Je{retrieve(t,n){return this._client.get(`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",nE,t)}del(t,n){return this._client.delete(`/models/${t}`,n)}}class nE extends mY{}tE.ModelsPage=nE;class T$ extends Je{create(t,n){return this._client.post("/moderations",{body:t,...n})}}class R$ extends Je{create(t,n,r){return this._client.post(`/uploads/${t}/parts`,$c({body:n,...r}))}}class rE extends Je{constructor(){super(...arguments),this.parts=new R$(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(`/uploads/${t}/cancel`,n)}complete(t,n,r){return this._client.post(`/uploads/${t}/complete`,{body:n,...r})}}rE.Parts=R$;var j$;class qe extends nY{constructor({baseURL:t=Xh("OPENAI_BASE_URL"),apiKey:n=Xh("OPENAI_API_KEY"),organization:r=Xh("OPENAI_ORG_ID")??null,project:s=Xh("OPENAI_PROJECT_ID")??null,...o}={}){if(n===void 0)throw new ze("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:n,organization:r,project:s,...o,baseURL:t||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&hY())throw new ze(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new N$(this),this.chat=new Jy(this),this.embeddings=new P$(this),this.files=new JC(this),this.images=new A$(this),this.audio=new ih(this),this.moderations=new T$(this),this.models=new tE(this),this.fineTuning=new ch(this),this.beta=new ia(this),this.batches=new DC(this),this.uploads=new rE(this),this._options=i,this.apiKey=n,this.organization=r,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(t){return LJ(t,{arrayFormat:"brackets"})}}j$=qe;qe.OpenAI=j$;qe.DEFAULT_TIMEOUT=6e5;qe.OpenAIError=ze;qe.APIError=xn;qe.APIConnectionError=Hy;qe.APIConnectionTimeoutError=IC;qe.APIUserAbortError=ws;qe.NotFoundError=$D;qe.ConflictError=LD;qe.RateLimitError=BD;qe.BadRequestError=MD;qe.AuthenticationError=ID;qe.InternalServerError=zD;qe.PermissionDeniedError=DD;qe.UnprocessableEntityError=FD;qe.toFile=GD;qe.fileFromPath=jD;qe.Completions=N$;qe.Chat=Jy;qe.ChatCompletionsPage=Ky;qe.Embeddings=P$;qe.Files=JC;qe.FileObjectsPage=YC;qe.Images=A$;qe.Audio=ih;qe.Moderations=T$;qe.Models=tE;qe.ModelsPage=nE;qe.FineTuning=ch;qe.Beta=ia;qe.Batches=DC;qe.BatchesPage=$C;qe.Uploads=rE;async function Xi({model:e,requestType:t,requestPayload:n,responsePayload:r,error:s,input_tokens:o,output_tokens:i}){try{const{data:{user:a}}=await G.auth.getUser();if(!a)return;await G.from("openai_logs").insert({user_id:a.id,request_type:t,model:e,request_payload:n,response_payload:r,error:(s==null?void 0:s.message)||(s==null?void 0:s.toString()),input_tokens:o,output_tokens:i})}catch{}}const pu=new qe({apiKey:"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",dangerouslyAllowBrowser:!0});class wr extends Error{constructor(t,n){super(t),this.originalError=n,this.name="OpenAIError"}}function Xy(e){var t;return e.status===429?"We're experiencing high demand right now. Please try again in a moment.":e.status===401||e.status===403?"Authentication error occurred. Please try again later.":e.status>=500?"Our AI service is temporarily unavailable. Please try again later.":e.name==="AbortError"||e.code==="ECONNABORTED"?"Request timed out. Please try again or use a simpler prompt.":(t=e.message)!=null&&t.includes("network")||!navigator.onLine?"Please check your internet connection and try again.":"Something went wrong with AI generation. Please try again."}async function _P({productDescription:e,problemStatement:t,solutionDescription:n,features:r,flowPattern:s="auto"}){const o=r.map(l=>({name:l.name,description:l.description,priority:l.priority,status:l.implementation_status})),i={productDescription:e,problemStatement:t,solutionDescription:n,features:o,flowPattern:s},a=[{role:"system",content:`You are an expert product manager and UX designer. Your task is to generate a comprehensive user flow based on the provided product requirements.

Your response must be a valid JSON object with the following structure:
{
  "pages": [
    {
      "name": "Page name",
      "description": "Detailed description of the page's purpose and content",
      "layout_description": "Design terminology description of the page layout",
      "features": ["Feature Name 1", "Feature Name 2"]
    }
  ]
}`},{role:"user",content:`Create a comprehensive user flow with detailed page information for this product:

Product Description: ${e}

Problem Statement: ${t}

Solution Description: ${n}

Features:
${o.map(l=>`- ${l.name}: ${l.description}
  Priority: ${l.priority}
  Status: ${l.status}`).join(`
`)}`}];try{const l=await pu.chat.completions.create({model:"gpt-4o-mini",messages:a,temperature:.7,response_format:{type:"json_object"}}),c=l.choices[0].message.content,u=l.usage;return await Xi({model:"gpt-4o-mini",requestType:"generate_user_flow",requestPayload:i,responsePayload:c,input_tokens:u==null?void 0:u.prompt_tokens,output_tokens:u==null?void 0:u.completion_tokens}),JSON.parse(c)}catch(l){throw await Xi({model:"gpt-4o-mini",requestType:"generate_user_flow",requestPayload:i,error:l}),new wr(Xy(l),l)}}async function AY(e,t="auto"){const n=[{role:"system",content:`You are an expert in creating visually appealing flow diagrams. Your task is to arrange pages in a logical layout that shows their relationships clearly.

The layout MUST follow these rules:
1. Primary flow should be horizontal from left to right
2. Start the leftmost page at x=0, y=0
3. Space pages horizontally with 250px gaps between them
4. Entry/landing pages should be leftmost
5. Final/completion pages should be rightmost
6. Related pages should be adjacent
7. Pages can have multiple connections to other pages
8. When a page connects to multiple pages, arrange the target pages vertically (stacked)
9. For vertical stacking, use 150px gaps between pages

You should apply the specified flow pattern: "${t}". The available patterns are:
- "linear": Pages are arranged in a straight line from left to right
- "hub-and-spoke": One central hub page with other pages radiating outward
- "nested": Pages are arranged in a hierarchical structure with parent-child relationships
- "auto": Automatically determine the best pattern based on the page relationships

Your response must be a valid JSON object with the following structure:
{
  "pages": [
    {
      "id": "page-name-as-id",
      "name": "Page Name",
      "position": { "x": number, "y": number }
    }
  ],
  "connections": [
    {
      "source": "source-page-id",
      "target": "target-page-id"
    }
  ]
}

Guidelines:
1. Arrange pages primarily horizontally from left to right
2. Start from (0,0) and expand rightward
3. When a page connects to multiple pages, arrange them vertically
4. For example, if Page 1 connects to Page 2 and Page 3, place Page 2 above Page 3 at the same x-coordinate
5. Create logical flows (e.g., landing  signup  dashboard  features)
6. For vertical arrangements, place the most important or frequently used page at the top
7. If multiple pages connect to the same page, make sure the connections don't overlap too much`},{role:"user",content:`Generate a ${t} layout for these pages, arranged from left to right, with vertical stacking for pages with multiple connections:

${e.map(r=>`${r.name}: ${r.description}`).join(`

`)}`}];try{const r=await pu.chat.completions.create({model:"gpt-4o",messages:n,temperature:.4,response_format:{type:"json_object"}}),s=r.choices[0].message.content,o=r.usage;return await Xi({model:"gpt-4o",requestType:"generate_flow_layout",requestPayload:{pages:e,flowPattern:t},responsePayload:s,input_tokens:o==null?void 0:o.prompt_tokens,output_tokens:o==null?void 0:o.completion_tokens}),JSON.parse(s)}catch(r){throw await Xi({model:"gpt-4o",requestType:"generate_flow_layout",requestPayload:{pages:e,flowPattern:t},error:r}),new wr(Xy(r),r)}}async function TY({productDescription:e,targetAudience:t}){const n={productDescription:e,targetAudience:t},r=[{role:"system",content:`You are an expert product strategist specializing in customer persona development and market analysis. Your task is to analyze a product opportunity and create detailed customer profiles that will inform the MVP development.

For the given product and target audience, create 3 distinct customer profiles that represent different segments of the target market. Each profile should be highly detailed and actionable.

Your response must be a valid JSON object with this exact structure:
{
  "customerProfiles": [
    {
      "name": "Clear persona name with role (e.g., 'Sarah Chen - Senior Product Manager')",
      "overview": {
        "paragraph1": "Professional background and current role context",
        "paragraph2": "Daily challenges and primary needs",
        "paragraph3": "Career goals and aspirations"
      },
      "background": {
        "role": "Current job title or role",
        "industry": "Industry or market sector",
        "companySize": "Company size (for B2B) or household type (for B2C)",
        "companyType": "Type of organization or lifestyle category",
        "dailyResponsibilities": ["List of key daily tasks and responsibilities"],
        "currentTools": ["List of current solutions and tools being used"]
      },
      "problems": {
        "biggestFrustration": "Single biggest pain point or challenge",
        "manualTasks": ["List of time-consuming manual tasks"],
        "painPoints": "Detailed description of current workflow problems",
        "inefficiencies": ["List of specific inefficiencies in current process"]
      },
      "scoring": {
        "problemMatch": "Score 1-5",
        "urgencyToSolve": "Score 1-5",
        "abilityToPay": "Score 1-5",
        "explanation": "Detailed explanation of why this persona is a good fit"
      }
    }
  ],
  "recommendation": {
    "selectedProfile": "Name of recommended profile to target first",
    "rationale": "Detailed explanation of why this profile should be targeted first"
  }
}`},{role:"user",content:`Create 3 detailed customer profiles for this product:

Product Description: ${e}
Target Audience: ${t}`}];try{const s=await pu.chat.completions.create({model:"gpt-4o",messages:r,temperature:.7,max_tokens:2e3,response_format:{type:"json_object"}}),o=s.choices[0].message.content,i=s.usage;return await Xi({model:"gpt-4o",requestType:"generate_prd_content",requestPayload:n,responsePayload:o,input_tokens:i==null?void 0:i.prompt_tokens,output_tokens:i==null?void 0:i.completion_tokens}),o}catch(s){throw await Xi({model:"gpt-4o",requestType:"generate_prd_content",requestPayload:n,error:s}),new wr(Xy(s),s)}}async function RY({customerProfile:e,productDescription:t,problems:n}){const r={customerProfile:e,productDescription:t,problems:n},s=[{role:"system",content:`You are an elite product strategist and MVP expert specializing in creating focused, impactful minimum viable products. Your task is to analyze the product opportunity and define the optimal MVP that delivers maximum value with minimal complexity.

Your analysis should cover:

1. Problem Analysis
   - Core pain point identification and impact assessment
   - Current workarounds and their limitations
   - Solution urgency and market readiness
   - Competitive landscape and market gaps
   - User behavior patterns and friction points

2. Solution Strategy  
   - Core value proposition
   - Key differentiators
   - Technical feasibility assessment
   - Implementation complexity analysis
   - Resource requirements
   - Time to market estimation

3. Success Criteria
   - Key performance indicators
   - User adoption metrics
   - Business impact measures
   - Technical performance metrics
   - Learning objectives

4. Risk Assessment
   - Technical limitations
   - User adoption barriers
   - Market risks
   - Resource constraints
   - Scaling challenges

5. Growth Strategy
   - Feature expansion roadmap
   - Market expansion opportunities
   - Revenue model evolution
   - Partnership potential
   - Platform scalability

Always return your response as a JSON object with the following structure:
{
  "prd": {
    "problem": "<h2>Core Problem</h2><p>[One-line problem statement]</p><h3>Details</h3><p>[Comprehensive problem analysis including market context, user impact, and current solutions]</p><h3>Market Gap</h3><p>[Specific gap in the market this addresses]</p><h3>Why Now?</h3><p>[Why this needs solving now]</p><h3>Problem Impact</h3><p>[Quantified problem impact on users]</p>",
    
    "solution": "<h2>Solution Overview</h2><p>[One-line solution value proposition]</p><h3>Solution Details</h3><p>[Comprehensive solution description including approach, architecture, and key capabilities]</p><h3>Key Differentiators</h3><ul><li>[Competitive advantage 1]</li><li>[Competitive advantage 2]</li></ul><h3>Constraints & Limitations</h3><ul><li>[Limitation 1]</li><li>[Limitation 2]</li></ul><h3>Critical Assumptions</h3><ul><li>[Assumption 1]</li><li>[Assumption 2]</li></ul>",
    
    "targetAudience": "<h2>Primary User Persona</h2><p>[Detailed primary user persona]</p><h3>Secondary Users</h3><p>[Secondary user personas]</p><h3>Key Demographics</h3><ul><li>[Demographic factor 1]</li><li>[Demographic factor 2]</li></ul><h3>Psychographic Profile</h3><ul><li>[Psychographic detail 1]</li><li>[Psychographic detail 2]</li></ul><h3>User Behaviors</h3><ul><li>[Behavior pattern 1]</li><li>[Behavior pattern 2]</li></ul><h3>Critical User Needs</h3><ul><li>[Need 1]</li><li>[Need 2]</li></ul>",
    
    "features": [
      {
        "name": "Feature name",
        "description": "Detailed feature description",
        "priority": "must-have",
        "implementation_status": "not_started"
      }
    ],
    
    "tech_stack": "<h2>Technology Stack</h2><h3>Frontend Technologies</h3><ul><li>[Frontend tech 1]</li><li>[Frontend tech 2]</li></ul><h3>Backend Technologies</h3><ul><li>[Backend tech 1]</li><li>[Backend tech 2]</li></ul><h3>Infrastructure</h3><ul><li>[Infrastructure need 1]</li><li>[Infrastructure need 2]</li></ul><h3>Third-Party Integrations</h3><ul><li>[Integration 1]</li><li>[Integration 2]</li></ul><h3>Security Requirements</h3><p>[Security requirements and considerations]</p><h3>Scalability Considerations</h3><p>[Scalability requirements and approach]</p>",
    
    "success_metrics": "<h2>Success Metrics & KPIs</h2><h3>User Success Metrics</h3><ul><li>[User metric 1]</li><li>[User metric 2]</li></ul><h3>Business Success Metrics</h3><ul><li>[Business metric 1]</li><li>[Business metric 2]</li></ul><h3>Technical Performance Metrics</h3><ul><li>[Performance metric 1]</li><li>[Performance metric 2]</li></ul><h3>Key Learning Objectives</h3><ul><li>[Learning goal 1]</li><li>[Learning goal 2]</li></ul><h3>Success Validation</h3><p>[How to validate success]</p><h3>Timeline & Milestones</h3><p>[Expected time to validation with key milestones]</p>"
  }
}`},{role:"user",content:`Help me define the optimal MVP version of this product that solves the main problem for this customer persona.

Product Description: ${t}

Main Problem: ${n.biggestFrustration}
Additional Problems:
- Pain Points: ${n.painPoints}
- Manual Tasks: ${n.manualTasks.join(", ")}
- Inefficiencies: ${n.inefficiencies.join(", ")}

Customer Persona: ${JSON.stringify(e,null,2)}`}];try{const o=await pu.chat.completions.create({model:"gpt-4o",messages:s,temperature:.7,max_tokens:4e3,response_format:{type:"json_object"}}),i=o.choices[0].message.content,a=o.usage;return await Xi({model:"gpt-4o",requestType:"generate_mvp_prd",requestPayload:r,responsePayload:i,input_tokens:a==null?void 0:a.prompt_tokens,output_tokens:a==null?void 0:a.completion_tokens}),i}catch(o){throw await Xi({model:"gpt-4o",requestType:"generate_mvp_prd",requestPayload:r,error:o}),new wr(Xy(o),o)}}const NP=[{title:"AI-Powered PRD Generation",description:"Let AI help you research and write your PRD. We'll analyze your product details and generate comprehensive content for each section."},{title:"Product Details",description:"Let's gather some information about your product and target audience to generate the most relevant content."}];function jY(){const e=bn(),{productSlug:t}=ao(),[n,r]=y.useState(0),[s,o]=y.useState(!1),[i,a]=y.useState({productDescription:"",targetAudience:""}),[l,c]=y.useState(null);y.useEffect(()=>{async function m(){if(t)try{const{data:g,error:v}=await G.from("products").select("description").eq("slug",t).single();if(v)throw v;g&&a(x=>({...x,productDescription:g.description||""}))}catch(g){console.error("Error loading product description:",g)}}m()},[t]);const u=m=>{const{name:g,value:v}=m.target;a(x=>({...x,[g]:v})),l&&c(null)},d=()=>{r(1)},h=()=>{r(0),l&&c(null)},p=async()=>{if(!t){c("Product slug is missing");return}try{o(!0),c(null);const m=await TY({productDescription:i.productDescription,targetAudience:i.targetAudience}),g=JSON.parse(m);e(`/product/${t}/customer-profiles`,{state:{profiles:g}})}catch(m){m instanceof wr?c(m.message):c("Something went wrong. Please try again later.")}finally{o(!1)}};return f.jsxs(Et,{children:[f.jsx(bD,{asChild:!0,children:f.jsxs(K,{variant:"secondary",className:"flex items-center gap-2",children:[f.jsx(Fa,{className:"w-4 h-4"}),"Research & Write PRD with AI"]})}),f.jsxs(yt,{className:"sm:max-w-[600px] p-0 overflow-hidden",children:[f.jsxs("div",{className:"bg-brand-purple/10 p-6",children:[f.jsxs(vt,{className:"mb-0",children:[n===1&&f.jsx(K,{variant:"ghost",size:"sm",className:"absolute left-4 top-4 p-0 w-8 h-8 text-brand-purple hover:bg-brand-purple/10",onClick:h,children:f.jsx(jy,{className:"h-4 w-4"})}),f.jsx(xt,{className:"text-xl text-brand-purple",children:NP[n].title}),f.jsx(kt,{className:"text-gray-700",children:NP[n].description})]}),f.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-1",children:[f.jsx("div",{className:Le("h-2 w-8 rounded-full transition-colors",n===0?"bg-brand-purple":"bg-gray-300")}),f.jsx("div",{className:Le("h-2 w-8 rounded-full transition-colors",n===1?"bg-brand-purple":"bg-gray-300")})]})]}),l&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-3 mx-6 mt-4 rounded-lg flex items-center gap-2",children:[f.jsx(vn,{className:"w-4 h-4 flex-shrink-0"}),f.jsx("p",{children:l})]}),n===0?f.jsxs("div",{className:"px-6 py-6",children:[f.jsxs("div",{className:"mb-6 bg-gradient-to-r from-brand-purple/5 to-brand-purple/10 p-4 rounded-lg border border-brand-purple/20",children:[f.jsxs("h3",{className:"font-medium text-brand-purple mb-2 flex items-center",children:[f.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Let AI do the heavy lifting"]}),f.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Our AI assistant will help you create a professional PRD by analyzing your inputs and generating high-quality content."})]}),f.jsx("h3",{className:"font-medium text-gray-800 mb-3",children:"How the process works:"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg transition-colors hover:bg-gray-100",children:[f.jsx("div",{className:"w-8 h-8 bg-brand-purple/20 rounded-full flex items-center justify-center flex-shrink-0 text-brand-purple",children:f.jsx(TN,{className:"w-4 h-4"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-800",children:"Enter your product details"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Be as detailed as possible about your product's purpose and features"})]})]}),f.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg transition-colors hover:bg-gray-100",children:[f.jsx("div",{className:"w-8 h-8 bg-brand-purple/20 rounded-full flex items-center justify-center flex-shrink-0 text-brand-purple",children:f.jsx(vb,{className:"w-4 h-4"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-800",children:"Select your customer persona"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Fluxr will analyze your market and suggest who to target"})]})]}),f.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg transition-colors hover:bg-gray-100",children:[f.jsx("div",{className:"w-8 h-8 bg-brand-purple/20 rounded-full flex items-center justify-center flex-shrink-0 text-brand-purple",children:f.jsx(AN,{className:"w-4 h-4"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-800",children:"Generate your PRD"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Our AI will create a comprehensive PRD based on your inputs"})]})]}),f.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg transition-colors hover:bg-gray-100",children:[f.jsx("div",{className:"w-8 h-8 bg-brand-purple/20 rounded-full flex items-center justify-center flex-shrink-0 text-brand-purple",children:f.jsx(d7,{className:"w-4 h-4"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-800",children:"Review and customize"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Approve, edit, and refine the generated content"})]})]})]})]}):f.jsx("div",{className:"px-6 py-6 space-y-6",children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs(Xm,{htmlFor:"productDescription",className:"text-gray-700 font-medium flex items-center",children:[f.jsx(TN,{className:"w-4 h-4 mr-2 text-brand-purple"}),"Product Description"]}),f.jsx(Zt,{id:"productDescription",name:"productDescription",value:i.productDescription,onChange:u,placeholder:"Describe your product in detail...",className:"min-h-[120px] border-gray-300 focus:border-brand-purple focus:ring-brand-purple"}),f.jsx("p",{className:"text-xs text-gray-500 italic",children:"Provide as much detail as possible about what your product does and its key features"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs(Xm,{htmlFor:"targetAudience",className:"text-gray-700 font-medium flex items-center",children:[f.jsx(vb,{className:"w-4 h-4 mr-2 text-brand-purple"}),"Target Audience"]}),f.jsx(Zt,{id:"targetAudience",name:"targetAudience",value:i.targetAudience,onChange:u,placeholder:"Tell us everything you know about your target audience...",className:"min-h-[120px] border-gray-300 focus:border-brand-purple focus:ring-brand-purple"}),f.jsx("p",{className:"text-xs text-gray-500 italic",children:"Describe who will use your product, their pain points, and what they're looking for"})]})]})}),f.jsx(Ht,{className:"p-4 bg-gray-50 border-t border-gray-200",children:f.jsx(K,{variant:"secondary",onClick:n===0?d:p,disabled:s,className:"w-full sm:w-auto",children:s?f.jsxs("span",{className:"flex items-center justify-center gap-2",children:[f.jsx(Fa,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):n===0?f.jsxs("span",{className:"flex items-center justify-center gap-2",children:[f.jsx(HW,{className:"w-4 h-4"}),"Start AI Generation"]}):f.jsxs("span",{className:"flex items-center justify-center gap-2",children:[f.jsx(AN,{className:"w-4 h-4"}),"Generate PRD Content"]})})})]})]})}function OY(){const[e,t]=y.useState(!1);y.useEffect(()=>{if(!localStorage.getItem("prd_tooltip_shown")){const s=setTimeout(()=>{t(!0)},1e3);return()=>clearTimeout(s)}},[]);const n=()=>{t(!1),localStorage.setItem("prd_tooltip_shown","true")};return e?f.jsx("div",{className:"absolute -bottom-16 right-0 animate-in fade-in zoom-in duration-300",children:f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute -top-2 right-14 w-4 h-4 bg-brand-purple rotate-45"}),f.jsx("div",{className:"bg-brand-purple text-white px-6 py-3 rounded-lg shadow-lg relative z-10",children:f.jsx("p",{className:"font-medium text-center whitespace-nowrap",children:"Start here!"})}),f.jsx("button",{onClick:n,className:"absolute -top-2 -right-2 w-5 h-5 bg-white rounded-full flex items-center justify-center shadow-sm hover:bg-gray-100 z-20",children:f.jsx("span",{className:"text-xs text-gray-600",children:""})})]})}):null}function un(e){this.content=e}un.prototype={constructor:un,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,s=r.find(e),o=r.content.slice();return s==-1?o.push(n||e,t):(o[s+1]=t,n&&(o[s]=n)),new un(o)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new un(n)},addToStart:function(e,t){return new un([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new un(n)},addBefore:function(e,t,n){var r=this.remove(t),s=r.content.slice(),o=r.find(e);return s.splice(o==-1?s.length:o,0,t,n),new un(s)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=un.from(e),e.size?new un(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=un.from(e),e.size?new un(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=un.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};un.from=function(e){if(e instanceof un)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new un(t)};function O$(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let s=e.child(r),o=t.child(r);if(s==o){n+=s.nodeSize;continue}if(!s.sameMarkup(o))return n;if(s.isText&&s.text!=o.text){for(let i=0;s.text[i]==o.text[i];i++)n++;return n}if(s.content.size||o.content.size){let i=O$(s.content,o.content,n+1);if(i!=null)return i}n+=s.nodeSize}}function M$(e,t,n,r){for(let s=e.childCount,o=t.childCount;;){if(s==0||o==0)return s==o?null:{a:n,b:r};let i=e.child(--s),a=t.child(--o),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,u=Math.min(i.text.length,a.text.length);for(;c<u&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=M$(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class ee{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,s=0,o){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>t&&r(l,s+a,o||null,i)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,n-u),r,s+u)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,s){let o="",i=!0;return this.nodesBetween(t,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(t,l)-l,n-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:o+=r),o+=c},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,s=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),o=1);o<t.content.length;o++)s.push(t.content[o]);return new ee(s,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],s=0;if(n>t)for(let o=0,i=0;i<n;o++){let a=this.content[o],l=i+a.nodeSize;l>t&&((i<t||l>n)&&(a.isText?a=a.cut(Math.max(0,t-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,t-i-1),Math.min(a.content.size,n-i-1))),r.push(a),s+=a.nodeSize),i=l}return new ee(r,s)}cutByIndex(t,n){return t==n?ee.empty:t==0&&n==this.content.length?this:new ee(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let s=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return s[t]=n,new ee(s,o)}addToStart(t){return new ee([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new ee(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];t(s,r,n),r+=s.nodeSize}}findDiffStart(t,n=0){return O$(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return M$(this,t,n,r)}findIndex(t,n=-1){if(t==0)return np(0,t);if(t==this.size)return np(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let r=0,s=0;;r++){let o=this.child(r),i=s+o.nodeSize;if(i>=t)return i==t||n>0?np(r+1,i):np(r,s);s=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return ee.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ee(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return ee.empty;let n,r=0;for(let s=0;s<t.length;s++){let o=t[s];r+=o.nodeSize,s&&o.isText&&t[s-1].sameMarkup(o)?(n||(n=t.slice(0,s)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new ee(n||t,r)}static from(t){if(!t)return ee.empty;if(t instanceof ee)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ee([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ee.empty=new ee([],0);const rx={index:0,offset:0};function np(e,t){return rx.index=e,rx.offset=t,rx}function ng(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!ng(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!ng(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let tt=class Vb{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let s=0;s<t.length;s++){let o=t[s];if(this.eq(o))return t;if(this.type.excludes(o.type))n||(n=t.slice(0,s));else{if(o.type.excludes(this.type))return t;!r&&o.type.rank>this.type.rank&&(n||(n=t.slice(0,s)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&ng(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Vb.none;if(t instanceof Vb)return[t];let n=t.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};tt.none=[];class rg extends Error{}class le{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=D$(this.content,t+this.openStart,n);return r&&new le(r,this.openStart,this.openEnd)}removeBetween(t,n){return new le(I$(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return le.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new le(ee.fromJSON(t,n.content),r,s)}static maxOpen(t,n=!0){let r=0,s=0;for(let o=t.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=t.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)s++;return new le(t,r,s)}}le.empty=new le(ee.empty,0,0);function I$(e,t,n){let{index:r,offset:s}=e.findIndex(t),o=e.maybeChild(r),{index:i,offset:a}=e.findIndex(n);if(s==t||o.isText){if(a!=n&&!e.child(i).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(I$(o.content,t-s-1,n-s-1)))}function D$(e,t,n,r){let{index:s,offset:o}=e.findIndex(t),i=e.maybeChild(s);if(o==t||i.isText)return e.cut(0,t).append(n).append(e.cut(t));let a=D$(i.content,t-o-1,n);return a&&e.replaceChild(s,i.copy(a))}function MY(e,t,n){if(n.openStart>e.depth)throw new rg("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new rg("Inconsistent open depths");return $$(e,t,n,0)}function $$(e,t,n,r){let s=e.index(r),o=e.node(r);if(s==t.index(r)&&r<e.depth-n.openStart){let i=$$(e,t,n,r+1);return o.copy(o.content.replaceChild(s,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let i=e.parent,a=i.content;return Ua(i,a.cut(0,e.parentOffset).append(n.content).append(a.cut(t.parentOffset)))}else{let{start:i,end:a}=IY(n,e);return Ua(o,F$(e,i,a,t,r))}else return Ua(o,sg(e,t,r))}function L$(e,t){if(!t.type.compatibleContent(e.type))throw new rg("Cannot join "+t.type.name+" onto "+e.type.name)}function Wb(e,t,n){let r=e.node(n);return L$(r,t.node(n)),r}function za(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Nd(e,t,n,r){let s=(t||e).node(n),o=0,i=t?t.index(n):s.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(za(e.nodeAfter,r),o++));for(let a=o;a<i;a++)za(s.child(a),r);t&&t.depth==n&&t.textOffset&&za(t.nodeBefore,r)}function Ua(e,t){return e.type.checkContent(t),e.copy(t)}function F$(e,t,n,r,s){let o=e.depth>s&&Wb(e,t,s+1),i=r.depth>s&&Wb(n,r,s+1),a=[];return Nd(null,e,s,a),o&&i&&t.index(s)==n.index(s)?(L$(o,i),za(Ua(o,F$(e,t,n,r,s+1)),a)):(o&&za(Ua(o,sg(e,t,s+1)),a),Nd(t,n,s,a),i&&za(Ua(i,sg(n,r,s+1)),a)),Nd(r,null,s,a),new ee(a)}function sg(e,t,n){let r=[];if(Nd(null,e,n,r),e.depth>n){let s=Wb(e,t,n+1);za(Ua(s,sg(e,t,n+1)),r)}return Nd(t,null,n,r),new ee(r)}function IY(e,t){let n=t.depth-e.openStart,s=t.node(n).copy(e.content);for(let o=n-1;o>=0;o--)s=t.node(o).copy(ee.from(s));return{start:s.resolveNoCache(e.openStart+n),end:s.resolveNoCache(s.content.size-e.openEnd-n)}}class yf{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=t.child(n);return r?t.child(n).cut(r):s}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let o=0;o<t;o++)s+=r.child(o).nodeSize;return s}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return tt.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),s=t.maybeChild(n);if(!r){let a=r;r=s,s=a}let o=r.marks;for(var i=0;i<o.length;i++)o[i].type.spec.inclusive===!1&&(!s||!o[i].isInSet(s.marks))&&(o=o[i--].removeFromSet(o));return o}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=t.parent.maybeChild(t.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new og(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,o=n;for(let i=t;;){let{index:a,offset:l}=i.content.findIndex(o),c=o-l;if(r.push(i,a,s+l),!c||(i=i.child(a),i.isText))break;o=c-1,s+=l+1}return new yf(n,r,o)}static resolveCached(t,n){let r=PP.get(t);if(r)for(let o=0;o<r.elts.length;o++){let i=r.elts[o];if(i.pos==n)return i}else PP.set(t,r=new DY);let s=r.elts[r.i]=yf.resolve(t,n);return r.i=(r.i+1)%$Y,s}}class DY{constructor(){this.elts=[],this.i=0}}const $Y=12,PP=new WeakMap;class og{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const LY=Object.create(null);let Ii=class qb{constructor(t,n,r,s=tt.none){this.type=t,this.attrs=n,this.marks=s,this.content=r||ee.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,s=0){this.content.nodesBetween(t,n,r,s,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,s){return this.content.textBetween(t,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&ng(this.attrs,n||t.defaultAttrs||LY)&&tt.sameSet(this.marks,r||tt.none)}copy(t=null){return t==this.content?this:new qb(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new qb(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return le.empty;let s=this.resolve(t),o=this.resolve(n),i=r?0:s.sharedDepth(n),a=s.start(i),c=s.node(i).content.cut(s.pos-a,o.pos-a);return new le(c,s.depth-i,o.depth-i)}replace(t,n,r){return MY(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(s==t||n.isText)return n;t-=s+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(t){return yf.resolveCached(this,t)}resolveNoCache(t){return yf.resolve(this,t)}rangeHasMark(t,n,r){let s=!1;return n>t&&this.nodesBetween(t,n,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),B$(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=ee.empty,s=0,o=r.childCount){let i=this.contentMatchAt(t).matchFragment(r,s,o),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=s;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(t).matchType(r),i=o&&o.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=tt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!tt.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let s=ee.fromJSON(t,n.content),o=t.nodeType(n.type).create(n.attrs,s,r);return o.type.checkAttrs(o.attrs),o}};Ii.prototype.text=void 0;class ig extends Ii{constructor(t,n,r,s){if(super(t,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):B$(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new ig(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new ig(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function B$(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class rl{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new FY(t,n);if(r.next==null)return rl.empty;let s=z$(r);r.next&&r.err("Unexpected trailing text");let o=qY(WY(s));return GY(o,r),o}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let s=this;for(let o=n;s&&o<r;o++)s=s.matchType(t.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let s=[this];function o(i,a){let l=i.matchFragment(t,r);if(l&&(!n||l.validEnd))return ee.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:u,next:d}=i.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let h=o(d,a.concat(u));if(h)return h}}return null}return o(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(t)){let i=[];for(let a=s;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<o.next.length;i++){let{type:a,next:l}=o.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let s=0;s<r.next.length;s++)t.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),t.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)o+=(i?", ":"")+r.next[i].type.name+"->"+t.indexOf(r.next[i].next);return o}).join(`
`)}}rl.empty=new rl(!0);class FY{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function z$(e){let t=[];do t.push(BY(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function BY(e){let t=[];do t.push(zY(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function zY(e){let t=VY(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=UY(e,t);else break;return t}function AP(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function UY(e,t){let n=AP(e),r=n;return e.eat(",")&&(e.next!="}"?r=AP(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function HY(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let s=[];for(let o in n){let i=n[o];i.isInGroup(t)&&s.push(i)}return s.length==0&&e.err("No node type or group '"+t+"' found"),s}function VY(e){if(e.eat("(")){let t=z$(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=HY(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function WY(e){let t=[[]];return s(o(e,0),n()),t;function n(){return t.push([])-1}function r(i,a,l){let c={term:l,to:a};return t[i].push(c),c}function s(i,a){i.forEach(l=>l.to=a)}function o(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=o(i.exprs[l],a);if(l==i.exprs.length-1)return c;s(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),s(o(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return s(o(i.expr,a),l),s(o(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(o(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let u=n();s(o(i.expr,l),u),l=u}if(i.max==-1)s(o(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let u=n();r(l,u),s(o(i.expr,l),u),l=u}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function U$(e,t){return t-e}function TP(e,t){let n=[];return r(t),n.sort(U$);function r(s){let o=e[s];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(s);for(let i=0;i<o.length;i++){let{term:a,to:l}=o[i];!a&&n.indexOf(l)==-1&&r(l)}}}function qY(e){let t=Object.create(null);return n(TP(e,0));function n(r){let s=[];r.forEach(i=>{e[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);TP(e,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=t[r.join(",")]=new rl(r.indexOf(e.length-1)>-1);for(let i=0;i<s.length;i++){let a=s[i][1].sort(U$);o.next.push({type:s[i][0],next:t[a.join(",")]||n(a)})}return o}}function GY(e,t){for(let n=0,r=[e];n<r.length;n++){let s=r[n],o=!s.validEnd,i=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];i.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function H$(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function V$(e,t){let n=Object.create(null);for(let r in e){let s=t&&t[r];if(s===void 0){let o=e[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function W$(e,t,n,r){for(let s in t)if(!(s in e))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in e){let o=e[s];o.validate&&o.validate(t[s])}}function q$(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new JY(e,r,t[r]);return n}let RP=class G${constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=q$(t,r.attrs),this.defaultAttrs=H$(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==rl.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:V$(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ii(this,this.computeAttrs(t),ee.from(n),tt.setFrom(r))}createChecked(t=null,n,r){return n=ee.from(n),this.checkContent(n),new Ii(this,this.computeAttrs(t),n,tt.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=ee.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let s=this.contentMatch.matchFragment(n),o=s&&s.fillBefore(ee.empty,!0);return o?new Ii(this,t,n.append(o),tt.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){W$(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:tt.none:t}static compile(t,n){let r=Object.create(null);t.forEach((o,i)=>r[o]=new G$(o,n,i));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function KY(e,t,n){let r=n.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${o}`)}}class JY{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?KY(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Qy{constructor(t,n,r,s){this.name=t,this.rank=n,this.schema=r,this.spec=s,this.attrs=q$(t,s.attrs),this.excluded=null;let o=H$(this.attrs);this.instance=o?new tt(this,o):null}create(t=null){return!t&&this.instance?this.instance:new tt(this,V$(this.attrs,t))}static compile(t,n){let r=Object.create(null),s=0;return t.forEach((o,i)=>r[o]=new Qy(o,s++,n,i)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){W$(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class K${constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in t)n[s]=t[s];n.nodes=un.from(t.nodes),n.marks=un.from(t.marks||{}),this.nodes=RP.compile(this.spec.nodes,this),this.marks=Qy.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],i=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[i]||(r[i]=rl.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?jP(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],i=o.spec.excludes;o.excluded=i==null?[o]:i==""?[]:jP(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,s){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof RP){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,s)}text(t,n){let r=this.nodes.text;return new ig(r,r.defaultAttrs,t,tt.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeFromJSON(t){return Ii.fromJSON(this,t)}markFromJSON(t){return tt.fromJSON(this,t)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function jP(e,t){let n=[];for(let r=0;r<t.length;r++){let s=t[r],o=e.marks[s],i=o;if(o)n.push(o);else for(let a in e.marks){let l=e.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function YY(e){return e.tag!=null}function XY(e){return e.style!=null}class Di{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(YY(s))this.tags.push(s);else if(XY(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=t.nodes[s.node];return o.contentMatch.matchType(o)})}parse(t,n={}){let r=new MP(this,n,!1);return r.addAll(t,tt.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new MP(this,n,!0);return r.addAll(t,tt.none,n.from,n.to),le.maxOpen(r.finish())}matchTag(t,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(eX(t,o.tag)&&(o.namespace===void 0||t.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let i=o.getAttrs(t);if(i===!1)continue;o.attrs=i||void 0}return o}}}matchStyle(t,n,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let i=this.styles[o],a=i.style;if(!(a.indexOf(t)!=0||i.context&&!r.matchesContext(i.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(t){let n=[];function r(s){let o=s.priority==null?50:s.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<o)break}n.splice(i,0,s)}for(let s in t.marks){let o=t.marks[s].spec.parseDOM;o&&o.forEach(i=>{r(i=IP(i)),i.mark||i.ignore||i.clearMark||(i.mark=s)})}for(let s in t.nodes){let o=t.nodes[s].spec.parseDOM;o&&o.forEach(i=>{r(i=IP(i)),i.node||i.ignore||i.mark||(i.node=s)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Di(t,Di.schemaRules(t)))}}const J$={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},QY={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Y$={ol:!0,ul:!0},vf=1,Gb=2,Pd=4;function OP(e,t,n){return t!=null?(t?vf:0)|(t==="full"?Gb:0):e&&e.whitespace=="pre"?vf|Gb:n&~Pd}class rp{constructor(t,n,r,s,o,i){this.type=t,this.attrs=n,this.marks=r,this.solid=s,this.options=i,this.content=[],this.activeMarks=tt.none,this.match=o||(i&Pd?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ee.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(t.type))?(this.match=r,s):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&vf)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let n=ee.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(ee.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!J$.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class MP{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,o,i=OP(null,n.preserveWhitespace,0)|(r?Pd:0);s?o=new rp(s.type,s.attrs,tt.none,!0,n.topMatch||s.type.contentMatch,i):r?o=new rp(null,null,tt.none,!0,null,i):o=new rp(t.schema.topNodeType,null,tt.none,!0,null,i),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,s=this.top,o=s.options&Gb?"full":this.localPreserveWS||(s.options&vf)>0;if(o==="full"||s.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=s.content[s.content.length-1],a=t.previousSibling;(!i||a&&a.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let s=this.localPreserveWS,o=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let i=t.nodeName.toLowerCase(),a;Y$.hasOwnProperty(i)&&this.parser.normalizeLists&&ZY(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(l?l.ignore:QY.hasOwnProperty(i))this.findInside(t),this.ignoreFallback(t,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,u=this.needsBlock;if(J$.hasOwnProperty(i))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let d=l&&l.skip?n:this.readStyles(t,n);d&&this.addAll(t,d),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(t,n);c&&this.addElementByRule(t,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],i=r.getPropertyValue(o);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(o,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(t,n,r,s){let o,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r)||this.leafFallback(t,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(t);else if(s)this.addElement(t,r,s);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}o&&this.sync(a)&&this.open--}addAll(t,n,r,s){let o=r||0;for(let i=r?t.childNodes[r]:t.firstChild,a=s==null?null:t.childNodes[s];i!=a;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i,n);this.findAtPoint(t,o)}findPlace(t,n){let r,s;for(let o=this.open;o>=0;o--){let i=this.nodes[o],a=i.findWrapping(t);if(a&&(!r||r.length>a.length)&&(r=a,s=i,!a.length)||i.solid)break}if(!r)return null;this.sync(s);for(let o=0;o<r.length;o++)n=this.enterInner(r[o],null,n,!1);return n}insertNode(t,n){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let r=this.findPlace(t,n);if(r){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=tt.none;for(let i of r.concat(t.marks))(s.type?s.type.allowsMarkType(i.type):DP(i.type,t.type))&&(o=i.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,s){let o=this.findPlace(t.create(n),r);return o&&(o=this.enterInner(t,n,r,!0,s)),o}enterInner(t,n,r,s=!1,o){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(t);let a=OP(t,o,i.options);i.options&Pd&&i.content.length==0&&(a|=Pd);let l=tt.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):DP(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new rp(t,n,l,s,null,a)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=vf)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)t+=r[s].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&t.nodeType==1&&t.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(i(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function ZY(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&Y$.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function eX(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function IP(e){let t={};for(let n in e)t[n]=e[n];return t}function DP(e,t){let n=t.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(e))continue;let o=[],i=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==t||o.indexOf(u)<0&&i(u))return!0}};if(i(s.contentMatch))return!0}}class yl{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=sx(n).createDocumentFragment());let s=r,o=[];return t.forEach(i=>{if(o.length||i.marks.length){let a=0,l=0;for(;a<o.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)s=o.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],u=this.serializeMark(c,i.isInline,n);u&&(o.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:s}=Zp(sx(n),this.nodes[t.type.name](t),null,t.attrs);if(s){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,s)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let s=t.marks.length-1;s>=0;s--){let o=this.serializeMark(t.marks[s],t.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(t,n,r={}){let s=this.marks[t.type.name];return s&&Zp(sx(r),s(t,n),null,t.attrs)}static renderSpec(t,n,r=null,s){return Zp(t,n,r,s)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new yl(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=$P(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return $P(t.marks)}}function $P(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function sx(e){return e.document||window.document}const LP=new WeakMap;function tX(e){let t=LP.get(e);return t===void 0&&LP.set(e,t=nX(e)),t}function nX(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(e),t}function Zp(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let s=t[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=tX(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=s.indexOf(" ");i>0&&(n=s.slice(0,i),s=s.slice(i+1));let a,l=n?e.createElementNS(n,s):e.createElement(s),c=t[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<t.length;d++){let h=t[d];if(h===0){if(d<t.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=Zp(e,h,n,r);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const X$=65535,Q$=Math.pow(2,16);function rX(e,t){return e+t*Q$}function FP(e){return e&X$}function sX(e){return(e-(e&X$))/Q$}const Z$=1,eL=2,em=4,tL=8;class Kb{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&tL)>0}get deletedBefore(){return(this.delInfo&(Z$|em))>0}get deletedAfter(){return(this.delInfo&(eL|em))>0}get deletedAcross(){return(this.delInfo&em)>0}}class vr{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&vr.empty)return vr.empty}recover(t){let n=0,r=FP(t);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+sX(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let s=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>t)break;let c=this.ranges[a+o],u=this.ranges[a+i],d=l+c;if(t<=d){let h=c?t==l?-1:t==d?1:n:n,p=l+s+(h<0?0:u);if(r)return p;let m=t==(n<0?l:d)?null:rX(a/3,t-l),g=t==l?eL:t==d?Z$:em;return(n<0?t!=l:t!=d)&&(g|=tL),new Kb(p,g,m)}s+=u-c}return r?t+s:new Kb(t+s,0,null)}touches(t,n){let r=0,s=FP(n),o=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[a+o],u=l+c;if(t<=u&&a==s*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let i=this.ranges[s],a=i-(this.inverted?o:0),l=i+(this.inverted?0:o),c=this.ranges[s+n],u=this.ranges[s+r];t(a,a+c,l,l+u),o+=u-c}}invert(){return new vr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?vr.empty:new vr(t<0?[0,-t,0]:[0,0,t])}}vr.empty=new vr([]);class vc{constructor(t=[],n,r=0,s=t.length){this.maps=t,this.mirror=n,this.from=r,this.to=s}slice(t=0,n=this.maps.length){return new vc(this.maps,this.mirror,t,n)}copy(){return new vc(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,n){this.to=this.maps.push(t),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(t){for(let n=0,r=this.maps.length;n<t.maps.length;n++){let s=t.getMirror(n);this.appendMap(t.maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this.maps.length+t.maps.length;n>=0;n--){let s=t.getMirror(n);this.appendMap(t.maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let t=new vc;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this.maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let s=0;for(let o=this.from;o<this.to;o++){let i=this.maps[o],a=i.mapResult(t,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,t=this.maps[l].recover(a.recover);continue}}s|=a.delInfo,t=a.pos}return r?t:new Kb(t,s,null)}}const ox=Object.create(null);class On{getMap(){return vr.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ox[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in ox)throw new RangeError("Duplicate use of step JSON ID "+t);return ox[t]=n,n.prototype.jsonID=t,n}}class Ot{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Ot(t,null)}static fail(t){return new Ot(null,t)}static fromReplace(t,n,r,s){try{return Ot.ok(t.replace(n,r,s))}catch(o){if(o instanceof rg)return Ot.fail(o.message);throw o}}}function sE(e,t,n){let r=[];for(let s=0;s<e.childCount;s++){let o=e.child(s);o.content.size&&(o=o.copy(sE(o.content,t,o))),o.isInline&&(o=t(o,n,s)),r.push(o)}return ee.fromArray(r)}class Ci extends On{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new le(sE(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),s),n.openStart,n.openEnd);return Ot.fromReplace(t,this.from,this.to,o)}invert(){return new Qs(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ci(n.pos,r.pos,this.mark)}merge(t){return t instanceof Ci&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ci(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ci(n.from,n.to,t.markFromJSON(n.mark))}}On.jsonID("addMark",Ci);class Qs extends On{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new le(sE(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),t),n.openStart,n.openEnd);return Ot.fromReplace(t,this.from,this.to,r)}invert(){return new Ci(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Qs(n.pos,r.pos,this.mark)}merge(t){return t instanceof Qs&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Qs(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Qs(n.from,n.to,t.markFromJSON(n.mark))}}On.jsonID("removeMark",Qs);class Ei extends On{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ot.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ot.fromReplace(t,this.pos,this.pos+1,new le(ee.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new Ei(this.pos,n.marks[s]);return new Ei(this.pos,this.mark)}}return new Lc(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ei(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ei(n.pos,t.markFromJSON(n.mark))}}On.jsonID("addNodeMark",Ei);class Lc extends On{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ot.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ot.fromReplace(t,this.pos,this.pos+1,new le(ee.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ei(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Lc(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Lc(n.pos,t.markFromJSON(n.mark))}}On.jsonID("removeNodeMark",Lc);class Xt extends On{constructor(t,n,r,s=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=s}apply(t){return this.structure&&Jb(t,this.from,this.to)?Ot.fail("Structure replace would overwrite content"):Ot.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new vr([this.from,this.to-this.from,this.slice.size])}invert(t){return new Xt(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Xt(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(t){if(!(t instanceof Xt)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?le.empty:new le(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Xt(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?le.empty:new le(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Xt(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Xt(n.from,n.to,le.fromJSON(t,n.slice),!!n.structure)}}On.jsonID("replace",Xt);class en extends On{constructor(t,n,r,s,o,i,a=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=i,this.structure=a}apply(t){if(this.structure&&(Jb(t,this.from,this.gapFrom)||Jb(t,this.gapTo,this.to)))return Ot.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ot.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ot.fromReplace(t,this.from,this.to,r):Ot.fail("Content does not fit in gap")}getMap(){return new vr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new en(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||o>r.pos?null:new en(n.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new en(n.from,n.to,n.gapFrom,n.gapTo,le.fromJSON(t,n.slice),n.insert,!!n.structure)}}On.jsonID("replaceAround",en);function Jb(e,t,n){let r=e.resolve(t),s=n-t,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let i=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,s--}}return!1}function oX(e,t,n,r){let s=[],o=[],i,a;e.doc.nodesBetween(t,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,t),p=Math.min(c+l.nodeSize,n),m=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(m)||(i&&i.to==h&&i.mark.eq(d[g])?i.to=p:s.push(i=new Qs(h,p,d[g])));a&&a.to==h?a.to=p:o.push(a=new Ci(h,p,r))}}),s.forEach(l=>e.step(l)),o.forEach(l=>e.step(l))}function iX(e,t,n,r){let s=[],o=0;e.doc.nodesBetween(t,n,(i,a)=>{if(!i.isInline)return;o++;let l=null;if(r instanceof Qy){let c=i.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let p=0;p<s.length;p++){let m=s[p];m.step==o-1&&d.eq(s[p].style)&&(h=m)}h?(h.to=c,h.step=o):s.push({style:d,from:Math.max(a,t),to:c,step:o})}}}),s.forEach(i=>e.step(new Qs(i.from,i.to,i.style)))}function oE(e,t,n,r=n.contentMatch,s=!0){let o=e.doc.nodeAt(t),i=[],a=t+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)i.push(new Xt(a,u,le.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||e.step(new Qs(a,u,c.marks[h]));if(s&&c.isText&&n.whitespace!="pre"){let h,p=/\r?\n|\r/g,m;for(;h=p.exec(c.text);)m||(m=new le(ee.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new Xt(a+h.index,a+h.index+h[0].length,m))}}a=u}if(!r.validEnd){let l=r.fillBefore(ee.empty,!0);e.replace(a,a,new le(l,0,0))}for(let l=i.length-1;l>=0;l--)e.step(i[l])}function aX(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function mu(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let s=e.$from.node(r),o=e.$from.index(r),i=e.$to.indexAfter(r);if(r<e.depth&&s.canReplace(o,i,n))return r;if(r==0||s.type.spec.isolating||!aX(s,o,i))break}return null}function lX(e,t,n){let{$from:r,$to:s,depth:o}=t,i=r.before(o+1),a=s.after(o+1),l=i,c=a,u=ee.empty,d=0;for(let m=o,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,u=ee.from(r.node(m).copy(u)),d++):l--;let h=ee.empty,p=0;for(let m=o,g=!1;m>n;m--)g||s.after(m+1)<s.end(m)?(g=!0,h=ee.from(s.node(m).copy(h)),p++):c++;e.step(new en(l,c,i,a,new le(u.append(h),d,p),u.size-d,!0))}function iE(e,t,n=null,r=e){let s=cX(e,t),o=s&&uX(r,t);return o?s.map(BP).concat({type:t,attrs:n}).concat(o.map(BP)):null}function BP(e){return{type:e,attrs:null}}function cX(e,t){let{parent:n,startIndex:r,endIndex:s}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let i=o.length?o[0]:t;return n.canReplaceWith(r,s,i)?o:null}function uX(e,t){let{parent:n,startIndex:r,endIndex:s}=e,o=n.child(r),i=t.contentMatch.findWrapping(o.type);if(!i)return null;let l=(i.length?i[i.length-1]:t).contentMatch;for(let c=r;l&&c<s;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function dX(e,t,n){let r=ee.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ee.from(n[i].type.create(n[i].attrs,r))}let s=t.start,o=t.end;e.step(new en(s,o,s,o,new le(r,0,0),n.length,!0))}function fX(e,t,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,(i,a)=>{let l=typeof s=="function"?s(i):s;if(i.isTextblock&&!i.hasMarkup(r,l)&&hX(e.doc,e.mapping.slice(o).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&rL(e,i,a,o),oE(e,e.mapping.slice(o).map(a,1),r,void 0,c===null);let u=e.mapping.slice(o),d=u.map(a,1),h=u.map(a+i.nodeSize,1);return e.step(new en(d,h,d+1,h-1,new le(ee.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&nL(e,i,a,o),!1}})}function nL(e,t,n,r){t.forEach((s,o)=>{if(s.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(s.text);){let l=e.mapping.slice(r).map(n+1+o+i.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function rL(e,t,n,r){t.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+o);e.replaceWith(i,i+1,t.type.schema.text(`
`))}})}function hX(e,t,n){let r=e.resolve(t),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function pX(e,t,n,r,s){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let i=n.create(r,null,s||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,i);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new en(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new le(ee.from(i),0,0),1,!0))}function xc(e,t,n=1,r){let s=e.resolve(t),o=s.depth-n,i=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!i.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=n-2;c>o;c--,u--){let d=s.node(c),h=s.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(h,d.childCount),m=r&&r[u+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!g.type.validContent(p))return!1}let a=s.indexAfter(o),l=r&&r[0];return s.node(o).canReplaceWith(a,a,l?l.type:s.node(o+1).type)}function mX(e,t,n=1,r){let s=e.doc.resolve(t),o=ee.empty,i=ee.empty;for(let a=s.depth,l=s.depth-n,c=n-1;a>l;a--,c--){o=ee.from(s.node(a).copy(o));let u=r&&r[c];i=ee.from(u?u.type.create(u.attrs,i):s.node(a).copy(i))}e.step(new Xt(t,t,new le(o.append(i),n,n),!0))}function aa(e,t){let n=e.resolve(t),r=n.index();return sL(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function gX(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let s=0;s<t.childCount;s++){let o=t.child(s),i=o.type==r?e.type.schema.nodes.text:o.type;if(n=n.matchType(i),!n||!e.type.allowsMarks(o.marks))return!1}return n.validEnd}function sL(e,t){return!!(e&&t&&!e.isLeaf&&gX(e,t))}function Zy(e,t,n=-1){let r=e.resolve(t);for(let s=r.depth;;s--){let o,i,a=r.index(s);if(s==r.depth?(o=r.nodeBefore,i=r.nodeAfter):n>0?(o=r.node(s+1),a++,i=r.node(s).maybeChild(a)):(o=r.node(s).maybeChild(a-1),i=r.node(s+1)),o&&!o.isTextblock&&sL(o,i)&&r.node(s).canReplace(a,a+1))return t;if(s==0)break;t=n<0?r.before(s):r.after(s)}}function yX(e,t,n){let r=null,{linebreakReplacement:s}=e.doc.type.schema,o=e.doc.resolve(t-n),i=o.node().type;if(s&&i.inlineContent){let u=i.whitespace=="pre",d=!!i.contentMatch.matchType(s);u&&!d?r=!1:!u&&d&&(r=!0)}let a=e.steps.length;if(r===!1){let u=e.doc.resolve(t+n);rL(e,u.node(),u.before(),a)}i.inlineContent&&oE(e,t+n-1,i,o.node().contentMatchAt(o.index()),r==null);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new Xt(c,l.map(t+n,-1),le.empty,!0)),r===!0){let u=e.doc.resolve(c);nL(e,u.node(),u.before(),e.steps.length)}return e}function vX(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,n))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,n))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function oL(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let s=n.content;for(let o=0;o<n.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),u=!1;if(o==1)u=c.canReplace(l,l,s);else{let d=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function ev(e,t,n=t,r=le.empty){if(t==n&&!r.size)return null;let s=e.resolve(t),o=e.resolve(n);return iL(s,o,r)?new Xt(t,n,r):new xX(s,o,r).fit()}function iL(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class xX{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ee.empty;for(let s=0;s<=t.depth;s++){let o=t.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(s))})}for(let s=t.depth;s>0;s--)this.placed=ee.from(t.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(t<0?this.$to:r.doc.resolve(t));if(!s)return null;let o=this.placed,i=r.depth,a=s.depth;for(;i&&a&&o.childCount==1;)o=o.firstChild.content,i--,a--;let l=new le(o,i,a);return t>-1?new en(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Xt(r.pos,s.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<t;r++){let o=n.firstChild;if(n.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){t=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=ix(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let i=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(i?c.matchType(i.type)||(d=c.fillBefore(ee.from(i),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:d};if(n==2&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,s=ix(t,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new le(t,n+1,Math.max(r,s.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,s=ix(t,n);if(s.childCount<=1&&n>0){let o=t.size-n<=n+s.size;this.unplaced=new le(ad(t,n-1,1),n-1,o?n-1:r)}else this.unplaced=new le(ad(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:s,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-t,c=0,u=[],{match:d,type:h}=this.frontier[n];if(s){for(let g=0;g<s.childCount;g++)u.push(s.child(g));d=d.matchFragment(s)}let p=a.size+t-(i.content.size-i.openEnd);for(;c<a.childCount;){let g=a.child(c),v=d.matchType(g.type);if(!v)break;c++,(c>1||l==0||g.content.size)&&(d=v,u.push(aL(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=ld(this.placed,n,ee.from(u)),this.frontier[n].match=d,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=a;g<p;g++){let x=v.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),v=x.content}this.unplaced=m?t==0?le.empty:new le(ad(i.content,t-1,1),t-1,p<0?i.openEnd:t-1):new le(ad(i.content,t,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!ax(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],o=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),i=ax(t,n,s,r,o);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=ax(t,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:i,move:o?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ld(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let s=t.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,t.index(r));this.openFrontierNode(s.type,s.attrs,o)}return t}openFrontierNode(t,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(t),this.placed=ld(this.placed,this.depth,ee.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ee.empty,!0);n.childCount&&(this.placed=ld(this.placed,this.frontier.length,n))}}function ad(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(ad(e.firstChild.content,t-1,n)))}function ld(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(ld(e.lastChild.content,t-1,n)))}function ix(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function aL(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,aL(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(ee.empty,!0)))),e.copy(r)}function ax(e,t,n,r,s){let o=e.node(t),i=s?e.indexAfter(t):e.index(t);if(i==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,i);return a&&!wX(n,o.content,i)?a:null}function wX(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function bX(e){return e.spec.defining||e.spec.definingForContent}function SX(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let s=e.doc.resolve(t),o=e.doc.resolve(n);if(iL(s,o,r))return e.step(new Xt(t,n,r));let i=cL(s,e.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(s.depth+1);i.unshift(a);for(let h=s.depth,p=s.pos-1;h>0;h--,p--){let m=s.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;i.indexOf(h)>-1?a=h:s.before(h)==p&&i.splice(1,0,-h)}let l=i.indexOf(a),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let m=h.firstChild;if(c.push(m),p==r.openStart)break;h=m.content}for(let h=u-1;h>=0;h--){let p=c[h],m=bX(p.type);if(m&&!p.sameMarkup(s.node(Math.abs(a)-1)))u=h;else if(m||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+u+1)%(r.openStart+1),m=c[p];if(m)for(let g=0;g<i.length;g++){let v=i[(g+l)%i.length],x=!0;v<0&&(x=!1,v=-v);let w=s.node(v-1),b=s.index(v-1);if(w.canReplaceWith(b,b,m.type,m.marks))return e.replace(s.before(v),x?o.after(v):n,new le(lL(r.content,0,r.openStart,p),p,r.openEnd))}}let d=e.steps.length;for(let h=i.length-1;h>=0&&(e.replace(t,n,r),!(e.steps.length>d));h--){let p=i[h];p<0||(t=s.before(p),n=o.after(p))}}function lL(e,t,n,r,s){if(t<n){let o=e.firstChild;e=e.replaceChild(0,o.copy(lL(o.content,t+1,n,r,o)))}if(t>r){let o=s.contentMatchAt(0),i=o.fillBefore(e).append(e);e=i.append(o.matchFragment(i).fillBefore(ee.empty,!0))}return e}function CX(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let s=vX(e.doc,t,r.type);s!=null&&(t=n=s)}e.replaceRange(t,n,new le(ee.from(r),0,0))}function EX(e,t,n){let r=e.doc.resolve(t),s=e.doc.resolve(n),o=cL(r,s);for(let i=0;i<o.length;i++){let a=o[i],l=i==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return e.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return e.delete(r.before(a),s.after(a))}for(let i=1;i<=r.depth&&i<=s.depth;i++)if(t-r.start(i)==r.depth-i&&n>r.end(i)&&s.end(i)-n!=s.depth-i&&r.start(i-1)==s.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),s.index(i-1)))return e.delete(r.before(i),n);e.delete(t,n)}function cL(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let s=r;s>=0;s--){let o=e.start(s);if(o<e.pos-(e.depth-s)||t.end(s)>t.pos+(t.depth-s)||e.node(s).type.spec.isolating||t.node(s).type.spec.isolating)break;(o==t.start(s)||s==e.depth&&s==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&s&&t.start(s-1)==o-1)&&n.push(s)}return n}class wc extends On{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ot.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Ot.fromReplace(t,this.pos,this.pos+1,new le(ee.from(s),0,n.isLeaf?0:1))}getMap(){return vr.empty}invert(t){return new wc(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new wc(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new wc(n.pos,n.attr,n.value)}}On.jsonID("attr",wc);class xf extends On{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Ot.ok(r)}getMap(){return vr.empty}invert(t){return new xf(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new xf(n.attr,n.value)}}On.jsonID("docAttr",xf);let Fc=class extends Error{};Fc=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Fc.prototype=Object.create(Error.prototype);Fc.prototype.constructor=Fc;Fc.prototype.name="TransformError";let uL=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new vc}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Fc(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=le.empty){let s=ev(this.doc,t,n,r);return s&&this.step(s),this}replaceWith(t,n,r){return this.replace(t,n,new le(ee.from(r),0,0))}delete(t,n){return this.replace(t,n,le.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return SX(this,t,n,r),this}replaceRangeWith(t,n,r){return CX(this,t,n,r),this}deleteRange(t,n){return EX(this,t,n),this}lift(t,n){return lX(this,t,n),this}join(t,n=1){return yX(this,t,n),this}wrap(t,n){return dX(this,t,n),this}setBlockType(t,n=t,r,s=null){return fX(this,t,n,r,s),this}setNodeMarkup(t,n,r=null,s){return pX(this,t,n,r,s),this}setNodeAttribute(t,n,r){return this.step(new wc(t,n,r)),this}setDocAttribute(t,n){return this.step(new xf(t,n)),this}addNodeMark(t,n){return this.step(new Ei(t,n)),this}removeNodeMark(t,n){if(!(n instanceof tt)){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Lc(t,n)),this}split(t,n=1,r){return mX(this,t,n,r),this}addMark(t,n,r){return oX(this,t,n,r),this}removeMark(t,n,r){return iX(this,t,n,r),this}clearIncompatible(t,n,r){return oE(this,t,n,r),this}};const lx=Object.create(null);let Re=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new kX(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=le.empty){let r=n.content.lastChild,s=null;for(let a=0;a<n.openEnd;a++)s=r,r=r.lastChild;let o=t.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],u=t.mapping.slice(o);t.replaceRange(u.map(l.pos),u.map(c.pos),a?le.empty:n),a==0&&HP(t,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:i,$to:a}=s[o],l=t.mapping.slice(r),c=l.map(i.pos),u=l.map(a.pos);o?t.deleteRange(c,u):(t.replaceRangeWith(c,u,n),HP(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let s=t.parent.inlineContent?new _e(t):$l(t.node(0),t.parent,t.pos,t.index(),n,r);if(s)return s;for(let o=t.depth-1;o>=0;o--){let i=n<0?$l(t.node(0),t.node(o),t.before(o+1),t.index(o),n,r):$l(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,n,r);if(i)return i}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new es(t.node(0))}static atStart(t){return $l(t,t,0,0,1)||new es(t)}static atEnd(t){return $l(t,t,t.content.size,t.childCount,-1)||new es(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=lx[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in lx)throw new RangeError("Duplicate use of selection JSON ID "+t);return lx[t]=n,n.prototype.jsonID=t,n}getBookmark(){return _e.between(this.$anchor,this.$head).getBookmark()}};Re.prototype.visible=!0;class kX{constructor(t,n){this.$from=t,this.$to=n}}let zP=!1;function UP(e){!zP&&!e.parent.inlineContent&&(zP=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class _e extends Re{constructor(t,n=t){UP(t),UP(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Re.near(r);let s=t.resolve(n.map(this.anchor));return new _e(s.parent.inlineContent?s:r,r)}replace(t,n=le.empty){if(super.replace(t,n),n==le.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof _e&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new tv(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _e(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let s=t.resolve(n);return new this(s,r==n?s:t.resolve(r))}static between(t,n,r){let s=t.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let o=Re.findFrom(n,r,!0)||Re.findFrom(n,-r,!0);if(o)n=o.$head;else return Re.near(n,r)}return t.parent.inlineContent||(s==0?t=n:(t=(Re.findFrom(t,-r,!0)||Re.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=s<0&&(t=n))),new _e(t,n)}}Re.jsonID("text",_e);class tv{constructor(t,n){this.anchor=t,this.head=n}map(t){return new tv(t.map(this.anchor),t.map(this.head))}resolve(t){return _e.between(t.resolve(this.anchor),t.resolve(this.head))}}class we extends Re{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),o=t.resolve(s);return r?Re.near(o):new we(o)}content(){return new le(ee.from(this.node),0,0)}eq(t){return t instanceof we&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new aE(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new we(t.resolve(n.anchor))}static create(t,n){return new we(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}we.prototype.visible=!1;Re.jsonID("node",we);class aE{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new tv(r,r):new aE(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&we.isSelectable(r)?new we(n):Re.near(n)}}class es extends Re{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=le.empty){if(n==le.empty){t.delete(0,t.doc.content.size);let r=Re.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new es(t)}map(t){return new es(t)}eq(t){return t instanceof es}getBookmark(){return _X}}Re.jsonID("all",es);const _X={map(){return this},resolve(e){return new es(e)}};function $l(e,t,n,r,s,o=!1){if(t.inlineContent)return _e.create(e,n);for(let i=r-(s>0?0:1);s>0?i<t.childCount:i>=0;i+=s){let a=t.child(i);if(a.isAtom){if(!o&&we.isSelectable(a))return we.create(e,n-(s<0?a.nodeSize:0))}else{let l=$l(e,a,n+s,s<0?a.childCount:0,s,o);if(l)return l}n+=a.nodeSize*s}return null}function HP(e,t,n){let r=e.steps.length-1;if(r<t)return;let s=e.steps[r];if(!(s instanceof Xt||s instanceof en))return;let o=e.mapping.maps[r],i;o.forEach((a,l,c,u)=>{i==null&&(i=u)}),e.setSelection(Re.near(e.doc.resolve(i),n))}const VP=1,sp=2,WP=4;class NX extends uL{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|VP)&~sp,this.storedMarks=null,this}get selectionSet(){return(this.updated&VP)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=sp,this}ensureMarks(t){return tt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&sp)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~sp,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||tt.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let s=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(s.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let i=this.doc.resolve(n);o=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(t,o)),this.selection.empty||this.setSelection(Re.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=WP,this}get scrolledIntoView(){return(this.updated&WP)>0}}function qP(e,t){return!t||!e?e:e.bind(t)}class cd{constructor(t,n,r){this.name=t,this.init=qP(n.init,r),this.apply=qP(n.apply,r)}}const PX=[new cd("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new cd("selection",{init(e,t){return e.selection||Re.atStart(t.doc)},apply(e){return e.selection}}),new cd("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new cd("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class cx{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=PX.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new cd(r.key,r.spec.state,r))})}}class Zl{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),s=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=s?s[i].n:0,c=s?s[i].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",t),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<i?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}s&&(s[i]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Zl(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];n[o.name]=o.apply(t,this[o.name],this,n)}return n}get tr(){return new NX(this)}static create(t){let n=new cx(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Zl(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(t,r);return r}reconfigure(t){let n=new cx(this.schema,t.plugins),r=n.fields,s=new Zl(n);for(let o=0;o<r.length;o++){let i=r[o].name;s[i]=this.hasOwnProperty(i)?this[i]:r[o].init(t,s)}return s}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=t[r],o=s.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(s,this[s.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let s=new cx(t.schema,t.plugins),o=new Zl(s);return s.fields.forEach(i=>{if(i.name=="doc")o.doc=Ii.fromJSON(t.schema,n.doc);else if(i.name=="selection")o.selection=Re.fromJSON(o.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[i.name]=c.fromJSON.call(l,t,n[a],o);return}}o[i.name]=i.init(t,o)}}),o}}function dL(e,t,n){for(let r in e){let s=e[r];s instanceof Function?s=s.bind(t):r=="handleDOMEvents"&&(s=dL(s,t,{})),n[r]=s}return n}class Sn{constructor(t){this.spec=t,this.props={},t.props&&dL(t.props,this,this.props),this.key=t.key?t.key.key:fL("plugin")}getState(t){return t[this.key]}}const ux=Object.create(null);function fL(e){return e in ux?e+"$"+ ++ux[e]:(ux[e]=0,e+"$")}class Rr{constructor(t="key"){this.key=fL(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const hn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},wf=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let Yb=null;const Co=function(e,t,n){let r=Yb||(Yb=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},AX=function(){Yb=null},sl=function(e,t,n,r){return n&&(GP(e,t,n,r,-1)||GP(e,t,n,r,1))},TX=/^(img|br|input|textarea|hr)$/i;function GP(e,t,n,r,s){for(;;){if(e==n&&t==r)return!0;if(t==(s<0?0:Wr(e))){let o=e.parentNode;if(!o||o.nodeType!=1||uh(e)||TX.test(e.nodeName)||e.contentEditable=="false")return!1;t=hn(e)+(s<0?0:1),e=o}else if(e.nodeType==1){if(e=e.childNodes[t+(s<0?-1:0)],e.contentEditable=="false")return!1;t=s<0?Wr(e):0}else return!1}}function Wr(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function RX(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Wr(e)}else if(e.parentNode&&!uh(e))t=hn(e),e=e.parentNode;else return null}}function jX(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!uh(e))t=hn(e)+1,e=e.parentNode;else return null}}function OX(e,t,n){for(let r=t==0,s=t==Wr(e);r||s;){if(e==n)return!0;let o=hn(e);if(e=e.parentNode,!e)return!1;r=r&&o==0,s=s&&o==Wr(e)}}function uh(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const nv=function(e){return e.focusNode&&sl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Ea(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function MX(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function IX(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Wr(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Wr(r.startContainer),r.startOffset)}}}const so=typeof navigator<"u"?navigator:null,KP=typeof document<"u"?document:null,la=so&&so.userAgent||"",Xb=/Edge\/(\d+)/.exec(la),hL=/MSIE \d/.exec(la),Qb=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(la),lr=!!(hL||Qb||Xb),$i=hL?document.documentMode:Qb?+Qb[1]:Xb?+Xb[1]:0,Rs=!lr&&/gecko\/(\d+)/i.test(la);Rs&&+(/Firefox\/(\d+)/.exec(la)||[0,0])[1];const Zb=!lr&&/Chrome\/(\d+)/.exec(la),Tn=!!Zb,pL=Zb?+Zb[1]:0,Bn=!lr&&!!so&&/Apple Computer/.test(so.vendor),Bc=Bn&&(/Mobile\/\w+/.test(la)||!!so&&so.maxTouchPoints>2),zr=Bc||(so?/Mac/.test(so.platform):!1),DX=so?/Win/.test(so.platform):!1,No=/Android \d/.test(la),dh=!!KP&&"webkitFontSmoothing"in KP.documentElement.style,$X=dh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function LX(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function po(e,t){return typeof e=="number"?e:e[t]}function FX(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function JP(e,t,n){let r=e.someProp("scrollThreshold")||0,s=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let i=n||e.dom;i;i=wf(i)){if(i.nodeType!=1)continue;let a=i,l=a==o.body,c=l?LX(o):FX(a),u=0,d=0;if(t.top<c.top+po(r,"top")?d=-(c.top-t.top+po(s,"top")):t.bottom>c.bottom-po(r,"bottom")&&(d=t.bottom-t.top>c.bottom-c.top?t.top+po(s,"top")-c.top:t.bottom-c.bottom+po(s,"bottom")),t.left<c.left+po(r,"left")?u=-(c.left-t.left+po(s,"left")):t.right>c.right-po(r,"right")&&(u=t.right-c.right+po(s,"right")),u||d)if(l)o.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let m=a.scrollLeft-h,g=a.scrollTop-p;t={left:t.left-m,top:t.top-g,right:t.right-m,bottom:t.bottom-g}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(i).position))break}}function BX(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,s;for(let o=(t.left+t.right)/2,i=n+1;i<Math.min(innerHeight,t.bottom);i+=5){let a=e.root.elementFromPoint(o,i);if(!a||a==e.dom||!e.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:mL(e.dom)}}function mL(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=wf(r));return t}function zX({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;gL(n,r==0?0:r-t)}function gL(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:s,left:o}=e[n];r.scrollTop!=s+t&&(r.scrollTop=s+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Pl=null;function UX(e){if(e.setActive)return e.setActive();if(Pl)return e.focus(Pl);let t=mL(e);e.focus(Pl==null?{get preventScroll(){return Pl={preventScroll:!0},!0}}:void 0),Pl||(Pl=!1,gL(t,0))}function yL(e,t){let n,r=2e8,s,o=0,i=t.top,a=t.top,l,c;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Co(u).getClientRects();else continue;for(let p=0;p<h.length;p++){let m=h[p];if(m.top<=i&&m.bottom>=a){i=Math.max(m.bottom,i),a=Math.min(m.top,a);let g=m.left>t.left?m.left-t.left:m.right<t.left?t.left-m.right:0;if(g<r){n=u,r=g,s=g&&n.nodeType==3?{left:m.right<t.left?m.right:m.left,top:t.top}:t,u.nodeType==1&&g&&(o=d+(t.left>=(m.left+m.right)/2?1:0));continue}}else m.top>t.top&&!l&&m.left<=t.left&&m.right>=t.left&&(l=u,c={left:Math.max(m.left,Math.min(m.right,t.left)),top:m.top});!n&&(t.left>=m.right&&t.top>=m.top||t.left>=m.left&&t.top>=m.bottom)&&(o=d+1)}}return!n&&l&&(n=l,s=c,r=0),n&&n.nodeType==3?HX(n,s):!n||r&&n.nodeType==1?{node:e,offset:o}:yL(n,s)}function HX(e,t){let n=e.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(e,s+1),r.setStart(e,s);let o=ri(r,1);if(o.top!=o.bottom&&lE(t,o))return{node:e,offset:s+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}function lE(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function VX(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function WX(e,t,n){let{node:r,offset:s}=yL(t,n),o=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();o=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return e.docView.posFromDOM(r,s,o)}function qX(e,t,n,r){let s=-1;for(let o=t,i=!1;o!=e.dom;){let a=e.docView.nearestDesc(o,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!i&&l.left>r.left||l.top>r.top?s=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(s=a.posAfter),i=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return s>-1?s:e.docView.posFromDOM(t,n,-1)}function vL(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=s;;){let i=e.childNodes[o];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(lE(t,c))return vL(i,t,c)}}if((o=(o+1)%r)==s)break}return e}function GX(e,t){let n=e.dom.ownerDocument,r,s=0,o=IX(n,t.left,t.top);o&&({node:r,offset:s}=o);let i=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),a;if(!i||!e.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=e.dom.getBoundingClientRect();if(!lE(t,c)||(i=vL(e.dom,t,c),!i))return null}if(Bn)for(let c=i;r&&c;c=wf(c))c.draggable&&(r=void 0);if(i=VX(i,t),r){if(Rs&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&s++}let c;dh&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&s--,r==e.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=qX(e,r,s,t))}a==null&&(a=WX(e,i,t));let l=e.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function YP(e){return e.top<e.bottom||e.left<e.right}function ri(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(YP(r))return r}return Array.prototype.find.call(n,YP)||e.getBoundingClientRect()}const KX=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function xL(e,t,n){let{node:r,offset:s,atom:o}=e.docView.domFromPos(t,n<0?-1:1),i=dh||Rs;if(r.nodeType==3)if(i&&(KX.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let l=ri(Co(r,s,s),n);if(Rs&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=ri(Co(r,s-1,s-1),-1);if(c.top==l.top){let u=ri(Co(r,s,s+1),-1);if(u.top!=l.top)return $u(u,u.left<c.left)}}return l}else{let l=s,c=s,u=n<0?1:-1;return n<0&&!s?(c++,u=-1):n>=0&&s==r.nodeValue.length?(l--,u=1):n<0?l--:c++,$u(ri(Co(r,l,c),u),u<0)}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(o==null&&s&&(n<0||s==Wr(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return dx(l.getBoundingClientRect(),!1)}if(o==null&&s<Wr(r)){let l=r.childNodes[s];if(l.nodeType==1)return dx(l.getBoundingClientRect(),!0)}return dx(r.getBoundingClientRect(),n>=0)}if(o==null&&s&&(n<0||s==Wr(r))){let l=r.childNodes[s-1],c=l.nodeType==3?Co(l,Wr(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return $u(ri(c,1),!1)}if(o==null&&s<Wr(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Co(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return $u(ri(c,-1),!0)}return $u(ri(r.nodeType==3?Co(r):r,-n),n>=0)}function $u(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function dx(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function wL(e,t,n){let r=e.state,s=e.root.activeElement;r!=t&&e.updateState(t),s!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),s!=e.dom&&s&&s.focus()}}function JX(e,t,n){let r=t.selection,s=n=="up"?r.$from:r.$to;return wL(e,t,()=>{let{node:o}=e.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let a=e.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let i=xL(e,s.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Co(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const YX=/[\u0590-\u08ac]/;function XX(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,i=s==r.parent.content.size,a=e.domSelection();return a?!YX.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:i:wL(e,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=e.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:m,focusOffset:g}=e.domSelectionRange(),v=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),v}):r.pos==r.start()||r.pos==r.end()}let XP=null,QP=null,ZP=!1;function QX(e,t,n){return XP==t&&QP==n?ZP:(XP=t,QP=n,ZP=n=="up"||n=="down"?JX(e,t,n):XX(e,t,n))}const ts=0,eA=1,Ta=2,oo=3;class fh{constructor(t,n,r,s){this.parent=t,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=ts,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==t)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let o,i;if(t==this.contentDOM)o=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}else{let o,i;if(t==this.contentDOM)o=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(i):this.posAtEnd}let s;if(t==this.dom&&this.contentDOM)s=n>hn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=t;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&n==t.childNodes.length)for(let o=t;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,s=t;s;s=s.parentNode){let o=this.getDesc(s),i;if(o&&(!n||o.node))if(r&&(i=o.nodeDOM)&&!(i.nodeType==1?i.contains(t.nodeType==1?t:t.parentNode):i==t))r=!1;else return o}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let s=t;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],o=r+s.size;if(r==t&&o!=r){for(;!s.border&&s.children.length;)for(let i=0;i<s.children.length;i++){let a=s.children[i];if(a.size){s=a;break}}return s}if(t<o)return s.descAt(t-r-s.border);r=o}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let i=this.children[r],a=o+i.size;if(a>t||i instanceof SL){s=t-o;break}o=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof bL&&o.side>=0;r--);if(n<=0){let o,i=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,i=!1);return o&&n&&i&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?hn(o.dom)+1:0}}else{let o,i=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,i=!1);return o&&i&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?hn(o.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(s==-1&&t<=c){let u=i+l.border;if(t>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,u);t=i;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){s=hn(h.dom)+1;break}t-=h.size}s==-1&&(s=0)}if(s>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=hn(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:t,to:n,fromOffset:s,toOffset:o}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,s=!1){let o=Math.min(t,n),i=Math.max(t,n);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],v=m+g.size;if(o>m&&i<v)return g.setSelection(t-m-g.border,n-m-g.border,r,s);m=v}let a=this.domFromPos(t,t?-1:1),l=n==t?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Rs||Bn)&&t==n){let{node:p,offset:m}=a;if(p.nodeType==3){if(d=!!(m&&p.nodeValue[m-1]==`
`),d&&m==p.nodeValue.length)for(let g=p,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:hn(v)+1});break}let x=g.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let g=p.childNodes[m-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Rs&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(s=!0)}if(!(s||d&&Bn)&&sl(a.node,a.offset,u.anchorNode,u.anchorOffset)&&sl(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||t==n)&&!d){c.collapse(a.node,a.offset);try{t!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(t>n){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],i=r+o.size;if(r==i?t<=i&&n>=r:t<i&&n>r){let a=r+o.border,l=i-o.border;if(t>=a&&n<=l){this.dirty=t==r||n==i?Ta:eA,t==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=oo:o.markDirty(t-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Ta:oo}r=i}this.dirty=Ta}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Ta:eA;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(t){return!1}}class bL extends fh{constructor(t,n,r,s){let o,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(t,[],i,null),this.widget=n,this.widget=n,o=this}matchesWidget(t){return this.dirty==ts&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class ZX extends fh{constructor(t,n,r,s){super(t,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class ol extends fh{constructor(t,n,r,s,o){super(t,[],r,s),this.mark=n,this.spec=o}static create(t,n,r,s){let o=s.nodeViews[n.type.name],i=o&&o(n,s,r);return(!i||!i.dom)&&(i=yl.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ol(t,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&oo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=oo&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=ts){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ts}}slice(t,n,r){let s=ol.create(this.parent,this.mark,!0,r),o=this.children,i=this.size;n<i&&(o=t1(o,n,i,r)),t>0&&(o=t1(o,0,t,r));for(let a=0;a<o.length;a++)o[a].parent=s;return s.children=o,s}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Li extends fh{constructor(t,n,r,s,o,i,a,l,c){super(t,[],o,i),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(t,n,r,s,o,i){let a=o.nodeViews[n.type.name],l,c=a&&a(n,o,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,s),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=yl.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=kL(u,r,n),c?l=new eQ(t,n,r,s,u,d||null,h,c,o,i+1):n.isText?new rv(t,n,r,s,u,h,o):new Li(t,n,r,s,u,d||null,h,o,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>ee.empty)}return t}matchesNode(t,n,r){return this.dirty==ts&&t.eq(this.node)&&ag(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,s=n,o=t.composing?this.localCompositionInfo(t,n):null,i=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new nQ(this,i&&i.node,t);oQ(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,t):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?tt.none:this.node.child(u).marks,r,t),l.placeWidget(c,t,s)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,t);let p;l.findNodeMatch(c,u,d,h)||a&&t.state.selection.from>s&&t.state.selection.to<s+c.nodeSize&&(p=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,d,p,t)||l.updateNextNode(c,u,d,t,h,s)||l.addNode(c,u,d,t,s),s+=c.nodeSize}),l.syncToMarks([],r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ta)&&(i&&this.protectLocalComposition(t,i),CL(this.contentDOM,this.children,t),Bc&&iQ(this.dom))}localCompositionInfo(t,n){let{from:r,to:s}=t.state.selection;if(!(t.state.selection instanceof _e)||r<n||s>n+this.node.content.size)return null;let o=t.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let i=o.nodeValue,a=aQ(this.node.content,i,r-n,s-n);return a<0?null:{node:o,pos:a,text:i}}else return{node:o,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let i=new ZX(this,o,n,s);t.input.compositionNodes.push(i),this.children=t1(this.children,r,r+s.length,t,i)}update(t,n,r,s){return this.dirty==oo||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,s),!0)}updateInner(t,n,r,s){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=ts}updateOuterDeco(t){if(ag(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=EL(this.dom,this.nodeDOM,e1(this.outerDeco,this.node,n),e1(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function tA(e,t,n,r,s){kL(r,t,e);let o=new Li(void 0,e,t,n,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class rv extends Li{constructor(t,n,r,s,o,i,a){super(t,n,r,s,o,null,i,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,s){return this.dirty==oo||this.dirty!=ts&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ts||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=t,this.dirty=ts,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let s=this.node.cut(t,n),o=document.createTextNode(s.text);return new rv(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=oo)}get domAtom(){return!1}isText(t){return this.node.text==t}}class SL extends fh{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==ts&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class eQ extends Li{constructor(t,n,r,s,o,i,a,l,c,u){super(t,n,r,s,o,i,a,c,u),this.spec=l}update(t,n,r,s){if(this.dirty==oo)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let o=this.spec.update(t,n,r);return o&&this.updateInner(t,n,r,s),o}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,s){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function CL(e,t,n){let r=e.firstChild,s=!1;for(let o=0;o<t.length;o++){let i=t[o],a=i.dom;if(a.parentNode==e){for(;a!=r;)r=nA(r),s=!0;r=r.nextSibling}else s=!0,e.insertBefore(a,r);if(i instanceof ol){let l=r?r.previousSibling:e.lastChild;CL(i.contentDOM,i.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=nA(r),s=!0;s&&n.trackWrites==e&&(n.trackWrites=null)}const Ad=function(e){e&&(this.nodeName=e)};Ad.prototype=Object.create(null);const Ra=[new Ad];function e1(e,t,n){if(e.length==0)return Ra;let r=n?Ra[0]:new Ad,s=[r];for(let o=0;o<e.length;o++){let i=e[o].type.attrs;if(i){i.nodeName&&s.push(r=new Ad(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&s.length==1&&s.push(r=new Ad(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function EL(e,t,n,r){if(n==Ra&&r==Ra)return t;let s=t;for(let o=0;o<r.length;o++){let i=r[o],a=n[o];if(o){let l;a&&a.nodeName==i.nodeName&&s!=e&&(l=s.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=Ra[0]),s=l}tQ(s,a||Ra[0],i)}return s}function tQ(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&e.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&e.classList.add(s[o]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(t.style);)e.style.removeProperty(s[1])}n.style&&(e.style.cssText+=n.style)}}function kL(e,t,n){return EL(e,e,Ra,e1(t,n,e.nodeType!=1))}function ag(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function nA(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class nQ{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=rQ(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let s=0,o=this.stack.length>>1,i=Math.min(o,t.length);for(;s<i&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&t[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=ts,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ol.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,r,s){let o=-1,i;if(s>=this.preMatch.index&&(i=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&i.matchesNode(t,n,r))o=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,n,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,n,r,s,o){let i=this.top.children[s];return i.dirty==oo&&i.dom==i.contentDOM&&(i.dirty=Ta),i.update(t,n,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}t=n}}updateNextNode(t,n,r,s,o,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Li){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=oo&&ag(n,l.outerDeco));if(!h&&l.update(t,n,r,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,t,n,r,s,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Ta,d.updateChildren(s,i+1),d.dirty=ts),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,s,o,i){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!ag(r,t.outerDeco)||!s.eq(t.innerDeco))return null;let a=Li.create(this.top,n,r,s,o,i);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,n,r,s,o){let i=Li.create(this.top,t,n,r,s,o);i.contentDOM&&i.updateChildren(s,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(t,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(t)&&(t==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new bL(this.top,t,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof ol;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof rv)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Bn||Tn)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new SL(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function rQ(e,t){let n=t,r=n.children.length,s=e.childCount,o=new Map,i=[];e:for(;s>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof ol)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(s-1))break;--s,o.set(a,s),i.push(a)}}return{index:s,matched:o,matches:i.reverse()}}function sQ(e,t){return e.type.side-t.type.side}function oQ(e,t,n,r){let s=t.locals(e),o=0;if(s.length==0){for(let c=0;c<e.childCount;c++){let u=e.child(c);r(u,s,t.forChild(o,u),c),o+=u.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let u,d;for(;i<s.length&&s[i].to==o;){let v=s[i++];v.widget&&(u?(d||(d=[u])).push(v):u=v)}if(u)if(d){d.sort(sQ);for(let v=0;v<d.length;v++)n(d[v],c,!!l)}else n(u,c,!!l);let h,p;if(l)p=-1,h=l,l=null;else if(c<e.childCount)p=c,h=e.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=o&&a.splice(v--,1);for(;i<s.length&&s[i].from<=o&&s[i].to>o;)a.push(s[i++]);let m=o+h.nodeSize;if(h.isText){let v=m;i<s.length&&s[i].from<v&&(v=s[i].from);for(let x=0;x<a.length;x++)a[x].to<v&&(v=a[x].to);v<m&&(l=h.cut(v-o),h=h.cut(0,v-o),m=v,p=-1)}else for(;i<s.length&&s[i].to<m;)i++;let g=h.isInline&&!h.isLeaf?a.filter(v=>!v.inline):a.slice();r(h,g,t.forChild(o,h),p),o=m}}function iQ(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function aQ(e,t,n,r){for(let s=0,o=0;s<e.childCount&&o<=r;){let i=e.child(s++),a=o;if(o+=i.nodeSize,!i.isText)continue;let l=i.text;for(;s<e.childCount;){let c=e.child(s++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=n){if(o>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let c=a<r?l.lastIndexOf(t,r-a-1):-1;if(c>=0&&c+t.length+a>=n)return a+c;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function t1(e,t,n,r,s){let o=[];for(let i=0,a=0;i<e.length;i++){let l=e[i],c=a,u=a+=l.size;c>=n||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),s&&(o.push(s),s=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function cE(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let s=e.docView.nearestDesc(n.focusNode),o=s&&s.size==0,i=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(nv(n)){for(l=i;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&we.isSelectable(d)&&s.parent&&!(d.isInline&&OX(n.focusNode,n.focusOffset,s.dom))){let h=s.posBefore;c=new we(i==h?a:r.resolve(h))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=i,h=i;for(let p=0;p<n.rangeCount;p++){let m=n.getRangeAt(p);d=Math.min(d,e.docView.posFromDOM(m.startContainer,m.startOffset,1)),h=Math.max(h,e.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[l,i]=h==e.state.selection.anchor?[h,d]:[d,h],a=r.resolve(i)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=t=="pointer"||e.state.selection.head<a.pos&&!o?1:-1;c=uE(e,u,a,d)}return c}function _L(e){return e.editable?e.hasFocus():PL(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function To(e,t=!1){let n=e.state.selection;if(NL(e,n),!!_L(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Tn){let r=e.domSelectionRange(),s=e.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&sl(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)cQ(e);else{let{anchor:r,head:s}=n,o,i;rA&&!(n instanceof _e)&&(n.$from.parent.inlineContent||(o=sA(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=sA(e,n.to))),e.docView.setSelection(r,s,e,t),rA&&(o&&oA(o),i&&oA(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&lQ(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const rA=Bn||Tn&&pL<63;function sA(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),s=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Bn&&s&&s.contentEditable=="false")return fx(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return fx(s);if(o)return fx(o)}}function fx(e){return e.contentEditable="true",Bn&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function oA(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function lQ(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!_L(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function cQ(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,s=r.nodeName=="IMG";s?n.setStart(r.parentNode,hn(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!s&&!e.state.selection.visible&&lr&&$i<=11&&(r.disabled=!0,r.disabled=!1)}function NL(e,t){if(t instanceof we){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(iA(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else iA(e)}function iA(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function uE(e,t,n,r){return e.someProp("createSelectionBetween",s=>s(e,t,n))||_e.between(t,n,r)}function aA(e){return e.editable&&!e.hasFocus()?!1:PL(e)}function PL(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function uQ(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return sl(t.node,t.offset,n.anchorNode,n.anchorOffset)}function n1(e,t){let{$anchor:n,$head:r}=e.selection,s=t>0?n.max(r):n.min(r),o=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return o&&Re.findFrom(o,t)}function ai(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function lA(e,t,n){let r=e.state.selection;if(r instanceof _e)if(n.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let i=e.state.doc.resolve(s.pos+o.nodeSize*(t<0?-1:1));return ai(e,new _e(r.$anchor,i))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let s=n1(e.state,t);return s&&s instanceof we?ai(e,s):!1}else if(!(zr&&n.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter,i;if(!o||o.isText)return!1;let a=t<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(i=e.docView.descAt(a))&&!i.contentDOM?we.isSelectable(o)?ai(e,new we(t<0?e.state.doc.resolve(s.pos-o.nodeSize):s)):dh?ai(e,new _e(e.state.doc.resolve(t<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof we&&r.node.isInline)return ai(e,new _e(t>0?r.$to:r.$from));{let s=n1(e.state,t);return s?ai(e,s):!1}}}function lg(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Td(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Al(e,t){return t<0?dQ(e):fQ(e)}function dQ(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s,o,i=!1;for(Rs&&n.nodeType==1&&r<lg(n)&&Td(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Td(a,-1))s=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(AL(n))break;{let a=n.previousSibling;for(;a&&Td(a,-1);)s=n.parentNode,o=hn(a),a=a.previousSibling;if(a)n=a,r=lg(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}i?r1(e,n,r):s&&r1(e,s,o)}function fQ(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s=lg(n),o,i;for(;;)if(r<s){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Td(a,1))o=n,i=++r;else break}else{if(AL(n))break;{let a=n.nextSibling;for(;a&&Td(a,1);)o=a.parentNode,i=hn(a)+1,a=a.nextSibling;if(a)n=a,r=0,s=lg(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}o&&r1(e,o,i)}function AL(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function hQ(e,t){for(;e&&t==e.childNodes.length&&!uh(e);)t=hn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function pQ(e,t){for(;e&&!t&&!uh(e);)t=hn(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function r1(e,t,n){if(t.nodeType!=3){let o,i;(i=hQ(t,n))?(t=i,n=0):(o=pQ(t,n))&&(t=o,n=o.nodeValue.length)}let r=e.domSelection();if(!r)return;if(nv(r)){let o=document.createRange();o.setEnd(t,n),o.setStart(t,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:s}=e;setTimeout(()=>{e.state==s&&To(e)},50)}function cA(e,t){let n=e.state.doc.resolve(t);if(!(Tn||DX)&&n.parent.inlineContent){let s=e.coordsAtPos(t);if(t>n.start()){let o=e.coordsAtPos(t-1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(t<n.end()){let o=e.coordsAtPos(t+1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function uA(e,t,n){let r=e.state.selection;if(r instanceof _e&&!r.empty||n.indexOf("s")>-1||zr&&n.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let i=n1(e.state,t);if(i&&i instanceof we)return ai(e,i)}if(!s.parent.inlineContent){let i=t<0?s:o,a=r instanceof es?Re.near(i,t):Re.findFrom(i,t);return a?ai(e,a):!1}return!1}function dA(e,t){if(!(e.state.selection instanceof _e))return!0;let{$head:n,$anchor:r,empty:s}=e.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let i=e.state.tr;return t<0?i.delete(n.pos-o.nodeSize,n.pos):i.delete(n.pos,n.pos+o.nodeSize),e.dispatch(i),!0}return!1}function fA(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function mQ(e){if(!Bn||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;fA(e,r,"true"),setTimeout(()=>fA(e,r,"false"),20)}return!1}function gQ(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function yQ(e,t){let n=t.keyCode,r=gQ(t);if(n==8||zr&&n==72&&r=="c")return dA(e,-1)||Al(e,-1);if(n==46&&!t.shiftKey||zr&&n==68&&r=="c")return dA(e,1)||Al(e,1);if(n==13||n==27)return!0;if(n==37||zr&&n==66&&r=="c"){let s=n==37?cA(e,e.state.selection.from)=="ltr"?-1:1:-1;return lA(e,s,r)||Al(e,s)}else if(n==39||zr&&n==70&&r=="c"){let s=n==39?cA(e,e.state.selection.from)=="ltr"?1:-1:1;return lA(e,s,r)||Al(e,s)}else{if(n==38||zr&&n==80&&r=="c")return uA(e,-1,r)||Al(e,-1);if(n==40||zr&&n==78&&r=="c")return mQ(e)||uA(e,1,r)||Al(e,1);if(r==(zr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function dE(e,t){e.someProp("transformCopied",p=>{t=p(t,e)});let n=[],{content:r,openStart:s,openEnd:o}=t;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let i=e.someProp("clipboardSerializer")||yl.fromSchema(e.state.schema),a=IL(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=ML[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let m=a.createElement(u[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=e.someProp("clipboardTextSerializer",p=>p(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:h,slice:t}}function TL(e,t,n,r,s){let o=s.parent.type.spec.code,i,a;if(!n&&!t)return null;let l=t&&(r||o||!n);if(l){if(e.someProp("transformPastedText",h=>{t=h(t,o||r,e)}),o)return t?new le(ee.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):le.empty;let d=e.someProp("clipboardTextParser",h=>h(t,s,r,e));if(d)a=d;else{let h=s.marks(),{schema:p}=e.state,m=yl.fromSchema(p);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=i.appendChild(document.createElement("p"));g&&v.appendChild(m.serializeNode(p.text(g,h)))})}}else e.someProp("transformPastedHTML",d=>{n=d(n,e)}),i=bQ(n),dh&&SQ(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=i.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;i=h}if(a||(a=(e.someProp("clipboardParser")||e.someProp("domParser")||Di.fromSchema(e.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!vQ.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=CQ(hA(a,+u[1],+u[2]),u[4]);else if(a=le.maxOpen(xQ(a.content,s),!0),a.openStart||a.openEnd){let d=0,h=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=hA(a,d,h)}return e.someProp("transformPasted",d=>{a=d(a,e)}),a}const vQ=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function xQ(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let s=t.node(n).contentMatchAt(t.index(n)),o,i=[];if(e.forEach(a=>{if(!i)return;let l=s.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&o.length&&jL(l,o,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=OL(i[i.length-1],o.length));let u=RL(a,l);i.push(u),s=s.matchType(u.type),o=l}}),i)return ee.from(i)}return e}function RL(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,ee.from(e));return e}function jL(e,t,n,r,s){if(s<e.length&&s<t.length&&e[s]==t[s]){let o=jL(e,t,n,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==e.length-1?n.type:e[s+1]))return r.copy(r.content.append(ee.from(RL(n,e,s+1))))}}function OL(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,OL(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(ee.empty,!0);return e.copy(n.append(r))}function s1(e,t,n,r,s,o){let i=t<0?e.firstChild:e.lastChild,a=i.content;return e.childCount>1&&(o=0),s<r-1&&(a=s1(a,t,n,r,s+1,o)),s>=n&&(a=t<0?i.contentMatchAt(0).fillBefore(a,o<=s).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(ee.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,i.copy(a))}function hA(e,t,n){return t<e.openStart&&(e=new le(s1(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new le(s1(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const ML={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let pA=null;function IL(){return pA||(pA=document.implementation.createHTMLDocument("title"))}let hx=null;function wQ(e){let t=window.trustedTypes;return t?(hx||(hx=t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),hx.createHTML(e)):e}function bQ(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=IL().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),s;if((s=r&&ML[r[1].toLowerCase()])&&(e=s.map(o=>"<"+o+">").join("")+e+s.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=wQ(e),s)for(let o=0;o<s.length;o++)n=n.querySelector(s[o])||n;return n}function SQ(e){let t=e.querySelectorAll(Tn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function CQ(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:s,openStart:o,openEnd:i}=e;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=ee.from(l.create(r[a+1],s)),o++,i++}return new le(s,o,i)}const zn={},Un={},EQ={touchstart:!0,touchmove:!0};class kQ{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function _Q(e){for(let t in zn){let n=zn[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{PQ(e,r)&&!fE(e,r)&&(e.editable||!(r.type in Un))&&n(e,r)},EQ[t]?{passive:!0}:void 0)}Bn&&e.dom.addEventListener("input",()=>null),o1(e)}function ki(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function NQ(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function o1(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>fE(e,r))})}function fE(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function PQ(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function AQ(e,t){!fE(e,t)&&zn[t.type]&&(e.editable||!(t.type in Un))&&zn[t.type](e,t)}Un.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!$L(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(No&&Tn&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Bc&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",s=>s(e,Ea(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||yQ(e,n)?n.preventDefault():ki(e,"key")};Un.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Un.keypress=(e,t)=>{let n=t;if($L(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||zr&&n.metaKey)return;if(e.someProp("handleKeyPress",s=>s(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof _e)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode);!/[\r\n]/.test(s)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,s))&&e.dispatch(e.state.tr.insertText(s).scrollIntoView()),n.preventDefault()}};function sv(e){return{left:e.clientX,top:e.clientY}}function TQ(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function hE(e,t,n,r,s){if(r==-1)return!1;let o=e.state.doc.resolve(r);for(let i=o.depth+1;i>0;i--)if(e.someProp(t,a=>i>o.depth?a(e,n,o.nodeAfter,o.before(i),s,!0):a(e,n,o.node(i),o.before(i),s,!1)))return!0;return!1}function bc(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function RQ(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&we.isSelectable(r)?(bc(e,new we(n)),!0):!1}function jQ(e,t){if(t==-1)return!1;let n=e.state.selection,r,s;n instanceof we&&(r=n.node);let o=e.state.doc.resolve(t);for(let i=o.depth+1;i>0;i--){let a=i>o.depth?o.nodeAfter:o.node(i);if(we.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?s=o.before(n.$from.depth):s=o.before(i);break}}return s!=null?(bc(e,we.create(e.state.doc,s)),!0):!1}function OQ(e,t,n,r,s){return hE(e,"handleClickOn",t,n,r)||e.someProp("handleClick",o=>o(e,t,r))||(s?jQ(e,n):RQ(e,n))}function MQ(e,t,n,r){return hE(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",s=>s(e,t,r))}function IQ(e,t,n,r){return hE(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",s=>s(e,t,r))||DQ(e,n,r)}function DQ(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(bc(e,_e.create(r,0,r.content.size)),!0):!1;let s=r.resolve(t);for(let o=s.depth+1;o>0;o--){let i=o>s.depth?s.nodeAfter:s.node(o),a=s.before(o);if(i.inlineContent)bc(e,_e.create(r,a+1,a+1+i.content.size));else if(we.isSelectable(i))bc(e,we.create(r,a));else continue;return!0}}function pE(e){return cg(e)}const DL=zr?"metaKey":"ctrlKey";zn.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=pE(e),s=Date.now(),o="singleClick";s-e.input.lastClick.time<500&&TQ(n,e.input.lastClick)&&!n[DL]&&(e.input.lastClick.type=="singleClick"?o="doubleClick":e.input.lastClick.type=="doubleClick"&&(o="tripleClick")),e.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:o};let i=e.posAtCoords(sv(n));i&&(o=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new $Q(e,i,n,!!r)):(o=="doubleClick"?MQ:IQ)(e,i.pos,i.inside,n)?n.preventDefault():ki(e,"pointer"))};class $Q{constructor(t,n,r,s){this.view=t,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[DL],this.allowDefault=r.shiftKey;let o,i;if(n.inside>-1)o=t.state.doc.nodeAt(n.inside),i=n.inside;else{let u=t.state.doc.resolve(n.pos);o=u.parent,i=u.depth?u.before():0}const a=s?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=t.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof we&&c.from<=i&&c.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Rs&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ki(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>To(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(sv(t))),this.updateAllowDefault(t),this.allowDefault||!n?ki(this.view,"pointer"):OQ(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Bn&&this.mightDrag&&!this.mightDrag.node.isAtom||Tn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(bc(this.view,Re.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):ki(this.view,"pointer")}move(t){this.updateAllowDefault(t),ki(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}zn.touchstart=e=>{e.input.lastTouch=Date.now(),pE(e),ki(e,"pointer")};zn.touchmove=e=>{e.input.lastTouch=Date.now(),ki(e,"pointer")};zn.contextmenu=e=>pE(e);function $L(e,t){return e.composing?!0:Bn&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const LQ=No?5e3:-1;Un.compositionstart=Un.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof _e&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),cg(e,!0),e.markCursor=null;else if(cg(e,!t.selection.empty),Rs&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let i=o<0?s.lastChild:s.childNodes[o-1];if(!i)break;if(i.nodeType==3){let a=e.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else s=i,o=-1}}e.input.composing=!0}LL(e,LQ)};Un.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,LL(e,20))};function LL(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>cg(e),t))}function FL(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=BQ());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function FQ(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=RX(t.focusNode,t.focusOffset),r=jX(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,o=e.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function BQ(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function cg(e,t=!1){if(!(No&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),FL(e),t||e.docView&&e.docView.dirty){let n=cE(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!e.state.selection.empty?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function zQ(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const bf=lr&&$i<15||Bc&&$X<604;zn.copy=Un.cut=(e,t)=>{let n=t,r=e.state.selection,s=n.type=="cut";if(r.empty)return;let o=bf?null:n.clipboardData,i=r.content(),{dom:a,text:l}=dE(e,i);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):zQ(e,a),s&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function UQ(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function HQ(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Sf(e,r.value,null,s,t):Sf(e,r.textContent,r.innerHTML,s,t)},50)}function Sf(e,t,n,r,s){let o=TL(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,s,o||le.empty)))return!0;if(!o)return!1;let i=UQ(o),a=i?e.state.tr.replaceSelectionWith(i,r):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function BL(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Un.paste=(e,t)=>{let n=t;if(e.composing&&!No)return;let r=bf?null:n.clipboardData,s=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Sf(e,BL(r),r.getData("text/html"),s,n)?n.preventDefault():HQ(e,n)};class zL{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const UL=zr?"altKey":"ctrlKey";zn.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=e.state.selection,o=s.empty?null:e.posAtCoords(sv(n)),i;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof we?s.to-1:s.to))){if(r&&r.mightDrag)i=we.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=e.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=e.docView&&(i=we.create(e.state.doc,d.posBefore))}}let a=(i||e.state.selection).content(),{dom:l,text:c,slice:u}=dE(e,a);(!n.dataTransfer.files.length||!Tn||pL>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(bf?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",bf||n.dataTransfer.setData("text/plain",c),e.dragging=new zL(u,!n[UL],i)};zn.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Un.dragover=Un.dragenter=(e,t)=>t.preventDefault();Un.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let s=e.posAtCoords(sv(n));if(!s)return;let o=e.state.doc.resolve(s.pos),i=r&&r.slice;i?e.someProp("transformPasted",m=>{i=m(i,e)}):i=TL(e,BL(n.dataTransfer),bf?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!n[UL]);if(e.someProp("handleDrop",m=>m(e,n,i||le.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?oL(e.state.doc,o.pos,i):o.pos;l==null&&(l=o.pos);let c=e.state.tr;if(a){let{node:m}=r;m?m.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,i.content.firstChild):c.replaceRange(u,u,i),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&we.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new we(p));else{let m=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,v,x,w)=>m=w),c.setSelection(uE(e,p,c.doc.resolve(m)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))};zn.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&To(e)},20))};zn.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};zn.beforeinput=(e,t)=>{if(Tn&&No&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",o=>o(e,Ea(8,"Backspace")))))return;let{$cursor:s}=e.state.selection;s&&s.pos>0&&e.dispatch(e.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let e in Un)zn[e]=Un[e];function Cf(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class ug{constructor(t,n){this.toDOM=t,this.spec=n||Ha,this.side=this.spec.side||0}map(t,n,r,s){let{pos:o,deleted:i}=t.mapResult(n.from+s,this.side<0?-1:1);return i?null:new Jr(o-r,o-r,this)}valid(){return!0}eq(t){return this==t||t instanceof ug&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Cf(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Fi{constructor(t,n){this.attrs=t,this.spec=n||Ha}map(t,n,r,s){let o=t.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,i=t.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=i?null:new Jr(o,i,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Fi&&Cf(this.attrs,t.attrs)&&Cf(this.spec,t.spec)}static is(t){return t.type instanceof Fi}destroy(){}}class mE{constructor(t,n){this.attrs=t,this.spec=n||Ha}map(t,n,r,s){let o=t.mapResult(n.from+s,1);if(o.deleted)return null;let i=t.mapResult(n.to+s,-1);return i.deleted||i.pos<=o.pos?null:new Jr(o.pos-r,i.pos-r,this)}valid(t,n){let{index:r,offset:s}=t.content.findIndex(n.from),o;return s==n.from&&!(o=t.child(r)).isText&&s+o.nodeSize==n.to}eq(t){return this==t||t instanceof mE&&Cf(this.attrs,t.attrs)&&Cf(this.spec,t.spec)}destroy(){}}class Jr{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Jr(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Jr(t,t,new ug(n,r))}static inline(t,n,r,s){return new Jr(t,n,new Fi(r,s))}static node(t,n,r,s){return new Jr(t,n,new mE(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Fi}get widget(){return this.type instanceof ug}}const Ll=[],Ha={};class Ft{constructor(t,n){this.local=t.length?t:Ll,this.children=n.length?n:Ll}static create(t,n){return n.length?dg(n,t,0,Ha):Nn}find(t,n,r){let s=[];return this.findInner(t??0,n??1e9,s,0,r),s}findInner(t,n,r,s,o){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=t&&(!o||o(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>t){let a=this.children[i]+1;this.children[i+2].findInner(t-a,n-a,r,s+a,o)}}map(t,n,r){return this==Nn||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Ha)}mapInner(t,n,r,s,o){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,s);l&&l.type.valid(n,l)?(i||(i=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?VQ(this.children,i||[],t,n,r,s,o):i?new Ft(i.sort(Va),Ll):Nn}add(t,n){return n.length?this==Nn?Ft.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let s,o=0;t.forEach((a,l)=>{let c=l+r,u;if(u=VL(n,a,c)){for(s||(s=this.children.slice());o<s.length&&s[o]<l;)o+=3;s[o]==l?s[o+2]=s[o+2].addInner(a,u,c+1):s.splice(o,0,l,l+a.nodeSize,dg(u,a,c+1,Ha)),o+=3}});let i=HL(o?WL(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(t,i[a])||i.splice(a--,1);return new Ft(i.length?this.local.concat(i).sort(Va):this.local,s||this.children)}remove(t){return t.length==0||this==Nn?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let i,a=r[o]+n,l=r[o+1]+n;for(let u=0,d;u<t.length;u++)(d=t[u])&&d.from>a&&d.to<l&&(t[u]=null,(i||(i=[])).push(d));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(i,a+1);c!=Nn?r[o+2]=c:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,i;o<t.length;o++)if(i=t[o])for(let a=0;a<s.length;a++)s[a].eq(i,n)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Ft(s,r):Nn}forChild(t,n){if(this==Nn)return this;if(n.isLeaf)return Ft.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let o=t+1,i=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>o&&l.type instanceof Fi){let c=Math.max(o,l.from)-o,u=Math.min(i,l.to)-o;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new Ft(s.sort(Va),Ll);return r?new gi([a,r]):a}return r||Nn}eq(t){if(this==t)return!0;if(!(t instanceof Ft)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return gE(this.localsInner(t))}localsInner(t){if(this==Nn)return Ll;if(t.inlineContent||!this.local.some(Fi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Fi||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Ft.empty=new Ft([],[]);Ft.removeOverlap=gE;const Nn=Ft.empty;class gi{constructor(t){this.members=t}map(t,n){const r=this.members.map(s=>s.map(t,n,Ha));return gi.from(r)}forChild(t,n){if(n.isLeaf)return Ft.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(t,n);o!=Nn&&(o instanceof gi?r=r.concat(o.members):r.push(o))}return gi.from(r)}eq(t){if(!(t instanceof gi)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(t);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let i=0;i<o.length;i++)n.push(o[i])}}return n?gE(r?n:n.sort(Va)):Ll}static from(t){switch(t.length){case 0:return Nn;case 1:return t[0];default:return new gi(t.every(n=>n instanceof Ft)?t:t.reduce((n,r)=>n.concat(r instanceof Ft?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function VQ(e,t,n,r,s,o,i){let a=e.slice();for(let c=0,u=o;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,p,m,g)=>{let v=g-m-(p-h);for(let x=0;x<a.length;x+=3){let w=a[x+1];if(w<0||h>w+u-d)continue;let b=a[x]+u-d;p>=b?a[x+1]=h<=b?-2:-1:h>=u&&v&&(a[x]+=v,a[x+1]+=v)}d+=v}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(e[c]+o),d=u-s;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(e[c+1]+o,-1),p=h-s,{index:m,offset:g}=r.content.findIndex(d),v=r.maybeChild(m);if(v&&g==d&&g+v.nodeSize==p){let x=a[c+2].mapInner(n,v,u+1,e[c]+o+1,i);x!=Nn?(a[c]=d,a[c+1]=p,a[c+2]=x):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=WQ(a,e,t,n,s,o,i),u=dg(c,r,0,i);t=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let p=u.children[d];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Ft(t.sort(Va),a)}function HL(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let s=e[r];n.push(new Jr(s.from+t,s.to+t,s.type))}return n}function WQ(e,t,n,r,s,o,i){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,s,c);d?n.push(d):i.onRemove&&i.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&a(e[l+2],t[l]+o+1);return n}function VL(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,s=null;for(let o=0,i;o<e.length;o++)(i=e[o])&&i.from>n&&i.to<r&&((s||(s=[])).push(i),e[o]=null);return s}function WL(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function dg(e,t,n,r){let s=[],o=!1;t.forEach((a,l)=>{let c=VL(e,a,l+n);if(c){o=!0;let u=dg(c,a,n+l+1,r);u!=Nn&&s.push(l,l+a.nodeSize,u)}});let i=HL(o?WL(e):e,-n).sort(Va);for(let a=0;a<i.length;a++)i[a].type.valid(t,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||s.length?new Ft(i,s):Nn}function Va(e,t){return e.from-t.from||e.to-t.to}function gE(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let s=n+1;s<t.length;s++){let o=t[s];if(o.from==r.from){o.to!=r.to&&(t==e&&(t=e.slice()),t[s]=o.copy(o.from,r.to),mA(t,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),mA(t,s,r.copy(o.from,r.to)));break}}}return t}function mA(e,t,n){for(;t<e.length&&Va(n,e[t])>0;)t++;e.splice(t,0,n)}function px(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Nn&&t.push(r)}),e.cursorWrapper&&t.push(Ft.create(e.state.doc,[e.cursorWrapper.deco])),gi.from(t)}const qQ={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},GQ=lr&&$i<=11;class KQ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class JQ{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new KQ,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);lr&&$i<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),GQ&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,qQ)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(aA(this.view)){if(this.suppressingSelectionUpdates)return To(this.view);if(lr&&$i<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&sl(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let o=t.focusNode;o;o=wf(o))n.add(o);for(let o=t.anchorNode;o;o=wf(o))if(n.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&aA(t)&&!this.ignoreSelectionChange(r),o=-1,i=-1,a=!1,l=[];if(t.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(o=o<0?d.from:Math.min(d.from,o),i=i<0?d.to:Math.max(d.to,i),d.typeOver&&(a=!0))}if(Rs&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let p=h.parentNode;p&&p.nodeName=="LI"&&(!d||QQ(t,d)!=p)&&h.remove()}}}let c=null;o<0&&s&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&nv(r)&&(c=cE(t))&&c.eq(Re.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,To(t),this.currentSelection.set(r)):(o>-1||s)&&(o>-1&&(t.docView.markDirty(o,i),YQ(t)),this.handleDOMChange(o,i,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||To(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let d=t.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let s=t.previousSibling,o=t.nextSibling;if(lr&&$i<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=t.addedNodes[u];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(s=d),(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(o=h)}let i=s&&s.parentNode==t.target?hn(s)+1:0,a=r.localPosFromDOM(t.target,i,-1),l=o&&o.parentNode==t.target?hn(o):t.target.childNodes.length,c=r.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let gA=new WeakMap,yA=!1;function YQ(e){if(!gA.has(e)&&(gA.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Rs,yA)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),yA=!0}}function vA(e,t){let n=t.startContainer,r=t.startOffset,s=t.endContainer,o=t.endOffset,i=e.domAtPos(e.state.selection.anchor);return sl(i.node,i.offset,s,o)&&([n,r,s,o]=[s,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}}function XQ(e,t){if(t.getComposedRanges){let s=t.getComposedRanges(e.root)[0];if(s)return vA(e,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?vA(e,n):null}function QQ(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function ZQ(e,t,n){let{node:r,fromOffset:s,toOffset:o,from:i,to:a}=e.docView.parseRange(t,n),l=e.domSelectionRange(),c,u=l.anchorNode;if(u&&e.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],nv(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Tn&&e.input.lastKeyCode===8)for(let v=o;v>s;v--){let x=r.childNodes[v-1],w=x.pmViewDesc;if(x.nodeName=="BR"&&!w){o=v;break}if(!w||w.size)break}let d=e.state.doc,h=e.someProp("domParser")||Di.fromSchema(e.state.schema),p=d.resolve(i),m=null,g=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:eZ,context:p});if(c&&c[0].pos!=null){let v=c[0].pos,x=c[1]&&c[1].pos;x==null&&(x=v),m={anchor:v+i,head:x+i}}return{doc:g,sel:m,from:i,to:a}}function eZ(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(Bn&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||Bn&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const tZ=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function nZ(e,t,n,r,s){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let P=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,T=cE(e,P);if(T&&!e.state.selection.eq(T)){if(Tn&&No&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",L=>L(e,Ea(13,"Enter"))))return;let R=e.state.tr.setSelection(T);P=="pointer"?R.setMeta("pointer",!0):P=="key"&&R.scrollIntoView(),o&&R.setMeta("composition",o),e.dispatch(R)}return}let i=e.state.doc.resolve(t),a=i.sharedDepth(n);t=i.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l=e.state.selection,c=ZQ(e,t,n),u=e.state.doc,d=u.slice(c.from,c.to),h,p;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(h=e.state.selection.to,p="end"):(h=e.state.selection.from,p="start"),e.input.lastKeyCode=null;let m=oZ(d.content,c.doc.content,c.from,h,p);if(m&&e.input.domChangeCount++,(Bc&&e.input.lastIOSEnter>Date.now()-225||No)&&s.some(P=>P.nodeType==1&&!tZ.test(P.nodeName))&&(!m||m.endA>=m.endB)&&e.someProp("handleKeyDown",P=>P(e,Ea(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof _e&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let P=xA(e,e.state.doc,c.sel);if(P&&!P.eq(e.state.selection)){let T=e.state.tr.setSelection(P);o&&T.setMeta("composition",o),e.dispatch(T)}}return}e.state.selection.from<e.state.selection.to&&m.start==m.endB&&e.state.selection instanceof _e&&(m.start>e.state.selection.from&&m.start<=e.state.selection.from+2&&e.state.selection.from>=c.from?m.start=e.state.selection.from:m.endA<e.state.selection.to&&m.endA>=e.state.selection.to-2&&e.state.selection.to<=c.to&&(m.endB+=e.state.selection.to-m.endA,m.endA=e.state.selection.to)),lr&&$i<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),v=c.doc.resolveNoCache(m.endB-c.from),x=u.resolve(m.start),w=g.sameParent(v)&&g.parent.inlineContent&&x.end()>=m.endA,b;if((Bc&&e.input.lastIOSEnter>Date.now()-225&&(!w||s.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!w&&g.pos<c.doc.content.size&&!g.sameParent(v)&&(b=Re.findFrom(c.doc.resolve(g.pos+1),1,!0))&&b.head==v.pos)&&e.someProp("handleKeyDown",P=>P(e,Ea(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>m.start&&sZ(u,m.start,m.endA,g,v)&&e.someProp("handleKeyDown",P=>P(e,Ea(8,"Backspace")))){No&&Tn&&e.domObserver.suppressSelectionUpdates();return}Tn&&m.endB==m.start&&(e.input.lastChromeDelete=Date.now()),No&&!w&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,v=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{e.someProp("handleKeyDown",function(P){return P(e,Ea(13,"Enter"))})},20));let S=m.start,C=m.endA,E,k,N;if(w){if(g.pos==v.pos)lr&&$i<=11&&g.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>To(e),20)),E=e.state.tr.delete(S,C),k=u.resolve(m.start).marksAcross(u.resolve(m.endA));else if(m.endA==m.endB&&(N=rZ(g.parent.content.cut(g.parentOffset,v.parentOffset),x.parent.content.cut(x.parentOffset,m.endA-x.start()))))E=e.state.tr,N.type=="add"?E.addMark(S,C,N.mark):E.removeMark(S,C,N.mark);else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let P=g.parent.textBetween(g.parentOffset,v.parentOffset);if(e.someProp("handleTextInput",T=>T(e,S,C,P)))return;E=e.state.tr.insertText(P,S,C)}}if(E||(E=e.state.tr.replace(S,C,c.doc.slice(m.start-c.from,m.endB-c.from))),c.sel){let P=xA(e,E.doc,c.sel);P&&!(Tn&&e.composing&&P.empty&&(m.start!=m.endB||e.input.lastChromeDelete<Date.now()-100)&&(P.head==S||P.head==E.mapping.map(C)-1)||lr&&P.empty&&P.head==S)&&E.setSelection(P)}k&&E.ensureMarks(k),o&&E.setMeta("composition",o),e.dispatch(E.scrollIntoView())}function xA(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:uE(e,t.resolve(n.anchor),t.resolve(n.head))}function rZ(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,s=n,o=r,i,a,l;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(s.length==1&&o.length==0)a=s[0],i="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&o.length==1)a=o[0],i="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(ee.from(c).eq(e))return{mark:a,type:i}}function sZ(e,t,n,r,s){if(n-t<=s.pos-r.pos||mx(r,!0,!1)<s.pos)return!1;let o=e.resolve(t);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==t+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let i=e.resolve(mx(o,!0,!0));return!i.parent.isTextblock||i.pos>n||mx(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function mx(e,t,n){let r=e.depth,s=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,s++,t=!1;if(n){let o=e.node(r).maybeChild(e.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function oZ(e,t,n,r,s){let o=e.findDiffStart(t,n);if(o==null)return null;let{a:i,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if(s=="end"){let l=Math.max(0,o-Math.min(i,a));r-=i+l-o}if(i<o&&e.size<t.size){let l=r<=o&&r>=i?o-r:0;o-=l,o&&o<t.size&&wA(t.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-i),i=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<e.size&&wA(e.textBetween(o-1,o+1))&&(o+=l?1:-1),i=o+(i-a),a=o}return{start:o,endA:i,endB:a}}function wA(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class iZ{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new kQ,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(kA),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=CA(this),SA(this),this.nodeViews=EA(this),this.docView=tA(this.state.doc,bA(this),px(this),this.dom,this),this.domObserver=new JQ(this,(r,s,o,i)=>nZ(this,r,s,o,i)),this.domObserver.start(),_Q(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&o1(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(kA),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let s=this.state,o=!1,i=!1;t.storedMarks&&this.composing&&(FL(this),i=!0),this.state=t;let a=s.plugins!=t.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=EA(this);lZ(p,this.nodeViews)&&(this.nodeViews=p,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&o1(this),this.editable=CA(this),SA(this);let l=px(this),c=bA(this),u=s.plugins!=t.plugins&&!s.doc.eq(t.doc)?"reset":t.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(t.doc,c,l);(d||!t.selection.eq(s.selection))&&(i=!0);let h=u=="preserve"&&i&&this.dom.style.overflowAnchor==null&&BX(this);if(i){this.domObserver.stop();let p=d&&(lr||Tn)&&!this.composing&&!s.selection.empty&&!t.selection.empty&&aZ(s.selection,t.selection);if(d){let m=Tn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=FQ(this)),(o||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=tA(t.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&uQ(this))?To(this,p):(NL(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&zX(h)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof we){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&JP(this,n.getBoundingClientRect(),t)}else JP(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new zL(t.slice,t.move,s<0?void 0:we.create(this.state.doc,s))}someProp(t,n){let r=this._props&&this._props[t],s;if(r!=null&&(s=n?n(r):r))return s;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[t];if(a!=null&&(s=n?n(a):a))return s}let o=this.state.plugins;if(o)for(let i=0;i<o.length;i++){let a=o[i].props[t];if(a!=null&&(s=n?n(a):a))return s}}hasFocus(){if(lr){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&UX(this.dom),To(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return GX(this,t)}coordsAtPos(t,n=1){return xL(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let s=this.docView.posFromDOM(t,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(t,n){return QX(this,n||this.state,t)}pasteHTML(t,n){return Sf(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Sf(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return dE(this,t)}destroy(){this.docView&&(NQ(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],px(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,AX())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return AQ(this,t)}dispatch(t){let n=this._props.dispatchTransaction;n?n.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){let t=this.domSelection();return t?Bn&&this.root.nodeType===11&&MX(this.dom.ownerDocument)==this.dom&&XQ(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function bA(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Jr.node(0,e.state.doc.content.size,t)]}function SA(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Jr.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function CA(e){return!e.someProp("editable",t=>t(e.state)===!1)}function aZ(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function EA(e){let t=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(t,s)||(t[s]=r[s])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function lZ(e,t){let n=0,r=0;for(let s in e){if(e[s]!=t[s])return!0;n++}for(let s in t)r++;return n!=r}function kA(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Qi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},fg={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},cZ=typeof navigator<"u"&&/Mac/.test(navigator.platform),uZ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var pn=0;pn<10;pn++)Qi[48+pn]=Qi[96+pn]=String(pn);for(var pn=1;pn<=24;pn++)Qi[pn+111]="F"+pn;for(var pn=65;pn<=90;pn++)Qi[pn]=String.fromCharCode(pn+32),fg[pn]=String.fromCharCode(pn);for(var gx in Qi)fg.hasOwnProperty(gx)||(fg[gx]=Qi[gx]);function dZ(e){var t=cZ&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||uZ&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?fg:Qi)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const fZ=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function hZ(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))fZ?i=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),i&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function pZ(e){let t=Object.create(null);for(let n in e)t[hZ(n)]=e[n];return t}function yx(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function mZ(e){return new Sn({props:{handleKeyDown:qL(e)}})}function qL(e){let t=pZ(e);return function(n,r){let s=dZ(r),o,i=t[yx(s,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=t[yx(s,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||s.charCodeAt(0)>127)&&(o=Qi[r.keyCode])&&o!=s){let a=t[yx(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const gZ=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function GL(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const yZ=(e,t,n)=>{let r=GL(e,n);if(!r)return!1;let s=yE(r);if(!s){let i=r.blockRange(),a=i&&mu(i);return a==null?!1:(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)}let o=s.nodeBefore;if(XL(e,s,t,-1))return!0;if(r.parent.content.size==0&&(zc(o,"end")||we.isSelectable(o)))for(let i=r.depth;;i--){let a=ev(e.doc,r.before(i),r.after(i),le.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=e.tr.step(a);l.setSelection(zc(o,"end")?Re.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):we.create(l.doc,s.pos-o.nodeSize)),t(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(t&&t(e.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},vZ=(e,t,n)=>{let r=GL(e,n);if(!r)return!1;let s=yE(r);return s?KL(e,s,t):!1},xZ=(e,t,n)=>{let r=JL(e,n);if(!r)return!1;let s=vE(r);return s?KL(e,s,t):!1};function KL(e,t,n){let r=t.nodeBefore,s=r,o=t.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let i=t.nodeAfter,a=i,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=ev(e.doc,o,l,le.empty);if(!c||c.from!=o||c instanceof Xt&&c.slice.size>=l-o)return!1;if(n){let u=e.tr.step(c);u.setSelection(_e.create(u.doc,o)),n(u.scrollIntoView())}return!0}function zc(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const wZ=(e,t,n)=>{let{$head:r,empty:s}=e.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=yE(r)}let i=o&&o.nodeBefore;return!i||!we.isSelectable(i)?!1:(t&&t(e.tr.setSelection(we.create(e.doc,o.pos-i.nodeSize)).scrollIntoView()),!0)};function yE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function JL(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const bZ=(e,t,n)=>{let r=JL(e,n);if(!r)return!1;let s=vE(r);if(!s)return!1;let o=s.nodeAfter;if(XL(e,s,t,1))return!0;if(r.parent.content.size==0&&(zc(o,"start")||we.isSelectable(o))){let i=ev(e.doc,r.before(),r.after(),le.empty);if(i&&i.slice.size<i.to-i.from){if(t){let a=e.tr.step(i);a.setSelection(zc(o,"start")?Re.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):we.create(a.doc,a.mapping.map(s.pos))),t(a.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(t&&t(e.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},SZ=(e,t,n)=>{let{$head:r,empty:s}=e.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=vE(r)}let i=o&&o.nodeAfter;return!i||!we.isSelectable(i)?!1:(t&&t(e.tr.setSelection(we.create(e.doc,o.pos)).scrollIntoView()),!0)};function vE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const CZ=(e,t)=>{let n=e.selection,r=n instanceof we,s;if(r){if(n.node.isTextblock||!aa(e.doc,n.from))return!1;s=n.from}else if(s=Zy(e.doc,n.from,-1),s==null)return!1;if(t){let o=e.tr.join(s);r&&o.setSelection(we.create(o.doc,s-e.doc.resolve(s).nodeBefore.nodeSize)),t(o.scrollIntoView())}return!0},EZ=(e,t)=>{let n=e.selection,r;if(n instanceof we){if(n.node.isTextblock||!aa(e.doc,n.to))return!1;r=n.to}else if(r=Zy(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},kZ=(e,t)=>{let{$from:n,$to:r}=e.selection,s=n.blockRange(r),o=s&&mu(s);return o==null?!1:(t&&t(e.tr.lift(s,o).scrollIntoView()),!0)},_Z=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function YL(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const NZ=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),o=n.indexAfter(-1),i=YL(s.contentMatchAt(o));if(!i||!s.canReplaceWith(o,o,i))return!1;if(t){let a=n.after(),l=e.tr.replaceWith(a,a,i.createAndFill());l.setSelection(Re.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},PZ=(e,t)=>{let n=e.selection,{$from:r,$to:s}=n;if(n instanceof es||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=YL(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let i=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=e.tr.insert(i,o.createAndFill());a.setSelection(_e.create(a.doc,i+1)),t(a.scrollIntoView())}return!0},AZ=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(xc(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),s=r&&mu(r);return s==null?!1:(t&&t(e.tr.lift(r,s).scrollIntoView()),!0)},TZ=(e,t)=>{let{$from:n,to:r}=e.selection,s,o=n.sharedDepth(r);return o==0?!1:(s=n.before(o),t&&t(e.tr.setSelection(we.create(e.doc,s))),!0)};function RZ(e,t,n){let r=t.nodeBefore,s=t.nodeAfter,o=t.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(s.isTextblock||aa(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function XL(e,t,n,r){let s=t.nodeBefore,o=t.nodeAfter,i,a,l=s.type.spec.isolating||o.type.spec.isolating;if(!l&&RZ(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(i=(a=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&a.matchType(i[0]||o.type).validEnd){if(n){let p=t.pos+o.nodeSize,m=ee.empty;for(let x=i.length-1;x>=0;x--)m=ee.from(i[x].create(null,m));m=ee.from(s.copy(m));let g=e.tr.step(new en(t.pos-1,p,t.pos,p,new le(m,1,0),i.length,!0)),v=g.doc.resolve(p+2*i.length);v.nodeAfter&&v.nodeAfter.type==s.type&&aa(g.doc,v.pos)&&g.join(v.pos),n(g.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:Re.findFrom(t,1),d=u&&u.$from.blockRange(u.$to),h=d&&mu(d);if(h!=null&&h>=t.depth)return n&&n(e.tr.lift(d,h).scrollIntoView()),!0;if(c&&zc(o,"start",!0)&&zc(s,"end")){let p=s,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=o,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(n){let x=ee.empty;for(let b=m.length-1;b>=0;b--)x=ee.from(m[b].copy(x));let w=e.tr.step(new en(t.pos-m.length,t.pos+o.nodeSize,t.pos+v,t.pos+o.nodeSize-v,new le(x,m.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function QL(e){return function(t,n){let r=t.selection,s=e<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(n&&n(t.tr.setSelection(_e.create(t.doc,e<0?s.start(o):s.end(o)))),!0):!1}}const jZ=QL(-1),OZ=QL(1);function MZ(e,t=null){return function(n,r){let{$from:s,$to:o}=n.selection,i=s.blockRange(o),a=i&&iE(i,e,t);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function _A(e,t=null){return function(n,r){let s=!1;for(let o=0;o<n.selection.ranges.length&&!s;o++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(i,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)s=!0;else{let u=n.doc.resolve(c),d=u.index();s=u.parent.canReplaceWith(d,d+1,e)}})}if(!s)return!1;if(r){let o=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];o.setBlockType(a,l,e,t)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function IZ(e,t=null){return function(n,r){let{$from:s,$to:o}=n.selection,i=s.blockRange(o);if(!i)return!1;let a=r?n.tr:null;return DZ(a,i,e,t)?(r&&r(a.scrollIntoView()),!0):!1}}function DZ(e,t,n,r=null){let s=!1,o=t,i=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let l=i.resolve(t.start-2);o=new og(l,l,t.depth),t.endIndex<t.parent.childCount&&(t=new og(t.$from,i.resolve(t.$to.end(t.depth)),t.depth)),s=!0}let a=iE(o,n,r,t);return a?(e&&$Z(e,t,a,s,n),!0):!1}function $Z(e,t,n,r,s){let o=ee.empty;for(let u=n.length-1;u>=0;u--)o=ee.from(n[u].type.create(n[u].attrs,o));e.step(new en(t.start-(r?2:0),t.end,t.start,t.end,new le(o,0,0),n.length,!0));let i=0;for(let u=0;u<n.length;u++)n[u].type==s&&(i=u+1);let a=n.length-i,l=t.start+n.length-(r?2:0),c=t.parent;for(let u=t.startIndex,d=t.endIndex,h=!0;u<d;u++,h=!1)!h&&xc(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return e}function LZ(e){return function(t,n){let{$from:r,$to:s}=t.selection,o=r.blockRange(s,i=>i.childCount>0&&i.firstChild.type==e);return o?n?r.node(o.depth-1).type==e?FZ(t,n,e,o):BZ(t,n,o):!0:!1}}function FZ(e,t,n,r){let s=e.tr,o=r.end,i=r.$to.end(r.depth);o<i&&(s.step(new en(o-1,i,o,i,new le(ee.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new og(s.doc.resolve(r.$from.pos),s.doc.resolve(i),r.depth));const a=mu(r);if(a==null)return!1;s.lift(r,a);let l=s.mapping.map(o,-1)-1;return aa(s.doc,l)&&s.join(l),t(s.scrollIntoView()),!0}function BZ(e,t,n){let r=e.tr,s=n.parent;for(let p=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)p-=s.child(m).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),i=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==s.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,i.content.append(l?ee.empty:ee.from(s))))return!1;let d=o.pos,h=d+i.nodeSize;return r.step(new en(d-(a?1:0),h+(l?1:0),d+1,h-1,new le((a?ee.empty:ee.from(s.copy(ee.empty))).append(l?ee.empty:ee.from(s.copy(ee.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function zZ(e){return function(t,n){let{$from:r,$to:s}=t.selection,o=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==e);if(!o)return!1;let i=o.startIndex;if(i==0)return!1;let a=o.parent,l=a.child(i-1);if(l.type!=e)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=ee.from(c?e.create():null),d=new le(ee.from(e.create(null,ee.from(a.type.create(null,u)))),c?3:1,0),h=o.start,p=o.end;n(t.tr.step(new en(h-(c?3:1),p,h,p,d,1,!0)).scrollIntoView())}return!0}}function ov(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}}}class iv{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:r}=this,{view:s}=n,{tr:o}=r,i=this.buildProps(o);return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...u)=>{const d=l(...u)(i);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a=[],l=!!t,c=t||o.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,p])=>[h,(...g)=>{const v=this.buildProps(c,n),x=p(...g)(v);return a.push(x),d}])),run:u};return d}createCan(t){const{rawCommands:n,state:r}=this,s=!1,o=t||r.tr,i=this.buildProps(o,s);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(o,s)}}buildProps(t,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a={tr:t,editor:s,view:i,state:ov({state:o,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t,n),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class UZ{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const r=this.callbacks[t];return r&&r.forEach(s=>s.apply(this,n)),this}off(t,n){const r=this.callbacks[t];return r&&(n?this.callbacks[t]=r.filter(s=>s!==n):delete this.callbacks[t]),this}once(t,n){const r=(...s)=>{this.off(t,r),n.apply(this,s)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}}function pe(e,t,n){return e.config[t]===void 0&&e.parent?pe(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?pe(e.parent,t,n):null}):e.config[t]}function av(e){const t=e.filter(s=>s.type==="extension"),n=e.filter(s=>s.type==="node"),r=e.filter(s=>s.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function ZL(e){const t=[],{nodeExtensions:n,markExtensions:r}=av(e),s=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:s},l=pe(i,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,p])=>{t.push({type:d,name:h,attribute:{...o,...p}})})})})}),s.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=pe(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...o,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,t.push({type:i.name,name:u,attribute:h})})}),t}function rn(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function wn(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const a=o?String(o).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(p=>p.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(p=>p.trim());c.set(d,h)}),r[s]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[s]=o}),r},{})}function i1(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>wn(n,r),{})}function e4(e){return typeof e=="function"}function Ie(e,t=void 0,...n){return e4(e)?t?e.bind(t)(...n):e(...n):e}function HZ(e={}){return Object.keys(e).length===0&&e.constructor===Object}function VZ(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function NA(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const s=t.reduce((o,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):VZ(n.getAttribute(i.name));return a==null?o:{...o,[i.name]:a}},{});return{...r,...s}}}}function PA(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&HZ(n)?!1:n!=null))}function WZ(e,t){var n;const r=ZL(e),{nodeExtensions:s,markExtensions:o}=av(e),i=(n=s.find(c=>pe(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(s.map(c=>{const u=r.filter(x=>x.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:t},h=e.reduce((x,w)=>{const b=pe(w,"extendNodeSchema",d);return{...x,...b?b(c):{}}},{}),p=PA({...h,content:Ie(pe(c,"content",d)),marks:Ie(pe(c,"marks",d)),group:Ie(pe(c,"group",d)),inline:Ie(pe(c,"inline",d)),atom:Ie(pe(c,"atom",d)),selectable:Ie(pe(c,"selectable",d)),draggable:Ie(pe(c,"draggable",d)),code:Ie(pe(c,"code",d)),whitespace:Ie(pe(c,"whitespace",d)),linebreakReplacement:Ie(pe(c,"linebreakReplacement",d)),defining:Ie(pe(c,"defining",d)),isolating:Ie(pe(c,"isolating",d)),attrs:Object.fromEntries(u.map(x=>{var w;return[x.name,{default:(w=x==null?void 0:x.attribute)===null||w===void 0?void 0:w.default}]}))}),m=Ie(pe(c,"parseHTML",d));m&&(p.parseDOM=m.map(x=>NA(x,u)));const g=pe(c,"renderHTML",d);g&&(p.toDOM=x=>g({node:x,HTMLAttributes:i1(x,u)}));const v=pe(c,"renderText",d);return v&&(p.toText=v),[c.name,p]})),l=Object.fromEntries(o.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:t},h=e.reduce((v,x)=>{const w=pe(x,"extendMarkSchema",d);return{...v,...w?w(c):{}}},{}),p=PA({...h,inclusive:Ie(pe(c,"inclusive",d)),excludes:Ie(pe(c,"excludes",d)),group:Ie(pe(c,"group",d)),spanning:Ie(pe(c,"spanning",d)),code:Ie(pe(c,"code",d)),attrs:Object.fromEntries(u.map(v=>{var x;return[v.name,{default:(x=v==null?void 0:v.attribute)===null||x===void 0?void 0:x.default}]}))}),m=Ie(pe(c,"parseHTML",d));m&&(p.parseDOM=m.map(v=>NA(v,u)));const g=pe(c,"renderHTML",d);return g&&(p.toDOM=v=>g({mark:v,HTMLAttributes:i1(v,u)})),[c.name,p]}));return new K$({topNode:i,nodes:a,marks:l})}function vx(e,t){return t.nodes[e]||t.marks[e]||null}function AA(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function xE(e,t){const n=yl.fromSchema(t).serializeFragment(e),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}const qZ=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(s,o,i,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:s,pos:o,parent:i,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-o))}),n};function wE(e){return Object.prototype.toString.call(e)==="[object RegExp]"}class lv{constructor(t){this.find=t.find,this.handler=t.handler}}const GZ=(e,t)=>{if(wE(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function op(e){var t;const{editor:n,from:r,to:s,text:o,rules:i,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((t=c.nodeBefore||c.nodeAfter)===null||t===void 0)&&t.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=qZ(c)+o;return i.forEach(h=>{if(u)return;const p=GZ(d,h.find);if(!p)return;const m=l.state.tr,g=ov({state:l.state,transaction:m}),v={from:r-(p[0].length-o.length),to:s},{commands:x,chain:w,can:b}=new iv({editor:n,state:g});h.handler({state:g,range:v,match:p,commands:x,chain:w,can:b})===null||!m.steps.length||(m.setMeta(a,{transform:m,from:r,to:s,text:o}),l.dispatch(m),u=!0)}),u}function KZ(e){const{editor:t,rules:n}=e,r=new Sn({state:{init(){return null},apply(s,o,i){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=xE(ee.from(u),i.schema);const{from:d}=l,h=d+u.length;op({editor:t,from:d,to:h,text:u,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,i,a){return op({editor:t,from:o,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&op({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:i}=s.state.selection;return i?op({editor:t,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function JZ(e){return Object.prototype.toString.call(e).slice(8,-1)}function ip(e){return JZ(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function cv(e,t){const n={...e};return ip(e)&&ip(t)&&Object.keys(t).forEach(r=>{ip(t[r])&&ip(e[r])?n[r]=cv(e[r],t[r]):n[r]=t[r]}),n}class Lo{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ie(pe(this,"addOptions",{name:this.name}))),this.storage=Ie(pe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Lo(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>cv(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new Lo(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ie(pe(n,"addOptions",{name:n.name})),n.storage=Ie(pe(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,s=t.state.selection.$from;if(s.pos===s.end()){const i=s.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),t.view.dispatch(r),!0}return!1}}function YZ(e){return typeof e=="number"}class XZ{constructor(t){this.find=t.find,this.handler=t.handler}}const QZ=(e,t,n)=>{if(wE(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=e,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function ZZ(e){const{editor:t,state:n,from:r,to:s,rule:o,pasteEvent:i,dropEvent:a}=e,{commands:l,chain:c,can:u}=new iv({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,s,(p,m)=>{if(!p.isTextblock||p.type.spec.code)return;const g=Math.max(r,m),v=Math.min(s,m+p.content.size),x=p.textBetween(g-m,v-m,void 0,"");QZ(x,o.find,i).forEach(b=>{if(b.index===void 0)return;const S=g+b.index+1,C=S+b[0].length,E={from:n.tr.mapping.map(S),to:n.tr.mapping.map(C)},k=o.handler({state:n,range:E,match:b,commands:l,chain:c,can:u,pasteEvent:i,dropEvent:a});d.push(k)})}),d.every(p=>p!==null)}let ap=null;const eee=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)===null||t===void 0||t.setData("text/html",e),n};function tee(e){const{editor:t,rules:n}=e;let r=null,s=!1,o=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:p,pasteEvt:m})=>{const g=u.tr,v=ov({state:u,transaction:g});if(!(!ZZ({editor:t,state:v,from:Math.max(d-1,0),to:h.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(u=>new Sn({view(d){const h=m=>{var g;r=!((g=d.dom.parentElement)===null||g===void 0)&&g.contains(m.target)?d.dom.parentElement:null,r&&(ap=t)},p=()=>{ap&&(ap=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(o=r===d.dom.parentElement,a=h,!o){const p=ap;p&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(d,h)=>{var p;const m=(p=h.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return i=h,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,p)=>{const m=d[0],g=m.getMeta("uiEvent")==="paste"&&!s,v=m.getMeta("uiEvent")==="drop"&&!o,x=m.getMeta("applyPasteRules"),w=!!x;if(!g&&!v&&!w)return;if(w){let{text:C}=x;typeof C=="string"?C=C:C=xE(ee.from(C),p.schema);const{from:E}=x,k=E+C.length,N=eee(C);return l({rule:u,state:p,from:E,to:{b:k},pasteEvt:N})}const b=h.doc.content.findDiffStart(p.doc.content),S=h.doc.content.findDiffEnd(p.doc.content);if(!(!YZ(b)||!S||b===S.b))return l({rule:u,state:p,from:b,to:S,pasteEvt:i})}}))}function nee(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}class ec{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=ec.resolve(t),this.schema=WZ(this.extensions,n),this.setupExtensions()}static resolve(t){const n=ec.sort(ec.flatten(t)),r=nee(n.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},s=pe(n,"addExtensions",r);return s?[n,...this.flatten(s())]:n}).flat(10)}static sort(t){return t.sort((r,s)=>{const o=pe(r,"priority")||100,i=pe(s,"priority")||100;return o>i?-1:o<i?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:vx(n.name,this.schema)},s=pe(n,"addCommands",r);return s?{...t,...s()}:t},{})}get plugins(){const{editor:t}=this,n=ec.sort([...this.extensions].reverse()),r=[],s=[],o=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:t,type:vx(i.name,this.schema)},l=[],c=pe(i,"addKeyboardShortcuts",a);let u={};if(i.type==="mark"&&pe(i,"exitable",a)&&(u.ArrowRight=()=>Lo.handleExit({editor:t,mark:i})),c){const g=Object.fromEntries(Object.entries(c()).map(([v,x])=>[v,()=>x({editor:t})]));u={...u,...g}}const d=mZ(u);l.push(d);const h=pe(i,"addInputRules",a);AA(i,t.options.enableInputRules)&&h&&r.push(...h());const p=pe(i,"addPasteRules",a);AA(i,t.options.enablePasteRules)&&p&&s.push(...p());const m=pe(i,"addProseMirrorPlugins",a);if(m){const g=m();l.push(...g)}return l}).flat();return[KZ({editor:t,rules:r}),...tee({editor:t,rules:s}),...o]}get attributes(){return ZL(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=av(this.extensions);return Object.fromEntries(n.filter(r=>!!pe(r,"addNodeView")).map(r=>{const s=this.attributes.filter(l=>l.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:t,type:rn(r.name,this.schema)},i=pe(r,"addNodeView",o);if(!i)return[];const a=(l,c,u,d,h)=>{const p=i1(l,s);return i()({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(t=>{var n;this.editor.extensionStorage[t.name]=t.storage;const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:vx(t.name,this.schema)};t.type==="mark"&&(!((n=Ie(pe(t,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(t.name);const s=pe(t,"onBeforeCreate",r),o=pe(t,"onCreate",r),i=pe(t,"onUpdate",r),a=pe(t,"onSelectionUpdate",r),l=pe(t,"onTransaction",r),c=pe(t,"onFocus",r),u=pe(t,"onBlur",r),d=pe(t,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Hn{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ie(pe(this,"addOptions",{name:this.name}))),this.storage=Ie(pe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Hn(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>cv(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new Hn({...this.config,...t});return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ie(pe(n,"addOptions",{name:n.name})),n.storage=Ie(pe(n,"addStorage",{name:n.name,options:n.options})),n}}function t4(e,t,n){const{from:r,to:s}=t,{blockSeparator:o=`

`,textSerializers:i={}}=n||{};let a="";return e.nodesBetween(r,s,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=o);const p=i==null?void 0:i[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:d,range:t})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,s-c))}),a}function n4(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}const ree=Hn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Sn({key:new Rr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:s}=t,{ranges:o}=s,i=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=n4(n);return t4(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),see=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),oee=(e=!1)=>({commands:t})=>t.setContent("",e),iee=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:i})=>{e.doc.nodesBetween(o.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=t,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),p=d.blockRange(h);if(!p)return;const m=mu(p);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());t.setNodeMarkup(p.start,g)}(m||m===0)&&t.lift(p,m)})}),!0},aee=e=>t=>e(t),lee=()=>({state:e,dispatch:t})=>PZ(e,t),cee=(e,t)=>({editor:n,tr:r})=>{const{state:s}=n,o=s.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const i=r.mapping.map(t);return r.insert(i,o.content),r.setSelection(new _e(r.doc.resolve(i-1))),!0},uee=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(t){const a=s.before(o),l=s.after(o);e.delete(a,l).scrollIntoView()}return!0}return!1},dee=e=>({tr:t,state:n,dispatch:r})=>{const s=rn(e,n.schema),o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===s){if(r){const l=o.before(i),c=o.after(i);t.delete(l,c).scrollIntoView()}return!0}return!1},fee=e=>({tr:t,dispatch:n})=>{const{from:r,to:s}=e;return n&&t.delete(r,s),!0},hee=()=>({state:e,dispatch:t})=>gZ(e,t),pee=()=>({commands:e})=>e.keyboardShortcut("Enter"),mee=()=>({state:e,dispatch:t})=>NZ(e,t);function hg(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(s=>n.strict?t[s]===e[s]:wE(t[s])?t[s].test(e[s]):t[s]===e[s]):!0}function r4(e,t,n={}){return e.find(r=>r.type===t&&hg(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function TA(e,t,n={}){return!!r4(e,t,n)}function bE(e,t,n){var r;if(!e||!t)return;let s=e.parent.childAfter(e.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===t))&&(s=e.parent.childBefore(e.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===t)||(n=n||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!r4([...s.node.marks],t,n)))return;let i=s.index,a=e.start()+s.offset,l=i+1,c=a+s.node.nodeSize;for(;i>0&&TA([...e.parent.child(i-1).marks],t,n);)i-=1,a-=e.parent.child(i).nodeSize;for(;l<e.parent.childCount&&TA([...e.parent.child(l).marks],t,n);)c+=e.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function ca(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}const gee=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const o=ca(e,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:u}=a;if(s){const d=bE(l,o,t);if(d&&d.from<=c&&d.to>=u){const h=_e.create(i,d.from,d.to);n.setSelection(h)}}return!0},yee=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function s4(e){return e instanceof _e}function ja(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function o4(e,t=null){if(!t)return null;const n=Re.atStart(e),r=Re.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const s=n.from,o=r.to;return t==="all"?_e.create(e,ja(0,s,o),ja(e.content.size,s,o)):_e.create(e,ja(t,s,o),ja(t,s,o))}function vee(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function SE(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const xee=(e=null,t={})=>({editor:n,view:r,tr:s,dispatch:o})=>{t={scrollIntoView:!0,...t};const i=()=>{(SE()||vee())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(o&&e===null&&!s4(n.state.selection))return i(),!0;const a=o4(s.doc,e)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0},wee=(e,t)=>n=>e.every((r,s)=>t(r,{...n,index:s})),bee=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),i4=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&i4(r)}return e};function lp(e){const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return i4(n)}function pg(e,t,n){if(e instanceof Ii||e instanceof ee)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,s=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return ee.fromArray(e.map(a=>t.nodeFromJSON(a)));const i=t.nodeFromJSON(e);return n.errorOnInvalidContent&&i.check(),i}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",o),pg("",t,n)}if(s){if(n.errorOnInvalidContent){let i=!1,a="";const l=new K$({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Di.fromSchema(l).parseSlice(lp(e),n.parseOptions):Di.fromSchema(l).parse(lp(e),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=Di.fromSchema(t);return n.slice?o.parseSlice(lp(e),n.parseOptions).content:o.parse(lp(e),n.parseOptions)}return pg("",t,n)}function See(e,t,n){const r=e.steps.length-1;if(r<t)return;const s=e.steps[r];if(!(s instanceof Xt||s instanceof en))return;const o=e.mapping.maps[r];let i=0;o.forEach((a,l,c,u)=>{i===0&&(i=u)}),e.setSelection(Re.near(e.doc.resolve(i),n))}const Cee=e=>!("type"in e),Eee=(e,t,n)=>({tr:r,dispatch:s,editor:o})=>{var i;if(s){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=pg(t,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(i=n.errorOnInvalidContent)!==null&&i!==void 0?i:o.options.enableContentCheck})}catch(m){return o.emit("contentError",{editor:o,error:m,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},u=!0,d=!0;if((Cee(a)?a:[a]).forEach(m=>{m.check(),u=u?m.isText&&m.marks.length===0:!1,d=d?m.isBlock:!1}),l===c&&d){const{parent:m}=r.doc.resolve(l);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(l-=1,c+=1)}let p;if(u){if(Array.isArray(t))p=t.map(m=>m.text||"").join("");else if(t instanceof ee){let m="";t.forEach(g=>{g.text&&(m+=g.text)}),p=m}else typeof t=="object"&&t&&t.text?p=t.text:p=t;r.insertText(p,l,c)}else p=a,r.replaceWith(l,c,p);n.updateSelection&&See(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:p}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:p})}return!0},kee=()=>({state:e,dispatch:t})=>CZ(e,t),_ee=()=>({state:e,dispatch:t})=>EZ(e,t),Nee=()=>({state:e,dispatch:t})=>yZ(e,t),Pee=()=>({state:e,dispatch:t})=>bZ(e,t),Aee=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Zy(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Tee=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Zy(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Ree=()=>({state:e,dispatch:t})=>vZ(e,t),jee=()=>({state:e,dispatch:t})=>xZ(e,t);function a4(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Oee(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<t.length-1;a+=1){const l=t[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))SE()||a4()?i=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const Mee=e=>({editor:t,view:n,tr:r,dispatch:s})=>{const o=Oee(e).split(/-(?!$)/),i=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function Ef(e,t,n={}){const{from:r,to:s,empty:o}=e.selection,i=t?rn(t,e.schema):null,a=[];e.doc.nodesBetween(r,s,(d,h)=>{if(d.isText)return;const p=Math.max(r,h),m=Math.min(s,h+d.nodeSize);a.push({node:d,from:p,to:m})});const l=s-r,c=a.filter(d=>i?i.name===d.node.type.name:!0).filter(d=>hg(d.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}const Iee=(e,t={})=>({state:n,dispatch:r})=>{const s=rn(e,n.schema);return Ef(n,s,t)?kZ(n,r):!1},Dee=()=>({state:e,dispatch:t})=>AZ(e,t),$ee=e=>({state:t,dispatch:n})=>{const r=rn(e,t.schema);return LZ(r)(t,n)},Lee=()=>({state:e,dispatch:t})=>_Z(e,t);function uv(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function RA(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,s)=>(n.includes(s)||(r[s]=e[s]),r),{})}const Fee=(e,t)=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=uv(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(o=rn(e,r.schema)),a==="mark"&&(i=ca(e,r.schema)),s&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,RA(c.attrs,t)),i&&c.marks.length&&c.marks.forEach(d=>{i===d.type&&n.addMark(u,u+c.nodeSize,i.create(RA(d.attrs,t)))})})}),!0):!1},Bee=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),zee=()=>({tr:e,dispatch:t})=>{if(t){const n=new es(e.doc);e.setSelection(n)}return!0},Uee=()=>({state:e,dispatch:t})=>wZ(e,t),Hee=()=>({state:e,dispatch:t})=>SZ(e,t),Vee=()=>({state:e,dispatch:t})=>TZ(e,t),Wee=()=>({state:e,dispatch:t})=>OZ(e,t),qee=()=>({state:e,dispatch:t})=>jZ(e,t);function a1(e,t,n={},r={}){return pg(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const Gee=(e,t=!1,n={},r={})=>({editor:s,tr:o,dispatch:i,commands:a})=>{var l,c;const{doc:u}=o;if(n.preserveWhitespace!=="full"){const d=a1(e,s.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:s.options.enableContentCheck});return i&&o.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!t),!0}return i&&o.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:u.content.size},e,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck})};function l4(e,t){const n=ca(t,e.schema),{from:r,to:s,empty:o}=e.selection,i=[];o?(e.storedMarks&&i.push(...e.storedMarks),i.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,s,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Kee(e,t){const n=new uL(e);return t.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function Jee(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Yee(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(s,o)=>{n(s)&&r.push({node:s,pos:o})}),r}function Xee(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function CE(e){return t=>Xee(t.$from,e)}function Qee(e,t){const n={from:0,to:e.content.size};return t4(e,n,t)}function Zee(e,t){const n=rn(t,e.schema),{from:r,to:s}=e.selection,o=[];e.doc.nodesBetween(r,s,a=>{o.push(a)});const i=o.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function c4(e,t){const n=uv(typeof t=="string"?t:t.name,e.schema);return n==="node"?Zee(e,t):n==="mark"?l4(e,t):{}}function ete(e,t=JSON.stringify){const n={};return e.filter(r=>{const s=t(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function tte(e){const t=ete(e);return t.length===1?t:t.filter((n,r)=>!t.filter((o,i)=>i!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function nte(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((s,o)=>{const i=[];if(s.ranges.length)s.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[o];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=t.slice(o).map(a,-1),u=t.slice(o).map(l),d=t.invert().map(c,-1),h=t.invert().map(u);r.push({oldRange:{from:d,to:h},newRange:{from:c,to:u}})})}),tte(r)}function EE(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(s=>{const o=n.resolve(e),i=bE(o,s.type);i&&r.push({mark:s,...i})}):n.nodesBetween(e,t,(s,o)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(i=>({from:o,to:o+s.nodeSize,mark:i})))}),r}function tm(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=e.find(o=>o.type===t&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}function l1(e,t,n={}){const{empty:r,ranges:s}=e.selection,o=t?ca(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>hg(d.attrs,n,{strict:!1}));let i=0;const a=[];if(s.forEach(({$from:d,$to:h})=>{const p=d.pos,m=h.pos;e.doc.nodesBetween(p,m,(g,v)=>{if(!g.isText&&!g.marks.length)return;const x=Math.max(p,v),w=Math.min(m,v+g.nodeSize),b=w-x;i+=b,a.push(...g.marks.map(S=>({mark:S,from:x,to:w})))})}),i===0)return!1;const l=a.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>hg(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=i}function rte(e,t,n={}){if(!t)return Ef(e,null,n)||l1(e,null,n);const r=uv(t,e.schema);return r==="node"?Ef(e,t,n):r==="mark"?l1(e,t,n):!1}function jA(e,t){const{nodeExtensions:n}=av(t),r=n.find(i=>i.name===e);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=Ie(pe(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function kE(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!==null&&r!==void 0?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let s=!0;return e.content.forEach(o=>{s!==!1&&(kE(o,{ignoreWhitespace:n,checkChildren:t})||(s=!1))}),s}return!1}function ste(e){return e instanceof we}function ote(e,t,n){var r;const{selection:s}=t;let o=null;if(s4(s)&&(o=s.$cursor),o){const a=(r=e.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=s;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const p=!h||h.type.allowsMarkType(n),m=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));c=p&&m}return!c}),c})}const ite=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:i,ranges:a}=o,l=ca(e,r.schema);if(s)if(i){const c=l4(r,l);n.addStoredMark(l.create({...c,...t}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,p)=>{const m=Math.max(p,u),g=Math.min(p+h.nodeSize,d);h.marks.find(x=>x.type===l)?h.marks.forEach(x=>{l===x.type&&n.addMark(m,g,l.create({...x.attrs,...t}))}):n.addMark(m,g,l.create(t))})});return ote(r,n,l)},ate=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),lte=(e,t={})=>({state:n,dispatch:r,chain:s})=>{const o=rn(e,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:a})=>_A(o,{...i,...t})(n)?!0:a.clearNodes()).command(({state:a})=>_A(o,{...i,...t})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},cte=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,s=ja(e,0,r.content.size),o=we.create(r,s);t.setSelection(o)}return!0},ute=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:s,to:o}=typeof e=="number"?{from:e,to:e}:e,i=_e.atStart(r).from,a=_e.atEnd(r).to,l=ja(s,i,a),c=ja(o,i,a),u=_e.create(r,l,c);t.setSelection(u)}return!0},dte=e=>({state:t,dispatch:n})=>{const r=rn(e,t.schema);return zZ(r)(t,n)};function OA(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(s=>t==null?void 0:t.includes(s.type.name));e.tr.ensureMarks(r)}}const fte=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:i}=t,{$from:a,$to:l}=o,c=s.extensionManager.attributes,u=tm(c,a.node().type.name,a.node().attrs);if(o instanceof we&&o.node.isBlock)return!a.parentOffset||!xc(i,a.pos)?!1:(r&&(e&&OA(n,s.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:Jee(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=d&&h?[{type:h,attrs:u}]:void 0,m=xc(t.doc,t.mapping.map(a.pos),1,p);if(!p&&!m&&xc(t.doc,t.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(m=!0,p=h?[{type:h,attrs:u}]:void 0),r){if(m&&(o instanceof _e&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,p),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const g=t.mapping.map(a.before()),v=t.doc.resolve(g);a.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&t.setNodeMarkup(t.mapping.map(a.before()),h)}e&&OA(n,s.extensionManager.splittableMarks),t.scrollIntoView()}return m},hte=(e,t={})=>({tr:n,state:r,dispatch:s,editor:o})=>{var i;const a=rn(e,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let x=ee.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let N=l.depth-w;N>=l.depth-3;N-=1)x=ee.from(l.node(N).copy(x));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...tm(h,l.node().type.name,l.node().attrs),...t},C=((i=a.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(S))||void 0;x=x.append(ee.from(a.createAndFill(null,C)||void 0));const E=l.before(l.depth-(w-1));n.replace(E,l.after(-b),new le(x,4-w,0));let k=-1;n.doc.nodesBetween(E,n.doc.content.size,(N,P)=>{if(k>-1)return!1;N.isTextblock&&N.content.size===0&&(k=P+1)}),k>-1&&n.setSelection(_e.near(n.doc.resolve(k))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,m={...tm(h,d.type.name,d.attrs),...t},g={...tm(h,l.node().type.name,l.node().attrs),...t};n.delete(l.pos,c.pos);const v=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!xc(n.doc,l.pos,2))return!1;if(s){const{selection:x,storedMarks:w}=r,{splittableMarks:b}=o.extensionManager,S=w||x.$to.parentOffset&&x.$from.marks();if(n.split(l.pos,2,v).scrollIntoView(),!S||!s)return!0;const C=S.filter(E=>b.includes(E.type.name));n.ensureMarks(C)}return!0},xx=(e,t)=>{const n=CE(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&aa(e.doc,n.pos)&&e.join(n.pos),!0},wx=(e,t)=>{const n=CE(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&aa(e.doc,r)&&e.join(r),!0},pte=(e,t,n,r={})=>({editor:s,tr:o,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=s.extensionManager,p=rn(e,i.schema),m=rn(t,i.schema),{selection:g,storedMarks:v}=i,{$from:x,$to:w}=g,b=x.blockRange(w),S=v||g.$to.parentOffset&&g.$from.marks();if(!b)return!1;const C=CE(E=>jA(E.type.name,d))(g);if(b.depth>=1&&C&&b.depth-C.depth<=1){if(C.node.type===p)return c.liftListItem(m);if(jA(C.node.type.name,d)&&p.validContent(C.node.content)&&a)return l().command(()=>(o.setNodeMarkup(C.pos,p),!0)).command(()=>xx(o,p)).command(()=>wx(o,p)).run()}return!n||!S||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>xx(o,p)).command(()=>wx(o,p)).run():l().command(()=>{const E=u().wrapInList(p,r),k=S.filter(N=>h.includes(N.type.name));return o.ensureMarks(k),E?!0:c.clearNodes()}).wrapInList(p,r).command(()=>xx(o,p)).command(()=>wx(o,p)).run()},mte=(e,t={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,i=ca(e,r.schema);return l1(r,i,t)?s.unsetMark(i,{extendEmptyMarkRange:o}):s.setMark(i,t)},gte=(e,t,n={})=>({state:r,commands:s})=>{const o=rn(e,r.schema),i=rn(t,r.schema),a=Ef(r,o,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(i,l):s.setNode(o,{...l,...n})},yte=(e,t={})=>({state:n,commands:r})=>{const s=rn(e,n.schema);return Ef(n,s,t)?r.lift(s):r.wrapIn(s,t)},vte=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(e))){if(t){const i=e.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=i.doc.resolve(o.from).marks();i.replaceWith(o.from,o.to,e.schema.text(o.text,l))}else i.delete(o.from,o.to)}return!0}}return!1},xte=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:s}=n;return r||t&&s.forEach(o=>{e.removeMark(o.$from.pos,o.$to.pos)}),!0},wte=(e,t={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:i=!1}=t,{selection:a}=n,l=ca(e,r.schema),{$from:c,empty:u,ranges:d}=a;if(!s)return!0;if(u&&i){let{from:h,to:p}=a;const m=(o=c.marks().find(v=>v.type===l))===null||o===void 0?void 0:o.attrs,g=bE(c,l,m);g&&(h=g.from,p=g.to),n.removeMark(h,p,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},bte=(e,t={})=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=uv(typeof e=="string"?e:e.name,r.schema);return a?(a==="node"&&(o=rn(e,r.schema)),a==="mark"&&(i=ca(e,r.schema)),s&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,p,m;n.selection.empty?r.doc.nodesBetween(c,u,(g,v)=>{o&&o===g.type&&(p=Math.max(v,c),m=Math.min(v+g.nodeSize,u),d=v,h=g)}):r.doc.nodesBetween(c,u,(g,v)=>{v<c&&o&&o===g.type&&(p=Math.max(v,c),m=Math.min(v+g.nodeSize,u),d=v,h=g),v>=c&&v<=u&&(o&&o===g.type&&n.setNodeMarkup(v,void 0,{...g.attrs,...t}),i&&g.marks.length&&g.marks.forEach(x=>{if(i===x.type){const w=Math.max(v,c),b=Math.min(v+g.nodeSize,u);n.addMark(w,b,i.create({...x.attrs,...t}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...t}),i&&h.marks.length&&h.marks.forEach(g=>{i===g.type&&n.addMark(p,m,i.create({...g.attrs,...t}))}))}),!0):!1},Ste=(e,t={})=>({state:n,dispatch:r})=>{const s=rn(e,n.schema);return MZ(s,t)(n,r)},Cte=(e,t={})=>({state:n,dispatch:r})=>{const s=rn(e,n.schema);return IZ(s,t)(n,r)};var Ete=Object.freeze({__proto__:null,blur:see,clearContent:oee,clearNodes:iee,command:aee,createParagraphNear:lee,cut:cee,deleteCurrentNode:uee,deleteNode:dee,deleteRange:fee,deleteSelection:hee,enter:pee,exitCode:mee,extendMarkRange:gee,first:yee,focus:xee,forEach:wee,insertContent:bee,insertContentAt:Eee,joinBackward:Nee,joinDown:_ee,joinForward:Pee,joinItemBackward:Aee,joinItemForward:Tee,joinTextblockBackward:Ree,joinTextblockForward:jee,joinUp:kee,keyboardShortcut:Mee,lift:Iee,liftEmptyBlock:Dee,liftListItem:$ee,newlineInCode:Lee,resetAttributes:Fee,scrollIntoView:Bee,selectAll:zee,selectNodeBackward:Uee,selectNodeForward:Hee,selectParentNode:Vee,selectTextblockEnd:Wee,selectTextblockStart:qee,setContent:Gee,setMark:ite,setMeta:ate,setNode:lte,setNodeSelection:cte,setTextSelection:ute,sinkListItem:dte,splitBlock:fte,splitListItem:hte,toggleList:pte,toggleMark:mte,toggleNode:gte,toggleWrap:yte,undoInputRule:vte,unsetAllMarks:xte,unsetMark:wte,updateAttributes:bte,wrapIn:Ste,wrapInList:Cte});const kte=Hn.create({name:"commands",addCommands(){return{...Ete}}}),_te=Hn.create({name:"drop",addProseMirrorPlugins(){return[new Sn({key:new Rr("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),Nte=Hn.create({name:"editable",addProseMirrorPlugins(){return[new Sn({key:new Rr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Pte=Hn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Sn({key:new Rr("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Ate=Hn.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:p}=d,m=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,g=m.parent.type.spec.isolating,v=d.pos-d.parentOffset,x=g&&m.parent.childCount===1?v===d.pos:Re.atStart(c).from===h;return!u||!p.type.isTextblock||p.textContent.length||!x||x&&d.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return SE()||a4()?o:s},addProseMirrorPlugins(){return[new Sn({key:new Rr("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(g=>g.getMeta("composition")))return;const r=e.some(g=>g.docChanged)&&!t.doc.eq(n.doc),s=e.some(g=>g.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:i,to:a}=t.selection,l=Re.atStart(t.doc).from,c=Re.atEnd(t.doc).to;if(o||!(i===l&&a===c)||!kE(n.doc))return;const h=n.tr,p=ov({state:n,transaction:h}),{commands:m}=new iv({editor:this.editor,state:p});if(m.clearNodes(),!!h.steps.length)return h}})]}}),Tte=Hn.create({name:"paste",addProseMirrorPlugins(){return[new Sn({key:new Rr("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),Rte=Hn.create({name:"tabindex",addProseMirrorPlugins(){return[new Sn({key:new Rr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class ka{get name(){return this.node.type.name}constructor(t,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!==null&&t!==void 0?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new ka(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new ka(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new ka(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,i=this.pos+r+(o?0:1),a=this.resolvedPos.doc.resolve(i);if(!s&&a.depth<=this.depth)return;const l=new ka(a,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),t.push(new ka(a,this.editor,s,s?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===t)if(Object.keys(n).length>0){const o=s.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(o[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(n);return this.children.forEach(i=>{r&&s.length>0||(i.node.type.name===t&&o.every(l=>n[l]===i.node.attrs[l])&&s.push(i),!(r&&s.length>0)&&(s=s.concat(i.querySelectorAll(t,n,r))))}),s}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}}const jte=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Ote(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.setAttribute("data-tiptap-style",""),s.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(s),s}class Mte extends UZ{constructor(t={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:s})=>this.options.onDrop(n,r,s)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Ote(jte,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const r=e4(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(t){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(t).forEach(o=>{const i=typeof o=="string"?`${o}$`:o.key;r=n.filter(a=>!a.key.startsWith(i))}),n.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var t,n;const s=[...this.options.enableCoreExtensions?[Nte,ree.configure({blockSeparator:(n=(t=this.options.coreExtensionOptions)===null||t===void 0?void 0:t.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),kte,Pte,Ate,Rte,_te,Tte].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new ec(s,this)}createCommandManager(){this.commandManager=new iv({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var t;let n;try{n=a1(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=a1(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=o4(n,this.options.autofocus);this.view=new iZ(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)===null||t===void 0?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Zl.create({doc:n,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const n=this.state.apply(t),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:t,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const s=t.getMeta("focus"),o=t.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:t}),o&&this.emit("blur",{editor:this,event:o.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return c4(this.state,t)}isActive(t,n){const r=typeof t=="string"?t:null,s=typeof t=="string"?n:t;return rte(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return xE(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n=`

`,textSerializers:r={}}=t||{};return Qee(this.state.doc,{blockSeparator:n,textSerializers:{...n4(this.schema),...r}})}get isEmpty(){return kE(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const t=this.view.dom;t&&t.editor&&delete t.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}$node(t,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(t,n))||null}$nodes(t,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(t,n))||null}$pos(t){const n=this.state.doc.resolve(t);return new ka(n,this)}get $doc(){return this.$pos(0)}}function Uc(e){return new lv({find:e.find,handler:({state:t,range:n,match:r})=>{const s=Ie(e.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=t,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),u=c+i.length;if(EE(n.from,n.to,t.doc).filter(p=>p.mark.type.excluded.find(g=>g===e.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+l,c);const h=n.from+l+i.length;o.addMark(n.from+l,h,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}function Ite(e){return new lv({find:e.find,handler:({state:t,range:n,match:r})=>{const s=Ie(e.getAttributes,void 0,r)||{},{tr:o}=t,i=n.from;let a=n.to;const l=e.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=i+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,i+r[0].length-1),o.replaceWith(u,a,l)}else if(r[0]){const c=e.type.isInline?i:i-1;o.insert(c,e.type.create(s)).delete(o.mapping.map(i),o.mapping.map(a))}o.scrollIntoView()}})}function c1(e){return new lv({find:e.find,handler:({state:t,range:n,match:r})=>{const s=t.doc.resolve(n.from),o=Ie(e.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,o)}})}function kf(e){return new lv({find:e.find,handler:({state:t,range:n,match:r,chain:s})=>{const o=Ie(e.getAttributes,void 0,r)||{},i=t.tr.delete(n.from,n.to),l=i.doc.resolve(n.from).blockRange(),c=l&&iE(l,e.type,o);if(!c)return null;if(i.wrap(l,c),e.keepMarks&&e.editor){const{selection:d,storedMarks:h}=t,{splittableMarks:p}=e.editor.extensionManager,m=h||d.$to.parentOffset&&d.$from.marks();if(m){const g=m.filter(v=>p.includes(v.type.name));i.ensureMarks(g)}}if(e.keepAttributes){const d=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,o).run()}const u=i.doc.resolve(n.from-1).nodeBefore;u&&u.type===e.type&&aa(i.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,u))&&i.join(n.from-1)}})}let Ms=class u1{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ie(pe(this,"addOptions",{name:this.name}))),this.storage=Ie(pe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new u1(t)}configure(t={}){const n=this.extend({...this.config,addOptions:()=>cv(this.options,t)});return n.name=this.name,n.parent=this.parent,n}extend(t={}){const n=new u1(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Ie(pe(n,"addOptions",{name:n.name})),n.storage=Ie(pe(n,"addStorage",{name:n.name,options:n.options})),n}};function il(e){return new XZ({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:s})=>{const o=Ie(e.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:i}=t,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if(EE(n.from,n.to,t.doc).filter(m=>m.mark.type.excluded.find(v=>v===e.type&&v!==m.mark.type)).filter(m=>m.to>d).length)return null;h<n.to&&i.delete(h,n.to),d>n.from&&i.delete(n.from+u,d),c=n.from+u+a.length,i.addMark(n.from+u,c,e.type.create(o||{})),i.removeStoredMark(e.type)}}})}function Dte(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u4={exports:{}},bx={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MA;function $te(){if(MA)return bx;MA=1;var e=M;function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,o=e.useLayoutEffect,i=e.useDebugValue;function a(d,h){var p=h(),m=r({inst:{value:p,getSnapshot:h}}),g=m[0].inst,v=m[1];return o(function(){g.value=p,g.getSnapshot=h,l(g)&&v({inst:g})},[d,p,h]),s(function(){return l(g)&&v({inst:g}),d(function(){l(g)&&v({inst:g})})},[d]),i(p),p}function l(d){var h=d.getSnapshot;d=d.value;try{var p=h();return!n(d,p)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return bx.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,bx}u4.exports=$te();var _E=u4.exports;const Lte=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},Fte=({contentComponent:e})=>{const t=_E.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return M.createElement(M.Fragment,null,Object.values(t))};function Bte(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:US.createPortal(r.reactElement,r.element,n)},e.forEach(s=>s())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(s=>s())}}}class zte extends M.Component{constructor(t){var n;super(t),this.editorContentRef=M.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=t.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const n=this.editorContentRef.current;n.append(...t.options.element.childNodes),t.setOptions({element:n}),t.contentComponent=Bte(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const t=this.props.editor;if(!t||(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!t.options.element.firstChild))return;const n=document.createElement("div");n.append(...t.options.element.childNodes),t.setOptions({element:n})}render(){const{editor:t,innerRef:n,...r}=this.props;return M.createElement(M.Fragment,null,M.createElement("div",{ref:Lte(n,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&M.createElement(Fte,{contentComponent:t.contentComponent}))}}const Ute=y.forwardRef((e,t)=>{const n=M.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return M.createElement(zte,{key:n,innerRef:t,...e})}),Hte=M.memo(Ute);var Vte=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(s of t.entries())if(!n.has(s[0]))return!1;for(s of t.entries())if(!e(s[1],n.get(s[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(s of t.entries())if(!n.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(t[s]!==n[s])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[s]))return!1;for(s=r;s--!==0;){var i=o[s];if(!(i==="_owner"&&t.$$typeof)&&!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n},Wte=Dte(Vte),d4={exports:{}},Sx={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IA;function qte(){if(IA)return Sx;IA=1;var e=M,t=_E;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,o=e.useRef,i=e.useEffect,a=e.useMemo,l=e.useDebugValue;return Sx.useSyncExternalStoreWithSelector=function(c,u,d,h,p){var m=o(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=a(function(){function x(E){if(!w){if(w=!0,b=E,E=h(E),p!==void 0&&g.hasValue){var k=g.value;if(p(k,E))return S=k}return S=E}if(k=S,r(b,E))return k;var N=h(E);return p!==void 0&&p(k,N)?k:(b=E,S=N)}var w=!1,b,S,C=d===void 0?null:d;return[function(){return x(u())},C===null?void 0:function(){return x(C())}]},[u,d,h,p]);var v=s(c,m[0],m[1]);return i(function(){g.hasValue=!0,g.value=v},[v]),l(v),v},Sx}d4.exports=qte();var Gte=d4.exports;const Kte=typeof window<"u"?y.useLayoutEffect:y.useEffect;class Jte{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function Yte(e){var t;const[n]=y.useState(()=>new Jte(e.editor)),r=Gte.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!==null&&t!==void 0?t:Wte);return Kte(()=>n.watch(e.editor),[e.editor,n]),y.useDebugValue(r),r}const Xte=!1,d1=typeof window>"u",Qte=d1||!!(typeof window<"u"&&window.next);class NE{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return d1||Qte?null:this.createEditor();if(this.options.current.immediatelyRender&&d1&&Xte)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(s,...r)},onBlur:(...r)=>{var s,o;return(o=(s=this.options.current).onBlur)===null||o===void 0?void 0:o.call(s,...r)},onCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onCreate)===null||o===void 0?void 0:o.call(s,...r)},onDestroy:(...r)=>{var s,o;return(o=(s=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(s,...r)},onFocus:(...r)=>{var s,o;return(o=(s=this.options.current).onFocus)===null||o===void 0?void 0:o.call(s,...r)},onSelectionUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(s,...r)},onTransaction:(...r)=>{var s,o;return(o=(s=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(s,...r)},onUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(s,...r)},onContentError:(...r)=>{var s,o;return(o=(s=this.options.current).onContentError)===null||o===void 0?void 0:o.call(s,...r)},onDrop:(...r)=>{var s,o;return(o=(s=this.options.current).onDrop)===null||o===void 0?void 0:o.call(s,...r)},onPaste:(...r)=>{var s,o;return(o=(s=this.options.current).onPaste)===null||o===void 0?void 0:o.call(s,...r)}};return new Mte(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((s,o)=>{var i;return s===((i=n.extensions)===null||i===void 0?void 0:i[o])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?NE.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,s)=>r===t[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}}function Zte(e={},t=[]){const n=y.useRef(e);n.current=e;const[r]=y.useState(()=>new NE(n)),s=_E.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return y.useDebugValue(s),y.useEffect(r.onRender(t)),Yte({editor:s,selector:({transactionNumber:o})=>e.shouldRerenderOnTransaction===!1?null:e.immediatelyRender&&o===0?0:o+1}),s}const ene=y.createContext({editor:null});ene.Consumer;const tne=y.createContext({onDragStart:void 0}),nne=()=>y.useContext(tne);M.forwardRef((e,t)=>{const{onDragStart:n}=nne(),r=e.as||"div";return M.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});const rne=/^\s*>\s$/,sne=Ms.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[kf({find:rne,type:this.type})]}}),one=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,ine=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,ane=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,lne=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,cne=Lo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Uc({find:one,type:this.type}),Uc({find:ane,type:this.type})]},addPasteRules(){return[il({find:ine,type:this.type}),il({find:lne,type:this.type})]}}),une="listItem",DA="textStyle",$A=/^\s*([-+*])\s$/,dne=Ms.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(une,this.editor.getAttributes(DA)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=kf({find:$A,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=kf({find:$A,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(DA),editor:this.editor})),[e]}}),fne=/(^|[^`])`([^`]+)`(?!`)/,hne=/(^|[^`])`([^`]+)`(?!`)/g,pne=Lo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Uc({find:fne,type:this.type})]},addPasteRules(){return[il({find:hne,type:this.type})]}}),mne=/^```([a-z]+)?[\s\n]$/,gne=/^~~~([a-z]+)?[\s\n]$/,yne=Ms.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,o=[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",wn(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!o||!i?!1:e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?e.commands.command(({tr:c})=>(c.setSelection(Re.near(r.resolve(a))),!0)):e.commands.exitCode()}}},addInputRules(){return[c1({find:mne,type:this.type,getAttributes:e=>({language:e[1]})}),c1({find:gne,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Sn({key:new Rr("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s==null?void 0:s.mode;if(!n||!o)return!1;const{tr:i,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:o},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(_e.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),e.dispatch(i),!0}}})]}}),vne=Ms.create({name:"doc",topNode:!0,content:"block+"});function xne(e={}){return new Sn({view(t){return new wne(t,e)}})}class wne{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=i=>{this[s](i)};return t.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r;if(n){let a=t.nodeBefore,l=t.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,i;if(!s||s==document.body&&getComputedStyle(s).position=="static")o=-pageXOffset,i=-pageYOffset;else{let a=s.getBoundingClientRect();o=a.left-s.scrollLeft,i=a.top-s.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-i+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,n,t):s;if(n&&!o){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=oL(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}const bne=Hn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[xne(this.options)]}});class St extends Re{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return St.valid(r)?new St(r):Re.near(r)}content(){return le.empty}eq(t){return t instanceof St&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new St(t.resolve(n.pos))}getBookmark(){return new PE(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Sne(t)||!Cne(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(t.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&St.valid(t))return t;let s=t.pos,o=null;for(let i=t.depth;;i--){let a=t.node(i);if(n>0?t.indexAfter(i)<a.childCount:t.index(i)>0){o=a.child(n>0?t.indexAfter(i):t.index(i)-1);break}else if(i==0)return null;s+=n;let l=t.doc.resolve(s);if(St.valid(l))return l}for(;;){let i=n>0?o.firstChild:o.lastChild;if(!i){if(o.isAtom&&!o.isText&&!we.isSelectable(o)){t=t.doc.resolve(s+o.nodeSize*n),r=!1;continue e}break}o=i,s+=n;let a=t.doc.resolve(s);if(St.valid(a))return a}return null}}}St.prototype.visible=!1;St.findFrom=St.findGapCursorFrom;Re.jsonID("gapcursor",St);class PE{constructor(t){this.pos=t}map(t){return new PE(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return St.valid(n)?new St(n):Re.near(n)}}function Sne(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Cne(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Ene(){return new Sn({props:{decorations:Pne,createSelectionBetween(e,t,n){return t.pos==n.pos&&St.valid(n)?new St(n):null},handleClick:_ne,handleKeyDown:kne,handleDOMEvents:{beforeinput:Nne}}})}const kne=qL({ArrowLeft:cp("horiz",-1),ArrowRight:cp("horiz",1),ArrowUp:cp("vert",-1),ArrowDown:cp("vert",1)});function cp(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,s,o){let i=r.selection,a=t>0?i.$to:i.$from,l=i.empty;if(i instanceof _e){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let c=St.findGapCursorFrom(a,t,l);return c?(s&&s(r.tr.setSelection(new St(c))),!0):!1}}function _ne(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!St.valid(r))return!1;let s=e.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&we.isSelectable(e.state.doc.nodeAt(s.inside))?!1:(e.dispatch(e.state.tr.setSelection(new St(r))),!0)}function Nne(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof St))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=ee.empty;for(let i=r.length-1;i>=0;i--)s=ee.from(r[i].createAndFill(null,s));let o=e.state.tr.replace(n.pos,n.pos,new le(s,0,0));return o.setSelection(_e.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function Pne(e){if(!(e.selection instanceof St))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Ft.create(e.doc,[Jr.widget(e.selection.head,t,{key:"gapcursor"})])}const Ane=Hn.create({name:"gapCursor",addProseMirrorPlugins(){return[Ene()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Ie(pe(e,"allowGapCursor",n)))!==null&&t!==void 0?t:null}}}),Tne=Ms.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",wn(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=o||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&i){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),f4=Ms.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,wn(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>c1({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var mg=200,tn=function(){};tn.prototype.append=function(t){return t.length?(t=tn.from(t),!this.length&&t||t.length<mg&&this.leafAppend(t)||this.length<mg&&t.leafPrepend(this)||this.appendInner(t)):this};tn.prototype.prepend=function(t){return t.length?tn.from(t).append(this):this};tn.prototype.appendInner=function(t){return new Rne(this,t)};tn.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?tn.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};tn.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};tn.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};tn.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,i){return s.push(t(o,i))},n,r),s};tn.from=function(t){return t instanceof tn?t:t&&t.length?new h4(t):tn.empty};var h4=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new t(this.values.slice(s,o))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,o,i,a){for(var l=o;l<i;l++)if(s(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(s,o,i,a){for(var l=o-1;l>=i;l--)if(s(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=mg)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=mg)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(tn);tn.empty=new h4([]);var Rne=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,o,i){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(o,a),i)===!1||o>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,o)-a,i+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,o,i){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(o,a)-a,i+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(s,a),o,i)===!1)return!1},t.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(tn);const jne=500;class ys{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;n&&(s=this.remapping(r,this.items.length),o=s.maps.length);let i=t.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){s||(s=this.remapping(r,h+1),o=s.maps.length),o--,u.push(d);return}if(s){u.push(new Hs(d.map));let p=d.step.map(s.slice(o)),m;p&&i.maybeStep(p).doc&&(m=i.mapping.maps[i.mapping.maps.length-1],c.push(new Hs(m,void 0,void 0,c.length+u.length))),o--,m&&s.appendMap(m,o)}else i.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(o)):d.selection,l=new ys(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(t,n,r,s){let o=[],i=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let d=t.steps[u].invert(t.docs[u]),h=new Hs(t.mapping.maps[u],d,n),p;(p=l&&l.merge(h))&&(h=p,u?o.pop():a=a.slice(0,a.length-1)),o.push(h),n&&(i++,n=void 0),s||(l=h)}let c=i-r.depth;return c>Mne&&(a=One(a,c),i-=c),new ys(a.append(o),i)}remapping(t,n){let r=new vc;return this.items.forEach((s,o)=>{let i=s.mirrorOffset!=null&&o-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,i)},t,n),r}addMaps(t){return this.eventCount==0?this:new ys(this.items.append(t.map(n=>new Hs(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),o=t.mapping,i=t.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},s);let l=n;this.items.forEach(h=>{let p=o.getMirror(--l);if(p==null)return;i=Math.min(i,p);let m=o.maps[p];if(h.step){let g=t.steps[p].invert(t.docs[p]),v=h.selection&&h.selection.map(o.slice(l+1,p));v&&a++,r.push(new Hs(m,g,v))}else r.push(new Hs(m))},s);let c=[];for(let h=n;h<i;h++)c.push(new Hs(o.maps[h]));let u=this.items.slice(0,s).append(c).append(r),d=new ys(u,a);return d.emptyItemCount()>jne&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,s=[],o=0;return this.items.forEach((i,a)=>{if(a>=t)s.push(i),i.selection&&o++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=i.selection&&i.selection.map(n.slice(r));u&&o++;let d=new Hs(c.invert(),l,u),h,p=s.length-1;(h=s.length&&s[p].merge(d))?s[p]=h:s.push(d)}}else i.map&&r--},this.items.length,0),new ys(tn.from(s.reverse()),o)}}ys.empty=new ys(tn.empty,0);function One(e,t){let n;return e.forEach((r,s)=>{if(r.selection&&t--==0)return n=s,!1}),e.slice(n)}class Hs{constructor(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Hs(n.getMap().invert(),n,this.selection)}}}class li{constructor(t,n,r,s,o){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const Mne=20;function Ine(e,t,n,r){let s=n.getMeta(Wa),o;if(s)return s.historyState;n.getMeta(Lne)&&(e=new li(e.done,e.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(i&&i.getMeta(Wa))return i.getMeta(Wa).redo?new li(e.done.addTransform(n,void 0,r,nm(t)),e.undone,LA(n.mapping.maps),e.prevTime,e.prevComposition):new li(e.done,e.undone.addTransform(n,void 0,r,nm(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=e.prevTime==0||!i&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Dne(n,e.prevRanges)),c=i?Cx(e.prevRanges,n.mapping):LA(n.mapping.maps);return new li(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,nm(t)),ys.empty,c,n.time,a??e.prevComposition)}else return(o=n.getMeta("rebased"))?new li(e.done.rebased(n,o),e.undone.rebased(n,o),Cx(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new li(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Cx(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function Dne(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<t.length;o+=2)r<=t[o+1]&&s>=t[o]&&(n=!0)}),n}function LA(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,s,o,i)=>t.push(o,i));return t}function Cx(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let s=t.map(e[r],1),o=t.map(e[r+1],-1);s<=o&&n.push(s,o)}return n}function $ne(e,t,n){let r=nm(t),s=Wa.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,r);if(!o)return null;let i=o.selection.resolve(o.transform.doc),a=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),s,r),l=new li(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(i).setMeta(Wa,{redo:n,historyState:l})}let Ex=!1,FA=null;function nm(e){let t=e.plugins;if(FA!=t){Ex=!1,FA=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Ex=!0;break}}return Ex}const Wa=new Rr("history"),Lne=new Rr("closeHistory");function Fne(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Sn({key:Wa,state:{init(){return new li(ys.empty,ys.empty,null,0,-1)},apply(t,n,r){return Ine(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,s=r=="historyUndo"?m4:r=="historyRedo"?g4:null;return s?(n.preventDefault(),s(t.state,t.dispatch)):!1}}}})}function p4(e,t){return(n,r)=>{let s=Wa.getState(n);if(!s||(e?s.undone:s.done).eventCount==0)return!1;if(r){let o=$ne(s,n,e);o&&r(t?o.scrollIntoView():o)}return!0}}const m4=p4(!1,!0),g4=p4(!0,!0),Bne=Hn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>m4(e,t),redo:()=>({state:e,dispatch:t})=>g4(e,t)}},addProseMirrorPlugins(){return[Fne(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),zne=Ms.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",wn(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{const{selection:n}=t,{$from:r,$to:s}=n,o=e();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):ste(n)?o.insertContentAt(s.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:i,dispatch:a})=>{var l;if(a){const{$to:c}=i.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?i.setSelection(_e.create(i.doc,c.pos+1)):c.nodeAfter.isBlock?i.setSelection(we.create(i.doc,c.pos)):i.setSelection(_e.create(i.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(i.insert(u,d),i.setSelection(_e.create(i.doc,u+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Ite({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Une=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Hne=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Vne=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Wne=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,qne=Lo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Uc({find:Une,type:this.type}),Uc({find:Vne,type:this.type})]},addPasteRules(){return[il({find:Hne,type:this.type}),il({find:Wne,type:this.type})]}}),Gne=Ms.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",wn(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Kne="listItem",BA="textStyle",zA=/^(\d+)\.\s$/,Jne=Ms.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",wn(this.options.HTMLAttributes,n),0]:["ol",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Kne,this.editor.getAttributes(BA)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=kf({find:zA,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=kf({find:zA,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(BA)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),y4=Ms.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Yne=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Xne=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Qne=Lo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Uc({find:Yne,type:this.type})]},addPasteRules(){return[il({find:Xne,type:this.type})]}}),Zne=Ms.create({name:"text",group:"inline"}),ere=Hn.create({name:"starterKit",addExtensions(){var e,t,n,r,s,o,i,a,l,c,u,d,h,p,m,g,v,x;const w=[];return this.options.bold!==!1&&w.push(cne.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.blockquote!==!1&&w.push(sne.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bulletList!==!1&&w.push(dne.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&w.push(pne.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&w.push(yne.configure((s=this.options)===null||s===void 0?void 0:s.codeBlock)),this.options.document!==!1&&w.push(vne.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&w.push(bne.configure((i=this.options)===null||i===void 0?void 0:i.dropcursor)),this.options.gapcursor!==!1&&w.push(Ane.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&w.push(Tne.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&w.push(f4.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&w.push(Bne.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&w.push(zne.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&w.push(qne.configure((h=this.options)===null||h===void 0?void 0:h.italic)),this.options.listItem!==!1&&w.push(Gne.configure((p=this.options)===null||p===void 0?void 0:p.listItem)),this.options.orderedList!==!1&&w.push(Jne.configure((m=this.options)===null||m===void 0?void 0:m.orderedList)),this.options.paragraph!==!1&&w.push(y4.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&w.push(Qne.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&w.push(Zne.configure((x=this.options)===null||x===void 0?void 0:x.text)),w}}),tre="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",nre="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Hc=(e,t)=>{for(const n in t)e[n]=t[n];return e},f1="numeric",h1="ascii",p1="alpha",Rd="asciinumeric",ud="alphanumeric",m1="domain",v4="emoji",rre="scheme",sre="slashscheme",kx="whitespace";function ore(e,t){return e in t||(t[e]=[]),t[e]}function Oa(e,t,n){t[f1]&&(t[Rd]=!0,t[ud]=!0),t[h1]&&(t[Rd]=!0,t[p1]=!0),t[Rd]&&(t[ud]=!0),t[p1]&&(t[ud]=!0),t[ud]&&(t[m1]=!0),t[v4]&&(t[m1]=!0);for(const r in t){const s=ore(r,n);s.indexOf(e)<0&&s.push(e)}}function ire(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function tr(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}tr.groups={};tr.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const s=t.jr[r][0],o=t.jr[r][1];if(o&&s.test(e))return o}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let s=0;s<e.length;s++)this.tt(e[s],t,n,r)},tr(e,t,n,r){r=r||tr.groups;let s;return t&&t.j?s=t:(s=new tr(t),n&&r&&Oa(t,n,r)),this.jr.push([e,s]),s},ts(e,t,n,r){let s=this;const o=e.length;if(!o)return s;for(let i=0;i<o-1;i++)s=s.tt(e[i]);return s.tt(e[o-1],t,n,r)},tt(e,t,n,r){r=r||tr.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const o=t;let i,a=s.go(e);if(a?(i=new tr,Hc(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new tr,o){if(r)if(i.t&&typeof i.t=="string"){const l=Hc(ire(i.t,r),n);Oa(o,l,r)}else n&&Oa(o,n,r);i.t=o}return s.j[e]=i,i}};const Oe=(e,t,n,r,s)=>e.ta(t,n,r,s),wt=(e,t,n,r,s)=>e.tr(t,n,r,s),UA=(e,t,n,r,s)=>e.ts(t,n,r,s),te=(e,t,n,r,s)=>e.tt(t,n,r,s),wo="WORD",g1="UWORD",x4="ASCIINUMERICAL",w4="ALPHANUMERICAL",_f="LOCALHOST",y1="TLD",v1="UTLD",rm="SCHEME",Fl="SLASH_SCHEME",AE="NUM",x1="WS",TE="NL",jd="OPENBRACE",Od="CLOSEBRACE",gg="OPENBRACKET",yg="CLOSEBRACKET",vg="OPENPAREN",xg="CLOSEPAREN",wg="OPENANGLEBRACKET",bg="CLOSEANGLEBRACKET",Sg="FULLWIDTHLEFTPAREN",Cg="FULLWIDTHRIGHTPAREN",Eg="LEFTCORNERBRACKET",kg="RIGHTCORNERBRACKET",_g="LEFTWHITECORNERBRACKET",Ng="RIGHTWHITECORNERBRACKET",Pg="FULLWIDTHLESSTHAN",Ag="FULLWIDTHGREATERTHAN",Tg="AMPERSAND",RE="APOSTROPHE",Rg="ASTERISK",ci="AT",jg="BACKSLASH",Og="BACKTICK",Mg="CARET",yi="COLON",jE="COMMA",Ig="DOLLAR",Vs="DOT",Dg="EQUALS",OE="EXCLAMATION",Fr="HYPHEN",Md="PERCENT",$g="PIPE",Lg="PLUS",Fg="POUND",Id="QUERY",ME="QUOTE",b4="FULLWIDTHMIDDLEDOT",IE="SEMI",Ws="SLASH",Dd="TILDE",Bg="UNDERSCORE",S4="EMOJI",zg="SYM";var C4=Object.freeze({__proto__:null,WORD:wo,UWORD:g1,ASCIINUMERICAL:x4,ALPHANUMERICAL:w4,LOCALHOST:_f,TLD:y1,UTLD:v1,SCHEME:rm,SLASH_SCHEME:Fl,NUM:AE,WS:x1,NL:TE,OPENBRACE:jd,CLOSEBRACE:Od,OPENBRACKET:gg,CLOSEBRACKET:yg,OPENPAREN:vg,CLOSEPAREN:xg,OPENANGLEBRACKET:wg,CLOSEANGLEBRACKET:bg,FULLWIDTHLEFTPAREN:Sg,FULLWIDTHRIGHTPAREN:Cg,LEFTCORNERBRACKET:Eg,RIGHTCORNERBRACKET:kg,LEFTWHITECORNERBRACKET:_g,RIGHTWHITECORNERBRACKET:Ng,FULLWIDTHLESSTHAN:Pg,FULLWIDTHGREATERTHAN:Ag,AMPERSAND:Tg,APOSTROPHE:RE,ASTERISK:Rg,AT:ci,BACKSLASH:jg,BACKTICK:Og,CARET:Mg,COLON:yi,COMMA:jE,DOLLAR:Ig,DOT:Vs,EQUALS:Dg,EXCLAMATION:OE,HYPHEN:Fr,PERCENT:Md,PIPE:$g,PLUS:Lg,POUND:Fg,QUERY:Id,QUOTE:ME,FULLWIDTHMIDDLEDOT:b4,SEMI:IE,SLASH:Ws,TILDE:Dd,UNDERSCORE:Bg,EMOJI:S4,SYM:zg});const mo=/[a-z]/,Lu=new RegExp("\\p{L}","u"),_x=new RegExp("\\p{Emoji}","u"),go=/\d/,Nx=/\s/,HA="\r",Px=`
`,are="",lre="",Ax="";let up=null,dp=null;function cre(e=[]){const t={};tr.groups=t;const n=new tr;up==null&&(up=VA(tre)),dp==null&&(dp=VA(nre)),te(n,"'",RE),te(n,"{",jd),te(n,"}",Od),te(n,"[",gg),te(n,"]",yg),te(n,"(",vg),te(n,")",xg),te(n,"<",wg),te(n,">",bg),te(n,"",Sg),te(n,"",Cg),te(n,"",Eg),te(n,"",kg),te(n,"",_g),te(n,"",Ng),te(n,"",Pg),te(n,"",Ag),te(n,"&",Tg),te(n,"*",Rg),te(n,"@",ci),te(n,"`",Og),te(n,"^",Mg),te(n,":",yi),te(n,",",jE),te(n,"$",Ig),te(n,".",Vs),te(n,"=",Dg),te(n,"!",OE),te(n,"-",Fr),te(n,"%",Md),te(n,"|",$g),te(n,"+",Lg),te(n,"#",Fg),te(n,"?",Id),te(n,'"',ME),te(n,"/",Ws),te(n,";",IE),te(n,"~",Dd),te(n,"_",Bg),te(n,"\\",jg),te(n,"",b4);const r=wt(n,go,AE,{[f1]:!0});wt(r,go,r);const s=wt(r,mo,x4,{[Rd]:!0}),o=wt(r,Lu,w4,{[ud]:!0}),i=wt(n,mo,wo,{[h1]:!0});wt(i,go,s),wt(i,mo,i),wt(s,go,s),wt(s,mo,s);const a=wt(n,Lu,g1,{[p1]:!0});wt(a,mo),wt(a,go,o),wt(a,Lu,a),wt(o,go,o),wt(o,mo),wt(o,Lu,o);const l=te(n,Px,TE,{[kx]:!0}),c=te(n,HA,x1,{[kx]:!0}),u=wt(n,Nx,x1,{[kx]:!0});te(n,Ax,u),te(c,Px,l),te(c,Ax,u),wt(c,Nx,u),te(u,HA),te(u,Px),wt(u,Nx,u),te(u,Ax,u);const d=wt(n,_x,S4,{[v4]:!0});te(d,"#"),wt(d,_x,d),te(d,are,d);const h=te(d,lre);te(h,"#"),wt(h,_x,d);const p=[[mo,i],[go,s]],m=[[mo,null],[Lu,a],[go,o]];for(let g=0;g<up.length;g++)Qo(n,up[g],y1,wo,p);for(let g=0;g<dp.length;g++)Qo(n,dp[g],v1,g1,m);Oa(y1,{tld:!0,ascii:!0},t),Oa(v1,{utld:!0,alpha:!0},t),Qo(n,"file",rm,wo,p),Qo(n,"mailto",rm,wo,p),Qo(n,"http",Fl,wo,p),Qo(n,"https",Fl,wo,p),Qo(n,"ftp",Fl,wo,p),Qo(n,"ftps",Fl,wo,p),Oa(rm,{scheme:!0,ascii:!0},t),Oa(Fl,{slashscheme:!0,ascii:!0},t),e=e.sort((g,v)=>g[0]>v[0]?1:-1);for(let g=0;g<e.length;g++){const v=e[g][0],w=e[g][1]?{[rre]:!0}:{[sre]:!0};v.indexOf("-")>=0?w[m1]=!0:mo.test(v)?go.test(v)?w[Rd]=!0:w[h1]=!0:w[f1]=!0,UA(n,v,v,w)}return UA(n,"localhost",_f,{ascii:!0}),n.jd=new tr(zg),{start:n,tokens:Hc({groups:t},C4)}}function E4(e,t){const n=ure(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let o=0,i=0;for(;i<r;){let a=e,l=null,c=0,u=null,d=-1,h=-1;for(;i<r&&(l=a.go(n[i]));)a=l,a.accepts()?(d=0,h=0,u=a):d>=0&&(d+=n[i].length,h++),c+=n[i].length,o+=n[i].length,i++;o-=d,i-=h,c-=d,s.push({t:u.t,v:t.slice(o-c,o),s:o-c,e:o})}return s}function ure(e){const t=[],n=e.length;let r=0;for(;r<n;){let s=e.charCodeAt(r),o,i=s<55296||s>56319||r+1===n||(o=e.charCodeAt(r+1))<56320||o>57343?e[r]:e.slice(r,r+2);t.push(i),r+=i.length}return t}function Qo(e,t,n,r,s){let o;const i=t.length;for(let a=0;a<i-1;a++){const l=t[a];e.j[l]?o=e.j[l]:(o=new tr(r),o.jr=s.slice(),e.j[l]=o),e=o}return o=new tr(n),o.jr=s.slice(),e.j[t[i-1]]=o,o}function VA(e){const t=[],n=[];let r=0,s="0123456789";for(;r<e.length;){let o=0;for(;s.indexOf(e[r+o])>=0;)o++;if(o>0){t.push(n.join(""));for(let i=parseInt(e.substring(r,r+o),10);i>0;i--)n.pop();r+=o}else n.push(e[r]),r++}return t}const Nf={defaultProtocol:"http",events:null,format:WA,formatHref:WA,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function DE(e,t=null){let n=Hc({},Nf);e&&(n=Hc(n,e instanceof DE?e.o:e));const r=n.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=s}DE.prototype={o:Nf,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Nf[e],typeof s=="function"&&r&&(s=s(t,n))):typeof s=="function"&&r&&(s=s(t,n.t,n)),s)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function WA(e){return e}function k4(e,t){this.t="token",this.v=e,this.tk=t}k4.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Nf.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),s=e.get("tagName",n,t),o=this.toFormattedString(e),i={},a=e.get("className",n,t),l=e.get("target",n,t),c=e.get("rel",n,t),u=e.getObj("attributes",n,t),d=e.getObj("events",n,t);return i.href=r,a&&(i.class=a),l&&(i.target=l),c&&(i.rel=c),u&&Hc(i,u),{tagName:s,attributes:i,content:o,eventListeners:d}}};function dv(e,t){class n extends k4{constructor(s,o){super(s,o),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const qA=dv("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),GA=dv("text"),dre=dv("nl"),fp=dv("url",{isLink:!0,toHref(e=Nf.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==_f&&e[1].t===yi}}),$r=e=>new tr(e);function fre({groups:e}){const t=e.domain.concat([Tg,Rg,ci,jg,Og,Mg,Ig,Dg,Fr,AE,Md,$g,Lg,Fg,Ws,zg,Dd,Bg]),n=[yi,jE,Vs,OE,Md,Id,ME,IE,wg,bg,jd,Od,yg,gg,vg,xg,Sg,Cg,Eg,kg,_g,Ng,Pg,Ag],r=[Tg,RE,Rg,jg,Og,Mg,Ig,Dg,Fr,jd,Od,Md,$g,Lg,Fg,Id,Ws,zg,Dd,Bg],s=$r(),o=te(s,Dd);Oe(o,r,o),Oe(o,e.domain,o);const i=$r(),a=$r(),l=$r();Oe(s,e.domain,i),Oe(s,e.scheme,a),Oe(s,e.slashscheme,l),Oe(i,r,o),Oe(i,e.domain,i);const c=te(i,ci);te(o,ci,c),te(a,ci,c),te(l,ci,c);const u=te(o,Vs);Oe(u,r,o),Oe(u,e.domain,o);const d=$r();Oe(c,e.domain,d),Oe(d,e.domain,d);const h=te(d,Vs);Oe(h,e.domain,d);const p=$r(qA);Oe(h,e.tld,p),Oe(h,e.utld,p),te(c,_f,p);const m=te(d,Fr);te(m,Fr,m),Oe(m,e.domain,d),Oe(p,e.domain,d),te(p,Vs,h),te(p,Fr,m);const g=te(p,yi);Oe(g,e.numeric,qA);const v=te(i,Fr),x=te(i,Vs);te(v,Fr,v),Oe(v,e.domain,i),Oe(x,r,o),Oe(x,e.domain,i);const w=$r(fp);Oe(x,e.tld,w),Oe(x,e.utld,w),Oe(w,e.domain,i),Oe(w,r,o),te(w,Vs,x),te(w,Fr,v),te(w,ci,c);const b=te(w,yi),S=$r(fp);Oe(b,e.numeric,S);const C=$r(fp),E=$r();Oe(C,t,C),Oe(C,n,E),Oe(E,t,C),Oe(E,n,E),te(w,Ws,C),te(S,Ws,C);const k=te(a,yi),N=te(l,yi),P=te(N,Ws),T=te(P,Ws);Oe(a,e.domain,i),te(a,Vs,x),te(a,Fr,v),Oe(l,e.domain,i),te(l,Vs,x),te(l,Fr,v),Oe(k,e.domain,C),te(k,Ws,C),te(k,Id,C),Oe(T,e.domain,C),Oe(T,t,C),te(T,Ws,C);const R=[[jd,Od],[gg,yg],[vg,xg],[wg,bg],[Sg,Cg],[Eg,kg],[_g,Ng],[Pg,Ag]];for(let L=0;L<R.length;L++){const[z,_]=R[L],D=te(C,z);te(E,z,D),te(D,_,C);const O=$r(fp);Oe(D,t,O);const F=$r();Oe(D,n),Oe(O,t,O),Oe(O,n,F),Oe(F,t,O),Oe(F,n,F),te(O,_,C),te(F,_,C)}return te(s,_f,w),te(s,TE,dre),{start:s,tokens:C4}}function hre(e,t,n){let r=n.length,s=0,o=[],i=[];for(;s<r;){let a=e,l=null,c=null,u=0,d=null,h=-1;for(;s<r&&!(l=a.go(n[s].t));)i.push(n[s++]);for(;s<r&&(c=l||a.go(n[s].t));)l=null,a=c,a.accepts()?(h=0,d=a):h>=0&&h++,s++,u++;if(h<0)s-=u,s<r&&(i.push(n[s]),s++);else{i.length>0&&(o.push(Tx(GA,t,i)),i=[]),s-=h,u-=h;const p=d.t,m=n.slice(s-u,s);o.push(Tx(p,t,m))}}return i.length>0&&o.push(Tx(GA,t,i)),o}function Tx(e,t,n){const r=n[0].s,s=n[n.length-1].e,o=t.slice(r,s);return new e(o,n)}const pre=typeof console<"u"&&console&&console.warn||(()=>{}),mre="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",at={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function gre(){return tr.groups={},at.scanner=null,at.parser=null,at.tokenQueue=[],at.pluginQueue=[],at.customSchemes=[],at.initialized=!1,at}function KA(e,t=!1){if(at.initialized&&pre(`linkifyjs: already initialized - will not register custom scheme "${e}" ${mre}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);at.customSchemes.push([e,t])}function yre(){at.scanner=cre(at.customSchemes);for(let e=0;e<at.tokenQueue.length;e++)at.tokenQueue[e][1]({scanner:at.scanner});at.parser=fre(at.scanner.tokens);for(let e=0;e<at.pluginQueue.length;e++)at.pluginQueue[e][1]({scanner:at.scanner,parser:at.parser});return at.initialized=!0,at}function $E(e){return at.initialized||yre(),hre(at.parser.start,e,E4(at.scanner.start,e))}$E.scan=E4;function _4(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new DE(n),s=$E(e),o=[];for(let i=0;i<s.length;i++){const a=s[i];a.isLink&&(!t||a.t===t)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}function vre(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function xre(e){return new Sn({key:new Rr("autolink"),appendTransaction:(t,n,r)=>{const s=t.some(c=>c.docChanged)&&!n.doc.eq(r.doc),o=t.some(c=>c.getMeta("preventAutolink"));if(!s||o)return;const{tr:i}=r,a=Kee(n.doc,[...t]);if(nte(a).forEach(({newRange:c})=>{const u=Yee(r.doc,c,p=>p.isTextblock);let d,h;if(u.length>1?(d=u[0],h=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(d=u[0],h=r.doc.textBetween(d.pos,c.to,void 0," ")),d&&h){const p=h.split(" ").filter(x=>x!=="");if(p.length<=0)return!1;const m=p[p.length-1],g=d.pos+h.lastIndexOf(m);if(!m)return!1;const v=$E(m).map(x=>x.toObject(e.defaultProtocol));if(!vre(v))return!1;v.filter(x=>x.isLink).map(x=>({...x,from:g+x.start+1,to:g+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>e.validate(x.value)).filter(x=>e.shouldAutoLink(x.value)).forEach(x=>{EE(x.from,x.to,r.doc).some(w=>w.mark.type===e.type)||i.addMark(x.from,x.to,e.type.create({href:x.href}))})}}),!!i.steps.length)return i}})}function wre(e){return new Sn({key:new Rr("handleClickLink"),props:{handleClick:(t,n,r)=>{var s,o;if(r.button!==0||!t.editable)return!1;let i=r.target;const a=[];for(;i.nodeName!=="DIV";)a.push(i),i=i.parentNode;if(!a.find(h=>h.nodeName==="A"))return!1;const l=c4(t.state,e.type.name),c=r.target,u=(s=c==null?void 0:c.href)!==null&&s!==void 0?s:l.href,d=(o=c==null?void 0:c.target)!==null&&o!==void 0?o:l.target;return c&&u?(window.open(u,d),!0):!1}}})}function bre(e){return new Sn({key:new Rr("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:s}=t,{selection:o}=s,{empty:i}=o;if(i)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=_4(a,{defaultProtocol:e.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:e.editor.commands.setMark(e.type,{href:l.href})}}})}const Sre=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function ma(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!e||e.replace(Sre,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Cre=Lo.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){KA(e);return}KA(e.scheme,e.optionalSlashes)})},onDestroy(){gre()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!ma(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!ma(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!ma(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",wn(this.options.HTMLAttributes,e),0]:["a",wn(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ma(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ma(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[il({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,s=_4(e).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:i=>!!ma(i,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(o=>t.push({text:o.value,data:{href:o.href},index:o.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)===null||t===void 0?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(xre({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!ma(s,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(wre({type:this.type})),this.options.linkOnPaste&&e.push(bre({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}});function Ere({editor:e}){const[t,n]=y.useState(!1),[r,s]=y.useState({top:0,left:0}),o=36;return y.useEffect(()=>{if(!e)return;const i=()=>{const a=window.getSelection();if(!a||a.rangeCount===0||!a.toString()){n(!1);return}const c=a.getRangeAt(0).getBoundingClientRect();if(!e.view.dom.contains(a.anchorNode)){n(!1);return}n(!0),s({top:c.top-50,left:c.left})};return document.addEventListener("selectionchange",i),()=>document.removeEventListener("selectionchange",i)},[e]),!e||!t?null:f.jsxs("div",{className:Le("fixed z-50 bg-white rounded-lg shadow-lg border border-gray-200 px-2 flex items-center gap-1","transition-opacity duration-200",t?"opacity-100":"opacity-0 pointer-events-none"),style:{top:`${r.top}px`,left:`${r.left+15}px`,transform:"translateY(-100%)",height:`${o}px`},children:[f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e.chain().focus().toggleBold().run(),className:e.isActive("bold")?"bg-gray-200":"",children:f.jsx(LW,{className:"w-4 h-4"})}),f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e.chain().focus().toggleItalic().run(),className:e.isActive("italic")?"bg-gray-200":"",children:f.jsx(s7,{className:"w-4 h-4"})}),f.jsx("div",{className:"w-px h-4 bg-gray-200"}),f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),className:e.isActive("heading",{level:1})?"bg-gray-200":"",children:f.jsx(e7,{className:"w-4 h-4"})}),f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),className:e.isActive("heading",{level:2})?"bg-gray-200":"",children:f.jsx(t7,{className:"w-4 h-4"})}),f.jsx("div",{className:"w-px h-4 bg-gray-200"}),f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e.chain().focus().toggleBulletList().run(),className:e.isActive("bulletList")?"bg-gray-200":"",children:f.jsx(lM,{className:"w-4 h-4"})}),f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e.chain().focus().toggleOrderedList().run(),className:e.isActive("orderedList")?"bg-gray-200":"",children:f.jsx(l7,{className:"w-4 h-4"})}),f.jsx("div",{className:"w-px h-4 bg-gray-200"}),f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e.chain().focus().toggleCodeBlock().run(),className:e.isActive("codeBlock")?"bg-gray-200":"",children:f.jsx(GW,{className:"w-4 h-4"})}),f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e.chain().focus().toggleBlockquote().run(),className:e.isActive("blockquote")?"bg-gray-200":"",children:f.jsx(h7,{className:"w-4 h-4"})}),f.jsx("div",{className:"w-px h-4 bg-gray-200"}),f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{const i=window.prompt("Enter URL:");i&&e.chain().focus().setLink({href:i}).run()},className:e.isActive("link")?"bg-gray-200":"",children:f.jsx(a7,{className:"w-4 h-4"})})]})}const kre={overview:"This section should provide a high-level overview of the product, including the vision statement, key objectives, market opportunity, and strategic alignment.",problem:"This section should clearly articulate the problem statement, current pain points, existing solutions, and why a new solution is needed.",solution:"This section should describe how the product solves the identified problems, including key differentiators, unique value proposition, and competitive advantages.",target_audience:"This section should define the target users and stakeholders, including user personas, market segments, demographics, and user behaviors/needs.",tech_stack:"This section should detail the technology choices, including frontend, backend, development tools, third-party services, and deployment infrastructure.",success_metrics:"This section should outline the key performance indicators (KPIs), success criteria, and measurement methods for evaluating product success."},_re={improve:{systemPrompt:`You are an expert editor focused on improving writing clarity, professionalism, and impact. 
    You are specifically editing a section of a Product Requirements Document (PRD).
    
    Your task is to enhance the given text while:
    - Maintaining the original meaning and key points
    - Improving clarity and readability
    - Using more professional and precise language
    - Fixing any grammatical or structural issues
    - Enhancing the overall flow
    - Ensuring the content aligns with PRD best practices
    - Using industry-standard terminology
    - Maintaining consistency with product management documentation standards
    
    IMPORTANT: Do not include section titles or headers in your response.
    Return only the improved content text without any section headings.
    
    Return only the improved text without any explanations or additional content.`,temperature:.7,maxTokens:1e3},expand:{systemPrompt:`You are an expert content developer specializing in expanding and enriching text. 
    You are specifically expanding a section of a Product Requirements Document (PRD).
    
    Your task is to elaborate on the given text by:
    - Adding relevant details and examples
    - Expanding on key concepts
    - Including supporting information
    - Maintaining a professional tone
    - Ensuring logical flow and structure
    - Adding relevant product management context
    - Including industry-standard metrics and benchmarks where applicable
    - Providing concrete examples and use cases
    
    Return only the expanded text without any explanations or additional content.`,temperature:.7,maxTokens:1500},shorten:{systemPrompt:`You are an expert editor specializing in concise writing.
    You are specifically condensing a section of a Product Requirements Document (PRD).
    
    Your task is to make the text more concise while:
    - Preserving all key information
    - Maintaining clarity and professionalism
    - Removing redundancy
    - Using precise language
    - Keeping the core message intact
    - Retaining critical product requirements
    - Preserving essential metrics and specifications
    - Maintaining traceability to business objectives
    
    Return only the shortened text without any explanations or additional content.`,temperature:.3,maxTokens:500}};async function Nre({text:e,action:t,context:n}){var r;try{const s=_re[t];if(!s)throw new Error("Invalid action type");const o=e.trim().split(/\s+/).length,i=t==="expand"?Math.round(o*1.4):t==="shorten"?Math.round(o*.6):0;let a=s.systemPrompt;if(n){if(a+=`

Context (for understanding only, do not include in output):
`,n.section){const d=kre[n.section];d?a+=`Current Section: ${n.section}
Section Purpose: ${d}
`:a+=`Current Section: ${n.section}
`}n.productContext&&(a+=`Product Context: ${n.productContext}
`),a+=`
REMINDER: Do not include any section titles or headers in your response. Return only the content text.
`}i>0&&(a+=`

Original word count: ${o}
Required word count: ${i}
`);const l=await pu.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:a},{role:"user",content:e}],temperature:s.temperature,max_tokens:s.maxTokens}),c=l.choices[0].message.content,u=l.usage;return await G.from("openai_logs").insert({user_id:(r=(await G.auth.getUser()).data.user)==null?void 0:r.id,request_type:`text_${t}`,model:"gpt-4o-mini",request_payload:{text:e,context:n},response_payload:c,input_tokens:u==null?void 0:u.prompt_tokens,output_tokens:u==null?void 0:u.completion_tokens}),{content:c||""}}catch(s){throw s instanceof wr?s:new wr("Failed to process text. Please try again.")}}function Pre({editor:e}){const[t,n]=y.useState(!1),[r,s]=y.useState({top:0,left:0}),[o,i]=y.useState(""),[a,l]=y.useState(!1),[c,u]=y.useState(null),d=36;y.useEffect(()=>{if(!e)return;const p=()=>{const m=window.getSelection();if(!m||m.rangeCount===0||!m.toString()){n(!1);return}if(!e.view.dom.contains(m.anchorNode)){n(!1);return}const v=m.getRangeAt(0).getBoundingClientRect();n(!0),s({top:v.top-50,left:v.left-15}),i(m.toString())};return document.addEventListener("selectionchange",p),()=>document.removeEventListener("selectionchange",p)},[e]);const h=async p=>{var m,g;if(!(!e||!o.trim()))try{l(!0),u(null);const v=(m=e.view.dom.closest('[id^="section-"]'))==null?void 0:m.id.replace("section-",""),x=await Nre({text:o,action:p,context:{section:v,productContext:(g=document.querySelector('input[name="name"]'))==null?void 0:g.value}});e.chain().focus().setTextSelection(e.state.selection).insertContent(x.content).run()}catch(v){console.error("Error processing text:",v),u(v instanceof Error?v.message:"An error occurred")}finally{l(!1)}};return!e||!t?null:f.jsx("div",{className:Le("fixed z-50","transition-opacity duration-200",t?"opacity-100":"opacity-0 pointer-events-none"),style:{top:`${r.top}px`,left:`${r.left}px`,transform:"translateY(-100%) translateX(-100%)",height:`${d}px`},children:f.jsxs(Km,{children:[f.jsx(Jm,{asChild:!0,children:f.jsx(K,{variant:"ghost",size:"sm",className:"flex items-center gap-1 text-brand-purple hover:bg-brand-purple/10 h-[36px] px-3 border border-gray-200 shadow-lg bg-white",disabled:a,children:a?f.jsxs(f.Fragment,{children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):f.jsxs(f.Fragment,{children:[f.jsx(Fa,{className:"w-4 h-4"}),"AI Actions"]})})}),f.jsxs(pf,{align:"start",className:"w-48 p-2",children:[f.jsxs(Ys,{onClick:()=>h("improve"),className:"flex items-center gap-2",disabled:a,children:[f.jsx(b7,{className:"w-4 h-4 text-brand-purple"}),f.jsx("span",{className:"text-sm",children:"Improve writing"})]}),f.jsxs(Ys,{onClick:()=>h("expand"),className:"flex items-center gap-2",disabled:a,children:[f.jsx(DW,{className:"w-4 h-4 text-brand-purple"}),f.jsx("span",{className:"text-sm",children:"Make longer"})]}),f.jsxs(Ys,{onClick:()=>h("shorten"),className:"flex items-center gap-2",disabled:a,children:[f.jsx(IW,{className:"w-4 h-4 text-brand-purple"}),f.jsx("span",{className:"text-sm",children:"Make shorter"})]})]})]})})}function N4({content:e,onChange:t}){const n=Zte({extensions:[ere.configure({paragraph:!1,heading:!1}),y4.configure({HTMLAttributes:{class:"mb-4 text-gray-700 leading-relaxed whitespace-pre-wrap"}}),f4.configure({levels:[1,2],HTMLAttributes:{class:"font-bold mb-4"},level:{1:{HTMLAttributes:{class:"text-3xl mt-8 mb-4"}},2:{HTMLAttributes:{class:"text-2xl mt-6 mb-3"}}}}),Cre.configure({openOnClick:!1,HTMLAttributes:{class:"text-brand-purple hover:underline"}})],content:e,onUpdate:({editor:r})=>{const o=r.getHTML().replace(/<p><br><\/p>/g,"<p>&nbsp;</p>").replace(/\n/g,"<br />");t(o)},editorProps:{attributes:{class:"prose max-w-none focus:outline-none min-h-[200px] whitespace-pre-wrap"}}});return y.useEffect(()=>{if(n&&e!==n.getHTML()){const r=e.replace(/&nbsp;/g," ").replace(/<br\s*\/?>/g,`
`);n.commands.setContent(r,!1)}},[e,n]),f.jsxs("div",{className:"prose max-w-none relative",children:[f.jsx(Ere,{editor:n}),f.jsx(Pre,{editor:n}),f.jsx(Hte,{editor:n,className:"min-h-[200px] focus-within:outline-none whitespace-pre-wrap"})]})}function Are({className:e,value:t,onChange:n,...r}){const s=y.useRef(null),o=()=>{const i=s.current;i&&(i.style.height="auto",i.style.height=`${i.scrollHeight}px`)};return y.useEffect(()=>{o()},[t]),f.jsx("textarea",{ref:s,value:t,onChange:i=>{n(i),o()},className:Le("w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent min-h-[80px] transition-height duration-200 resize-none overflow-hidden",e),...r})}function Tre(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const fv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gu(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function LE(e){return"nodeType"in e}function cr(e){var t,n;return e?gu(e)?e:LE(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function FE(e){const{Document:t}=cr(e);return e instanceof t}function hh(e){return gu(e)?!1:e instanceof cr(e).HTMLElement}function P4(e){return e instanceof cr(e).SVGElement}function yu(e){return e?gu(e)?e.document:LE(e)?FE(e)?e:hh(e)||P4(e)?e.ownerDocument:document:document:document}const io=fv?y.useLayoutEffect:y.useEffect;function BE(e){const t=y.useRef(e);return io(()=>{t.current=e}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Rre(){const e=y.useRef(null),t=y.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=y.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Pf(e,t){t===void 0&&(t=[e]);const n=y.useRef(e);return io(()=>{n.current!==e&&(n.current=e)},t),n}function ph(e,t){const n=y.useRef();return y.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Ug(e){const t=BE(e),n=y.useRef(null),r=y.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function w1(e){const t=y.useRef();return y.useEffect(()=>{t.current=e},[e]),t.current}let Rx={};function mh(e,t){return y.useMemo(()=>{if(t)return t;const n=Rx[e]==null?0:Rx[e]+1;return Rx[e]=n,e+"-"+n},[e,t])}function A4(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,i)=>{const a=Object.entries(i);for(const[l,c]of a){const u=o[l];u!=null&&(o[l]=u+e*c)}return o},{...t})}}const Sc=A4(1),Af=A4(-1);function jre(e){return"clientX"in e&&"clientY"in e}function zE(e){if(!e)return!1;const{KeyboardEvent:t}=cr(e.target);return t&&e instanceof t}function Ore(e){if(!e)return!1;const{TouchEvent:t}=cr(e.target);return t&&e instanceof t}function b1(e){if(Ore(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return jre(e)?{x:e.clientX,y:e.clientY}:null}const Tf=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Tf.Translate.toString(e),Tf.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),JA="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Mre(e){return e.matches(JA)?e:e.querySelector(JA)}const Ire={display:"none"};function Dre(e){let{id:t,value:n}=e;return M.createElement("div",{id:t,style:Ire},n)}function $re(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return M.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Lre(){const[e,t]=y.useState("");return{announce:y.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const T4=y.createContext(null);function Fre(e){const t=y.useContext(T4);y.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Bre(){const[e]=y.useState(()=>new Set),t=y.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[y.useCallback(r=>{let{type:s,event:o}=r;e.forEach(i=>{var a;return(a=i[s])==null?void 0:a.call(i,o)})},[e]),t]}const zre={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ure={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Hre(e){let{announcements:t=Ure,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=zre}=e;const{announce:o,announcement:i}=Lre(),a=mh("DndLiveRegion"),[l,c]=y.useState(!1);if(y.useEffect(()=>{c(!0)},[]),Fre(y.useMemo(()=>({onDragStart(d){let{active:h}=d;o(t.onDragStart({active:h}))},onDragMove(d){let{active:h,over:p}=d;t.onDragMove&&o(t.onDragMove({active:h,over:p}))},onDragOver(d){let{active:h,over:p}=d;o(t.onDragOver({active:h,over:p}))},onDragEnd(d){let{active:h,over:p}=d;o(t.onDragEnd({active:h,over:p}))},onDragCancel(d){let{active:h,over:p}=d;o(t.onDragCancel({active:h,over:p}))}}),[o,t])),!l)return null;const u=M.createElement(M.Fragment,null,M.createElement(Dre,{id:r,value:s.draggable}),M.createElement($re,{id:a,announcement:i}));return n?Kr.createPortal(u,n):u}var Bt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Bt||(Bt={}));function Hg(){}function YA(e,t){return y.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Vre(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const js=Object.freeze({x:0,y:0});function R4(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function j4(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Wre(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function XA(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function O4(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function QA(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const qre=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=QA(t,t.left,t.top),o=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=R4(QA(l),s);o.push({id:a,data:{droppableContainer:i,value:c}})}}return o.sort(j4)},Gre=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=XA(t),o=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=XA(l),u=s.reduce((h,p,m)=>h+R4(c[m],p),0),d=Number((u/4).toFixed(4));o.push({id:a,data:{droppableContainer:i,value:d}})}}return o.sort(j4)};function Kre(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),i=s-r,a=o-n;if(r<s&&n<o){const l=t.width*t.height,c=e.width*e.height,u=i*a,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const Jre=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:i}=o,a=n.get(i);if(a){const l=Kre(a,t);l>0&&s.push({id:i,data:{droppableContainer:o,value:l}})}}return s.sort(Wre)};function Yre(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function M4(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:js}function Xre(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((i,a)=>({...i,top:i.top+e*a.y,bottom:i.bottom+e*a.y,left:i.left+e*a.x,right:i.right+e*a.x}),{...n})}}const Qre=Xre(1);function Zre(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ese(e,t,n){const r=Zre(t);if(!r)return e;const{scaleX:s,scaleY:o,x:i,y:a}=r,l=e.left-i-(1-s)*parseFloat(n),c=e.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),u=s?e.width/s:e.width,d=o?e.height/o:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const tse={ignoreTransform:!1};function vu(e,t){t===void 0&&(t=tse);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:u}=cr(e).getComputedStyle(e);c&&(n=ese(n,c,u))}const{top:r,left:s,width:o,height:i,bottom:a,right:l}=n;return{top:r,left:s,width:o,height:i,bottom:a,right:l}}function ZA(e){return vu(e,{ignoreTransform:!0})}function nse(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function rse(e,t){return t===void 0&&(t=cr(e).getComputedStyle(e)),t.position==="fixed"}function sse(e,t){t===void 0&&(t=cr(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function hv(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(FE(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!hh(s)||P4(s)||n.includes(s))return n;const o=cr(e).getComputedStyle(s);return s!==e&&sse(s,o)&&n.push(s),rse(s,o)?n:r(s.parentNode)}return e?r(e):n}function I4(e){const[t]=hv(e,1);return t??null}function jx(e){return!fv||!e?null:gu(e)?e:LE(e)?FE(e)||e===yu(e).scrollingElement?window:hh(e)?e:null:null}function D4(e){return gu(e)?e.scrollX:e.scrollLeft}function $4(e){return gu(e)?e.scrollY:e.scrollTop}function S1(e){return{x:D4(e),y:$4(e)}}var Yt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Yt||(Yt={}));function L4(e){return!fv||!e?!1:e===document.scrollingElement}function F4(e){const t={x:0,y:0},n=L4(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:i,isRight:a,maxScroll:r,minScroll:t}}const ose={x:.2,y:.2};function ise(e,t,n,r,s){let{top:o,left:i,right:a,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=ose);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=F4(e),p={x:0,y:0},m={x:0,y:0},g={height:t.height*s.y,width:t.width*s.x};return!c&&o<=t.top+g.height?(p.y=Yt.Backward,m.y=r*Math.abs((t.top+g.height-o)/g.height)):!u&&l>=t.bottom-g.height&&(p.y=Yt.Forward,m.y=r*Math.abs((t.bottom-g.height-l)/g.height)),!h&&a>=t.right-g.width?(p.x=Yt.Forward,m.x=r*Math.abs((t.right-g.width-a)/g.width)):!d&&i<=t.left+g.width&&(p.x=Yt.Backward,m.x=r*Math.abs((t.left+g.width-i)/g.width)),{direction:p,speed:m}}function ase(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function B4(e){return e.reduce((t,n)=>Sc(t,S1(n)),js)}function lse(e){return e.reduce((t,n)=>t+D4(n),0)}function cse(e){return e.reduce((t,n)=>t+$4(n),0)}function use(e,t){if(t===void 0&&(t=vu),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);I4(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const dse=[["x",["left","right"],lse],["y",["top","bottom"],cse]];class UE{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=hv(n),s=B4(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,i,a]of dse)for(const l of i)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=s[o]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $d{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function fse(e){const{EventTarget:t}=cr(e);return e instanceof t?e:yu(e)}function Ox(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Ur;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ur||(Ur={}));function eT(e){e.preventDefault()}function hse(e){e.stopPropagation()}var He;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(He||(He={}));const z4={start:[He.Space,He.Enter],cancel:[He.Esc],end:[He.Space,He.Enter,He.Tab]},pse=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case He.Right:return{...n,x:n.x+25};case He.Left:return{...n,x:n.x-25};case He.Down:return{...n,y:n.y+25};case He.Up:return{...n,y:n.y-25}}};class HE{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new $d(yu(n)),this.windowListeners=new $d(cr(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ur.Resize,this.handleCancel),this.windowListeners.add(Ur.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ur.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&use(r),n(js)}handleKeyDown(t){if(zE(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=z4,coordinateGetter:i=pse,scrollBehavior:a="smooth"}=s,{code:l}=t;if(o.end.includes(l)){this.handleEnd(t);return}if(o.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:js;this.referenceCoordinates||(this.referenceCoordinates=u);const d=i(t,{active:n,context:r.current,currentCoordinates:u});if(d){const h=Af(d,u),p={x:0,y:0},{scrollableAncestors:m}=r.current;for(const g of m){const v=t.code,{isTop:x,isRight:w,isLeft:b,isBottom:S,maxScroll:C,minScroll:E}=F4(g),k=ase(g),N={x:Math.min(v===He.Right?k.right-k.width/2:k.right,Math.max(v===He.Right?k.left:k.left+k.width/2,d.x)),y:Math.min(v===He.Down?k.bottom-k.height/2:k.bottom,Math.max(v===He.Down?k.top:k.top+k.height/2,d.y))},P=v===He.Right&&!w||v===He.Left&&!b,T=v===He.Down&&!S||v===He.Up&&!x;if(P&&N.x!==d.x){const R=g.scrollLeft+h.x,L=v===He.Right&&R<=C.x||v===He.Left&&R>=E.x;if(L&&!h.y){g.scrollTo({left:R,behavior:a});return}L?p.x=g.scrollLeft-R:p.x=v===He.Right?g.scrollLeft-C.x:g.scrollLeft-E.x,p.x&&g.scrollBy({left:-p.x,behavior:a});break}else if(T&&N.y!==d.y){const R=g.scrollTop+h.y,L=v===He.Down&&R<=C.y||v===He.Up&&R>=E.y;if(L&&!h.x){g.scrollTo({top:R,behavior:a});return}L?p.y=g.scrollTop-R:p.y=v===He.Down?g.scrollTop-C.y:g.scrollTop-E.y,p.y&&g.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(t,Sc(Af(d,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}HE.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=z4,onActivation:s}=t,{active:o}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const a=o.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function tT(e){return!!(e&&"distance"in e)}function nT(e){return!!(e&&"delay"in e)}class VE{constructor(t,n,r){var s;r===void 0&&(r=fse(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:i}=o;this.props=t,this.events=n,this.document=yu(i),this.documentListeners=new $d(this.document),this.listeners=new $d(r),this.windowListeners=new $d(cr(i)),this.initialCoordinates=(s=b1(o))!=null?s:js,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ur.Resize,this.handleCancel),this.windowListeners.add(Ur.DragStart,eT),this.windowListeners.add(Ur.VisibilityChange,this.handleCancel),this.windowListeners.add(Ur.ContextMenu,eT),this.documentListeners.add(Ur.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(nT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(tT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ur.Click,hse,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ur.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:i,options:{activationConstraint:a}}=o;if(!s)return;const l=(n=b1(t))!=null?n:js,c=Af(s,l);if(!r&&a){if(tT(a)){if(a.tolerance!=null&&Ox(c,a.tolerance))return this.handleCancel();if(Ox(c,a.distance))return this.handleStart()}if(nT(a)&&Ox(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}t.cancelable&&t.preventDefault(),i(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===He.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const mse={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class WE extends VE{constructor(t){const{event:n}=t,r=yu(n.target);super(t,mse,r)}}WE.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const gse={move:{name:"mousemove"},end:{name:"mouseup"}};var C1;(function(e){e[e.RightClick=2]="RightClick"})(C1||(C1={}));class yse extends VE{constructor(t){super(t,gse,yu(t.event.target))}}yse.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===C1.RightClick?!1:(r==null||r({event:n}),!0)}}];const Mx={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class vse extends VE{constructor(t){super(t,Mx)}static setup(){return window.addEventListener(Mx.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Mx.move.name,t)};function t(){}}}vse.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Ld;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ld||(Ld={}));var Vg;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Vg||(Vg={}));function xse(e){let{acceleration:t,activator:n=Ld.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:i=5,order:a=Vg.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:h}=e;const p=bse({delta:d,disabled:!o}),[m,g]=Rre(),v=y.useRef({x:0,y:0}),x=y.useRef({x:0,y:0}),w=y.useMemo(()=>{switch(n){case Ld.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Ld.DraggableRect:return s}},[n,s,l]),b=y.useRef(null),S=y.useCallback(()=>{const E=b.current;if(!E)return;const k=v.current.x*x.current.x,N=v.current.y*x.current.y;E.scrollBy(k,N)},[]),C=y.useMemo(()=>a===Vg.TreeOrder?[...c].reverse():c,[a,c]);y.useEffect(()=>{if(!o||!c.length||!w){g();return}for(const E of C){if((r==null?void 0:r(E))===!1)continue;const k=c.indexOf(E),N=u[k];if(!N)continue;const{direction:P,speed:T}=ise(E,N,w,t,h);for(const R of["x","y"])p[R][P[R]]||(T[R]=0,P[R]=0);if(T.x>0||T.y>0){g(),b.current=E,m(S,i),v.current=T,x.current=P;return}}v.current={x:0,y:0},x.current={x:0,y:0},g()},[t,S,r,g,o,i,JSON.stringify(w),JSON.stringify(p),m,c,C,u,JSON.stringify(h)])}const wse={x:{[Yt.Backward]:!1,[Yt.Forward]:!1},y:{[Yt.Backward]:!1,[Yt.Forward]:!1}};function bse(e){let{delta:t,disabled:n}=e;const r=w1(t);return ph(s=>{if(n||!r||!s)return wse;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Yt.Backward]:s.x[Yt.Backward]||o.x===-1,[Yt.Forward]:s.x[Yt.Forward]||o.x===1},y:{[Yt.Backward]:s.y[Yt.Backward]||o.y===-1,[Yt.Forward]:s.y[Yt.Forward]||o.y===1}}},[n,t,r])}function Sse(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return ph(s=>{var o;return t==null?null:(o=r??s)!=null?o:null},[r,t])}function Cse(e,t){return y.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...o]},[]),[e,t])}var Rf;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Rf||(Rf={}));var E1;(function(e){e.Optimized="optimized"})(E1||(E1={}));const rT=new Map;function Ese(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,i]=y.useState(null),{frequency:a,measure:l,strategy:c}=s,u=y.useRef(e),d=v(),h=Pf(d),p=y.useCallback(function(x){x===void 0&&(x=[]),!h.current&&i(w=>w===null?x:w.concat(x.filter(b=>!w.includes(b))))},[h]),m=y.useRef(null),g=ph(x=>{if(d&&!n)return rT;if(!x||x===rT||u.current!==e||o!=null){const w=new Map;for(let b of e){if(!b)continue;if(o&&o.length>0&&!o.includes(b.id)&&b.rect.current){w.set(b.id,b.rect.current);continue}const S=b.node.current,C=S?new UE(l(S),S):null;b.rect.current=C,C&&w.set(b.id,C)}return w}return x},[e,o,n,d,l]);return y.useEffect(()=>{u.current=e},[e]),y.useEffect(()=>{d||p()},[n,d]),y.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),y.useEffect(()=>{d||typeof a!="number"||m.current!==null||(m.current=setTimeout(()=>{p(),m.current=null},a))},[a,d,p,...r]),{droppableRects:g,measureDroppableContainers:p,measuringScheduled:o!=null};function v(){switch(c){case Rf.Always:return!1;case Rf.BeforeDragging:return n;default:return!n}}}function U4(e,t){return ph(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function kse(e,t){return U4(e,t)}function _se(e){let{callback:t,disabled:n}=e;const r=BE(t),s=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return y.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function pv(e){let{callback:t,disabled:n}=e;const r=BE(t),s=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return y.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Nse(e){return new UE(vu(e),e)}function sT(e,t,n){t===void 0&&(t=Nse);const[r,s]=y.useState(null);function o(){s(l=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=t(e);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const i=_se({callback(l){if(e)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(e)){o();break}}}}),a=pv({callback:o});return io(()=>{o(),e?(a==null||a.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[e]),r}function Pse(e){const t=U4(e);return M4(e,t)}const oT=[];function Ase(e){const t=y.useRef(e),n=ph(r=>e?r&&r!==oT&&e&&t.current&&e.parentNode===t.current.parentNode?r:hv(e):oT,[e]);return y.useEffect(()=>{t.current=e},[e]),n}function Tse(e){const[t,n]=y.useState(null),r=y.useRef(e),s=y.useCallback(o=>{const i=jx(o.target);i&&n(a=>a?(a.set(i,S1(i)),new Map(a)):null)},[]);return y.useEffect(()=>{const o=r.current;if(e!==o){i(o);const a=e.map(l=>{const c=jx(l);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,S1(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(o)};function i(a){a.forEach(l=>{const c=jx(l);c==null||c.removeEventListener("scroll",s)})}},[s,e]),y.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,i)=>Sc(o,i),js):B4(e):js,[e,t])}function iT(e,t){t===void 0&&(t=[]);const n=y.useRef(null);return y.useEffect(()=>{n.current=null},t),y.useEffect(()=>{const r=e!==js;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Af(e,n.current):js}function Rse(e){y.useEffect(()=>{if(!fv)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function jse(e,t){return y.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=i=>{o(i,t)},n},{}),[e,t])}function H4(e){return y.useMemo(()=>e?nse(e):null,[e])}const aT=[];function Ose(e,t){t===void 0&&(t=vu);const[n]=e,r=H4(n?cr(n):null),[s,o]=y.useState(aT);function i(){o(()=>e.length?e.map(l=>L4(l)?r:new UE(t(l),l)):aT)}const a=pv({callback:i});return io(()=>{a==null||a.disconnect(),i(),e.forEach(l=>a==null?void 0:a.observe(l))},[e]),s}function Mse(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return hh(t)?t:e}function Ise(e){let{measure:t}=e;const[n,r]=y.useState(null),s=y.useCallback(c=>{for(const{target:u}of c)if(hh(u)){r(d=>{const h=t(u);return d?{...d,width:h.width,height:h.height}:h});break}},[t]),o=pv({callback:s}),i=y.useCallback(c=>{const u=Mse(c);o==null||o.disconnect(),u&&(o==null||o.observe(u)),r(u?t(u):null)},[t,o]),[a,l]=Ug(i);return y.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const Dse=[{sensor:WE,options:{}},{sensor:HE,options:{}}],$se={current:{}},sm={draggable:{measure:ZA},droppable:{measure:ZA,strategy:Rf.WhileDragging,frequency:E1.Optimized},dragOverlay:{measure:vu}};class Fd extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Lse={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Fd,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Hg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:sm,measureDroppableContainers:Hg,windowRect:null,measuringScheduled:!1},Fse={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Hg,draggableNodes:new Map,over:null,measureDroppableContainers:Hg},mv=y.createContext(Fse),V4=y.createContext(Lse);function Bse(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Fd}}}function zse(e,t){switch(t.type){case Bt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Bt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Bt.DragEnd:case Bt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Bt.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Fd(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Bt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new Fd(e.droppable.containers);return i.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:i}}}case Bt.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new Fd(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function Use(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=y.useContext(mv),o=w1(r),i=w1(n==null?void 0:n.id);return y.useEffect(()=>{if(!t&&!r&&o&&i!=null){if(!zE(o)||document.activeElement===o.target)return;const a=s.get(i);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=Mre(u);if(d){d.focus();break}}})}},[r,t,s,i,o]),null}function Hse(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function Vse(e){return y.useMemo(()=>({draggable:{...sm.draggable,...e==null?void 0:e.draggable},droppable:{...sm.droppable,...e==null?void 0:e.droppable},dragOverlay:{...sm.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Wse(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=y.useRef(!1),{x:i,y:a}=typeof s=="boolean"?{x:s,y:s}:s;io(()=>{if(!i&&!a||!t){o.current=!1;return}if(o.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const u=n(c),d=M4(u,r);if(i||(d.x=0),a||(d.y=0),o.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const h=I4(c);h&&h.scrollBy({top:d.y,left:d.x})}},[t,i,a,r,n])}const W4=y.createContext({...js,scaleX:1,scaleY:1});var ui;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ui||(ui={}));const qse=y.memo(function(t){var n,r,s,o;let{id:i,accessibility:a,autoScroll:l=!0,children:c,sensors:u=Dse,collisionDetection:d=Jre,measuring:h,modifiers:p,...m}=t;const g=y.useReducer(zse,void 0,Bse),[v,x]=g,[w,b]=Bre(),[S,C]=y.useState(ui.Uninitialized),E=S===ui.Initialized,{draggable:{active:k,nodes:N,translate:P},droppable:{containers:T}}=v,R=k!=null?N.get(k):null,L=y.useRef({initial:null,translated:null}),z=y.useMemo(()=>{var _t;return k!=null?{id:k,data:(_t=R==null?void 0:R.data)!=null?_t:$se,rect:L}:null},[k,R]),_=y.useRef(null),[D,O]=y.useState(null),[F,j]=y.useState(null),A=Pf(m,Object.values(m)),$=mh("DndDescribedBy",i),B=y.useMemo(()=>T.getEnabled(),[T]),I=Vse(h),{droppableRects:H,measureDroppableContainers:V,measuringScheduled:W}=Ese(B,{dragging:E,dependencies:[P.x,P.y],config:I.droppable}),Y=Sse(N,k),Z=y.useMemo(()=>F?b1(F):null,[F]),ae=as(),se=kse(Y,I.draggable.measure);Wse({activeNode:k!=null?N.get(k):null,config:ae.layoutShiftCompensation,initialRect:se,measure:I.draggable.measure});const re=sT(Y,I.draggable.measure,se),De=sT(Y?Y.parentElement:null),me=y.useRef({activatorEvent:null,active:null,activeNode:Y,collisionRect:null,collisions:null,droppableRects:H,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ce=T.getNodeFor((n=me.current.over)==null?void 0:n.id),U=Ise({measure:I.dragOverlay.measure}),q=(r=U.nodeRef.current)!=null?r:Y,he=E?(s=U.rect)!=null?s:re:null,fe=!!(U.nodeRef.current&&U.rect),Q=Pse(fe?null:re),Ae=H4(q?cr(q):null),je=Ase(E?Ce??Y:null),ut=Ose(je),Mn=Hse(p,{transform:{x:P.x-Q.x,y:P.y-Q.y,scaleX:1,scaleY:1},activatorEvent:F,active:z,activeNodeRect:re,containerNodeRect:De,draggingNodeRect:he,over:me.current.over,overlayNodeRect:U.rect,scrollableAncestors:je,scrollableAncestorRects:ut,windowRect:Ae}),Wt=Z?Sc(Z,P):null,ln=Tse(je),Or=iT(ln),ur=iT(ln,[re]),qt=Sc(Mn,Or),ue=he?Qre(he,Mn):null,ie=z&&ue?d({active:z,collisionRect:ue,droppableRects:H,droppableContainers:B,pointerCoordinates:Wt}):null,Se=O4(ie,"id"),[Ee,J]=y.useState(null),X=fe?Mn:Sc(Mn,ur),ge=Yre(X,(o=Ee==null?void 0:Ee.rect)!=null?o:null,re),be=y.useRef(null),Fe=y.useCallback((_t,Nt)=>{let{sensor:In,options:Ds}=Nt;if(_.current==null)return;const Kn=N.get(_.current);if(!Kn)return;const Dn=_t.nativeEvent,Ir=new In({active:_.current,activeNode:Kn,event:Dn,options:Ds,context:me,onAbort(It){if(!N.get(It))return;const{onDragAbort:Dr}=A.current,ls={id:It};Dr==null||Dr(ls),w({type:"onDragAbort",event:ls})},onPending(It,$s,Dr,ls){if(!N.get(It))return;const{onDragPending:da}=A.current,Ls={id:It,constraint:$s,initialCoordinates:Dr,offset:ls};da==null||da(Ls),w({type:"onDragPending",event:Ls})},onStart(It){const $s=_.current;if($s==null)return;const Dr=N.get($s);if(!Dr)return;const{onDragStart:ls}=A.current,ua={activatorEvent:Dn,active:{id:$s,data:Dr.data,rect:L}};Kr.unstable_batchedUpdates(()=>{ls==null||ls(ua),C(ui.Initializing),x({type:Bt.DragStart,initialCoordinates:It,active:$s}),w({type:"onDragStart",event:ua}),O(be.current),j(Dn)})},onMove(It){x({type:Bt.DragMove,coordinates:It})},onEnd:Go(Bt.DragEnd),onCancel:Go(Bt.DragCancel)});be.current=Ir;function Go(It){return async function(){const{active:Dr,collisions:ls,over:ua,scrollAdjustedTranslate:da}=me.current;let Ls=null;if(Dr&&da){const{cancelDrop:fa}=A.current;Ls={activatorEvent:Dn,active:Dr,collisions:ls,delta:da,over:ua},It===Bt.DragEnd&&typeof fa=="function"&&await Promise.resolve(fa(Ls))&&(It=Bt.DragCancel)}_.current=null,Kr.unstable_batchedUpdates(()=>{x({type:It}),C(ui.Uninitialized),J(null),O(null),j(null),be.current=null;const fa=It===Bt.DragEnd?"onDragEnd":"onDragCancel";if(Ls){const Su=A.current[fa];Su==null||Su(Ls),w({type:fa,event:Ls})}})}}},[N]),Ge=y.useCallback((_t,Nt)=>(In,Ds)=>{const Kn=In.nativeEvent,Dn=N.get(Ds);if(_.current!==null||!Dn||Kn.dndKit||Kn.defaultPrevented)return;const Ir={active:Dn};_t(In,Nt.options,Ir)===!0&&(Kn.dndKit={capturedBy:Nt.sensor},_.current=Ds,Fe(In,Nt))},[N,Fe]),ke=Cse(u,Ge);Rse(u),io(()=>{re&&S===ui.Initializing&&C(ui.Initialized)},[re,S]),y.useEffect(()=>{const{onDragMove:_t}=A.current,{active:Nt,activatorEvent:In,collisions:Ds,over:Kn}=me.current;if(!Nt||!In)return;const Dn={active:Nt,activatorEvent:In,collisions:Ds,delta:{x:qt.x,y:qt.y},over:Kn};Kr.unstable_batchedUpdates(()=>{_t==null||_t(Dn),w({type:"onDragMove",event:Dn})})},[qt.x,qt.y]),y.useEffect(()=>{const{active:_t,activatorEvent:Nt,collisions:In,droppableContainers:Ds,scrollAdjustedTranslate:Kn}=me.current;if(!_t||_.current==null||!Nt||!Kn)return;const{onDragOver:Dn}=A.current,Ir=Ds.get(Se),Go=Ir&&Ir.rect.current?{id:Ir.id,rect:Ir.rect.current,data:Ir.data,disabled:Ir.disabled}:null,It={active:_t,activatorEvent:Nt,collisions:In,delta:{x:Kn.x,y:Kn.y},over:Go};Kr.unstable_batchedUpdates(()=>{J(Go),Dn==null||Dn(It),w({type:"onDragOver",event:It})})},[Se]),io(()=>{me.current={activatorEvent:F,active:z,activeNode:Y,collisionRect:ue,collisions:ie,droppableRects:H,draggableNodes:N,draggingNode:q,draggingNodeRect:he,droppableContainers:T,over:Ee,scrollableAncestors:je,scrollAdjustedTranslate:qt},L.current={initial:he,translated:ue}},[z,Y,ie,ue,N,q,he,H,T,Ee,je,qt]),xse({...ae,delta:P,draggingRect:ue,pointerCoordinates:Wt,scrollableAncestors:je,scrollableAncestorRects:ut});const Ye=y.useMemo(()=>({active:z,activeNode:Y,activeNodeRect:re,activatorEvent:F,collisions:ie,containerNodeRect:De,dragOverlay:U,draggableNodes:N,droppableContainers:T,droppableRects:H,over:Ee,measureDroppableContainers:V,scrollableAncestors:je,scrollableAncestorRects:ut,measuringConfiguration:I,measuringScheduled:W,windowRect:Ae}),[z,Y,re,F,ie,De,U,N,T,H,Ee,V,je,ut,I,W,Ae]),Mr=y.useMemo(()=>({activatorEvent:F,activators:ke,active:z,activeNodeRect:re,ariaDescribedById:{draggable:$},dispatch:x,draggableNodes:N,over:Ee,measureDroppableContainers:V}),[F,ke,z,re,x,$,N,Ee,V]);return M.createElement(T4.Provider,{value:b},M.createElement(mv.Provider,{value:Mr},M.createElement(V4.Provider,{value:Ye},M.createElement(W4.Provider,{value:ge},c)),M.createElement(Use,{disabled:(a==null?void 0:a.restoreFocus)===!1})),M.createElement(Hre,{...a,hiddenTextDescribedById:$}));function as(){const _t=(D==null?void 0:D.autoScrollEnabled)===!1,Nt=typeof l=="object"?l.enabled===!1:l===!1,In=E&&!_t&&!Nt;return typeof l=="object"?{...l,enabled:In}:{enabled:In}}}),Gse=y.createContext(null),lT="button",Kse="Draggable";function Jse(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=mh(Kse),{activators:i,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:h}=y.useContext(mv),{role:p=lT,roleDescription:m="draggable",tabIndex:g=0}=s??{},v=(l==null?void 0:l.id)===t,x=y.useContext(v?W4:Gse),[w,b]=Ug(),[S,C]=Ug(),E=jse(i,t),k=Pf(n);io(()=>(d.set(t,{id:t,key:o,node:w,activatorNode:S,data:k}),()=>{const P=d.get(t);P&&P.key===o&&d.delete(t)}),[d,t]);const N=y.useMemo(()=>({role:p,tabIndex:g,"aria-disabled":r,"aria-pressed":v&&p===lT?!0:void 0,"aria-roledescription":m,"aria-describedby":u.draggable}),[r,p,g,v,m,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:N,isDragging:v,listeners:r?void 0:E,node:w,over:h,setNodeRef:b,setActivatorNodeRef:C,transform:x}}function Yse(){return y.useContext(V4)}const Xse="Droppable",Qse={timeout:25};function Zse(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=mh(Xse),{active:i,dispatch:a,over:l,measureDroppableContainers:c}=y.useContext(mv),u=y.useRef({disabled:n}),d=y.useRef(!1),h=y.useRef(null),p=y.useRef(null),{disabled:m,updateMeasurementsFor:g,timeout:v}={...Qse,...s},x=Pf(g??r),w=y.useCallback(()=>{if(!d.current){d.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),p.current=null},v)},[v]),b=pv({callback:w,disabled:m||!i}),S=y.useCallback((N,P)=>{b&&(P&&(b.unobserve(P),d.current=!1),N&&b.observe(N))},[b]),[C,E]=Ug(S),k=Pf(t);return y.useEffect(()=>{!b||!C.current||(b.disconnect(),d.current=!1,b.observe(C.current))},[C,b]),y.useEffect(()=>(a({type:Bt.RegisterDroppable,element:{id:r,key:o,disabled:n,node:C,rect:h,data:k}}),()=>a({type:Bt.UnregisterDroppable,key:o,id:r})),[r]),y.useEffect(()=>{n!==u.current.disabled&&(a({type:Bt.SetDroppableDisabled,id:r,key:o,disabled:n}),u.current.disabled=n)},[r,o,n,a]),{active:i,rect:h,isOver:(l==null?void 0:l.id)===r,node:C,over:l,setNodeRef:E}}function qE(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function eoe(e,t){return e.reduce((n,r,s)=>{const o=t.get(r);return o&&(n[s]=o),n},Array(e.length))}function hp(e){return e!==null&&e>=0}function toe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function noe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const q4=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const o=qE(t,r,n),i=t[s],a=o[s];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},pp={scaleX:1,scaleY:1},roe=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:i}=e;const a=(t=o[n])!=null?t:r;if(!a)return null;if(s===n){const c=o[i];return c?{x:0,y:n<i?c.top+c.height-(a.top+a.height):c.top-a.top,...pp}:null}const l=soe(o,s,n);return s>n&&s<=i?{x:0,y:-a.height-l,...pp}:s<n&&s>=i?{x:0,y:a.height+l,...pp}:{x:0,y:0,...pp}};function soe(e,t,n){const r=e[t],s=e[t-1],o=e[t+1];return r?n<t?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const G4="Sortable",K4=M.createContext({activeIndex:-1,containerId:G4,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:q4,disabled:{draggable:!1,droppable:!1}});function ooe(e){let{children:t,id:n,items:r,strategy:s=q4,disabled:o=!1}=e;const{active:i,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=Yse(),d=mh(G4,n),h=a.rect!==null,p=y.useMemo(()=>r.map(E=>typeof E=="object"&&"id"in E?E.id:E),[r]),m=i!=null,g=i?p.indexOf(i.id):-1,v=c?p.indexOf(c.id):-1,x=y.useRef(p),w=!toe(p,x.current),b=v!==-1&&g===-1||w,S=noe(o);io(()=>{w&&m&&u(p)},[w,p,m,u]),y.useEffect(()=>{x.current=p},[p]);const C=y.useMemo(()=>({activeIndex:g,containerId:d,disabled:S,disableTransforms:b,items:p,overIndex:v,useDragOverlay:h,sortedRects:eoe(p,l),strategy:s}),[g,d,S.draggable,S.droppable,b,p,v,l,h,s]);return M.createElement(K4.Provider,{value:C},t)}const ioe=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return qE(n,r,s).indexOf(t)},aoe=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:o,newIndex:i,previousItems:a,previousContainerId:l,transition:c}=e;return!c||!r||a!==o&&s===i?!1:n?!0:i!==s&&t===l},loe={duration:200,easing:"ease"},J4="transform",coe=Tf.Transition.toString({property:J4,duration:0,easing:"linear"}),uoe={roleDescription:"sortable"};function doe(e){let{disabled:t,index:n,node:r,rect:s}=e;const[o,i]=y.useState(null),a=y.useRef(n);return io(()=>{if(!t&&n!==a.current&&r.current){const l=s.current;if(l){const c=vu(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&i(u)}}n!==a.current&&(a.current=n)},[t,n,r,s]),y.useEffect(()=>{o&&i(null)},[o]),o}function foe(e){let{animateLayoutChanges:t=aoe,attributes:n,disabled:r,data:s,getNewIndex:o=ioe,id:i,strategy:a,resizeObserverConfig:l,transition:c=loe}=e;const{items:u,containerId:d,activeIndex:h,disabled:p,disableTransforms:m,sortedRects:g,overIndex:v,useDragOverlay:x,strategy:w}=y.useContext(K4),b=hoe(r,p),S=u.indexOf(i),C=y.useMemo(()=>({sortable:{containerId:d,index:S,items:u},...s}),[d,s,S,u]),E=y.useMemo(()=>u.slice(u.indexOf(i)),[u,i]),{rect:k,node:N,isOver:P,setNodeRef:T}=Zse({id:i,data:C,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...l}}),{active:R,activatorEvent:L,activeNodeRect:z,attributes:_,setNodeRef:D,listeners:O,isDragging:F,over:j,setActivatorNodeRef:A,transform:$}=Jse({id:i,data:C,attributes:{...uoe,...n},disabled:b.draggable}),B=Tre(T,D),I=!!R,H=I&&!m&&hp(h)&&hp(v),V=!x&&F,W=V&&H?$:null,Z=H?W??(a??w)({rects:g,activeNodeRect:z,activeIndex:h,overIndex:v,index:S}):null,ae=hp(h)&&hp(v)?o({id:i,items:u,activeIndex:h,overIndex:v}):S,se=R==null?void 0:R.id,re=y.useRef({activeId:se,items:u,newIndex:ae,containerId:d}),De=u!==re.current.items,me=t({active:R,containerId:d,isDragging:F,isSorting:I,id:i,index:S,items:u,newIndex:re.current.newIndex,previousItems:re.current.items,previousContainerId:re.current.containerId,transition:c,wasDragging:re.current.activeId!=null}),Ce=doe({disabled:!me,index:S,node:N,rect:k});return y.useEffect(()=>{I&&re.current.newIndex!==ae&&(re.current.newIndex=ae),d!==re.current.containerId&&(re.current.containerId=d),u!==re.current.items&&(re.current.items=u)},[I,ae,d,u]),y.useEffect(()=>{if(se===re.current.activeId)return;if(se&&!re.current.activeId){re.current.activeId=se;return}const q=setTimeout(()=>{re.current.activeId=se},50);return()=>clearTimeout(q)},[se]),{active:R,activeIndex:h,attributes:_,data:C,rect:k,index:S,newIndex:ae,items:u,isOver:P,isSorting:I,isDragging:F,listeners:O,node:N,overIndex:v,over:j,setNodeRef:B,setActivatorNodeRef:A,setDroppableNodeRef:T,setDraggableNodeRef:D,transform:Ce??Z,transition:U()};function U(){if(Ce||De&&re.current.newIndex===S)return coe;if(!(V&&!zE(L)||!c)&&(I||me))return Tf.Transition.toString({...c,property:J4})}}function hoe(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Wg(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const poe=[He.Down,He.Right,He.Up,He.Left],moe=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:o,over:i,scrollableAncestors:a}}=t;if(poe.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];o.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const h=s.get(d.id);if(h)switch(e.code){case He.Down:r.top<h.top&&l.push(d);break;case He.Up:r.top>h.top&&l.push(d);break;case He.Left:r.left>h.left&&l.push(d);break;case He.Right:r.left<h.left&&l.push(d);break}});const c=Gre({active:n,collisionRect:r,droppableRects:s,droppableContainers:l,pointerCoordinates:null});let u=O4(c,"id");if(u===(i==null?void 0:i.id)&&c.length>1&&(u=c[1].id),u!=null){const d=o.get(n.id),h=o.get(u),p=h?s.get(h.id):null,m=h==null?void 0:h.node.current;if(m&&p&&d&&h){const v=hv(m).some((E,k)=>a[k]!==E),x=Y4(d,h),w=goe(d,h),b=v||!x?{x:0,y:0}:{x:w?r.width-p.width:0,y:w?r.height-p.height:0},S={x:p.left,y:p.top};return b.x&&b.y?S:Af(S,b)}}}};function Y4(e,t){return!Wg(e)||!Wg(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function goe(e,t){return!Wg(e)||!Wg(t)||!Y4(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Ix=[{value:"must-have",label:"Must Have",color:"text-red-600"},{value:"nice-to-have",label:"Nice to Have",color:"text-yellow-600"},{value:"not-prioritized",label:"Not Prioritized",color:"text-gray-600"}],Dx=[{value:"not_started",label:"Not Started",color:"text-gray-600"},{value:"in_progress",label:"In Progress",color:"text-blue-600"},{value:"completed",label:"Completed",color:"text-green-600"}];function yoe({feature:e,bucketId:t,updateFeature:n,onDelete:r}){var k,N,P,T;const{attributes:s,listeners:o,setNodeRef:i,transform:a,transition:l,isDragging:c}=foe({id:e.id}),u={transform:Tf.Transform.toString(a),transition:l,zIndex:c?1:0},[d,h]=y.useState(!e.name),[p,m]=y.useState(e),[g,v]=y.useState(null),[x,w]=y.useState(!1),b=()=>{if(!p.name.trim()){v("Feature name is required"),m(R=>({...R,name:"Untitled Feature"}));return}n(t,e.id,"name",p.name),n(t,e.id,"description",p.description),h(!1),v(null)},S=(R,L)=>{const z={...p,[R]:L};m(z),R!=="name"&&R!=="description"&&n(t,e.id,R,L)},C=()=>{m(e),h(!1),v(null)},E=async()=>{r(e.id),w(!1)};return f.jsxs(f.Fragment,{children:[f.jsx("div",{ref:i,style:u,className:`bg-white rounded-lg border ${d?"border-brand-purple":"border-gray-200"} p-4 space-y-4 transition-colors`,children:d?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature Name"}),f.jsx("input",{type:"text",value:p.name,onChange:R=>S("name",R.target.value),onBlur:()=>{p.name.trim()&&b(),v(null)},placeholder:"Enter feature name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent"}),g&&f.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[f.jsx(nr,{className:"w-4 h-4"}),g]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),f.jsx(Are,{value:p.description,onChange:R=>S("description",R.target.value),placeholder:"Describe the feature and its benefits",className:"min-h-[80px]"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),f.jsx("select",{value:p.priority,onChange:R=>S("priority",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent",children:Ix.map(R=>f.jsx("option",{value:R.value,children:R.label},R.value))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Implementation Status"}),f.jsx("select",{value:p.implementation_status,onChange:R=>S("implementation_status",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent",children:Dx.map(R=>f.jsx("option",{value:R.value,children:R.label},R.value))})]})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[f.jsx(K,{variant:"outline",size:"sm",onClick:C,children:"Cancel"}),f.jsx(K,{variant:"secondary",size:"sm",onClick:b,children:"Save Changes"})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{...s,...o,className:"cursor-grab hover:text-brand-purple",children:f.jsx(ZW,{className:"w-5 h-5"})}),f.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.name||"Untitled Feature"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:`text-sm font-medium ${((k=Dx.find(R=>R.value===e.implementation_status))==null?void 0:k.color)||"text-gray-600"}`,children:(N=Dx.find(R=>R.value===e.implementation_status))==null?void 0:N.label}),f.jsx("span",{className:`text-sm font-medium ${((P=Ix.find(R=>R.value===e.priority))==null?void 0:P.color)||"text-gray-600"}`,children:(T=Ix.find(R=>R.value===e.priority))==null?void 0:T.label}),f.jsx(K,{variant:"outline",size:"sm",onClick:()=>h(!0),children:"Edit"}),f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>w(!0),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:f.jsx(sa,{className:"w-4 h-4"})})]})]}),e.description&&f.jsx("p",{className:"text-gray-600",children:e.description})]})}),f.jsx(Et,{open:x,onOpenChange:w,children:f.jsxs(yt,{children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Delete Feature"}),f.jsx(kt,{children:"Are you sure you want to delete this feature? This action cannot be undone."})]}),f.jsxs(Ht,{className:"flex gap-2",children:[f.jsx(K,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),f.jsx(K,{variant:"destructive",onClick:E,children:"Delete"})]})]})})]})}function voe({content:e,onChange:t}){const{productSlug:n}=ao(),[r,s]=y.useState(!0),[o,i]=y.useState(null),[a,l]=y.useState([{id:"features",title:"Features",features:[]}]),c=Vre(YA(WE),YA(HE,{coordinateGetter:moe}));y.useEffect(()=>{u()},[n]);async function u(){if(n)try{s(!0),i(null);const{data:v,error:x}=await G.from("products").select("id").eq("slug",n).single();if(x)throw x;if(!v)throw new Error("Product not found");const{data:w,error:b}=await G.from("features").select("*").eq("product_id",v.id).order("position",{ascending:!0});if(b)throw b;l([{id:"features",title:"Features",features:w||[]}])}catch(v){console.error("Error loading features:",v),i("Failed to load features")}finally{s(!1)}}const d=async v=>{if(n)try{const{data:x,error:w}=await G.from("products").select("id").eq("slug",n).single();if(w)throw w;if(!x)throw new Error("Product not found");const{data:b,error:S}=await G.from("features").insert({product_id:x.id,name:"New Feature",description:"",priority:"not-prioritized",implementation_status:"not_started",position:a[0].features.length}).select().single();if(S)throw S;if(!b)throw new Error("Failed to create feature");l(C=>C.map(E=>E.id===v?{...E,features:[...E.features,b]}:E))}catch(x){console.error("Error adding feature:",x),i("Failed to add feature")}},h=async(v,x,w,b)=>{try{const{error:S}=await G.from("features").update({[w]:b}).eq("id",x);if(S)throw S;l(C=>C.map(E=>E.id===v?{...E,features:E.features.map(k=>k.id===x?{...k,[w]:b}:k)}:E))}catch(S){console.error("Error updating feature:",S),i("Failed to update feature")}},p=async v=>{try{const{error:x}=await G.from("features").delete().eq("id",v);if(x)throw x;l(w=>w.map(b=>({...b,features:b.features.filter(S=>S.id!==v)})))}catch(x){console.error("Error deleting feature:",x),i("Failed to delete feature")}},m=async v=>{const{active:x,over:w}=v;if(!w||x.id===w.id)return;const b=a[0].features.findIndex(E=>E.id===x.id),S=a[0].features.findIndex(E=>E.id===w.id),C=qE(a[0].features,b,S).map((E,k)=>({...E,position:k}));try{const{error:E}=await G.from("features").upsert(C.map(k=>({id:k.id,position:k.position})));if(E)throw E;l(k=>k.map(N=>N.id==="features"?{...N,features:C}:N))}catch(E){console.error("Error updating feature positions:",E),i("Failed to update feature order")}};if(r)return f.jsx("div",{children:"Loading..."});const g=a[0];return f.jsxs("div",{className:"space-y-4",children:[o&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg flex items-center gap-2",children:[f.jsx(nr,{className:"w-4 h-4"}),o]}),f.jsxs("div",{className:"space-y-4 min-h-[100px] rounded-lg p-4 bg-gray-50",children:[f.jsx(qse,{sensors:c,collisionDetection:qre,onDragEnd:m,children:f.jsx(ooe,{items:g.features.map(v=>v.id),strategy:roe,children:g.features.map(v=>f.jsx(yoe,{feature:v,bucketId:g.id,updateFeature:h,onDelete:p},v.id))})}),f.jsxs("button",{onClick:()=>d(g.id),className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-500 hover:text-gray-700 hover:border-gray-400 transition-colors flex items-center justify-center space-x-2",children:[f.jsx(qi,{className:"w-5 h-5"}),f.jsx("span",{children:"Add New Feature"})]})]})]})}function xoe({section:e,onContentChange:t,productDetails:n,onRenameSection:r}){const s=(i,a)=>{t(e.id,null,i)},o=()=>{r&&e.isCustom&&r(e.id,e.title)};return f.jsx("div",{id:`section-${e.id}`,className:"scroll-mt-4",children:e.id==="overview"?f.jsxs("div",{className:"space-y-6 p-8 bg-white rounded-t-lg border-b",children:[f.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[f.jsx("input",{type:"text",value:(n==null?void 0:n.name)||"",onChange:i=>{},name:"name",className:"bg-transparent border-b-2 border-dashed border-gray-300 hover:border-brand-purple focus:border-brand-purple p-0 focus:outline-none focus:ring-0 transition-colors flex-1 min-w-0",placeholder:"Enter product name",readOnly:!0}),f.jsx("span",{className:"flex-shrink-0",children:"Overview"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Description"}),f.jsx("textarea",{id:"description",name:"description",value:(n==null?void 0:n.description)||"",onChange:i=>{},placeholder:"Brief description of your product",className:"w-full min-h-[120px] max-h-[120px] text-sm bg-transparent border border-gray-300 rounded-lg px-3 py-2 resize-y",readOnly:!0})]})]}):e.id==="features"?f.jsxs("div",{className:"space-y-4 p-8 bg-white border-b",children:[f.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.icon,f.jsx("span",{children:e.title})]}),f.jsx(voe,{content:e.content||e.placeholder,onChange:i=>s(i)})]}):f.jsxs("div",{className:"space-y-4 p-8 bg-white border-b",children:[f.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.icon,f.jsx("span",{children:e.title}),e.isCustom&&r&&f.jsx(K,{variant:"ghost",size:"sm",onClick:o,className:"ml-2 p-1 h-auto",title:"Rename section",children:f.jsx(au,{className:"w-4 h-4 text-gray-500 hover:text-brand-purple"})})]}),f.jsx(N4,{content:e.content||e.placeholder,onChange:i=>s(i)})]})})}const At=y.forwardRef(({className:e,type:t,...n},r)=>f.jsx("input",{type:t,className:Le("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));At.displayName="Input";var X4="AlertDialog",[woe,g0e]=oa(X4,[nD]),qo=nD(),Q4=e=>{const{__scopeAlertDialog:t,...n}=e,r=qo(t);return f.jsx(vD,{...r,...n,modal:!0})};Q4.displayName=X4;var boe="AlertDialogTrigger",Soe=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=qo(n);return f.jsx(xD,{...s,...r,ref:t})});Soe.displayName=boe;var Coe="AlertDialogPortal",Z4=e=>{const{__scopeAlertDialog:t,...n}=e,r=qo(t);return f.jsx(wD,{...r,...n})};Z4.displayName=Coe;var Eoe="AlertDialogOverlay",e3=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=qo(n);return f.jsx(TC,{...s,...r,ref:t})});e3.displayName=Eoe;var Cc="AlertDialogContent",[koe,_oe]=woe(Cc),t3=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,o=qo(n),i=y.useRef(null),a=Ut(t,i),l=y.useRef(null);return f.jsx(nJ,{contentName:Cc,titleName:n3,docsSlug:"alert-dialog",children:f.jsx(koe,{scope:n,cancelRef:l,children:f.jsxs(RC,{role:"alertdialog",...o,...s,ref:a,onOpenAutoFocus:Ne(s.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[f.jsx(dM,{children:r}),f.jsx(Poe,{contentRef:i})]})})})});t3.displayName=Cc;var n3="AlertDialogTitle",r3=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=qo(n);return f.jsx(jC,{...s,...r,ref:t})});r3.displayName=n3;var s3="AlertDialogDescription",o3=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=qo(n);return f.jsx(OC,{...s,...r,ref:t})});o3.displayName=s3;var Noe="AlertDialogAction",i3=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=qo(n);return f.jsx(MC,{...s,...r,ref:t})});i3.displayName=Noe;var a3="AlertDialogCancel",l3=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=_oe(a3,n),o=qo(n),i=Ut(t,s);return f.jsx(MC,{...o,...r,ref:i})});l3.displayName=a3;var Poe=({contentRef:e})=>{const t=`\`${Cc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Cc}\` by passing a \`${s3}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Cc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Aoe=Q4,c3=Z4,u3=e3,d3=t3,f3=i3,h3=l3,p3=r3,m3=o3;const Toe=Aoe,g3=({className:e,...t})=>f.jsx(c3,{className:Le(e),...t});g3.displayName=c3.displayName;const y3=y.forwardRef(({className:e,...t},n)=>f.jsx(u3,{className:Le("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));y3.displayName=u3.displayName;const v3=y.forwardRef(({className:e,...t},n)=>f.jsxs(g3,{children:[f.jsx(y3,{}),f.jsx(d3,{ref:n,className:Le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));v3.displayName=d3.displayName;const x3=({className:e,...t})=>f.jsx("div",{className:Le("flex flex-col space-y-2 text-center sm:text-left",e),...t});x3.displayName="AlertDialogHeader";const w3=({className:e,...t})=>f.jsx("div",{className:Le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});w3.displayName="AlertDialogFooter";const b3=y.forwardRef(({className:e,...t},n)=>f.jsx(p3,{ref:n,className:Le("text-lg font-semibold",e),...t}));b3.displayName=p3.displayName;const S3=y.forwardRef(({className:e,...t},n)=>f.jsx(m3,{ref:n,className:Le("text-sm text-muted-foreground",e),...t}));S3.displayName=m3.displayName;const C3=y.forwardRef(({className:e,...t},n)=>f.jsx(f3,{ref:n,className:Le(rC(),e),...t}));C3.displayName=f3.displayName;const E3=y.forwardRef(({className:e,...t},n)=>f.jsx(h3,{ref:n,className:Le(rC({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));E3.displayName=h3.displayName;function Roe({isOpen:e,onClose:t,onAddSection:n,onRenameSection:r,onDeleteSection:s,editingSection:o}){const[i,a]=y.useState(""),[l,c]=y.useState(null),[u,d]=y.useState(!1),h=!!o;y.useEffect(()=>{a(h&&o?o.title:"")},[h,o,e]);const p=g=>{if(g.preventDefault(),!i.trim()){c("Section name is required");return}h&&r&&o?r(o.id,i.trim()):n(i.trim()),c(null),t()},m=()=>{h&&s&&o&&(s(o.id),d(!1),t())};return f.jsxs(f.Fragment,{children:[f.jsx(Et,{open:e,onOpenChange:t,children:f.jsxs(yt,{className:"sm:max-w-[425px]",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:h?"Edit Section":"Add New Section"}),f.jsx(kt,{children:h?"Update the name of this custom section.":"Create a new custom section for your PRD document."})]}),f.jsxs("form",{onSubmit:p,className:"space-y-4 pt-2",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{htmlFor:"section-name",className:"text-sm font-medium text-gray-700",children:"Section Name"}),f.jsx(At,{id:"section-name",value:i,onChange:g=>{a(g.target.value),l&&c(null)},placeholder:"e.g., Competitive Analysis",autoFocus:!0}),l&&f.jsx("p",{className:"text-red-500 text-sm",children:l})]}),f.jsxs(Ht,{className:"pt-2 flex-col sm:flex-row gap-2",children:[h&&s&&f.jsxs(K,{type:"button",variant:"destructive",className:"sm:mr-auto",onClick:()=>d(!0),children:[f.jsx(sa,{className:"h-4 w-4 mr-2"}),"Delete Section"]}),f.jsxs("div",{className:"flex gap-2 sm:ml-auto",children:[f.jsx(K,{variant:"outline",type:"button",onClick:t,children:"Cancel"}),f.jsx(K,{type:"submit",variant:"secondary",children:h?"Update Section":"Add Section"})]})]})]})]})}),f.jsx(Toe,{open:u,onOpenChange:d,children:f.jsxs(v3,{children:[f.jsxs(x3,{children:[f.jsx(b3,{children:"Delete Section"}),f.jsxs(S3,{children:['Are you sure you want to delete the "',o==null?void 0:o.title,'" section? This action cannot be undone and all content in this section will be permanently lost.']})]}),f.jsxs(w3,{children:[f.jsx(E3,{children:"Cancel"}),f.jsx(C3,{onClick:m,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})})]})}function joe({productId:e,onPrdParsed:t}){const[n,r]=y.useState(!1),[s,o]=y.useState(""),[i,a]=y.useState(!1),[l,c]=y.useState(null),u=async()=>{var d,h,p;if(!s.trim()){c("Please paste your PRD content first");return}try{a(!0),c(null);const m={user_id:(d=(await G.auth.getUser()).data.user)==null?void 0:d.id,request_type:"parse_prd",model:"gpt-4o-mini",request_payload:{prd_content:s.substring(0,500)+"..."}},g=await pu.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:`You are a PRD parser that extracts structured content from PRD documents. 
            Parse the provided PRD text and extract content for the following standard sections:
            1. Problem
            2. Solution
            3. Target Audience
            4. Features (with name, description, priority, and implementation_status)
            5. Technology Stack
            6. Success Metrics & KPIs
            
            Additionally, identify any other sections in the PRD that don't fit into these standard categories and extract them as custom sections.
            
            Return the parsed content as a JSON object with the following structure:
            {
              "problem": "...",
              "solution": "...",
              "target_audience": "...",
              "features": [
                {
                  "name": "Feature name",
                  "description": "Feature description",
                  "priority": "must-have" | "nice-to-have" | "not-prioritized",
                  "implementation_status": "not_started"
                }
              ],
              "tech_stack": "...",
              "success_metrics": "...",
              "custom_sections": {
                "custom_section_name_1": "section content 1",
                "custom_section_name_2": "section content 2"
              }
            }
            
            If a section is not found in the PRD, leave it as an empty string or empty array for features.
            For features, always set implementation_status to "not_started" unless explicitly stated otherwise.
            For priority, ONLY use one of these exact values: "must-have", "nice-to-have", or "not-prioritized".
            For custom section names, prefix with "custom_" and convert to lowercase with underscores (e.g., "custom_competitive_analysis").
            
            IMPORTANT: For feature priority, you MUST ONLY use one of these three exact values: "must-have", "nice-to-have", or "not-prioritized".
            Any other value will cause a database error. Do not use variations like "must have" (with a space) or "mustHave" (camelCase).
            
            For implementation_status, you MUST ONLY use one of these exact values: "not_started", "in_progress", "completed", "blocked", "deferred".`},{role:"user",content:s}],temperature:.3,response_format:{type:"json_object"}});await G.from("openai_logs").insert({...m,response_payload:g.choices[0].message.content,input_tokens:(h=g.usage)==null?void 0:h.prompt_tokens,output_tokens:(p=g.usage)==null?void 0:p.completion_tokens});const v=JSON.parse(g.choices[0].message.content||"{}");v.features&&Array.isArray(v.features)&&(v.features=v.features.map(x=>{var S,C;let w="not-prioritized";x.priority==="must-have"||x.priority==="nice-to-have"||x.priority==="not-prioritized"?w=x.priority:(S=x.priority)!=null&&S.includes("must")?w="must-have":(C=x.priority)!=null&&C.includes("nice")&&(w="nice-to-have");let b="not_started";return["not_started","in_progress","completed","blocked","deferred"].includes(x.implementation_status)&&(b=x.implementation_status),{...x,priority:w,implementation_status:b}})),r(!1),t(v)}catch(m){console.error("Error parsing PRD:",m),m instanceof wr?c(m.message):c("Failed to parse PRD. Please try again.")}finally{a(!1)}};return f.jsxs(Et,{open:n,onOpenChange:r,children:[f.jsx(bD,{asChild:!0,children:f.jsxs(K,{variant:"outline",className:"flex items-center gap-2",children:[f.jsx(tC,{className:"w-4 h-4"}),"Upload PRD"]})}),f.jsxs(yt,{className:"sm:max-w-[600px]",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Upload PRD"}),f.jsx(kt,{children:"Paste your PRD content below. We'll automatically parse it into the appropriate sections."})]}),l&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg flex items-center gap-2",children:[f.jsx(vn,{className:"w-4 h-4"}),f.jsx("p",{children:l})]}),f.jsx("div",{className:"space-y-4",children:f.jsx(Zt,{value:s,onChange:d=>o(d.target.value),placeholder:"Paste your PRD content here...",className:"min-h-[300px]"})}),f.jsxs(Ht,{children:[f.jsx(K,{variant:"outline",onClick:()=>r(!1),disabled:i,children:"Cancel"}),f.jsx(K,{onClick:u,disabled:i||!s.trim(),className:"flex items-center gap-2",children:i?f.jsxs(f.Fragment,{children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Parsing..."]}):f.jsxs(f.Fragment,{children:[f.jsx(Si,{className:"w-4 h-4"}),"Parse PRD"]})})]})]})]})}const cT=[{id:"features",title:"Features",features:[]}];function Ooe(){const e=bn();Vo();const{user:t}=qn(),{setCurrentProduct:n}=ZS(),{productSlug:r}=ao(),[s,o]=y.useState(!0),[i,a]=y.useState(null),[l,c]=y.useState("overview"),[u,d]=y.useState(null),[h,p]=y.useState(null),[m,g]=y.useState(null),[v,x]=y.useState(null);y.useState(!1);const[w,b]=y.useState(!1),[S,C]=y.useState(null),[E,k]=y.useState("saved"),[N,P]=y.useState(null),T=y.useCallback(qp(async(I,H)=>{try{k("saving");const{error:V}=await G.from("products").update(H).eq("id",I);if(V)throw V;if(H.name){const{data:W}=await G.from("products").select("slug").eq("id",I).single();W&&e(`/product/${W.slug}/prd`,{replace:!0})}k("saved")}catch(V){console.error("Error updating product details:",V),k("error"),P("Failed to save product details")}},1e3),[]),R=y.useCallback(qp(async(I,H)=>{try{k("saving");const{error:V}=await G.from("prds").update(H).eq("id",I);if(V)throw V;k("saved")}catch(V){console.error("Error updating PRD content:",V),k("error"),P("Failed to save PRD content")}},1e3),[]),L=y.useCallback(qp(async(I,H)=>{try{const{error:V}=await G.from("customer_profiles").update(H).eq("id",I);if(V)throw V}catch(V){console.error("Error saving profile changes:",V)}},1e3),[]);y.useEffect(()=>()=>{L.cancel()},[L]);const[z,_]=y.useState([{id:"overview",title:"Overview",icon:f.jsx(Si,{className:"w-5 h-5"}),content:"",placeholder:`<h2>Product Overview</h2>
<p>This section provides a high-level overview of the product, including:</p>
<ul>
  <li>Vision statement</li>
  <li>Key objectives</li>
  <li>Market opportunity</li>
  <li>Strategic alignment</li>
</ul>`},{id:"problem",title:"Problem",icon:f.jsx(RN,{className:"w-5 h-5"}),content:"",placeholder:`<h2>Problem Statement</h2>
<p>Clearly define the problem your product solves:</p>
<ul>
  <li>What are the current pain points?</li>
  <li>What are the existing solutions?</li>
  <li>Why is a new solution needed?</li>
</ul>`},{id:"solution",title:"Solution",icon:f.jsx(RN,{className:"w-5 h-5"}),content:"",placeholder:`<h2>Solution</h2>
<p>Describe how your product solves these problems:</p>
<ul>
  <li>Key differentiators</li>
  <li>Unique value proposition</li>
  <li>Competitive advantages</li>
</ul>`},{id:"target_audience",title:"Target Audience",icon:f.jsx(vb,{className:"w-5 h-5"}),content:"",placeholder:`<h2>Target Audience</h2>
<p>Define your target users and stakeholders:</p>
<ul>
  <li>Primary user personas</li>
  <li>Secondary user personas</li>
  <li>Market segments</li>
  <li>User demographics</li>
  <li>User behaviors and needs</li>
</ul>`},{id:"features",title:"Features",icon:f.jsx(x7,{className:"w-5 h-5"}),content:JSON.stringify(cT),placeholder:JSON.stringify(cT)},{id:"tech_stack",title:"Technology Stack",icon:f.jsx(m7,{className:"w-5 h-5"}),content:"",placeholder:`<h2>Technology Stack</h2>
<h3>Frontend Technologies</h3>
<ul>
  <li>Framework: React with TypeScript</li>
  <li>State Management: React Context</li>
  <li>Styling: Tailwind CSS</li>
</ul>

<h3>Backend Technologies</h3>
<ul>
  <li>Database: Supabase (PostgreSQL)</li>
  <li>Authentication: Supabase Auth</li>
  <li>API: Supabase REST API</li>
</ul>

<h3>Development Tools</h3>
<ul>
  <li>Version Control: Git</li>
  <li>Package Manager: npm</li>
  <li>Build Tool: Vite</li>
</ul>

<h3>Third-party Services</h3>
<ul>
  <li>OpenAI API for AI features</li>
  <li>Analytics: TBD</li>
</ul>

<h3>Deployment</h3>
<ul>
  <li>Hosting: Netlify</li>
  <li>CI/CD: GitHub Actions</li>
</ul>`},{id:"success_metrics",title:"Success Metrics & KPIs",icon:f.jsx($W,{className:"w-5 h-5"}),content:"",placeholder:`<h2>Success Metrics & KPIs</h2>

<h3>User Engagement Metrics</h3>
<ul>
  <li>Daily/Monthly Active Users (DAU/MAU)</li>
  <li>Session Duration</li>
  <li>Feature Adoption Rate</li>
  <li>User Retention Rate</li>
</ul>

<h3>Business Metrics</h3>
<ul>
  <li>Customer Acquisition Cost (CAC)</li>
  <li>Customer Lifetime Value (CLV)</li>
  <li>Monthly Recurring Revenue (MRR)</li>
  <li>Churn Rate</li>
</ul>

<h3>Technical Performance Metrics</h3>
<ul>
  <li>Page Load Time</li>
  <li>API Response Time</li>
  <li>Error Rate</li>
  <li>System Uptime</li>
</ul>

<h3>Success Criteria</h3>
<ul>
  <li>Achieve X% user growth within Y months</li>
  <li>Maintain Z% user retention rate</li>
  <li>Reach break-even point by Q4 2025</li>
</ul>`}]);y.useEffect(()=>{async function I(){if(!r){a("Invalid product URL"),o(!1);return}try{o(!0),a(null);const{data:H,error:V}=await G.from("products").select("*, users!inner(*)").eq("slug",r).eq("users.id",t==null?void 0:t.id).single();if(V||!H){a("Product not found or you do not have access to it"),o(!1);return}p(H),n(H);const{data:W,error:Y}=await G.from("prds").select("*").eq("product_id",H.id).single();if(Y||!W){a("PRD data not found"),o(!1);return}g(W);const{data:Z,error:ae}=await G.from("customer_profiles").select("*").eq("product_id",H.id).eq("is_selected",!0).maybeSingle();Z&&x(Z);const se=[...z],re=W.custom_sections||{};Object.entries(re).forEach(([me,Ce])=>{const U=me.replace("custom_","").split("_").map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" ");se.push({id:me,title:U,icon:f.jsx(Si,{className:"w-5 h-5"}),content:Ce||"",placeholder:`<h2>${U}</h2>
<p>Add content for this custom section here...</p>`,isCustom:!0})});const De=se.map(me=>{if(!me.isCustom){const Ce=W[me.id];return{...me,content:Ce||me.placeholder}}return me});_(De)}catch(H){console.error("Error loading product data:",H),a("Failed to load product data. Please try again.")}finally{o(!1)}}I()},[r,t==null?void 0:t.id]),y.useEffect(()=>{if(!(h!=null&&h.id))return;const I=G.channel("features-changes").on("postgres_changes",{event:"*",schema:"public",table:"features",filter:`product_id=eq.${h.id}`},H=>{console.log("Features changed:",H),G.from("features").select("*").eq("product_id",h.id).order("position",{ascending:!0}).then(({data:V,error:W})=>{if(W){console.error("Error fetching updated features:",W);return}_(Y=>Y.map(Z=>Z.id==="features"?{...Z,content:JSON.stringify([{id:"features",title:"Features",features:V||[]}])}:Z))})}).subscribe();return()=>{G.removeChannel(I)}},[h==null?void 0:h.id]);const D=(I,H,V)=>{if(!(h!=null&&h.id)||!m)return;let W=V;V.startsWith('"')&&V.endsWith('"')&&(W=V.slice(1,-1)),W=W.replace(/\\n/g,`
`),_(Z=>Z.map(ae=>ae.id===I?ae.subsections&&H?{...ae,subsections:ae.subsections.map(se=>se.id===H?{...se,content:W}:se)}:{...ae,content:W}:ae));let Y={};if(H)Y[H]=W;else if(I.startsWith("custom_")){const Z={...m.custom_sections||{}};Z[I]=W,Y.custom_sections=Z}else Y[I]=W;g(Z=>Z?{...Z,...Y}:null),R(m.id,Y)};y.useEffect(()=>()=>{T.cancel(),R.cancel()},[T,R]);const O=(I,H)=>{const V=H?`section-${I}-${H}`:`section-${I}`,W=document.getElementById(V);W&&W.scrollIntoView({behavior:"smooth"}),c(I),d(H||null)},F=I=>{if(!m)return;const H=`custom_${I.toLowerCase().replace(/\s+/g,"_")}`;if(z.some(Z=>Z.id===H))return;const V={id:H,title:I,icon:f.jsx(Si,{className:"w-5 h-5"}),content:"",placeholder:`<h2>${I}</h2>
<p>Add content for this custom section here...</p>`,isCustom:!0};_(Z=>[...Z,V]);const W={...m.custom_sections||{}};W[H]="";const Y={custom_sections:W};g(Z=>Z?{...Z,...Y}:null),R(m.id,Y),setTimeout(()=>{O(H)},100)},j=(I,H)=>{C({id:I,title:H}),b(!0)},A=(I,H)=>{if(!m)return;const V=z.find(se=>se.id===I);if(!V||!V.isCustom)return;const W=`custom_${H.toLowerCase().replace(/\s+/g,"_")}`;if(W!==I&&z.some(se=>se.id===W))return;const Y={...m.custom_sections||{}},Z=Y[I]||"";delete Y[I],Y[W]=Z;const ae={custom_sections:Y};g(se=>se?{...se,custom_sections:Y}:null),R(m.id,ae),_(se=>se.map(re=>re.id===I?{...re,id:W,title:H}:re)),l===I&&c(W),C(null)},$=I=>{if(!m)return;const H=z.find(Y=>Y.id===I);if(!H||!H.isCustom)return;const V={...m.custom_sections||{}};delete V[I];const W={custom_sections:V};g(Y=>Y?{...Y,custom_sections:V}:null),R(m.id,W),_(Y=>Y.filter(Z=>Z.id!==I)),l===I&&c("overview")},B=I=>{if(!m||!h)return;const H={};if(I.problem&&(H.problem=I.problem),I.solution&&(H.solution=I.solution),I.target_audience&&(H.target_audience=I.target_audience),I.tech_stack&&(H.tech_stack=I.tech_stack),I.success_metrics&&(H.success_metrics=I.success_metrics),I.custom_sections&&Object.keys(I.custom_sections).length>0){const W={...m.custom_sections||{},...I.custom_sections};H.custom_sections=W;const Y=[];Object.entries(I.custom_sections).forEach(([Z,ae])=>{if(z.some(re=>re.id===Z))return;const se=Z.replace("custom_","").split("_").map(re=>re.charAt(0).toUpperCase()+re.slice(1)).join(" ");Y.push({id:Z,title:se,icon:f.jsx(Si,{className:"w-5 h-5"}),content:ae||"",placeholder:`<h2>${se}</h2>
<p>Add content for this custom section here...</p>`,isCustom:!0})}),Y.length>0&&_(Z=>[...Z,...Y])}if(g(V=>V?{...V,...H}:null),R(m.id,H),_(V=>V.map(W=>W.id==="problem"&&I.problem?{...W,content:I.problem}:W.id==="solution"&&I.solution?{...W,content:I.solution}:W.id==="target_audience"&&I.target_audience?{...W,content:I.target_audience}:W.id==="tech_stack"&&I.tech_stack?{...W,content:I.tech_stack}:W.id==="success_metrics"&&I.success_metrics?{...W,content:I.success_metrics}:W.isCustom&&I.custom_sections&&I.custom_sections[W.id]?{...W,content:I.custom_sections[W.id]}:W)),I.features&&Array.isArray(I.features)&&I.features.length>0){const V=I.features.map(W=>({product_id:h.id,name:W.name,description:W.description,priority:W.priority||"not-prioritized",implementation_status:W.implementation_status||"not_started",position:0}));G.from("features").insert(V).then(({error:W})=>{W&&console.error("Error inserting features:",W)})}};return s?f.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:f.jsxs("div",{className:"text-center",children:[f.jsx(We,{className:"w-8 h-8 animate-spin text-brand-purple mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading product data..."})]})}):i?f.jsxs("div",{className:"max-w-lg mx-auto text-center py-12",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Page Not Found"}),f.jsx("p",{className:"text-red-600 mb-6",children:i}),f.jsx(K,{onClick:()=>e("/"),variant:"secondary",className:"mx-auto",children:"Go to Dashboard"})]}):f.jsxs("div",{className:"h-[calc(100vh-8rem)]",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("button",{onClick:()=>e("/"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[f.jsx(jy,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),f.jsxs("div",{className:"relative flex items-center gap-2",children:[(h==null?void 0:h.id)&&f.jsx(joe,{productId:h.id,onPrdParsed:B}),f.jsx(jY,{}),f.jsx(OY,{})]})]}),f.jsxs("div",{className:"grid grid-cols-[250px,1fr] gap-6 h-full",children:[f.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 h-full overflow-auto",children:[f.jsx(NJ,{status:E,error:N}),f.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Document Sections"}),f.jsxs("nav",{className:"space-y-2",children:[z.map(I=>f.jsxs("div",{children:[f.jsxs("button",{onClick:()=>O(I.id),className:`w-full flex items-center px-4 py-2 rounded-lg text-left transition-colors ${I.id===l?"bg-brand-purple text-white":"text-gray-700 hover:bg-gray-100"}`,children:[I.icon,f.jsx("span",{className:"ml-3",children:I.title})]}),I.subsections&&f.jsx("div",{className:"ml-6 mt-1 space-y-1",children:I.subsections.map(H=>f.jsx("button",{onClick:()=>O(I.id,H.id),className:`w-full flex items-center px-4 py-1.5 rounded-lg text-left transition-colors text-sm ${I.id===l&&H.id===u?"bg-brand-purple/80 text-white":"text-gray-600 hover:bg-gray-100"}`,children:H.title},H.id))})]},I.id)),f.jsx("div",{className:"pt-2 mt-2 border-t border-gray-200",children:f.jsxs("button",{onClick:()=>{C(null),b(!0)},className:"w-full flex items-center px-4 py-2 rounded-lg text-left transition-colors text-brand-purple hover:bg-gray-100",children:[f.jsx(qi,{className:"w-5 h-5"}),f.jsx("span",{className:"ml-3",children:"Add Section"})]})})]})]}),f.jsx("div",{className:"bg-white rounded-lg shadow-lg h-full overflow-auto",children:f.jsx("div",{className:"section-transition",children:z.map(I=>f.jsx(xoe,{section:I,onContentChange:D,productDetails:h,onRenameSection:j},I.id))})})]}),f.jsx(Roe,{isOpen:w,onClose:()=>{b(!1),C(null)},onAddSection:F,onRenameSection:A,onDeleteSection:$,editingSection:S})]})}function Cn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Cn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var k3={exports:{}},_3={},N3={exports:{}},P3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vc=y;function Moe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ioe=typeof Object.is=="function"?Object.is:Moe,Doe=Vc.useState,$oe=Vc.useEffect,Loe=Vc.useLayoutEffect,Foe=Vc.useDebugValue;function Boe(e,t){var n=t(),r=Doe({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return Loe(function(){s.value=n,s.getSnapshot=t,$x(s)&&o({inst:s})},[e,n,t]),$oe(function(){return $x(s)&&o({inst:s}),e(function(){$x(s)&&o({inst:s})})},[e]),Foe(n),n}function $x(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ioe(e,n)}catch{return!0}}function zoe(e,t){return t()}var Uoe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?zoe:Boe;P3.useSyncExternalStore=Vc.useSyncExternalStore!==void 0?Vc.useSyncExternalStore:Uoe;N3.exports=P3;var A3=N3.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv=y,Hoe=A3;function Voe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Woe=typeof Object.is=="function"?Object.is:Voe,qoe=Hoe.useSyncExternalStore,Goe=gv.useRef,Koe=gv.useEffect,Joe=gv.useMemo,Yoe=gv.useDebugValue;_3.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var o=Goe(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=Joe(function(){function l(p){if(!c){if(c=!0,u=p,p=r(p),s!==void 0&&i.hasValue){var m=i.value;if(s(m,p))return d=m}return d=p}if(m=d,Woe(u,p))return m;var g=r(p);return s!==void 0&&s(m,g)?(u=p,m):(u=p,d=g)}var c=!1,u,d,h=n===void 0?null:n;return[function(){return l(t())},h===null?void 0:function(){return l(h())}]},[t,n,r,s]);var a=qoe(e,o[0],o[1]);return Koe(function(){i.hasValue=!0,i.value=a},[a]),Yoe(a),a};k3.exports=_3;var Xoe=k3.exports;const Qoe=zo(Xoe),Zoe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_OPENAI_API_KEY:"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",VITE_STRIPE_PUBLISHABLE_KEY:"pk_live_51Qx9ApGrxtYDuhPGnvjvKGoruG7VZj18gFUv2x5snirALCUyf4DQfiigbFLYc1AhjgIHzD68C4d6jIpnggNLSlXR00sZj6cmh4",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxtb21mZGRteXBhbWVvZmZuYmNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2MDI5NzQsImV4cCI6MjA1NjE3ODk3NH0.PJ0tNyNIFQiH8qnDKoyVlmgHDfQ4SFAS_ND6TfIXlzc",VITE_SUPABASE_URL:"https://lmomfddmypameoffnbcq.supabase.co"},uT=e=>{let t;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const p=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(m=>m(t,p))}},s=()=>t,l={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Zoe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,s,l);return l},eie=e=>e?uT(e):uT,{useDebugValue:tie}=M,{useSyncExternalStoreWithSelector:nie}=Qoe,rie=e=>e;function T3(e,t=rie,n){const r=nie(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return tie(r),r}const dT=(e,t)=>{const n=eie(e),r=(s,o=t)=>T3(n,s,o);return Object.assign(r,n),r},sie=(e,t)=>e?dT(e,t):dT;function sn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var oie={value:()=>{}};function yv(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new om(n)}function om(e){this._=e}function iie(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}om.prototype=yv.prototype={constructor:om,on:function(e,t){var n=this._,r=iie(e+"",n),s,o=-1,i=r.length;if(arguments.length<2){for(;++o<i;)if((s=(e=r[o]).type)&&(s=aie(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<i;)if(s=(e=r[o]).type)n[s]=fT(n[s],e.name,t);else if(t==null)for(s in n)n[s]=fT(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new om(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,o=r.length;s<o;++s)r[s].value.apply(t,n)}};function aie(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function fT(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=oie,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var k1="http://www.w3.org/1999/xhtml";const hT={svg:"http://www.w3.org/2000/svg",xhtml:k1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vv(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),hT.hasOwnProperty(t)?{space:hT[t],local:e}:e}function lie(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===k1&&t.documentElement.namespaceURI===k1?t.createElement(e):t.createElementNS(n,e)}}function cie(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function R3(e){var t=vv(e);return(t.local?cie:lie)(t)}function uie(){}function GE(e){return e==null?uie:function(){return this.querySelector(e)}}function die(e){typeof e!="function"&&(e=GE(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],i=o.length,a=r[s]=new Array(i),l,c,u=0;u<i;++u)(l=o[u])&&(c=e.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Nr(r,this._parents)}function fie(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function hie(){return[]}function j3(e){return e==null?hie:function(){return this.querySelectorAll(e)}}function pie(e){return function(){return fie(e.apply(this,arguments))}}function mie(e){typeof e=="function"?e=pie(e):e=j3(e);for(var t=this._groups,n=t.length,r=[],s=[],o=0;o<n;++o)for(var i=t[o],a=i.length,l,c=0;c<a;++c)(l=i[c])&&(r.push(e.call(l,l.__data__,c,i)),s.push(l));return new Nr(r,s)}function O3(e){return function(){return this.matches(e)}}function M3(e){return function(t){return t.matches(e)}}var gie=Array.prototype.find;function yie(e){return function(){return gie.call(this.children,e)}}function vie(){return this.firstElementChild}function xie(e){return this.select(e==null?vie:yie(typeof e=="function"?e:M3(e)))}var wie=Array.prototype.filter;function bie(){return Array.from(this.children)}function Sie(e){return function(){return wie.call(this.children,e)}}function Cie(e){return this.selectAll(e==null?bie:Sie(typeof e=="function"?e:M3(e)))}function Eie(e){typeof e!="function"&&(e=O3(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],i=o.length,a=r[s]=[],l,c=0;c<i;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new Nr(r,this._parents)}function I3(e){return new Array(e.length)}function kie(){return new Nr(this._enter||this._groups.map(I3),this._parents)}function qg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}qg.prototype={constructor:qg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _ie(e){return function(){return e}}function Nie(e,t,n,r,s,o){for(var i=0,a,l=t.length,c=o.length;i<c;++i)(a=t[i])?(a.__data__=o[i],r[i]=a):n[i]=new qg(e,o[i]);for(;i<l;++i)(a=t[i])&&(s[i]=a)}function Pie(e,t,n,r,s,o,i){var a,l,c=new Map,u=t.length,d=o.length,h=new Array(u),p;for(a=0;a<u;++a)(l=t[a])&&(h[a]=p=i.call(l,l.__data__,a,t)+"",c.has(p)?s[a]=l:c.set(p,l));for(a=0;a<d;++a)p=i.call(e,o[a],a,o)+"",(l=c.get(p))?(r[a]=l,l.__data__=o[a],c.delete(p)):n[a]=new qg(e,o[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(h[a])===l&&(s[a]=l)}function Aie(e){return e.__data__}function Tie(e,t){if(!arguments.length)return Array.from(this,Aie);var n=t?Pie:Nie,r=this._parents,s=this._groups;typeof e!="function"&&(e=_ie(e));for(var o=s.length,i=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],d=s[c],h=d.length,p=Rie(e.call(u,u&&u.__data__,c,r)),m=p.length,g=a[c]=new Array(m),v=i[c]=new Array(m),x=l[c]=new Array(h);n(u,d,g,v,x,p,t);for(var w=0,b=0,S,C;w<m;++w)if(S=g[w]){for(w>=b&&(b=w+1);!(C=v[b])&&++b<m;);S._next=C||null}}return i=new Nr(i,r),i._enter=a,i._exit=l,i}function Rie(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jie(){return new Nr(this._exit||this._groups.map(I3),this._parents)}function Oie(e,t,n){var r=this.enter(),s=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function Mie(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,o=r.length,i=Math.min(s,o),a=new Array(s),l=0;l<i;++l)for(var c=n[l],u=r[l],d=c.length,h=a[l]=new Array(d),p,m=0;m<d;++m)(p=c[m]||u[m])&&(h[m]=p);for(;l<s;++l)a[l]=n[l];return new Nr(a,this._parents)}function Iie(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,o=r[s],i;--s>=0;)(i=r[s])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function Die(e){e||(e=$ie);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var i=n[o],a=i.length,l=s[o]=new Array(a),c,u=0;u<a;++u)(c=i[u])&&(l[u]=c);l.sort(t)}return new Nr(s,this._parents).order()}function $ie(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Lie(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Fie(){return Array.from(this)}function Bie(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length;s<o;++s){var i=r[s];if(i)return i}return null}function zie(){let e=0;for(const t of this)++e;return e}function Uie(){return!this.node()}function Hie(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],o=0,i=s.length,a;o<i;++o)(a=s[o])&&e.call(a,a.__data__,o,s);return this}function Vie(e){return function(){this.removeAttribute(e)}}function Wie(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qie(e,t){return function(){this.setAttribute(e,t)}}function Gie(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Kie(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Jie(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Yie(e,t){var n=vv(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Wie:Vie:typeof t=="function"?n.local?Jie:Kie:n.local?Gie:qie)(n,t))}function D3(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Xie(e){return function(){this.style.removeProperty(e)}}function Qie(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Zie(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function eae(e,t,n){return arguments.length>1?this.each((t==null?Xie:typeof t=="function"?Zie:Qie)(e,t,n??"")):Wc(this.node(),e)}function Wc(e,t){return e.style.getPropertyValue(t)||D3(e).getComputedStyle(e,null).getPropertyValue(t)}function tae(e){return function(){delete this[e]}}function nae(e,t){return function(){this[e]=t}}function rae(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function sae(e,t){return arguments.length>1?this.each((t==null?tae:typeof t=="function"?rae:nae)(e,t)):this.node()[e]}function $3(e){return e.trim().split(/^|\s+/)}function KE(e){return e.classList||new L3(e)}function L3(e){this._node=e,this._names=$3(e.getAttribute("class")||"")}L3.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function F3(e,t){for(var n=KE(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function B3(e,t){for(var n=KE(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function oae(e){return function(){F3(this,e)}}function iae(e){return function(){B3(this,e)}}function aae(e,t){return function(){(t.apply(this,arguments)?F3:B3)(this,e)}}function lae(e,t){var n=$3(e+"");if(arguments.length<2){for(var r=KE(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?aae:t?oae:iae)(n,t))}function cae(){this.textContent=""}function uae(e){return function(){this.textContent=e}}function dae(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function fae(e){return arguments.length?this.each(e==null?cae:(typeof e=="function"?dae:uae)(e)):this.node().textContent}function hae(){this.innerHTML=""}function pae(e){return function(){this.innerHTML=e}}function mae(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function gae(e){return arguments.length?this.each(e==null?hae:(typeof e=="function"?mae:pae)(e)):this.node().innerHTML}function yae(){this.nextSibling&&this.parentNode.appendChild(this)}function vae(){return this.each(yae)}function xae(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wae(){return this.each(xae)}function bae(e){var t=typeof e=="function"?e:R3(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Sae(){return null}function Cae(e,t){var n=typeof e=="function"?e:R3(e),r=t==null?Sae:typeof t=="function"?t:GE(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Eae(){var e=this.parentNode;e&&e.removeChild(this)}function kae(){return this.each(Eae)}function _ae(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Nae(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pae(e){return this.select(e?Nae:_ae)}function Aae(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Tae(e){return function(t){e.call(this,t,this.__data__)}}function Rae(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function jae(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,o;n<s;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Oae(e,t,n){return function(){var r=this.__on,s,o=Tae(t);if(r){for(var i=0,a=r.length;i<a;++i)if((s=r[i]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=t;return}}this.addEventListener(e.type,o,n),s={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(s):this.__on=[s]}}function Mae(e,t,n){var r=Rae(e+""),s,o=r.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(s=0,u=a[l];s<o;++s)if((i=r[s]).type===u.type&&i.name===u.name)return u.value}return}for(a=t?Oae:jae,s=0;s<o;++s)this.each(a(r[s],t,n));return this}function z3(e,t,n){var r=D3(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function Iae(e,t){return function(){return z3(this,e,t)}}function Dae(e,t){return function(){return z3(this,e,t.apply(this,arguments))}}function $ae(e,t){return this.each((typeof t=="function"?Dae:Iae)(e,t))}function*Lae(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length,i;s<o;++s)(i=r[s])&&(yield i)}var U3=[null];function Nr(e,t){this._groups=e,this._parents=t}function gh(){return new Nr([[document.documentElement]],U3)}function Fae(){return this}Nr.prototype=gh.prototype={constructor:Nr,select:die,selectAll:mie,selectChild:xie,selectChildren:Cie,filter:Eie,data:Tie,enter:kie,exit:jie,join:Oie,merge:Mie,selection:Fae,order:Iie,sort:Die,call:Lie,nodes:Fie,node:Bie,size:zie,empty:Uie,each:Hie,attr:Yie,style:eae,property:sae,classed:lae,text:fae,html:gae,raise:vae,lower:wae,append:bae,insert:Cae,remove:kae,clone:Pae,datum:Aae,on:Mae,dispatch:$ae,[Symbol.iterator]:Lae};function qr(e){return typeof e=="string"?new Nr([[document.querySelector(e)]],[document.documentElement]):new Nr([[e]],U3)}function Bae(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ms(e,t){if(e=Bae(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const zae={passive:!1},jf={capture:!0,passive:!1};function Lx(e){e.stopImmediatePropagation()}function Ec(e){e.preventDefault(),e.stopImmediatePropagation()}function H3(e){var t=e.document.documentElement,n=qr(e).on("dragstart.drag",Ec,jf);"onselectstart"in t?n.on("selectstart.drag",Ec,jf):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function V3(e,t){var n=e.document.documentElement,r=qr(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ec,jf),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const mp=e=>()=>e;function _1(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:o,x:i,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}_1.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Uae(e){return!e.ctrlKey&&!e.button}function Hae(){return this.parentNode}function Vae(e,t){return t??{x:e.x,y:e.y}}function Wae(){return navigator.maxTouchPoints||"ontouchstart"in this}function qae(){var e=Uae,t=Hae,n=Vae,r=Wae,s={},o=yv("start","drag","end"),i=0,a,l,c,u,d=0;function h(S){S.on("mousedown.drag",p).filter(r).on("touchstart.drag",v).on("touchmove.drag",x,zae).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(S,C){if(!(u||!e.call(this,S,C))){var E=b(this,t.call(this,S,C),S,C,"mouse");E&&(qr(S.view).on("mousemove.drag",m,jf).on("mouseup.drag",g,jf),H3(S.view),Lx(S),c=!1,a=S.clientX,l=S.clientY,E("start",S))}}function m(S){if(Ec(S),!c){var C=S.clientX-a,E=S.clientY-l;c=C*C+E*E>d}s.mouse("drag",S)}function g(S){qr(S.view).on("mousemove.drag mouseup.drag",null),V3(S.view,c),Ec(S),s.mouse("end",S)}function v(S,C){if(e.call(this,S,C)){var E=S.changedTouches,k=t.call(this,S,C),N=E.length,P,T;for(P=0;P<N;++P)(T=b(this,k,S,C,E[P].identifier,E[P]))&&(Lx(S),T("start",S,E[P]))}}function x(S){var C=S.changedTouches,E=C.length,k,N;for(k=0;k<E;++k)(N=s[C[k].identifier])&&(Ec(S),N("drag",S,C[k]))}function w(S){var C=S.changedTouches,E=C.length,k,N;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),k=0;k<E;++k)(N=s[C[k].identifier])&&(Lx(S),N("end",S,C[k]))}function b(S,C,E,k,N,P){var T=o.copy(),R=ms(P||E,C),L,z,_;if((_=n.call(S,new _1("beforestart",{sourceEvent:E,target:h,identifier:N,active:i,x:R[0],y:R[1],dx:0,dy:0,dispatch:T}),k))!=null)return L=_.x-R[0]||0,z=_.y-R[1]||0,function D(O,F,j){var A=R,$;switch(O){case"start":s[N]=D,$=i++;break;case"end":delete s[N],--i;case"drag":R=ms(j||F,C),$=i;break}T.call(O,S,new _1(O,{sourceEvent:F,subject:_,target:h,identifier:N,active:$,x:R[0]+L,y:R[1]+z,dx:R[0]-A[0],dy:R[1]-A[1],dispatch:T}),k)}}return h.filter=function(S){return arguments.length?(e=typeof S=="function"?S:mp(!!S),h):e},h.container=function(S){return arguments.length?(t=typeof S=="function"?S:mp(S),h):t},h.subject=function(S){return arguments.length?(n=typeof S=="function"?S:mp(S),h):n},h.touchable=function(S){return arguments.length?(r=typeof S=="function"?S:mp(!!S),h):r},h.on=function(){var S=o.on.apply(o,arguments);return S===o?h:S},h.clickDistance=function(S){return arguments.length?(d=(S=+S)*S,h):Math.sqrt(d)},h}function JE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function W3(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function yh(){}var Of=.7,Gg=1/Of,kc="\\s*([+-]?\\d+)\\s*",Mf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",no="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gae=/^#([0-9a-f]{3,8})$/,Kae=new RegExp(`^rgb\\(${kc},${kc},${kc}\\)$`),Jae=new RegExp(`^rgb\\(${no},${no},${no}\\)$`),Yae=new RegExp(`^rgba\\(${kc},${kc},${kc},${Mf}\\)$`),Xae=new RegExp(`^rgba\\(${no},${no},${no},${Mf}\\)$`),Qae=new RegExp(`^hsl\\(${Mf},${no},${no}\\)$`),Zae=new RegExp(`^hsla\\(${Mf},${no},${no},${Mf}\\)$`),pT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};JE(yh,If,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:mT,formatHex:mT,formatHex8:ele,formatHsl:tle,formatRgb:gT,toString:gT});function mT(){return this.rgb().formatHex()}function ele(){return this.rgb().formatHex8()}function tle(){return q3(this).formatHsl()}function gT(){return this.rgb().formatRgb()}function If(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Gae.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?yT(t):n===3?new sr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?gp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?gp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Kae.exec(e))?new sr(t[1],t[2],t[3],1):(t=Jae.exec(e))?new sr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Yae.exec(e))?gp(t[1],t[2],t[3],t[4]):(t=Xae.exec(e))?gp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Qae.exec(e))?wT(t[1],t[2]/100,t[3]/100,1):(t=Zae.exec(e))?wT(t[1],t[2]/100,t[3]/100,t[4]):pT.hasOwnProperty(e)?yT(pT[e]):e==="transparent"?new sr(NaN,NaN,NaN,0):null}function yT(e){return new sr(e>>16&255,e>>8&255,e&255,1)}function gp(e,t,n,r){return r<=0&&(e=t=n=NaN),new sr(e,t,n,r)}function nle(e){return e instanceof yh||(e=If(e)),e?(e=e.rgb(),new sr(e.r,e.g,e.b,e.opacity)):new sr}function N1(e,t,n,r){return arguments.length===1?nle(e):new sr(e,t,n,r??1)}function sr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}JE(sr,N1,W3(yh,{brighter(e){return e=e==null?Gg:Math.pow(Gg,e),new sr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Of:Math.pow(Of,e),new sr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new sr(qa(this.r),qa(this.g),qa(this.b),Kg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vT,formatHex:vT,formatHex8:rle,formatRgb:xT,toString:xT}));function vT(){return`#${Ma(this.r)}${Ma(this.g)}${Ma(this.b)}`}function rle(){return`#${Ma(this.r)}${Ma(this.g)}${Ma(this.b)}${Ma((isNaN(this.opacity)?1:this.opacity)*255)}`}function xT(){const e=Kg(this.opacity);return`${e===1?"rgb(":"rgba("}${qa(this.r)}, ${qa(this.g)}, ${qa(this.b)}${e===1?")":`, ${e})`}`}function Kg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ma(e){return e=qa(e),(e<16?"0":"")+e.toString(16)}function wT(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vs(e,t,n,r)}function q3(e){if(e instanceof vs)return new vs(e.h,e.s,e.l,e.opacity);if(e instanceof yh||(e=If(e)),!e)return new vs;if(e instanceof vs)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,a=o-s,l=(o+s)/2;return a?(t===o?i=(n-r)/a+(n<r)*6:n===o?i=(r-t)/a+2:i=(t-n)/a+4,a/=l<.5?o+s:2-o-s,i*=60):a=l>0&&l<1?0:i,new vs(i,a,l,e.opacity)}function sle(e,t,n,r){return arguments.length===1?q3(e):new vs(e,t,n,r??1)}function vs(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}JE(vs,sle,W3(yh,{brighter(e){return e=e==null?Gg:Math.pow(Gg,e),new vs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Of:Math.pow(Of,e),new vs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new sr(Fx(e>=240?e-240:e+120,s,r),Fx(e,s,r),Fx(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new vs(bT(this.h),yp(this.s),yp(this.l),Kg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kg(this.opacity);return`${e===1?"hsl(":"hsla("}${bT(this.h)}, ${yp(this.s)*100}%, ${yp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bT(e){return e=(e||0)%360,e<0?e+360:e}function yp(e){return Math.max(0,Math.min(1,e||0))}function Fx(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const G3=e=>()=>e;function ole(e,t){return function(n){return e+n*t}}function ile(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ale(e){return(e=+e)==1?K3:function(t,n){return n-t?ile(t,n,e):G3(isNaN(t)?n:t)}}function K3(e,t){var n=t-e;return n?ole(e,n):G3(isNaN(e)?t:e)}const ST=function e(t){var n=ale(t);function r(s,o){var i=n((s=N1(s)).r,(o=N1(o)).r),a=n(s.g,o.g),l=n(s.b,o.b),c=K3(s.opacity,o.opacity);return function(u){return s.r=i(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return r.gamma=e,r}(1);function di(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var P1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bx=new RegExp(P1.source,"g");function lle(e){return function(){return e}}function cle(e){return function(t){return e(t)+""}}function ule(e,t){var n=P1.lastIndex=Bx.lastIndex=0,r,s,o,i=-1,a=[],l=[];for(e=e+"",t=t+"";(r=P1.exec(e))&&(s=Bx.exec(t));)(o=s.index)>n&&(o=t.slice(n,o),a[i]?a[i]+=o:a[++i]=o),(r=r[0])===(s=s[0])?a[i]?a[i]+=s:a[++i]=s:(a[++i]=null,l.push({i,x:di(r,s)})),n=Bx.lastIndex;return n<t.length&&(o=t.slice(n),a[i]?a[i]+=o:a[++i]=o),a.length<2?l[0]?cle(l[0].x):lle(t):(t=l.length,function(c){for(var u=0,d;u<t;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}var CT=180/Math.PI,A1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function J3(e,t,n,r,s,o){var i,a,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:s,translateY:o,rotate:Math.atan2(t,e)*CT,skewX:Math.atan(l)*CT,scaleX:i,scaleY:a}}var vp;function dle(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?A1:J3(t.a,t.b,t.c,t.d,t.e,t.f)}function fle(e){return e==null||(vp||(vp=document.createElementNS("http://www.w3.org/2000/svg","g")),vp.setAttribute("transform",e),!(e=vp.transform.baseVal.consolidate()))?A1:(e=e.matrix,J3(e.a,e.b,e.c,e.d,e.e,e.f))}function Y3(e,t,n,r){function s(c){return c.length?c.pop()+" ":""}function o(c,u,d,h,p,m){if(c!==d||u!==h){var g=p.push("translate(",null,t,null,n);m.push({i:g-4,x:di(c,d)},{i:g-2,x:di(u,h)})}else(d||h)&&p.push("translate("+d+t+h+n)}function i(c,u,d,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:d.push(s(d)+"rotate(",null,r)-2,x:di(c,u)})):u&&d.push(s(d)+"rotate("+u+r)}function a(c,u,d,h){c!==u?h.push({i:d.push(s(d)+"skewX(",null,r)-2,x:di(c,u)}):u&&d.push(s(d)+"skewX("+u+r)}function l(c,u,d,h,p,m){if(c!==d||u!==h){var g=p.push(s(p)+"scale(",null,",",null,")");m.push({i:g-4,x:di(c,d)},{i:g-2,x:di(u,h)})}else(d!==1||h!==1)&&p.push(s(p)+"scale("+d+","+h+")")}return function(c,u){var d=[],h=[];return c=e(c),u=e(u),o(c.translateX,c.translateY,u.translateX,u.translateY,d,h),i(c.rotate,u.rotate,d,h),a(c.skewX,u.skewX,d,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,h),c=u=null,function(p){for(var m=-1,g=h.length,v;++m<g;)d[(v=h[m]).i]=v.x(p);return d.join("")}}}var hle=Y3(dle,"px, ","px)","deg)"),ple=Y3(fle,", ",")",")"),mle=1e-12;function ET(e){return((e=Math.exp(e))+1/e)/2}function gle(e){return((e=Math.exp(e))-1/e)/2}function yle(e){return((e=Math.exp(2*e))-1)/(e+1)}const vle=function e(t,n,r){function s(o,i){var a=o[0],l=o[1],c=o[2],u=i[0],d=i[1],h=i[2],p=u-a,m=d-l,g=p*p+m*m,v,x;if(g<mle)x=Math.log(h/c)/t,v=function(k){return[a+k*p,l+k*m,c*Math.exp(t*k*x)]};else{var w=Math.sqrt(g),b=(h*h-c*c+r*g)/(2*c*n*w),S=(h*h-c*c-r*g)/(2*h*n*w),C=Math.log(Math.sqrt(b*b+1)-b),E=Math.log(Math.sqrt(S*S+1)-S);x=(E-C)/t,v=function(k){var N=k*x,P=ET(C),T=c/(n*w)*(P*yle(t*N+C)-gle(C));return[a+T*p,l+T*m,c*P/ET(t*N+C)]}}return v.duration=x*1e3*t/Math.SQRT2,v}return s.rho=function(o){var i=Math.max(.001,+o),a=i*i,l=a*a;return e(i,a,l)},s}(Math.SQRT2,2,4);var qc=0,dd=0,Fu=0,X3=1e3,Jg,fd,Yg=0,al=0,xv=0,Df=typeof performance=="object"&&performance.now?performance:Date,Q3=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function YE(){return al||(Q3(xle),al=Df.now()+xv)}function xle(){al=0}function Xg(){this._call=this._time=this._next=null}Xg.prototype=Z3.prototype={constructor:Xg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?YE():+n)+(t==null?0:+t),!this._next&&fd!==this&&(fd?fd._next=this:Jg=this,fd=this),this._call=e,this._time=n,T1()},stop:function(){this._call&&(this._call=null,this._time=1/0,T1())}};function Z3(e,t,n){var r=new Xg;return r.restart(e,t,n),r}function wle(){YE(),++qc;for(var e=Jg,t;e;)(t=al-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qc}function kT(){al=(Yg=Df.now())+xv,qc=dd=0;try{wle()}finally{qc=0,Sle(),al=0}}function ble(){var e=Df.now(),t=e-Yg;t>X3&&(xv-=t,Yg=e)}function Sle(){for(var e,t=Jg,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Jg=n);fd=e,T1(r)}function T1(e){if(!qc){dd&&(dd=clearTimeout(dd));var t=e-al;t>24?(e<1/0&&(dd=setTimeout(kT,e-Df.now()-xv)),Fu&&(Fu=clearInterval(Fu))):(Fu||(Yg=Df.now(),Fu=setInterval(ble,X3)),qc=1,Q3(kT))}}function _T(e,t,n){var r=new Xg;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var Cle=yv("start","end","cancel","interrupt"),Ele=[],eF=0,NT=1,R1=2,im=3,PT=4,j1=5,am=6;function wv(e,t,n,r,s,o){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;kle(e,n,{name:t,index:r,group:s,on:Cle,tween:Ele,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:eF})}function XE(e,t){var n=Is(e,t);if(n.state>eF)throw new Error("too late; already scheduled");return n}function co(e,t){var n=Is(e,t);if(n.state>im)throw new Error("too late; already running");return n}function Is(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function kle(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=Z3(o,0,n.time);function o(c){n.state=NT,n.timer.restart(i,n.delay,n.time),n.delay<=c&&i(c-n.delay)}function i(c){var u,d,h,p;if(n.state!==NT)return l();for(u in r)if(p=r[u],p.name===n.name){if(p.state===im)return _T(i);p.state===PT?(p.state=am,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[u]):+u<t&&(p.state=am,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[u])}if(_T(function(){n.state===im&&(n.state=PT,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=R1,n.on.call("start",e,e.__data__,n.index,n.group),n.state===R1){for(n.state=im,s=new Array(h=n.tween.length),u=0,d=-1;u<h;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(s[++d]=p);s.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=j1,1),d=-1,h=s.length;++d<h;)s[d].call(e,u);n.state===j1&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=am,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function lm(e,t){var n=e.__transition,r,s,o=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){o=!1;continue}s=r.state>R1&&r.state<j1,r.state=am,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}o&&delete e.__transition}}function _le(e){return this.each(function(){lm(this,e)})}function Nle(e,t){var n,r;return function(){var s=co(this,e),o=s.tween;if(o!==n){r=n=o;for(var i=0,a=r.length;i<a;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}s.tween=r}}function Ple(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=co(this,e),i=o.tween;if(i!==r){s=(r=i).slice();for(var a={name:t,value:n},l=0,c=s.length;l<c;++l)if(s[l].name===t){s[l]=a;break}l===c&&s.push(a)}o.tween=s}}function Ale(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Is(this.node(),n).tween,s=0,o=r.length,i;s<o;++s)if((i=r[s]).name===e)return i.value;return null}return this.each((t==null?Nle:Ple)(n,e,t))}function QE(e,t,n){var r=e._id;return e.each(function(){var s=co(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Is(s,r).value[t]}}function tF(e,t){var n;return(typeof t=="number"?di:t instanceof If?ST:(n=If(t))?(t=n,ST):ule)(e,t)}function Tle(e){return function(){this.removeAttribute(e)}}function Rle(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jle(e,t,n){var r,s=n+"",o;return function(){var i=this.getAttribute(e);return i===s?null:i===r?o:o=t(r=i,n)}}function Ole(e,t,n){var r,s=n+"",o;return function(){var i=this.getAttributeNS(e.space,e.local);return i===s?null:i===r?o:o=t(r=i,n)}}function Mle(e,t,n){var r,s,o;return function(){var i,a=n(this),l;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=a+"",i===l?null:i===r&&l===s?o:(s=l,o=t(r=i,a)))}}function Ile(e,t,n){var r,s,o;return function(){var i,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=a+"",i===l?null:i===r&&l===s?o:(s=l,o=t(r=i,a)))}}function Dle(e,t){var n=vv(e),r=n==="transform"?ple:tF;return this.attrTween(e,typeof t=="function"?(n.local?Ile:Mle)(n,r,QE(this,"attr."+e,t)):t==null?(n.local?Rle:Tle)(n):(n.local?Ole:jle)(n,r,t))}function $le(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Lle(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Fle(e,t){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Lle(e,o)),n}return s._value=t,s}function Ble(e,t){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&$le(e,o)),n}return s._value=t,s}function zle(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=vv(e);return this.tween(n,(r.local?Fle:Ble)(r,t))}function Ule(e,t){return function(){XE(this,e).delay=+t.apply(this,arguments)}}function Hle(e,t){return t=+t,function(){XE(this,e).delay=t}}function Vle(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ule:Hle)(t,e)):Is(this.node(),t).delay}function Wle(e,t){return function(){co(this,e).duration=+t.apply(this,arguments)}}function qle(e,t){return t=+t,function(){co(this,e).duration=t}}function Gle(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Wle:qle)(t,e)):Is(this.node(),t).duration}function Kle(e,t){if(typeof t!="function")throw new Error;return function(){co(this,e).ease=t}}function Jle(e){var t=this._id;return arguments.length?this.each(Kle(t,e)):Is(this.node(),t).ease}function Yle(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;co(this,e).ease=n}}function Xle(e){if(typeof e!="function")throw new Error;return this.each(Yle(this._id,e))}function Qle(e){typeof e!="function"&&(e=O3(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],i=o.length,a=r[s]=[],l,c=0;c<i;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new Fo(r,this._parents,this._name,this._id)}function Zle(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,o=Math.min(r,s),i=new Array(r),a=0;a<o;++a)for(var l=t[a],c=n[a],u=l.length,d=i[a]=new Array(u),h,p=0;p<u;++p)(h=l[p]||c[p])&&(d[p]=h);for(;a<r;++a)i[a]=t[a];return new Fo(i,this._parents,this._name,this._id)}function ece(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function tce(e,t,n){var r,s,o=ece(t)?XE:co;return function(){var i=o(this,e),a=i.on;a!==r&&(s=(r=a).copy()).on(t,n),i.on=s}}function nce(e,t){var n=this._id;return arguments.length<2?Is(this.node(),n).on.on(e):this.each(tce(n,e,t))}function rce(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function sce(){return this.on("end.remove",rce(this._id))}function oce(e){var t=this._name,n=this._id;typeof e!="function"&&(e=GE(e));for(var r=this._groups,s=r.length,o=new Array(s),i=0;i<s;++i)for(var a=r[i],l=a.length,c=o[i]=new Array(l),u,d,h=0;h<l;++h)(u=a[h])&&(d=e.call(u,u.__data__,h,a))&&("__data__"in u&&(d.__data__=u.__data__),c[h]=d,wv(c[h],t,n,h,c,Is(u,n)));return new Fo(o,this._parents,t,n)}function ice(e){var t=this._name,n=this._id;typeof e!="function"&&(e=j3(e));for(var r=this._groups,s=r.length,o=[],i=[],a=0;a<s;++a)for(var l=r[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var h=e.call(u,u.__data__,d,l),p,m=Is(u,n),g=0,v=h.length;g<v;++g)(p=h[g])&&wv(p,t,n,g,h,m);o.push(h),i.push(u)}return new Fo(o,i,t,n)}var ace=gh.prototype.constructor;function lce(){return new ace(this._groups,this._parents)}function cce(e,t){var n,r,s;return function(){var o=Wc(this,e),i=(this.style.removeProperty(e),Wc(this,e));return o===i?null:o===n&&i===r?s:s=t(n=o,r=i)}}function nF(e){return function(){this.style.removeProperty(e)}}function uce(e,t,n){var r,s=n+"",o;return function(){var i=Wc(this,e);return i===s?null:i===r?o:o=t(r=i,n)}}function dce(e,t,n){var r,s,o;return function(){var i=Wc(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Wc(this,e))),i===l?null:i===r&&l===s?o:(s=l,o=t(r=i,a))}}function fce(e,t){var n,r,s,o="style."+t,i="end."+o,a;return function(){var l=co(this,e),c=l.on,u=l.value[o]==null?a||(a=nF(t)):void 0;(c!==n||s!==u)&&(r=(n=c).copy()).on(i,s=u),l.on=r}}function hce(e,t,n){var r=(e+="")=="transform"?hle:tF;return t==null?this.styleTween(e,cce(e,r)).on("end.style."+e,nF(e)):typeof t=="function"?this.styleTween(e,dce(e,r,QE(this,"style."+e,t))).each(fce(this._id,e)):this.styleTween(e,uce(e,r,t),n).on("end.style."+e,null)}function pce(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function mce(e,t,n){var r,s;function o(){var i=t.apply(this,arguments);return i!==s&&(r=(s=i)&&pce(e,i,n)),r}return o._value=t,o}function gce(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,mce(e,t,n??""))}function yce(e){return function(){this.textContent=e}}function vce(e){return function(){var t=e(this);this.textContent=t??""}}function xce(e){return this.tween("text",typeof e=="function"?vce(QE(this,"text",e)):yce(e==null?"":e+""))}function wce(e){return function(t){this.textContent=e.call(this,t)}}function bce(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&wce(s)),t}return r._value=e,r}function Sce(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,bce(e))}function Cce(){for(var e=this._name,t=this._id,n=rF(),r=this._groups,s=r.length,o=0;o<s;++o)for(var i=r[o],a=i.length,l,c=0;c<a;++c)if(l=i[c]){var u=Is(l,t);wv(l,e,n,c,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Fo(r,this._parents,e,n)}function Ece(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(o,i){var a={value:i},l={value:function(){--s===0&&o()}};n.each(function(){var c=co(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),s===0&&o()})}var kce=0;function Fo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function rF(){return++kce}var yo=gh.prototype;Fo.prototype={constructor:Fo,select:oce,selectAll:ice,selectChild:yo.selectChild,selectChildren:yo.selectChildren,filter:Qle,merge:Zle,selection:lce,transition:Cce,call:yo.call,nodes:yo.nodes,node:yo.node,size:yo.size,empty:yo.empty,each:yo.each,on:nce,attr:Dle,attrTween:zle,style:hce,styleTween:gce,text:xce,textTween:Sce,remove:sce,tween:Ale,delay:Vle,duration:Gle,ease:Jle,easeVarying:Xle,end:Ece,[Symbol.iterator]:yo[Symbol.iterator]};function _ce(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Nce={time:null,delay:0,duration:250,ease:_ce};function Pce(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ace(e){var t,n;e instanceof Fo?(t=e._id,e=e._name):(t=rF(),(n=Nce).time=YE(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var i=r[o],a=i.length,l,c=0;c<a;++c)(l=i[c])&&wv(l,e,t,c,i,n||Pce(l,t));return new Fo(r,this._parents,e,t)}gh.prototype.interrupt=_le;gh.prototype.transition=Ace;const xp=e=>()=>e;function Tce(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Po(e,t,n){this.k=e,this.x=t,this.y=n}Po.prototype={constructor:Po,scale:function(e){return e===1?this:new Po(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Po(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ro=new Po(1,0,0);Po.prototype;function zx(e){e.stopImmediatePropagation()}function Bu(e){e.preventDefault(),e.stopImmediatePropagation()}function Rce(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function jce(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function AT(){return this.__zoom||Ro}function Oce(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Mce(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ice(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function sF(){var e=Rce,t=jce,n=Ice,r=Oce,s=Mce,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,l=vle,c=yv("start","zoom","end"),u,d,h,p=500,m=150,g=0,v=10;function x(_){_.property("__zoom",AT).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",T).filter(s).on("touchstart.zoom",R).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(_,D,O,F){var j=_.selection?_.selection():_;j.property("__zoom",AT),_!==j?C(_,D,O,F):j.interrupt().each(function(){E(this,arguments).event(F).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},x.scaleBy=function(_,D,O,F){x.scaleTo(_,function(){var j=this.__zoom.k,A=typeof D=="function"?D.apply(this,arguments):D;return j*A},O,F)},x.scaleTo=function(_,D,O,F){x.transform(_,function(){var j=t.apply(this,arguments),A=this.__zoom,$=O==null?S(j):typeof O=="function"?O.apply(this,arguments):O,B=A.invert($),I=typeof D=="function"?D.apply(this,arguments):D;return n(b(w(A,I),$,B),j,i)},O,F)},x.translateBy=function(_,D,O,F){x.transform(_,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),i)},null,F)},x.translateTo=function(_,D,O,F,j){x.transform(_,function(){var A=t.apply(this,arguments),$=this.__zoom,B=F==null?S(A):typeof F=="function"?F.apply(this,arguments):F;return n(Ro.translate(B[0],B[1]).scale($.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof O=="function"?-O.apply(this,arguments):-O),A,i)},F,j)};function w(_,D){return D=Math.max(o[0],Math.min(o[1],D)),D===_.k?_:new Po(D,_.x,_.y)}function b(_,D,O){var F=D[0]-O[0]*_.k,j=D[1]-O[1]*_.k;return F===_.x&&j===_.y?_:new Po(_.k,F,j)}function S(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function C(_,D,O,F){_.on("start.zoom",function(){E(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(F).end()}).tween("zoom",function(){var j=this,A=arguments,$=E(j,A).event(F),B=t.apply(j,A),I=O==null?S(B):typeof O=="function"?O.apply(j,A):O,H=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),V=j.__zoom,W=typeof D=="function"?D.apply(j,A):D,Y=l(V.invert(I).concat(H/V.k),W.invert(I).concat(H/W.k));return function(Z){if(Z===1)Z=W;else{var ae=Y(Z),se=H/ae[2];Z=new Po(se,I[0]-ae[0]*se,I[1]-ae[1]*se)}$.zoom(null,Z)}})}function E(_,D,O){return!O&&_.__zooming||new k(_,D)}function k(_,D){this.that=_,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,D),this.taps=0}k.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,D){return this.mouse&&_!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var D=qr(this.that).datum();c.call(_,this.that,new Tce(_,{sourceEvent:this.sourceEvent,target:x,type:_,transform:this.that.__zoom,dispatch:c}),D)}};function N(_,...D){if(!e.apply(this,arguments))return;var O=E(this,D).event(_),F=this.__zoom,j=Math.max(o[0],Math.min(o[1],F.k*Math.pow(2,r.apply(this,arguments)))),A=ms(_);if(O.wheel)(O.mouse[0][0]!==A[0]||O.mouse[0][1]!==A[1])&&(O.mouse[1]=F.invert(O.mouse[0]=A)),clearTimeout(O.wheel);else{if(F.k===j)return;O.mouse=[A,F.invert(A)],lm(this),O.start()}Bu(_),O.wheel=setTimeout($,m),O.zoom("mouse",n(b(w(F,j),O.mouse[0],O.mouse[1]),O.extent,i));function $(){O.wheel=null,O.end()}}function P(_,...D){if(h||!e.apply(this,arguments))return;var O=_.currentTarget,F=E(this,D,!0).event(_),j=qr(_.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",H,!0),A=ms(_,O),$=_.clientX,B=_.clientY;H3(_.view),zx(_),F.mouse=[A,this.__zoom.invert(A)],lm(this),F.start();function I(V){if(Bu(V),!F.moved){var W=V.clientX-$,Y=V.clientY-B;F.moved=W*W+Y*Y>g}F.event(V).zoom("mouse",n(b(F.that.__zoom,F.mouse[0]=ms(V,O),F.mouse[1]),F.extent,i))}function H(V){j.on("mousemove.zoom mouseup.zoom",null),V3(V.view,F.moved),Bu(V),F.event(V).end()}}function T(_,...D){if(e.apply(this,arguments)){var O=this.__zoom,F=ms(_.changedTouches?_.changedTouches[0]:_,this),j=O.invert(F),A=O.k*(_.shiftKey?.5:2),$=n(b(w(O,A),F,j),t.apply(this,D),i);Bu(_),a>0?qr(this).transition().duration(a).call(C,$,F,_):qr(this).call(x.transform,$,F,_)}}function R(_,...D){if(e.apply(this,arguments)){var O=_.touches,F=O.length,j=E(this,D,_.changedTouches.length===F).event(_),A,$,B,I;for(zx(_),$=0;$<F;++$)B=O[$],I=ms(B,this),I=[I,this.__zoom.invert(I),B.identifier],j.touch0?!j.touch1&&j.touch0[2]!==I[2]&&(j.touch1=I,j.taps=0):(j.touch0=I,A=!0,j.taps=1+!!u);u&&(u=clearTimeout(u)),A&&(j.taps<2&&(d=I[0],u=setTimeout(function(){u=null},p)),lm(this),j.start())}}function L(_,...D){if(this.__zooming){var O=E(this,D).event(_),F=_.changedTouches,j=F.length,A,$,B,I;for(Bu(_),A=0;A<j;++A)$=F[A],B=ms($,this),O.touch0&&O.touch0[2]===$.identifier?O.touch0[0]=B:O.touch1&&O.touch1[2]===$.identifier&&(O.touch1[0]=B);if($=O.that.__zoom,O.touch1){var H=O.touch0[0],V=O.touch0[1],W=O.touch1[0],Y=O.touch1[1],Z=(Z=W[0]-H[0])*Z+(Z=W[1]-H[1])*Z,ae=(ae=Y[0]-V[0])*ae+(ae=Y[1]-V[1])*ae;$=w($,Math.sqrt(Z/ae)),B=[(H[0]+W[0])/2,(H[1]+W[1])/2],I=[(V[0]+Y[0])/2,(V[1]+Y[1])/2]}else if(O.touch0)B=O.touch0[0],I=O.touch0[1];else return;O.zoom("touch",n(b($,B,I),O.extent,i))}}function z(_,...D){if(this.__zooming){var O=E(this,D).event(_),F=_.changedTouches,j=F.length,A,$;for(zx(_),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),A=0;A<j;++A)$=F[A],O.touch0&&O.touch0[2]===$.identifier?delete O.touch0:O.touch1&&O.touch1[2]===$.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&($=ms($,this),Math.hypot(d[0]-$[0],d[1]-$[1])<v)){var B=qr(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return x.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:xp(+_),x):r},x.filter=function(_){return arguments.length?(e=typeof _=="function"?_:xp(!!_),x):e},x.touchable=function(_){return arguments.length?(s=typeof _=="function"?_:xp(!!_),x):s},x.extent=function(_){return arguments.length?(t=typeof _=="function"?_:xp([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),x):t},x.scaleExtent=function(_){return arguments.length?(o[0]=+_[0],o[1]=+_[1],x):[o[0],o[1]]},x.translateExtent=function(_){return arguments.length?(i[0][0]=+_[0][0],i[1][0]=+_[1][0],i[0][1]=+_[0][1],i[1][1]=+_[1][1],x):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},x.constrain=function(_){return arguments.length?(n=_,x):n},x.duration=function(_){return arguments.length?(a=+_,x):a},x.interpolate=function(_){return arguments.length?(l=_,x):l},x.on=function(){var _=c.on.apply(c,arguments);return _===c?x:_},x.clickDistance=function(_){return arguments.length?(g=(_=+_)*_,x):Math.sqrt(g)},x.tapDistance=function(_){return arguments.length?(v=+_,x):v},x}const bv=y.createContext(null),Dce=bv.Provider,Bo={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},oF=Bo.error001();function st(e,t){const n=y.useContext(bv);if(n===null)throw new Error(oF);return T3(n,e,t)}const Vt=()=>{const e=y.useContext(bv);if(e===null)throw new Error(oF);return y.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},$ce=e=>e.userSelectionActive?"none":"all";function ZE({position:e,children:t,className:n,style:r,...s}){const o=st($ce),i=`${e}`.split("-");return M.createElement("div",{className:Cn(["react-flow__panel",n,...i]),style:{...r,pointerEvents:o},...s},t)}function Lce({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:M.createElement(ZE,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},M.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Fce=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:o={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:l,className:c,...u})=>{const d=y.useRef(null),[h,p]=y.useState({x:0,y:0,width:0,height:0}),m=Cn(["react-flow__edge-textwrapper",c]);return y.useEffect(()=>{if(d.current){const g=d.current.getBBox();p({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:M.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:m,visibility:h.width?"visible":"hidden",...u},s&&M.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),M.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:d,style:r},n),l)};var Bce=y.memo(Fce);const ek=e=>({width:e.offsetWidth,height:e.offsetHeight}),Gc=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),tk=(e={x:0,y:0},t)=>({x:Gc(e.x,t[0][0],t[1][0]),y:Gc(e.y,t[0][1],t[1][1])}),TT=(e,t,n)=>e<t?Gc(Math.abs(e-t),1,50)/50:e>n?-Gc(Math.abs(e-n),1,50)/50:0,iF=(e,t)=>{const n=TT(e.x,35,t.width-35)*20,r=TT(e.y,35,t.height-35)*20;return[n,r]},aF=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},lF=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),$f=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),cF=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),RT=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),zce=(e,t)=>cF(lF($f(e),$f(t))),O1=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Uce=e=>Yr(e.width)&&Yr(e.height)&&Yr(e.x)&&Yr(e.y),Yr=e=>!isNaN(e)&&isFinite(e),Ct=Symbol.for("internals"),uF=["Enter"," ","Escape"],Hce=(e,t)=>{},Vce=e=>"nativeEvent"in e;function M1(e){var s,o;const t=Vce(e)?e.nativeEvent:e,n=((o=(s=t.composedPath)==null?void 0:s.call(t))==null?void 0:o[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const dF=e=>"clientX"in e,Bi=(e,t)=>{var o,i;const n=dF(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,s=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},Qg=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},vh=({id:e,path:t,labelX:n,labelY:r,label:s,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:h,interactionWidth:p=20})=>M.createElement(M.Fragment,null,M.createElement("path",{id:e,style:u,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:h}),p&&M.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),s&&Yr(n)&&Yr(r)?M.createElement(Bce,{x:n,y:r,label:s,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c}):null);vh.displayName="BaseEdge";function zu(e,t,n){return n===void 0?n:r=>{const s=t().edges.find(o=>o.id===e);s&&n(r,{...s})}}function fF({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,o=n<e?n+s:n-s,i=Math.abs(r-t)/2,a=r<t?r+i:r-i;return[o,a,s,i]}function hF({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:i,targetControlY:a}){const l=e*.125+s*.375+i*.375+n*.125,c=t*.125+o*.375+a*.375+r*.125,u=Math.abs(l-e),d=Math.abs(c-t);return[l,c,u,d]}var ll;(function(e){e.Strict="strict",e.Loose="loose"})(ll||(ll={}));var Ia;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ia||(Ia={}));var Lf;(function(e){e.Partial="partial",e.Full="full"})(Lf||(Lf={}));var vi;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(vi||(vi={}));var Kc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Kc||(Kc={}));var xe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(xe||(xe={}));function jT({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===xe.Left||e===xe.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function pF({sourceX:e,sourceY:t,sourcePosition:n=xe.Bottom,targetX:r,targetY:s,targetPosition:o=xe.Top}){const[i,a]=jT({pos:n,x1:e,y1:t,x2:r,y2:s}),[l,c]=jT({pos:o,x1:r,y1:s,x2:e,y2:t}),[u,d,h,p]=hF({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${e},${t} C${i},${a} ${l},${c} ${r},${s}`,u,d,h,p]}const nk=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=xe.Bottom,targetPosition:o=xe.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:m,interactionWidth:g})=>{const[v,x,w]=pF({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:o});return M.createElement(vh,{path:v,labelX:x,labelY:w,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:m,interactionWidth:g})});nk.displayName="SimpleBezierEdge";const OT={[xe.Left]:{x:-1,y:0},[xe.Right]:{x:1,y:0},[xe.Top]:{x:0,y:-1},[xe.Bottom]:{x:0,y:1}},Wce=({source:e,sourcePosition:t=xe.Bottom,target:n})=>t===xe.Left||t===xe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},MT=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function qce({source:e,sourcePosition:t=xe.Bottom,target:n,targetPosition:r=xe.Top,center:s,offset:o}){const i=OT[t],a=OT[r],l={x:e.x+i.x*o,y:e.y+i.y*o},c={x:n.x+a.x*o,y:n.y+a.y*o},u=Wce({source:l,sourcePosition:t,target:c}),d=u.x!==0?"x":"y",h=u[d];let p=[],m,g;const v={x:0,y:0},x={x:0,y:0},[w,b,S,C]=fF({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*a[d]===-1){m=s.x??w,g=s.y??b;const k=[{x:m,y:l.y},{x:m,y:c.y}],N=[{x:l.x,y:g},{x:c.x,y:g}];i[d]===h?p=d==="x"?k:N:p=d==="x"?N:k}else{const k=[{x:l.x,y:c.y}],N=[{x:c.x,y:l.y}];if(d==="x"?p=i.x===h?N:k:p=i.y===h?k:N,t===r){const z=Math.abs(e[d]-n[d]);if(z<=o){const _=Math.min(o-1,o-z);i[d]===h?v[d]=(l[d]>e[d]?-1:1)*_:x[d]=(c[d]>n[d]?-1:1)*_}}if(t!==r){const z=d==="x"?"y":"x",_=i[d]===a[z],D=l[z]>c[z],O=l[z]<c[z];(i[d]===1&&(!_&&D||_&&O)||i[d]!==1&&(!_&&O||_&&D))&&(p=d==="x"?k:N)}const P={x:l.x+v.x,y:l.y+v.y},T={x:c.x+x.x,y:c.y+x.y},R=Math.max(Math.abs(P.x-p[0].x),Math.abs(T.x-p[0].x)),L=Math.max(Math.abs(P.y-p[0].y),Math.abs(T.y-p[0].y));R>=L?(m=(P.x+T.x)/2,g=p[0].y):(m=p[0].x,g=(P.y+T.y)/2)}return[[e,{x:l.x+v.x,y:l.y+v.y},...p,{x:c.x+x.x,y:c.y+x.y},n],m,g,S,C]}function Gce(e,t,n,r){const s=Math.min(MT(e,t)/2,MT(t,n)/2,r),{x:o,y:i}=t;if(e.x===o&&o===n.x||e.y===i&&i===n.y)return`L${o} ${i}`;if(e.y===i){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+s*c},${i}Q ${o},${i} ${o},${i+s*u}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${i+s*l}Q ${o},${i} ${o+s*a},${i}`}function I1({sourceX:e,sourceY:t,sourcePosition:n=xe.Bottom,targetX:r,targetY:s,targetPosition:o=xe.Top,borderRadius:i=5,centerX:a,centerY:l,offset:c=20}){const[u,d,h,p,m]=qce({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:a,y:l},offset:c});return[u.reduce((v,x,w)=>{let b="";return w>0&&w<u.length-1?b=Gce(u[w-1],x,u[w+1],i):b=`${w===0?"M":"L"}${x.x} ${x.y}`,v+=b,v},""),d,h,p,m]}const Sv=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,sourcePosition:d=xe.Bottom,targetPosition:h=xe.Top,markerEnd:p,markerStart:m,pathOptions:g,interactionWidth:v})=>{const[x,w,b]=I1({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:h,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return M.createElement(vh,{path:x,labelX:w,labelY:b,label:s,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:p,markerStart:m,interactionWidth:v})});Sv.displayName="SmoothStepEdge";const rk=y.memo(e=>{var t;return M.createElement(Sv,{...e,pathOptions:y.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});rk.displayName="StepEdge";function Kce({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,o,i,a]=fF({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,o,i,a]}const sk=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:h,interactionWidth:p})=>{const[m,g,v]=Kce({sourceX:e,sourceY:t,targetX:n,targetY:r});return M.createElement(vh,{path:m,labelX:g,labelY:v,label:s,labelStyle:o,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:d,markerStart:h,interactionWidth:p})});sk.displayName="StraightEdge";function wp(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function IT({pos:e,x1:t,y1:n,x2:r,y2:s,c:o}){switch(e){case xe.Left:return[t-wp(t-r,o),n];case xe.Right:return[t+wp(r-t,o),n];case xe.Top:return[t,n-wp(n-s,o)];case xe.Bottom:return[t,n+wp(s-n,o)]}}function ok({sourceX:e,sourceY:t,sourcePosition:n=xe.Bottom,targetX:r,targetY:s,targetPosition:o=xe.Top,curvature:i=.25}){const[a,l]=IT({pos:n,x1:e,y1:t,x2:r,y2:s,c:i}),[c,u]=IT({pos:o,x1:r,y1:s,x2:e,y2:t,c:i}),[d,h,p,m]=hF({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${a},${l} ${c},${u} ${r},${s}`,d,h,p,m]}const Zg=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=xe.Bottom,targetPosition:o=xe.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:m,pathOptions:g,interactionWidth:v})=>{const[x,w,b]=ok({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:o,curvature:g==null?void 0:g.curvature});return M.createElement(vh,{path:x,labelX:w,labelY:b,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:m,interactionWidth:v})});Zg.displayName="BezierEdge";const ik=y.createContext(null),Jce=ik.Provider;ik.Consumer;const Yce=()=>y.useContext(ik),Xce=e=>"id"in e&&"source"in e&&"target"in e,Qce=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,D1=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,Zce=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),mF=(e,t)=>{if(!e.source||!e.target)return t;let n;return Xce(e)?n={...e}:n={...e,id:Qce(e)},Zce(n,t)?t:t.concat(n)},$1=({x:e,y:t},[n,r,s],o,[i,a])=>{const l={x:(e-n)/s,y:(t-r)/s};return o?{x:i*Math.round(l.x/i),y:a*Math.round(l.y/a)}:l},gF=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r}),Ga=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],s={x:e.position.x-n,y:e.position.y-r};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:s}},Cv=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const{x:o,y:i}=Ga(s,t).positionAbsolute;return lF(r,$f({x:o,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return cF(n)},yF=(e,t,[n,r,s]=[0,0,1],o=!1,i=!1,a=[0,0])=>{const l={x:(t.x-n)/s,y:(t.y-r)/s,width:t.width/s,height:t.height/s},c=[];return e.forEach(u=>{const{width:d,height:h,selectable:p=!0,hidden:m=!1}=u;if(i&&!p||m)return!1;const{positionAbsolute:g}=Ga(u,a),v={x:g.x,y:g.y,width:d||0,height:h||0},x=O1(l,v),w=typeof d>"u"||typeof h>"u"||d===null||h===null,b=o&&x>0,S=(d||0)*(h||0);(w||b||x>=S||u.dragging)&&c.push(u)}),c},vF=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},xF=(e,t,n,r,s,o=.1)=>{const i=t/(e.width*(1+o)),a=n/(e.height*(1+o)),l=Math.min(i,a),c=Gc(l,r,s),u=e.x+e.width/2,d=e.y+e.height/2,h=t/2-u*c,p=n/2-d*c;return{x:h,y:p,zoom:c}},wa=(e,t=0)=>e.transition().duration(t);function DT(e,t,n,r){return(t[n]||[]).reduce((s,o)=>{var i,a;return`${e.id}-${o.id}-${n}`!==r&&s.push({id:o.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+o.x+o.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+o.y+o.height/2}),s},[])}function eue(e,t,n,r,s,o){const{x:i,y:a}=Bi(e),c=t.elementsFromPoint(i,a).find(m=>m.classList.contains("react-flow__handle"));if(c){const m=c.getAttribute("data-nodeid");if(m){const g=ak(void 0,c),v=c.getAttribute("data-handleid"),x=o({nodeId:m,id:v,type:g});if(x){const w=s.find(b=>b.nodeId===m&&b.type===g&&b.id===v);return{handle:{id:v,type:g,nodeId:m,x:(w==null?void 0:w.x)||n.x,y:(w==null?void 0:w.y)||n.y},validHandleResult:x}}}}let u=[],d=1/0;if(s.forEach(m=>{const g=Math.sqrt((m.x-n.x)**2+(m.y-n.y)**2);if(g<=r){const v=o(m);g<=d&&(g<d?u=[{handle:m,validHandleResult:v}]:g===d&&u.push({handle:m,validHandleResult:v}),d=g)}}),!u.length)return{handle:null,validHandleResult:wF()};if(u.length===1)return u[0];const h=u.some(({validHandleResult:m})=>m.isValid),p=u.some(({handle:m})=>m.type==="target");return u.find(({handle:m,validHandleResult:g})=>p?m.type==="target":h?g.isValid:!0)||u[0]}const tue={source:null,target:null,sourceHandle:null,targetHandle:null},wF=()=>({handleDomNode:null,isValid:!1,connection:tue,endHandle:null});function bF(e,t,n,r,s,o,i){const a=s==="target",l=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),c={...wF(),handleDomNode:l};if(l){const u=ak(void 0,l),d=l.getAttribute("data-nodeid"),h=l.getAttribute("data-handleid"),p=l.classList.contains("connectable"),m=l.classList.contains("connectableend"),g={source:a?d:n,sourceHandle:a?h:r,target:a?n:d,targetHandle:a?r:h};c.connection=g,p&&m&&(t===ll.Strict?a&&u==="source"||!a&&u==="target":d!==n||h!==r)&&(c.endHandle={nodeId:d,handleId:h,type:u},c.isValid=o(g))}return c}function nue({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((s,o)=>{if(o[Ct]){const{handleBounds:i}=o[Ct];let a=[],l=[];i&&(a=DT(o,i,"source",`${t}-${n}-${r}`),l=DT(o,i,"target",`${t}-${n}-${r}`)),s.push(...a,...l)}return s},[])}function ak(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Ux(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function rue(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function SF({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:s,getState:o,setState:i,isValidConnection:a,edgeUpdaterType:l,onReconnectEnd:c}){const u=aF(e.target),{connectionMode:d,domNode:h,autoPanOnConnect:p,connectionRadius:m,onConnectStart:g,panBy:v,getNodes:x,cancelConnection:w}=o();let b=0,S;const{x:C,y:E}=Bi(e),k=u==null?void 0:u.elementFromPoint(C,E),N=ak(l,k),P=h==null?void 0:h.getBoundingClientRect();if(!P||!N)return;let T,R=Bi(e,P),L=!1,z=null,_=!1,D=null;const O=nue({nodes:x(),nodeId:n,handleId:t,handleType:N}),F=()=>{if(!p)return;const[$,B]=iF(R,P);v({x:$,y:B}),b=requestAnimationFrame(F)};i({connectionPosition:R,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:N,connectionStartHandle:{nodeId:n,handleId:t,type:N},connectionEndHandle:null}),g==null||g(e,{nodeId:n,handleId:t,handleType:N});function j($){const{transform:B}=o();R=Bi($,P);const{handle:I,validHandleResult:H}=eue($,u,$1(R,B,!1,[1,1]),m,O,V=>bF(V,d,n,t,s?"target":"source",a,u));if(S=I,L||(F(),L=!0),D=H.handleDomNode,z=H.connection,_=H.isValid,i({connectionPosition:S&&_?gF({x:S.x,y:S.y},B):R,connectionStatus:rue(!!S,_),connectionEndHandle:H.endHandle}),!S&&!_&&!D)return Ux(T);z.source!==z.target&&D&&(Ux(T),T=D,D.classList.add("connecting","react-flow__handle-connecting"),D.classList.toggle("valid",_),D.classList.toggle("react-flow__handle-valid",_))}function A($){var B,I;(S||D)&&z&&_&&(r==null||r(z)),(I=(B=o()).onConnectEnd)==null||I.call(B,$),l&&(c==null||c($)),Ux(T),w(),cancelAnimationFrame(b),L=!1,_=!1,z=null,D=null,u.removeEventListener("mousemove",j),u.removeEventListener("mouseup",A),u.removeEventListener("touchmove",j),u.removeEventListener("touchend",A)}u.addEventListener("mousemove",j),u.addEventListener("mouseup",A),u.addEventListener("touchmove",j),u.addEventListener("touchend",A)}const $T=()=>!0,sue=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),oue=(e,t,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:o,connectionClickStartHandle:i}=r;return{connecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n||(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},CF=y.forwardRef(({type:e="source",position:t=xe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:i,onConnect:a,children:l,className:c,onMouseDown:u,onTouchStart:d,...h},p)=>{var P,T;const m=i||null,g=e==="target",v=Vt(),x=Yce(),{connectOnClick:w,noPanClassName:b}=st(sue,sn),{connecting:S,clickConnecting:C}=st(oue(x,m,e),sn);x||(T=(P=v.getState()).onError)==null||T.call(P,"010",Bo.error010());const E=R=>{const{defaultEdgeOptions:L,onConnect:z,hasDefaultEdges:_}=v.getState(),D={...L,...R};if(_){const{edges:O,setEdges:F}=v.getState();F(mF(D,O))}z==null||z(D),a==null||a(D)},k=R=>{if(!x)return;const L=dF(R);s&&(L&&R.button===0||!L)&&SF({event:R,handleId:m,nodeId:x,onConnect:E,isTarget:g,getState:v.getState,setState:v.setState,isValidConnection:n||v.getState().isValidConnection||$T}),L?u==null||u(R):d==null||d(R)},N=R=>{const{onClickConnectStart:L,onClickConnectEnd:z,connectionClickStartHandle:_,connectionMode:D,isValidConnection:O}=v.getState();if(!x||!_&&!s)return;if(!_){L==null||L(R,{nodeId:x,handleId:m,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:x,type:e,handleId:m}});return}const F=aF(R.target),j=n||O||$T,{connection:A,isValid:$}=bF({nodeId:x,id:m,type:e},D,_.nodeId,_.handleId||null,_.type,j,F);$&&E(A),z==null||z(R),v.setState({connectionClickStartHandle:null})};return M.createElement("div",{"data-handleid":m,"data-nodeid":x,"data-handlepos":t,"data-id":`${x}-${m}-${e}`,className:Cn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,c,{source:!g,target:g,connectable:r,connectablestart:s,connectableend:o,connecting:C,connectionindicator:r&&(s&&!S||o&&S)}]),onMouseDown:k,onTouchStart:k,onClick:w?N:void 0,ref:p,...h},l)});CF.displayName="Handle";var Jc=y.memo(CF);const EF=({data:e,isConnectable:t,targetPosition:n=xe.Top,sourcePosition:r=xe.Bottom})=>M.createElement(M.Fragment,null,M.createElement(Jc,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,M.createElement(Jc,{type:"source",position:r,isConnectable:t}));EF.displayName="DefaultNode";var L1=y.memo(EF);const kF=({data:e,isConnectable:t,sourcePosition:n=xe.Bottom})=>M.createElement(M.Fragment,null,e==null?void 0:e.label,M.createElement(Jc,{type:"source",position:n,isConnectable:t}));kF.displayName="InputNode";var _F=y.memo(kF);const NF=({data:e,isConnectable:t,targetPosition:n=xe.Top})=>M.createElement(M.Fragment,null,M.createElement(Jc,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);NF.displayName="OutputNode";var PF=y.memo(NF);const lk=()=>null;lk.displayName="GroupNode";const iue=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),bp=e=>e.id;function aue(e,t){return sn(e.selectedNodes.map(bp),t.selectedNodes.map(bp))&&sn(e.selectedEdges.map(bp),t.selectedEdges.map(bp))}const AF=y.memo(({onSelectionChange:e})=>{const t=Vt(),{selectedNodes:n,selectedEdges:r}=st(iue,aue);return y.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChange.forEach(o=>o(s))},[n,r,e]),null});AF.displayName="SelectionListener";const lue=e=>!!e.onSelectionChange;function cue({onSelectionChange:e}){const t=st(lue);return e||t?M.createElement(AF,{onSelectionChange:e}):null}const uue=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Tl(e,t){y.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function $e(e,t,n){y.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const due=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:o,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:u,nodesFocusable:d,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:m,minZoom:g,maxZoom:v,nodeExtent:x,onNodesChange:w,onEdgesChange:b,elementsSelectable:S,connectionMode:C,snapGrid:E,snapToGrid:k,translateExtent:N,connectOnClick:P,defaultEdgeOptions:T,fitView:R,fitViewOptions:L,onNodesDelete:z,onEdgesDelete:_,onNodeDrag:D,onNodeDragStart:O,onNodeDragStop:F,onSelectionDrag:j,onSelectionDragStart:A,onSelectionDragStop:$,noPanClassName:B,nodeOrigin:I,rfId:H,autoPanOnConnect:V,autoPanOnNodeDrag:W,onError:Y,connectionRadius:Z,isValidConnection:ae,nodeDragThreshold:se})=>{const{setNodes:re,setEdges:De,setDefaultNodesAndEdges:me,setMinZoom:Ce,setMaxZoom:U,setTranslateExtent:q,setNodeExtent:he,reset:fe}=st(uue,sn),Q=Vt();return y.useEffect(()=>{const Ae=r==null?void 0:r.map(je=>({...je,...T}));return me(n,Ae),()=>{fe()}},[]),$e("defaultEdgeOptions",T,Q.setState),$e("connectionMode",C,Q.setState),$e("onConnect",s,Q.setState),$e("onConnectStart",o,Q.setState),$e("onConnectEnd",i,Q.setState),$e("onClickConnectStart",a,Q.setState),$e("onClickConnectEnd",l,Q.setState),$e("nodesDraggable",c,Q.setState),$e("nodesConnectable",u,Q.setState),$e("nodesFocusable",d,Q.setState),$e("edgesFocusable",h,Q.setState),$e("edgesUpdatable",p,Q.setState),$e("elementsSelectable",S,Q.setState),$e("elevateNodesOnSelect",m,Q.setState),$e("snapToGrid",k,Q.setState),$e("snapGrid",E,Q.setState),$e("onNodesChange",w,Q.setState),$e("onEdgesChange",b,Q.setState),$e("connectOnClick",P,Q.setState),$e("fitViewOnInit",R,Q.setState),$e("fitViewOnInitOptions",L,Q.setState),$e("onNodesDelete",z,Q.setState),$e("onEdgesDelete",_,Q.setState),$e("onNodeDrag",D,Q.setState),$e("onNodeDragStart",O,Q.setState),$e("onNodeDragStop",F,Q.setState),$e("onSelectionDrag",j,Q.setState),$e("onSelectionDragStart",A,Q.setState),$e("onSelectionDragStop",$,Q.setState),$e("noPanClassName",B,Q.setState),$e("nodeOrigin",I,Q.setState),$e("rfId",H,Q.setState),$e("autoPanOnConnect",V,Q.setState),$e("autoPanOnNodeDrag",W,Q.setState),$e("onError",Y,Q.setState),$e("connectionRadius",Z,Q.setState),$e("isValidConnection",ae,Q.setState),$e("nodeDragThreshold",se,Q.setState),Tl(e,re),Tl(t,De),Tl(g,Ce),Tl(v,U),Tl(N,q),Tl(x,he),null},LT={display:"none"},fue={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},TF="react-flow__node-desc",RF="react-flow__edge-desc",hue="react-flow__aria-live",pue=e=>e.ariaLiveMessage;function mue({rfId:e}){const t=st(pue);return M.createElement("div",{id:`${hue}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:fue},t)}function gue({rfId:e,disableKeyboardA11y:t}){return M.createElement(M.Fragment,null,M.createElement("div",{id:`${TF}-${e}`,style:LT},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),M.createElement("div",{id:`${RF}-${e}`,style:LT},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&M.createElement(mue,{rfId:e}))}var Ff=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=y.useState(!1),s=y.useRef(!1),o=y.useRef(new Set([])),[i,a]=y.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),u=c.reduce((d,h)=>d.concat(...h),[]);return[c,u]}return[[],[]]},[e]);return y.useEffect(()=>{const l=typeof document<"u"?document:null,c=(t==null?void 0:t.target)||l;if(e!==null){const u=p=>{if(s.current=p.ctrlKey||p.metaKey||p.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&M1(p))return!1;const g=BT(p.code,a);o.current.add(p[g]),FT(i,o.current,!1)&&(p.preventDefault(),r(!0))},d=p=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&M1(p))return!1;const g=BT(p.code,a);FT(i,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(p[g]),p.key==="Meta"&&o.current.clear(),s.current=!1},h=()=>{o.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",u),c==null||c.addEventListener("keyup",d),window.addEventListener("blur",h),()=>{c==null||c.removeEventListener("keydown",u),c==null||c.removeEventListener("keyup",d),window.removeEventListener("blur",h)}}},[e,r]),n};function FT(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function BT(e,t){return t.includes(e)?"code":"key"}function jF(e,t,n,r){var a,l;const s=e.parentNode||e.parentId;if(!s)return n;const o=t.get(s),i=Ga(o,r);return jF(o,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((a=o[Ct])==null?void 0:a.z)??0)>(n.z??0)?((l=o[Ct])==null?void 0:l.z)??0:n.z??0},r)}function OF(e,t,n){e.forEach(r=>{var o;const s=r.parentNode||r.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||n!=null&&n[r.id]){const{x:i,y:a,z:l}=jF(r,e,{...r.position,z:((o=r[Ct])==null?void 0:o.z)??0},t);r.positionAbsolute={x:i,y:a},r[Ct].z=l,n!=null&&n[r.id]&&(r[Ct].isParent=!0)}})}function Hx(e,t,n,r){const s=new Map,o={},i=r?1e3:0;return e.forEach(a=>{var p;const l=(Yr(a.zIndex)?a.zIndex:0)+(a.selected?i:0),c=t.get(a.id),u={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},d=a.parentNode||a.parentId;d&&(o[d]=!0);const h=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==a.type;Object.defineProperty(u,Ct,{enumerable:!1,value:{handleBounds:h||(p=c==null?void 0:c[Ct])==null?void 0:p.handleBounds,z:l}}),s.set(a.id,u)}),OF(s,n,o),s}function MF(e,t={}){const{getNodes:n,width:r,height:s,minZoom:o,maxZoom:i,d3Zoom:a,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:u,nodeOrigin:d}=e(),h=t.initial&&!c&&u;if(a&&l&&(h||!t.initial)){const m=n().filter(v=>{var w;const x=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(w=t.nodes)!=null&&w.length?x&&t.nodes.some(b=>b.id===v.id):x}),g=m.every(v=>v.width&&v.height);if(m.length>0&&g){const v=Cv(m,d),{x,y:w,zoom:b}=xF(v,r,s,t.minZoom??o,t.maxZoom??i,t.padding??.1),S=Ro.translate(x,w).scale(b);return typeof t.duration=="number"&&t.duration>0?a.transform(wa(l,t.duration),S):a.transform(l,S),!0}}return!1}function yue(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ct]:r[Ct],selected:n.selected})}),new Map(t)}function vue(e,t){return t.map(n=>{const r=e.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Sp({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:s,edges:o,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:c}=n();e!=null&&e.length&&(l&&r({nodeInternals:yue(e,s)}),i==null||i(e)),t!=null&&t.length&&(c&&r({edges:vue(t,o)}),a==null||a(t))}const Rl=()=>{},xue={zoomIn:Rl,zoomOut:Rl,zoomTo:Rl,getZoom:()=>1,setViewport:Rl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Rl,fitBounds:Rl,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},wue=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),bue=()=>{const e=Vt(),{d3Zoom:t,d3Selection:n}=st(wue,sn);return y.useMemo(()=>n&&t?{zoomIn:s=>t.scaleBy(wa(n,s==null?void 0:s.duration),1.2),zoomOut:s=>t.scaleBy(wa(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,o)=>t.scaleTo(wa(n,o==null?void 0:o.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,o)=>{const[i,a,l]=e.getState().transform,c=Ro.translate(s.x??i,s.y??a).scale(s.zoom??l);t.transform(wa(n,o==null?void 0:o.duration),c)},getViewport:()=>{const[s,o,i]=e.getState().transform;return{x:s,y:o,zoom:i}},fitView:s=>MF(e.getState,s),setCenter:(s,o,i)=>{const{width:a,height:l,maxZoom:c}=e.getState(),u=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:c,d=a/2-s*u,h=l/2-o*u,p=Ro.translate(d,h).scale(u);t.transform(wa(n,i==null?void 0:i.duration),p)},fitBounds:(s,o)=>{const{width:i,height:a,minZoom:l,maxZoom:c}=e.getState(),{x:u,y:d,zoom:h}=xF(s,i,a,l,c,(o==null?void 0:o.padding)??.1),p=Ro.translate(u,d).scale(h);t.transform(wa(n,o==null?void 0:o.duration),p)},project:s=>{const{transform:o,snapToGrid:i,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),$1(s,o,i,a)},screenToFlowPosition:s=>{const{transform:o,snapToGrid:i,snapGrid:a,domNode:l}=e.getState();if(!l)return s;const{x:c,y:u}=l.getBoundingClientRect(),d={x:s.x-c,y:s.y-u};return $1(d,o,i,a)},flowToScreenPosition:s=>{const{transform:o,domNode:i}=e.getState();if(!i)return s;const{x:a,y:l}=i.getBoundingClientRect(),c=gF(s,o);return{x:c.x+a,y:c.y+l}},viewportInitialized:!0}:xue,[t,n])};function Ev(){const e=bue(),t=Vt(),n=y.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),r=y.useCallback(g=>t.getState().nodeInternals.get(g),[]),s=y.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(v=>({...v}))},[]),o=y.useCallback(g=>{const{edges:v=[]}=t.getState();return v.find(x=>x.id===g)},[]),i=y.useCallback(g=>{const{getNodes:v,setNodes:x,hasDefaultNodes:w,onNodesChange:b}=t.getState(),S=v(),C=typeof g=="function"?g(S):g;if(w)x(C);else if(b){const E=C.length===0?S.map(k=>({type:"remove",id:k.id})):C.map(k=>({item:k,type:"reset"}));b(E)}},[]),a=y.useCallback(g=>{const{edges:v=[],setEdges:x,hasDefaultEdges:w,onEdgesChange:b}=t.getState(),S=typeof g=="function"?g(v):g;if(w)x(S);else if(b){const C=S.length===0?v.map(E=>({type:"remove",id:E.id})):S.map(E=>({item:E,type:"reset"}));b(C)}},[]),l=y.useCallback(g=>{const v=Array.isArray(g)?g:[g],{getNodes:x,setNodes:w,hasDefaultNodes:b,onNodesChange:S}=t.getState();if(b){const E=[...x(),...v];w(E)}else if(S){const C=v.map(E=>({item:E,type:"add"}));S(C)}},[]),c=y.useCallback(g=>{const v=Array.isArray(g)?g:[g],{edges:x=[],setEdges:w,hasDefaultEdges:b,onEdgesChange:S}=t.getState();if(b)w([...x,...v]);else if(S){const C=v.map(E=>({item:E,type:"add"}));S(C)}},[]),u=y.useCallback(()=>{const{getNodes:g,edges:v=[],transform:x}=t.getState(),[w,b,S]=x;return{nodes:g().map(C=>({...C})),edges:v.map(C=>({...C})),viewport:{x:w,y:b,zoom:S}}},[]),d=y.useCallback(({nodes:g,edges:v})=>{const{nodeInternals:x,getNodes:w,edges:b,hasDefaultNodes:S,hasDefaultEdges:C,onNodesDelete:E,onEdgesDelete:k,onNodesChange:N,onEdgesChange:P}=t.getState(),T=(g||[]).map(D=>D.id),R=(v||[]).map(D=>D.id),L=w().reduce((D,O)=>{const F=O.parentNode||O.parentId,j=!T.includes(O.id)&&F&&D.find($=>$.id===F);return(typeof O.deletable=="boolean"?O.deletable:!0)&&(T.includes(O.id)||j)&&D.push(O),D},[]),z=b.filter(D=>typeof D.deletable=="boolean"?D.deletable:!0),_=z.filter(D=>R.includes(D.id));if(L||_){const D=vF(L,z),O=[..._,...D],F=O.reduce((j,A)=>(j.includes(A.id)||j.push(A.id),j),[]);if((C||S)&&(C&&t.setState({edges:b.filter(j=>!F.includes(j.id))}),S&&(L.forEach(j=>{x.delete(j.id)}),t.setState({nodeInternals:new Map(x)}))),F.length>0&&(k==null||k(O),P&&P(F.map(j=>({id:j,type:"remove"})))),L.length>0&&(E==null||E(L),N)){const j=L.map(A=>({id:A.id,type:"remove"}));N(j)}}},[]),h=y.useCallback(g=>{const v=Uce(g),x=v?null:t.getState().nodeInternals.get(g.id);return!v&&!x?[null,null,v]:[v?g:RT(x),x,v]},[]),p=y.useCallback((g,v=!0,x)=>{const[w,b,S]=h(g);return w?(x||t.getState().getNodes()).filter(C=>{if(!S&&(C.id===b.id||!C.positionAbsolute))return!1;const E=RT(C),k=O1(E,w);return v&&k>0||k>=w.width*w.height}):[]},[]),m=y.useCallback((g,v,x=!0)=>{const[w]=h(g);if(!w)return!1;const b=O1(w,v);return x&&b>0||b>=w.width*w.height},[]);return y.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:s,getEdge:o,setNodes:i,setEdges:a,addNodes:l,addEdges:c,toObject:u,deleteElements:d,getIntersectingNodes:p,isNodeIntersecting:m}),[e,n,r,s,o,i,a,l,c,u,d,p,m])}const Sue={actInsideInputWithModifier:!1};var Cue=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Vt(),{deleteElements:r}=Ev(),s=Ff(e,Sue),o=Ff(t);y.useEffect(()=>{if(s){const{edges:i,getNodes:a}=n.getState(),l=a().filter(u=>u.selected),c=i.filter(u=>u.selected);r({nodes:l,edges:c}),n.setState({nodesSelectionActive:!1})}},[s]),y.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function Eue(e){const t=Vt();y.useEffect(()=>{let n;const r=()=>{var o,i;if(!e.current)return;const s=ek(e.current);(s.height===0||s.width===0)&&((i=(o=t.getState()).onError)==null||i.call(o,"004",Bo.error004())),t.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const ck={position:"absolute",width:"100%",height:"100%",top:0,left:0},kue=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Cp=e=>({x:e.x,y:e.y,zoom:e.k}),jl=(e,t)=>e.target.closest(`.${t}`),zT=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),UT=e=>{const t=e.ctrlKey&&Qg()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},_ue=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Nue=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=Ia.Free,zoomOnDoubleClick:c=!0,elementsSelectable:u,panOnDrag:d=!0,defaultViewport:h,translateExtent:p,minZoom:m,maxZoom:g,zoomActivationKeyCode:v,preventScrolling:x=!0,children:w,noWheelClassName:b,noPanClassName:S})=>{const C=y.useRef(),E=Vt(),k=y.useRef(!1),N=y.useRef(!1),P=y.useRef(null),T=y.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:L,d3ZoomHandler:z,userSelectionActive:_}=st(_ue,sn),D=Ff(v),O=y.useRef(0),F=y.useRef(!1),j=y.useRef();return Eue(P),y.useEffect(()=>{if(P.current){const A=P.current.getBoundingClientRect(),$=sF().scaleExtent([m,g]).translateExtent(p),B=qr(P.current).call($),I=Ro.translate(h.x,h.y).scale(Gc(h.zoom,m,g)),H=[[0,0],[A.width,A.height]],V=$.constrain()(I,H,p);$.transform(B,V),$.wheelDelta(UT),E.setState({d3Zoom:$,d3Selection:B,d3ZoomHandler:B.on("wheel.zoom"),transform:[V.x,V.y,V.k],domNode:P.current.closest(".react-flow")})}},[]),y.useEffect(()=>{L&&R&&(i&&!D&&!_?L.on("wheel.zoom",A=>{if(jl(A,b))return!1;A.preventDefault(),A.stopImmediatePropagation();const $=L.property("__zoom").k||1;if(A.ctrlKey&&o){const ae=ms(A),se=UT(A),re=$*Math.pow(2,se);R.scaleTo(L,re,ae,A);return}const B=A.deltaMode===1?20:1;let I=l===Ia.Vertical?0:A.deltaX*B,H=l===Ia.Horizontal?0:A.deltaY*B;!Qg()&&A.shiftKey&&l!==Ia.Vertical&&(I=A.deltaY*B,H=0),R.translateBy(L,-(I/$)*a,-(H/$)*a,{internal:!0});const V=Cp(L.property("__zoom")),{onViewportChangeStart:W,onViewportChange:Y,onViewportChangeEnd:Z}=E.getState();clearTimeout(j.current),F.current||(F.current=!0,t==null||t(A,V),W==null||W(V)),F.current&&(e==null||e(A,V),Y==null||Y(V),j.current=setTimeout(()=>{n==null||n(A,V),Z==null||Z(V),F.current=!1},150))},{passive:!1}):typeof z<"u"&&L.on("wheel.zoom",function(A,$){if(!x&&A.type==="wheel"&&!A.ctrlKey||jl(A,b))return null;A.preventDefault(),z.call(this,A,$)},{passive:!1}))},[_,i,l,L,R,z,D,o,x,b,t,e,n]),y.useEffect(()=>{R&&R.on("start",A=>{var I,H;if(!A.sourceEvent||A.sourceEvent.internal)return null;O.current=(I=A.sourceEvent)==null?void 0:I.button;const{onViewportChangeStart:$}=E.getState(),B=Cp(A.transform);k.current=!0,T.current=B,((H=A.sourceEvent)==null?void 0:H.type)==="mousedown"&&E.setState({paneDragging:!0}),$==null||$(B),t==null||t(A.sourceEvent,B)})},[R,t]),y.useEffect(()=>{R&&(_&&!k.current?R.on("zoom",null):_||R.on("zoom",A=>{var B;const{onViewportChange:$}=E.getState();if(E.setState({transform:[A.transform.x,A.transform.y,A.transform.k]}),N.current=!!(r&&zT(d,O.current??0)),(e||$)&&!((B=A.sourceEvent)!=null&&B.internal)){const I=Cp(A.transform);$==null||$(I),e==null||e(A.sourceEvent,I)}}))},[_,R,e,d,r]),y.useEffect(()=>{R&&R.on("end",A=>{if(!A.sourceEvent||A.sourceEvent.internal)return null;const{onViewportChangeEnd:$}=E.getState();if(k.current=!1,E.setState({paneDragging:!1}),r&&zT(d,O.current??0)&&!N.current&&r(A.sourceEvent),N.current=!1,(n||$)&&kue(T.current,A.transform)){const B=Cp(A.transform);T.current=B,clearTimeout(C.current),C.current=setTimeout(()=>{$==null||$(B),n==null||n(A.sourceEvent,B)},i?150:0)}})},[R,i,d,n,r]),y.useEffect(()=>{R&&R.filter(A=>{const $=D||s,B=o&&A.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&A.button===1&&A.type==="mousedown"&&(jl(A,"react-flow__node")||jl(A,"react-flow__edge")))return!0;if(!d&&!$&&!i&&!c&&!o||_||!c&&A.type==="dblclick"||jl(A,b)&&A.type==="wheel"||jl(A,S)&&(A.type!=="wheel"||i&&A.type==="wheel"&&!D)||!o&&A.ctrlKey&&A.type==="wheel"||!$&&!i&&!B&&A.type==="wheel"||!d&&(A.type==="mousedown"||A.type==="touchstart")||Array.isArray(d)&&!d.includes(A.button)&&A.type==="mousedown")return!1;const I=Array.isArray(d)&&d.includes(A.button)||!A.button||A.button<=1;return(!A.ctrlKey||A.type==="wheel")&&I})},[_,R,s,o,i,c,d,u,D]),M.createElement("div",{className:"react-flow__renderer",ref:P,style:ck},w)},Pue=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Aue(){const{userSelectionActive:e,userSelectionRect:t}=st(Pue,sn);return e&&t?M.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function HT(e,t){const n=t.parentNode||t.parentId,r=e.find(s=>s.id===n);if(r){const s=t.position.x+t.width-r.width,o=t.position.y+t.height-r.height;if(s>0||o>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),o>0&&(r.style.height+=o),t.position.x<0){const i=Math.abs(t.position.x);r.position.x=r.position.x-i,r.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);r.position.y=r.position.y-i,r.style.height+=i,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function IF(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,s)=>{const o=e.filter(a=>a.id===s.id);if(o.length===0)return r.push(s),r;const i={...s};for(const a of o)if(a)switch(a.type){case"select":{i.selected=a.selected;break}case"position":{typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&HT(r,i);break}case"dimensions":{typeof a.dimensions<"u"&&(i.width=a.dimensions.width,i.height=a.dimensions.height),typeof a.updateStyle<"u"&&(i.style={...i.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(i.resizing=a.resizing),i.expandParent&&HT(r,i);break}case"remove":return r}return r.push(i),r},n)}function DF(e,t){return IF(e,t)}function Tue(e,t){return IF(e,t)}const fi=(e,t)=>({id:e,type:"select",selected:t});function tc(e,t){return e.reduce((n,r)=>{const s=t.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(fi(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(fi(r.id,!1))),n},[])}const Vx=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Rue=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),$F=y.memo(({isSelecting:e,selectionMode:t=Lf.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:c,onPaneMouseLeave:u,children:d})=>{const h=y.useRef(null),p=Vt(),m=y.useRef(0),g=y.useRef(0),v=y.useRef(),{userSelectionActive:x,elementsSelectable:w,dragging:b}=st(Rue,sn),S=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),m.current=0,g.current=0},C=z=>{o==null||o(z),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},E=z=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){z.preventDefault();return}i==null||i(z)},k=a?z=>a(z):void 0,N=z=>{const{resetSelectedElements:_,domNode:D}=p.getState();if(v.current=D==null?void 0:D.getBoundingClientRect(),!w||!e||z.button!==0||z.target!==h.current||!v.current)return;const{x:O,y:F}=Bi(z,v.current);_(),p.setState({userSelectionRect:{width:0,height:0,startX:O,startY:F,x:O,y:F}}),r==null||r(z)},P=z=>{const{userSelectionRect:_,nodeInternals:D,edges:O,transform:F,onNodesChange:j,onEdgesChange:A,nodeOrigin:$,getNodes:B}=p.getState();if(!e||!v.current||!_)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const I=Bi(z,v.current),H=_.startX??0,V=_.startY??0,W={..._,x:I.x<H?I.x:H,y:I.y<V?I.y:V,width:Math.abs(I.x-H),height:Math.abs(I.y-V)},Y=B(),Z=yF(D,W,F,t===Lf.Partial,!0,$),ae=vF(Z,O).map(re=>re.id),se=Z.map(re=>re.id);if(m.current!==se.length){m.current=se.length;const re=tc(Y,se);re.length&&(j==null||j(re))}if(g.current!==ae.length){g.current=ae.length;const re=tc(O,ae);re.length&&(A==null||A(re))}p.setState({userSelectionRect:W})},T=z=>{if(z.button!==0)return;const{userSelectionRect:_}=p.getState();!x&&_&&z.target===h.current&&(C==null||C(z)),p.setState({nodesSelectionActive:m.current>0}),S(),s==null||s(z)},R=z=>{x&&(p.setState({nodesSelectionActive:m.current>0}),s==null||s(z)),S()},L=w&&(e||x);return M.createElement("div",{className:Cn(["react-flow__pane",{dragging:b,selection:e}]),onClick:L?void 0:Vx(C,h),onContextMenu:Vx(E,h),onWheel:Vx(k,h),onMouseEnter:L?void 0:l,onMouseDown:L?N:void 0,onMouseMove:L?P:c,onMouseUp:L?T:void 0,onMouseLeave:L?R:u,ref:h,style:ck},d,M.createElement(Aue,null))});$F.displayName="Pane";function LF(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:LF(r,t):!1}function VT(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function jue(e,t,n,r){return Array.from(e.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!LF(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>{var o,i;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((o=s.positionAbsolute)==null?void 0:o.x)??0),y:n.y-(((i=s.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function Oue(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function FF(e,t,n,r,s=[0,0],o){const i=Oue(e,e.extent||r);let a=i;const l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){const d=n.get(l),{x:h,y:p}=Ga(d,s).positionAbsolute;a=d&&Yr(h)&&Yr(p)&&Yr(d.width)&&Yr(d.height)?[[h+e.width*s[0],p+e.height*s[1]],[h+d.width-e.width+e.width*s[0],p+d.height-e.height+e.height*s[1]]]:a}else o==null||o("005",Bo.error005()),a=i;else if(e.extent&&l&&e.extent!=="parent"){const d=n.get(l),{x:h,y:p}=Ga(d,s).positionAbsolute;a=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let c={x:0,y:0};if(l){const d=n.get(l);c=Ga(d,s).positionAbsolute}const u=a&&a!=="parent"?tk(t,a):t;return{position:{x:u.x-c.x,y:u.y-c.y},positionAbsolute:u}}function Wx({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?r.find(s=>s.id===e):r[0],r]}const WT=(e,t,n,r)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const o=Array.from(s),i=t.getBoundingClientRect(),a={x:i.width*r[0],y:i.height*r[1]};return o.map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(c.left-i.left-a.x)/n,y:(c.top-i.top-a.y)/n,...ek(l)}})};function Uu(e,t,n){return n===void 0?n:r=>{const s=t().nodeInternals.get(e);s&&n(r,{...s})}}function F1({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:i,nodeInternals:a,onError:l}=t.getState(),c=a.get(e);if(!c){l==null||l("012",Bo.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&i)&&(o({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):s([e])}function Mue(){const e=Vt();return y.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:o}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:o?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:o?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function qx(e){return(t,n,r)=>e==null?void 0:e(t,r)}function BF({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,selectNodesOnDrag:i}){const a=Vt(),[l,c]=y.useState(!1),u=y.useRef([]),d=y.useRef({x:null,y:null}),h=y.useRef(0),p=y.useRef(null),m=y.useRef({x:0,y:0}),g=y.useRef(null),v=y.useRef(!1),x=y.useRef(!1),w=y.useRef(!1),b=Mue();return y.useEffect(()=>{if(e!=null&&e.current){const S=qr(e.current),C=({x:N,y:P})=>{const{nodeInternals:T,onNodeDrag:R,onSelectionDrag:L,updateNodePositions:z,nodeExtent:_,snapGrid:D,snapToGrid:O,nodeOrigin:F,onError:j}=a.getState();d.current={x:N,y:P};let A=!1,$={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&_){const I=Cv(u.current,F);$=$f(I)}if(u.current=u.current.map(I=>{const H={x:N-I.distance.x,y:P-I.distance.y};O&&(H.x=D[0]*Math.round(H.x/D[0]),H.y=D[1]*Math.round(H.y/D[1]));const V=[[_[0][0],_[0][1]],[_[1][0],_[1][1]]];u.current.length>1&&_&&!I.extent&&(V[0][0]=I.positionAbsolute.x-$.x+_[0][0],V[1][0]=I.positionAbsolute.x+(I.width??0)-$.x2+_[1][0],V[0][1]=I.positionAbsolute.y-$.y+_[0][1],V[1][1]=I.positionAbsolute.y+(I.height??0)-$.y2+_[1][1]);const W=FF(I,H,T,V,F,j);return A=A||I.position.x!==W.position.x||I.position.y!==W.position.y,I.position=W.position,I.positionAbsolute=W.positionAbsolute,I}),!A)return;z(u.current,!0,!0),c(!0);const B=s?R:qx(L);if(B&&g.current){const[I,H]=Wx({nodeId:s,dragItems:u.current,nodeInternals:T});B(g.current,I,H)}},E=()=>{if(!p.current)return;const[N,P]=iF(m.current,p.current);if(N!==0||P!==0){const{transform:T,panBy:R}=a.getState();d.current.x=(d.current.x??0)-N/T[2],d.current.y=(d.current.y??0)-P/T[2],R({x:N,y:P})&&C(d.current)}h.current=requestAnimationFrame(E)},k=N=>{var F;const{nodeInternals:P,multiSelectionActive:T,nodesDraggable:R,unselectNodesAndEdges:L,onNodeDragStart:z,onSelectionDragStart:_}=a.getState();x.current=!0;const D=s?z:qx(_);(!i||!o)&&!T&&s&&((F=P.get(s))!=null&&F.selected||L()),s&&o&&i&&F1({id:s,store:a,nodeRef:e});const O=b(N);if(d.current=O,u.current=jue(P,R,O,s),D&&u.current){const[j,A]=Wx({nodeId:s,dragItems:u.current,nodeInternals:P});D(N.sourceEvent,j,A)}};if(t)S.on(".drag",null);else{const N=qae().on("start",P=>{const{domNode:T,nodeDragThreshold:R}=a.getState();R===0&&k(P),w.current=!1;const L=b(P);d.current=L,p.current=(T==null?void 0:T.getBoundingClientRect())||null,m.current=Bi(P.sourceEvent,p.current)}).on("drag",P=>{var z,_;const T=b(P),{autoPanOnNodeDrag:R,nodeDragThreshold:L}=a.getState();if(P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!v.current&&x.current&&R&&(v.current=!0,E()),!x.current){const D=T.xSnapped-(((z=d==null?void 0:d.current)==null?void 0:z.x)??0),O=T.ySnapped-(((_=d==null?void 0:d.current)==null?void 0:_.y)??0);Math.sqrt(D*D+O*O)>L&&k(P)}(d.current.x!==T.xSnapped||d.current.y!==T.ySnapped)&&u.current&&x.current&&(g.current=P.sourceEvent,m.current=Bi(P.sourceEvent,p.current),C(T))}}).on("end",P=>{if(!(!x.current||w.current)&&(c(!1),v.current=!1,x.current=!1,cancelAnimationFrame(h.current),u.current)){const{updateNodePositions:T,nodeInternals:R,onNodeDragStop:L,onSelectionDragStop:z}=a.getState(),_=s?L:qx(z);if(T(u.current,!1,!1),_){const[D,O]=Wx({nodeId:s,dragItems:u.current,nodeInternals:R});_(P.sourceEvent,D,O)}}}).filter(P=>{const T=P.target;return!P.button&&(!n||!VT(T,`.${n}`,e))&&(!r||VT(T,r,e))});return S.call(N),()=>{S.on(".drag",null)}}}},[e,t,n,r,o,a,s,i,b]),l}function zF(){const e=Vt();return y.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:o,getNodes:i,snapToGrid:a,snapGrid:l,onError:c,nodesDraggable:u}=e.getState(),d=i().filter(w=>w.selected&&(w.draggable||u&&typeof w.draggable>"u")),h=a?l[0]:5,p=a?l[1]:5,m=n.isShiftPressed?4:1,g=n.x*h*m,v=n.y*p*m,x=d.map(w=>{if(w.positionAbsolute){const b={x:w.positionAbsolute.x+g,y:w.positionAbsolute.y+v};a&&(b.x=l[0]*Math.round(b.x/l[0]),b.y=l[1]*Math.round(b.y/l[1]));const{positionAbsolute:S,position:C}=FF(w,b,r,s,void 0,c);w.position=C,w.positionAbsolute=S}return w});o(x,!0,!1)},[])}const _c={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Hu=e=>{const t=({id:n,type:r,data:s,xPos:o,yPos:i,xPosOrigin:a,yPosOrigin:l,selected:c,onClick:u,onMouseEnter:d,onMouseMove:h,onMouseLeave:p,onContextMenu:m,onDoubleClick:g,style:v,className:x,isDraggable:w,isSelectable:b,isConnectable:S,isFocusable:C,selectNodesOnDrag:E,sourcePosition:k,targetPosition:N,hidden:P,resizeObserver:T,dragHandle:R,zIndex:L,isParent:z,noDragClassName:_,noPanClassName:D,initialized:O,disableKeyboardA11y:F,ariaLabel:j,rfId:A,hasHandleBounds:$})=>{const B=Vt(),I=y.useRef(null),H=y.useRef(null),V=y.useRef(k),W=y.useRef(N),Y=y.useRef(r),Z=b||w||u||d||h||p,ae=zF(),se=Uu(n,B.getState,d),re=Uu(n,B.getState,h),De=Uu(n,B.getState,p),me=Uu(n,B.getState,m),Ce=Uu(n,B.getState,g),U=fe=>{const{nodeDragThreshold:Q}=B.getState();if(b&&(!E||!w||Q>0)&&F1({id:n,store:B,nodeRef:I}),u){const Ae=B.getState().nodeInternals.get(n);Ae&&u(fe,{...Ae})}},q=fe=>{if(!M1(fe)&&!F)if(uF.includes(fe.key)&&b){const Q=fe.key==="Escape";F1({id:n,store:B,unselect:Q,nodeRef:I})}else w&&c&&Object.prototype.hasOwnProperty.call(_c,fe.key)&&(B.setState({ariaLiveMessage:`Moved selected node ${fe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~i}`}),ae({x:_c[fe.key].x,y:_c[fe.key].y,isShiftPressed:fe.shiftKey}))};y.useEffect(()=>()=>{H.current&&(T==null||T.unobserve(H.current),H.current=null)},[]),y.useEffect(()=>{if(I.current&&!P){const fe=I.current;(!O||!$||H.current!==fe)&&(H.current&&(T==null||T.unobserve(H.current)),T==null||T.observe(fe),H.current=fe)}},[P,O,$]),y.useEffect(()=>{const fe=Y.current!==r,Q=V.current!==k,Ae=W.current!==N;I.current&&(fe||Q||Ae)&&(fe&&(Y.current=r),Q&&(V.current=k),Ae&&(W.current=N),B.getState().updateNodeDimensions([{id:n,nodeElement:I.current,forceUpdate:!0}]))},[n,r,k,N]);const he=BF({nodeRef:I,disabled:P||!w,noDragClassName:_,handleSelector:R,nodeId:n,isSelectable:b,selectNodesOnDrag:E});return P?null:M.createElement("div",{className:Cn(["react-flow__node",`react-flow__node-${r}`,{[D]:w},x,{selected:c,selectable:b,parent:z,dragging:he}]),ref:I,style:{zIndex:L,transform:`translate(${a}px,${l}px)`,pointerEvents:Z?"all":"none",visibility:O?"visible":"hidden",...v},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:se,onMouseMove:re,onMouseLeave:De,onContextMenu:me,onClick:U,onDoubleClick:Ce,onKeyDown:C?q:void 0,tabIndex:C?0:void 0,role:C?"button":void 0,"aria-describedby":F?void 0:`${TF}-${A}`,"aria-label":j},M.createElement(Jce,{value:n},M.createElement(e,{id:n,data:s,type:r,xPos:o,yPos:i,selected:c,isConnectable:S,sourcePosition:k,targetPosition:N,dragging:he,dragHandle:R,zIndex:L})))};return t.displayName="NodeWrapper",y.memo(t)};const Iue=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Cv(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Due({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Vt(),{width:s,height:o,x:i,y:a,transformString:l,userSelectionActive:c}=st(Iue,sn),u=zF(),d=y.useRef(null);if(y.useEffect(()=>{var m;n||(m=d.current)==null||m.focus({preventScroll:!0})},[n]),BF({nodeRef:d}),c||!s||!o)return null;const h=e?m=>{const g=r.getState().getNodes().filter(v=>v.selected);e(m,g)}:void 0,p=m=>{Object.prototype.hasOwnProperty.call(_c,m.key)&&u({x:_c[m.key].x,y:_c[m.key].y,isShiftPressed:m.shiftKey})};return M.createElement("div",{className:Cn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},M.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:s,height:o,top:a,left:i}}))}var $ue=y.memo(Due);const Lue=e=>e.nodesSelectionActive,UF=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:i,deleteKeyCode:a,onMove:l,onMoveStart:c,onMoveEnd:u,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:v,panActivationKeyCode:x,zoomActivationKeyCode:w,elementsSelectable:b,zoomOnScroll:S,zoomOnPinch:C,panOnScroll:E,panOnScrollSpeed:k,panOnScrollMode:N,zoomOnDoubleClick:P,panOnDrag:T,defaultViewport:R,translateExtent:L,minZoom:z,maxZoom:_,preventScrolling:D,onSelectionContextMenu:O,noWheelClassName:F,noPanClassName:j,disableKeyboardA11y:A})=>{const $=st(Lue),B=Ff(d),I=Ff(x),H=I||T,V=I||E,W=B||h&&H!==!0;return Cue({deleteKeyCode:a,multiSelectionKeyCode:v}),M.createElement(Nue,{onMove:l,onMoveStart:c,onMoveEnd:u,onPaneContextMenu:o,elementsSelectable:b,zoomOnScroll:S,zoomOnPinch:C,panOnScroll:V,panOnScrollSpeed:k,panOnScrollMode:N,zoomOnDoubleClick:P,panOnDrag:!B&&H,defaultViewport:R,translateExtent:L,minZoom:z,maxZoom:_,zoomActivationKeyCode:w,preventScrolling:D,noWheelClassName:F,noPanClassName:j},M.createElement($F,{onSelectionStart:m,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:i,panOnDrag:H,isSelecting:!!W,selectionMode:p},e,$&&M.createElement($ue,{onSelectionContextMenu:O,noPanClassName:j,disableKeyboardA11y:A})))};UF.displayName="FlowRenderer";var Fue=y.memo(UF);function Bue(e){return st(y.useCallback(n=>e?yF(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function zue(e){const t={input:Hu(e.input||_F),default:Hu(e.default||L1),output:Hu(e.output||PF),group:Hu(e.group||lk)},n={},r=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,o)=>(s[o]=Hu(e[o]||L1),s),n);return{...t,...r}}const Uue=({x:e,y:t,width:n,height:r,origin:s})=>!n||!r?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-n*s[0],y:t-r*s[1]},Hue=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),HF=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:o,onError:i}=st(Hue,sn),a=Bue(e.onlyRenderVisibleElements),l=y.useRef(),c=y.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(d=>{const h=d.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));o(h)});return l.current=u,u},[]);return y.useEffect(()=>()=>{var u;(u=l==null?void 0:l.current)==null||u.disconnect()},[]),M.createElement("div",{className:"react-flow__nodes",style:ck},a.map(u=>{var C,E,k;let d=u.type||"default";e.nodeTypes[d]||(i==null||i("003",Bo.error003(d)),d="default");const h=e.nodeTypes[d]||e.nodeTypes.default,p=!!(u.draggable||t&&typeof u.draggable>"u"),m=!!(u.selectable||s&&typeof u.selectable>"u"),g=!!(u.connectable||n&&typeof u.connectable>"u"),v=!!(u.focusable||r&&typeof u.focusable>"u"),x=e.nodeExtent?tk(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,w=(x==null?void 0:x.x)??0,b=(x==null?void 0:x.y)??0,S=Uue({x:w,y:b,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return M.createElement(h,{key:u.id,id:u.id,className:u.className,style:u.style,type:d,data:u.data,sourcePosition:u.sourcePosition||xe.Bottom,targetPosition:u.targetPosition||xe.Top,hidden:u.hidden,xPos:w,yPos:b,xPosOrigin:S.x,yPosOrigin:S.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:p,isSelectable:m,isConnectable:g,isFocusable:v,resizeObserver:c,dragHandle:u.dragHandle,zIndex:((C=u[Ct])==null?void 0:C.z)??0,isParent:!!((E=u[Ct])!=null&&E.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!((k=u[Ct])!=null&&k.handleBounds)})}))};HF.displayName="NodeRenderer";var Vue=y.memo(HF);const Wue=(e,t,n)=>n===xe.Left?e-t:n===xe.Right?e+t:e,que=(e,t,n)=>n===xe.Top?e-t:n===xe.Bottom?e+t:e,qT="react-flow__edgeupdater",GT=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:i,type:a})=>M.createElement("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:i,className:Cn([qT,`${qT}-${a}`]),cx:Wue(t,r,e),cy:que(n,r,e),r,stroke:"transparent",fill:"transparent"}),Gue=()=>!0;var Ol=e=>{const t=({id:n,className:r,type:s,data:o,onClick:i,onEdgeDoubleClick:a,selected:l,animated:c,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,source:x,target:w,sourceX:b,sourceY:S,targetX:C,targetY:E,sourcePosition:k,targetPosition:N,elementsSelectable:P,hidden:T,sourceHandleId:R,targetHandleId:L,onContextMenu:z,onMouseEnter:_,onMouseMove:D,onMouseLeave:O,reconnectRadius:F,onReconnect:j,onReconnectStart:A,onReconnectEnd:$,markerEnd:B,markerStart:I,rfId:H,ariaLabel:V,isFocusable:W,isReconnectable:Y,pathOptions:Z,interactionWidth:ae,disableKeyboardA11y:se})=>{const re=y.useRef(null),[De,me]=y.useState(!1),[Ce,U]=y.useState(!1),q=Vt(),he=y.useMemo(()=>`url('#${D1(I,H)}')`,[I,H]),fe=y.useMemo(()=>`url('#${D1(B,H)}')`,[B,H]);if(T)return null;const Q=Ee=>{var Ge;const{edges:J,addSelectedEdges:X,unselectNodesAndEdges:ge,multiSelectionActive:be}=q.getState(),Fe=J.find(ke=>ke.id===n);Fe&&(P&&(q.setState({nodesSelectionActive:!1}),Fe.selected&&be?(ge({nodes:[],edges:[Fe]}),(Ge=re.current)==null||Ge.blur()):X([n])),i&&i(Ee,Fe))},Ae=zu(n,q.getState,a),je=zu(n,q.getState,z),ut=zu(n,q.getState,_),Mn=zu(n,q.getState,D),Wt=zu(n,q.getState,O),ln=(Ee,J)=>{if(Ee.button!==0)return;const{edges:X,isValidConnection:ge}=q.getState(),be=J?w:x,Fe=(J?L:R)||null,Ge=J?"target":"source",ke=ge||Gue,Ye=J,Mr=X.find(Nt=>Nt.id===n);U(!0),A==null||A(Ee,Mr,Ge);const as=Nt=>{U(!1),$==null||$(Nt,Mr,Ge)};SF({event:Ee,handleId:Fe,nodeId:be,onConnect:Nt=>j==null?void 0:j(Mr,Nt),isTarget:Ye,getState:q.getState,setState:q.setState,isValidConnection:ke,edgeUpdaterType:Ge,onReconnectEnd:as})},Or=Ee=>ln(Ee,!0),ur=Ee=>ln(Ee,!1),qt=()=>me(!0),ue=()=>me(!1),ie=!P&&!i,Se=Ee=>{var J;if(!se&&uF.includes(Ee.key)&&P){const{unselectNodesAndEdges:X,addSelectedEdges:ge,edges:be}=q.getState();Ee.key==="Escape"?((J=re.current)==null||J.blur(),X({edges:[be.find(Ge=>Ge.id===n)]})):ge([n])}};return M.createElement("g",{className:Cn(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:l,animated:c,inactive:ie,updating:De}]),onClick:Q,onDoubleClick:Ae,onContextMenu:je,onMouseEnter:ut,onMouseMove:Mn,onMouseLeave:Wt,onKeyDown:W?Se:void 0,tabIndex:W?0:void 0,role:W?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":V===null?void 0:V||`Edge from ${x} to ${w}`,"aria-describedby":W?`${RF}-${H}`:void 0,ref:re},!Ce&&M.createElement(e,{id:n,source:x,target:w,selected:l,animated:c,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,data:o,style:v,sourceX:b,sourceY:S,targetX:C,targetY:E,sourcePosition:k,targetPosition:N,sourceHandleId:R,targetHandleId:L,markerStart:he,markerEnd:fe,pathOptions:Z,interactionWidth:ae}),Y&&M.createElement(M.Fragment,null,(Y==="source"||Y===!0)&&M.createElement(GT,{position:k,centerX:b,centerY:S,radius:F,onMouseDown:Or,onMouseEnter:qt,onMouseOut:ue,type:"source"}),(Y==="target"||Y===!0)&&M.createElement(GT,{position:N,centerX:C,centerY:E,radius:F,onMouseDown:ur,onMouseEnter:qt,onMouseOut:ue,type:"target"})))};return t.displayName="EdgeWrapper",y.memo(t)};function Kue(e){const t={default:Ol(e.default||Zg),straight:Ol(e.bezier||sk),step:Ol(e.step||rk),smoothstep:Ol(e.step||Sv),simplebezier:Ol(e.simplebezier||nk)},n={},r=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,o)=>(s[o]=Ol(e[o]||Zg),s),n);return{...t,...r}}function KT(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,s=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case xe.Top:return{x:r+o/2,y:s};case xe.Right:return{x:r+o,y:s+i/2};case xe.Bottom:return{x:r+o/2,y:s+i};case xe.Left:return{x:r,y:s+i/2}}}function JT(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Jue=(e,t,n,r,s,o)=>{const i=KT(n,e,t),a=KT(o,r,s);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}};function Yue({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:o,width:i,height:a,transform:l}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+s),y2:Math.max(e.y+r,t.y+o)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u=$f({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:a/l[2]}),d=Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x)),h=Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y));return Math.ceil(d*h)>0}function YT(e){var r,s,o,i,a;const t=((r=e==null?void 0:e[Ct])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Xue=[{level:0,isMaxLevel:!0,edges:[]}];function Que(e,t,n=!1){let r=-1;const s=e.reduce((i,a)=>{var u,d;const l=Yr(a.zIndex);let c=l?a.zIndex:0;if(n){const h=t.get(a.target),p=t.get(a.source),m=a.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),g=Math.max(((u=p==null?void 0:p[Ct])==null?void 0:u.z)||0,((d=h==null?void 0:h[Ct])==null?void 0:d.z)||0,1e3);c=(l?a.zIndex:0)+(m?g:0)}return i[c]?i[c].push(a):i[c]=[a],r=c>r?c:r,i},{}),o=Object.entries(s).map(([i,a])=>{const l=+i;return{edges:a,level:l,isMaxLevel:l===r}});return o.length===0?Xue:o}function Zue(e,t,n){const r=st(y.useCallback(s=>e?s.edges.filter(o=>{const i=t.get(o.source),a=t.get(o.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Yue({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:a.width,targetHeight:a.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return Que(r,t,n)}const ede=({color:e="none",strokeWidth:t=1})=>M.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),tde=({color:e="none",strokeWidth:t=1})=>M.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),XT={[Kc.Arrow]:ede,[Kc.ArrowClosed]:tde};function nde(e){const t=Vt();return y.useMemo(()=>{var s,o;return Object.prototype.hasOwnProperty.call(XT,e)?XT[e]:((o=(s=t.getState()).onError)==null||o.call(s,"009",Bo.error009(e)),null)},[e])}const rde=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const l=nde(t);return l?M.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0"},M.createElement(l,{color:n,strokeWidth:i})):null},sde=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((s,o)=>([o.markerStart,o.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const a=D1(i,t);r.includes(a)||(s.push({id:a,color:i.color||e,...i}),r.push(a))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))},VF=({defaultColor:e,rfId:t})=>{const n=st(y.useCallback(sde({defaultColor:e,rfId:t}),[e,t]),(r,s)=>!(r.length!==s.length||r.some((o,i)=>o.id!==s[i].id)));return M.createElement("defs",null,n.map(r=>M.createElement(rde,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};VF.displayName="MarkerDefinitions";var ode=y.memo(VF);const ide=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),WF=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:o,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:u,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:p,onReconnectEnd:m,reconnectRadius:g,children:v,disableKeyboardA11y:x})=>{const{edgesFocusable:w,edgesUpdatable:b,elementsSelectable:S,width:C,height:E,connectionMode:k,nodeInternals:N,onError:P}=st(ide,sn),T=Zue(t,N,n);return C?M.createElement(M.Fragment,null,T.map(({level:R,edges:L,isMaxLevel:z})=>M.createElement("svg",{key:R,style:{zIndex:R},width:C,height:E,className:"react-flow__edges react-flow__container"},z&&M.createElement(ode,{defaultColor:e,rfId:r}),M.createElement("g",null,L.map(_=>{const[D,O,F]=YT(N.get(_.source)),[j,A,$]=YT(N.get(_.target));if(!F||!$)return null;let B=_.type||"default";s[B]||(P==null||P("011",Bo.error011(B)),B="default");const I=s[B]||s.default,H=k===ll.Strict?A.target:(A.target??[]).concat(A.source??[]),V=JT(O.source,_.sourceHandle),W=JT(H,_.targetHandle),Y=(V==null?void 0:V.position)||xe.Bottom,Z=(W==null?void 0:W.position)||xe.Top,ae=!!(_.focusable||w&&typeof _.focusable>"u"),se=_.reconnectable||_.updatable,re=typeof h<"u"&&(se||b&&typeof se>"u");if(!V||!W)return P==null||P("008",Bo.error008(V,_)),null;const{sourceX:De,sourceY:me,targetX:Ce,targetY:U}=Jue(D,V,Y,j,W,Z);return M.createElement(I,{key:_.id,id:_.id,className:Cn([_.className,o]),type:B,data:_.data,selected:!!_.selected,animated:!!_.animated,hidden:!!_.hidden,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,style:_.style,source:_.source,target:_.target,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerEnd:_.markerEnd,markerStart:_.markerStart,sourceX:De,sourceY:me,targetX:Ce,targetY:U,sourcePosition:Y,targetPosition:Z,elementsSelectable:S,onContextMenu:i,onMouseEnter:a,onMouseMove:l,onMouseLeave:c,onClick:u,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:p,onReconnectEnd:m,reconnectRadius:g,rfId:r,ariaLabel:_.ariaLabel,isFocusable:ae,isReconnectable:re,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth,disableKeyboardA11y:x})})))),v):null};WF.displayName="EdgeRenderer";var ade=y.memo(WF);const lde=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function cde({children:e}){const t=st(lde);return M.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function ude(e){const t=Ev(),n=y.useRef(!1);y.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const dde={[xe.Left]:xe.Right,[xe.Right]:xe.Left,[xe.Top]:xe.Bottom,[xe.Bottom]:xe.Top},qF=({nodeId:e,handleType:t,style:n,type:r=vi.Bezier,CustomComponent:s,connectionStatus:o})=>{var E,k,N;const{fromNode:i,handleId:a,toX:l,toY:c,connectionMode:u}=st(y.useCallback(P=>({fromNode:P.nodeInternals.get(e),handleId:P.connectionHandleId,toX:(P.connectionPosition.x-P.transform[0])/P.transform[2],toY:(P.connectionPosition.y-P.transform[1])/P.transform[2],connectionMode:P.connectionMode}),[e]),sn),d=(E=i==null?void 0:i[Ct])==null?void 0:E.handleBounds;let h=d==null?void 0:d[t];if(u===ll.Loose&&(h=h||(d==null?void 0:d[t==="source"?"target":"source"])),!i||!h)return null;const p=a?h.find(P=>P.id===a):h[0],m=p?p.x+p.width/2:(i.width??0)/2,g=p?p.y+p.height/2:i.height??0,v=(((k=i.positionAbsolute)==null?void 0:k.x)??0)+m,x=(((N=i.positionAbsolute)==null?void 0:N.y)??0)+g,w=p==null?void 0:p.position,b=w?dde[w]:null;if(!w||!b)return null;if(s)return M.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:p,fromX:v,fromY:x,toX:l,toY:c,fromPosition:w,toPosition:b,connectionStatus:o});let S="";const C={sourceX:v,sourceY:x,sourcePosition:w,targetX:l,targetY:c,targetPosition:b};return r===vi.Bezier?[S]=ok(C):r===vi.Step?[S]=I1({...C,borderRadius:0}):r===vi.SmoothStep?[S]=I1(C):r===vi.SimpleBezier?[S]=pF(C):S=`M${v},${x} ${l},${c}`,M.createElement("path",{d:S,fill:"none",className:"react-flow__connection-path",style:n})};qF.displayName="ConnectionLine";const fde=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function hde({containerStyle:e,style:t,type:n,component:r}){const{nodeId:s,handleType:o,nodesConnectable:i,width:a,height:l,connectionStatus:c}=st(fde,sn);return!(s&&o&&a&&i)?null:M.createElement("svg",{style:e,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},M.createElement("g",{className:Cn(["react-flow__connection",c])},M.createElement(qF,{nodeId:s,handleType:o,style:t,type:n,CustomComponent:r,connectionStatus:c})))}function QT(e,t){return y.useRef(null),Vt(),y.useMemo(()=>t(e),[e])}const GF=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:o,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:m,onSelectionStart:g,onSelectionEnd:v,connectionLineType:x,connectionLineStyle:w,connectionLineComponent:b,connectionLineContainerStyle:S,selectionKeyCode:C,selectionOnDrag:E,selectionMode:k,multiSelectionKeyCode:N,panActivationKeyCode:P,zoomActivationKeyCode:T,deleteKeyCode:R,onlyRenderVisibleElements:L,elementsSelectable:z,selectNodesOnDrag:_,defaultViewport:D,translateExtent:O,minZoom:F,maxZoom:j,preventScrolling:A,defaultMarkerColor:$,zoomOnScroll:B,zoomOnPinch:I,panOnScroll:H,panOnScrollSpeed:V,panOnScrollMode:W,zoomOnDoubleClick:Y,panOnDrag:Z,onPaneClick:ae,onPaneMouseEnter:se,onPaneMouseMove:re,onPaneMouseLeave:De,onPaneScroll:me,onPaneContextMenu:Ce,onEdgeContextMenu:U,onEdgeMouseEnter:q,onEdgeMouseMove:he,onEdgeMouseLeave:fe,onReconnect:Q,onReconnectStart:Ae,onReconnectEnd:je,reconnectRadius:ut,noDragClassName:Mn,noWheelClassName:Wt,noPanClassName:ln,elevateEdgesOnSelect:Or,disableKeyboardA11y:ur,nodeOrigin:qt,nodeExtent:ue,rfId:ie})=>{const Se=QT(e,zue),Ee=QT(t,Kue);return ude(o),M.createElement(Fue,{onPaneClick:ae,onPaneMouseEnter:se,onPaneMouseMove:re,onPaneMouseLeave:De,onPaneContextMenu:Ce,onPaneScroll:me,deleteKeyCode:R,selectionKeyCode:C,selectionOnDrag:E,selectionMode:k,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:N,panActivationKeyCode:P,zoomActivationKeyCode:T,elementsSelectable:z,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:B,zoomOnPinch:I,zoomOnDoubleClick:Y,panOnScroll:H,panOnScrollSpeed:V,panOnScrollMode:W,panOnDrag:Z,defaultViewport:D,translateExtent:O,minZoom:F,maxZoom:j,onSelectionContextMenu:m,preventScrolling:A,noDragClassName:Mn,noWheelClassName:Wt,noPanClassName:ln,disableKeyboardA11y:ur},M.createElement(cde,null,M.createElement(ade,{edgeTypes:Ee,onEdgeClick:a,onEdgeDoubleClick:c,onlyRenderVisibleElements:L,onEdgeContextMenu:U,onEdgeMouseEnter:q,onEdgeMouseMove:he,onEdgeMouseLeave:fe,onReconnect:Q,onReconnectStart:Ae,onReconnectEnd:je,reconnectRadius:ut,defaultMarkerColor:$,noPanClassName:ln,elevateEdgesOnSelect:!!Or,disableKeyboardA11y:ur,rfId:ie},M.createElement(hde,{style:w,type:x,component:b,containerStyle:S})),M.createElement("div",{className:"react-flow__edgelabel-renderer"}),M.createElement(Vue,{nodeTypes:Se,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:_,onlyRenderVisibleElements:L,noPanClassName:ln,noDragClassName:Mn,disableKeyboardA11y:ur,nodeOrigin:qt,nodeExtent:ue,rfId:ie})))};GF.displayName="GraphView";var pde=y.memo(GF);const B1=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Zo={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:B1,nodeExtent:B1,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ll.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Hce,isValidConnection:void 0},mde=()=>sie((e,t)=>({...Zo,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:o}=t();e({nodeInternals:Hx(n,r,s,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",o=typeof r<"u",i=s?Hx(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:o?r:[],hasDefaultNodes:s,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:o,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:l,nodeOrigin:c}=t(),u=l==null?void 0:l.querySelector(".react-flow__viewport");if(!u)return;const d=window.getComputedStyle(u),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=n.reduce((g,v)=>{const x=s.get(v.id);if(x!=null&&x.hidden)s.set(x.id,{...x,[Ct]:{...x[Ct],handleBounds:void 0}});else if(x){const w=ek(v.nodeElement);!!(w.width&&w.height&&(x.width!==w.width||x.height!==w.height||v.forceUpdate))&&(s.set(x.id,{...x,[Ct]:{...x[Ct],handleBounds:{source:WT(".source",v.nodeElement,h,c),target:WT(".target",v.nodeElement,h,c)}},...w}),g.push({id:x.id,type:"dimensions",dimensions:w}))}return g},[]);OF(s,c);const m=i||o&&!i&&MF(t,{initial:!0,...a});e({nodeInternals:new Map(s),fitViewOnInitDone:m}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:o}=t(),i=n.map(a=>{const l={id:a.id,type:"position",dragging:s};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});o(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:o,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(o){const c=DF(n,a()),u=Hx(c,s,i,l);e({nodeInternals:u})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=t();let i,a=null;r?i=n.map(l=>fi(l,!0)):(i=tc(o(),n),a=tc(s,[])),Sp({changedNodes:i,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=t();let i,a=null;r?i=n.map(l=>fi(l,!0)):(i=tc(s,n),a=tc(o(),[])),Sp({changedNodes:a,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:o}=t(),i=n||o(),a=r||s,l=i.map(u=>(u.selected=!1,fi(u.id,!1))),c=a.map(u=>fi(u.id,!1));Sp({changedNodes:l,changedEdges:c,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=t();r==null||r.scaleExtent([n,s]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=t();r==null||r.scaleExtent([s,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),o=r().filter(a=>a.selected).map(a=>fi(a.id,!1)),i=n.filter(a=>a.selected).map(a=>fi(a.id,!1));Sp({changedNodes:o,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(s=>{s.positionAbsolute=tk(s.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:o,d3Zoom:i,d3Selection:a,translateExtent:l}=t();if(!i||!a||!n.x&&!n.y)return!1;const c=Ro.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),u=[[0,0],[s,o]],d=i==null?void 0:i.constrain()(c,u,l);return i.transform(a,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Zo.connectionNodeId,connectionHandleId:Zo.connectionHandleId,connectionHandleType:Zo.connectionHandleType,connectionStatus:Zo.connectionStatus,connectionStartHandle:Zo.connectionStartHandle,connectionEndHandle:Zo.connectionEndHandle}),reset:()=>e({...Zo})}),Object.is),uk=({children:e})=>{const t=y.useRef(null);return t.current||(t.current=mde()),M.createElement(Dce,{value:t.current},e)};uk.displayName="ReactFlowProvider";const KF=({children:e})=>y.useContext(bv)?M.createElement(M.Fragment,null,e):M.createElement(uk,null,e);KF.displayName="ReactFlowWrapper";const gde={input:_F,default:L1,output:PF,group:lk},yde={default:Zg,straight:sk,step:rk,smoothstep:Sv,simplebezier:nk},vde=[0,0],xde=[15,15],wde={x:0,y:0,zoom:1},bde={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},JF=y.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o=gde,edgeTypes:i=yde,onNodeClick:a,onEdgeClick:l,onInit:c,onMove:u,onMoveStart:d,onMoveEnd:h,onConnect:p,onConnectStart:m,onConnectEnd:g,onClickConnectStart:v,onClickConnectEnd:x,onNodeMouseEnter:w,onNodeMouseMove:b,onNodeMouseLeave:S,onNodeContextMenu:C,onNodeDoubleClick:E,onNodeDragStart:k,onNodeDrag:N,onNodeDragStop:P,onNodesDelete:T,onEdgesDelete:R,onSelectionChange:L,onSelectionDragStart:z,onSelectionDrag:_,onSelectionDragStop:D,onSelectionContextMenu:O,onSelectionStart:F,onSelectionEnd:j,connectionMode:A=ll.Strict,connectionLineType:$=vi.Bezier,connectionLineStyle:B,connectionLineComponent:I,connectionLineContainerStyle:H,deleteKeyCode:V="Backspace",selectionKeyCode:W="Shift",selectionOnDrag:Y=!1,selectionMode:Z=Lf.Full,panActivationKeyCode:ae="Space",multiSelectionKeyCode:se=Qg()?"Meta":"Control",zoomActivationKeyCode:re=Qg()?"Meta":"Control",snapToGrid:De=!1,snapGrid:me=xde,onlyRenderVisibleElements:Ce=!1,selectNodesOnDrag:U=!0,nodesDraggable:q,nodesConnectable:he,nodesFocusable:fe,nodeOrigin:Q=vde,edgesFocusable:Ae,edgesUpdatable:je,elementsSelectable:ut,defaultViewport:Mn=wde,minZoom:Wt=.5,maxZoom:ln=2,translateExtent:Or=B1,preventScrolling:ur=!0,nodeExtent:qt,defaultMarkerColor:ue="#b1b1b7",zoomOnScroll:ie=!0,zoomOnPinch:Se=!0,panOnScroll:Ee=!1,panOnScrollSpeed:J=.5,panOnScrollMode:X=Ia.Free,zoomOnDoubleClick:ge=!0,panOnDrag:be=!0,onPaneClick:Fe,onPaneMouseEnter:Ge,onPaneMouseMove:ke,onPaneMouseLeave:Ye,onPaneScroll:Mr,onPaneContextMenu:as,children:_t,onEdgeContextMenu:Nt,onEdgeDoubleClick:In,onEdgeMouseEnter:Ds,onEdgeMouseMove:Kn,onEdgeMouseLeave:Dn,onEdgeUpdate:Ir,onEdgeUpdateStart:Go,onEdgeUpdateEnd:It,onReconnect:$s,onReconnectStart:Dr,onReconnectEnd:ls,reconnectRadius:ua=10,edgeUpdaterRadius:da=10,onNodesChange:Ls,onEdgesChange:fa,noDragClassName:Su="nodrag",noWheelClassName:Zz="nowheel",noPanClassName:Vk="nopan",fitView:e5=!1,fitViewOptions:t5,connectOnClick:n5=!0,attributionPosition:r5,proOptions:s5,defaultEdgeOptions:o5,elevateNodesOnSelect:i5=!0,elevateEdgesOnSelect:a5=!1,disableKeyboardA11y:Wk=!1,autoPanOnConnect:l5=!0,autoPanOnNodeDrag:c5=!0,connectionRadius:u5=20,isValidConnection:d5,onError:f5,style:h5,id:qk,nodeDragThreshold:p5,...m5},g5)=>{const Qv=qk||"1";return M.createElement("div",{...m5,style:{...h5,...bde},ref:g5,className:Cn(["react-flow",s]),"data-testid":"rf__wrapper",id:qk},M.createElement(KF,null,M.createElement(pde,{onInit:c,onMove:u,onMoveStart:d,onMoveEnd:h,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:w,onNodeMouseMove:b,onNodeMouseLeave:S,onNodeContextMenu:C,onNodeDoubleClick:E,nodeTypes:o,edgeTypes:i,connectionLineType:$,connectionLineStyle:B,connectionLineComponent:I,connectionLineContainerStyle:H,selectionKeyCode:W,selectionOnDrag:Y,selectionMode:Z,deleteKeyCode:V,multiSelectionKeyCode:se,panActivationKeyCode:ae,zoomActivationKeyCode:re,onlyRenderVisibleElements:Ce,selectNodesOnDrag:U,defaultViewport:Mn,translateExtent:Or,minZoom:Wt,maxZoom:ln,preventScrolling:ur,zoomOnScroll:ie,zoomOnPinch:Se,zoomOnDoubleClick:ge,panOnScroll:Ee,panOnScrollSpeed:J,panOnScrollMode:X,panOnDrag:be,onPaneClick:Fe,onPaneMouseEnter:Ge,onPaneMouseMove:ke,onPaneMouseLeave:Ye,onPaneScroll:Mr,onPaneContextMenu:as,onSelectionContextMenu:O,onSelectionStart:F,onSelectionEnd:j,onEdgeContextMenu:Nt,onEdgeDoubleClick:In,onEdgeMouseEnter:Ds,onEdgeMouseMove:Kn,onEdgeMouseLeave:Dn,onReconnect:$s??Ir,onReconnectStart:Dr??Go,onReconnectEnd:ls??It,reconnectRadius:ua??da,defaultMarkerColor:ue,noDragClassName:Su,noWheelClassName:Zz,noPanClassName:Vk,elevateEdgesOnSelect:a5,rfId:Qv,disableKeyboardA11y:Wk,nodeOrigin:Q,nodeExtent:qt}),M.createElement(due,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:m,onConnectEnd:g,onClickConnectStart:v,onClickConnectEnd:x,nodesDraggable:q,nodesConnectable:he,nodesFocusable:fe,edgesFocusable:Ae,edgesUpdatable:je,elementsSelectable:ut,elevateNodesOnSelect:i5,minZoom:Wt,maxZoom:ln,nodeExtent:qt,onNodesChange:Ls,onEdgesChange:fa,snapToGrid:De,snapGrid:me,connectionMode:A,translateExtent:Or,connectOnClick:n5,defaultEdgeOptions:o5,fitView:e5,fitViewOptions:t5,onNodesDelete:T,onEdgesDelete:R,onNodeDragStart:k,onNodeDrag:N,onNodeDragStop:P,onSelectionDrag:_,onSelectionDragStart:z,onSelectionDragStop:D,noPanClassName:Vk,nodeOrigin:Q,rfId:Qv,autoPanOnConnect:l5,autoPanOnNodeDrag:c5,onError:f5,connectionRadius:u5,isValidConnection:d5,nodeDragThreshold:p5}),M.createElement(cue,{onSelectionChange:L}),_t,M.createElement(Lce,{proOptions:s5,position:r5}),M.createElement(gue,{rfId:Qv,disableKeyboardA11y:Wk})))});JF.displayName="ReactFlow";function YF(e){return t=>{const[n,r]=y.useState(t),s=y.useCallback(o=>r(i=>e(o,i)),[]);return[n,r,s]}}const Sde=YF(DF),Cde=YF(Tue),XF=({id:e,x:t,y:n,width:r,height:s,style:o,color:i,strokeColor:a,strokeWidth:l,className:c,borderRadius:u,shapeRendering:d,onClick:h,selected:p})=>{const{background:m,backgroundColor:g}=o||{},v=i||m||g;return M.createElement("rect",{className:Cn(["react-flow__minimap-node",{selected:p},c]),x:t,y:n,rx:u,ry:u,width:r,height:s,fill:v,stroke:a,strokeWidth:l,shapeRendering:d,onClick:h?x=>h(x,e):void 0})};XF.displayName="MiniMapNode";var Ede=y.memo(XF);const kde=e=>e.nodeOrigin,_de=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Gx=e=>e instanceof Function?e:()=>e;function Nde({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s=2,nodeComponent:o=Ede,onClick:i}){const a=st(_de,sn),l=st(kde),c=Gx(t),u=Gx(e),d=Gx(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return M.createElement(M.Fragment,null,a.map(p=>{const{x:m,y:g}=Ga(p,l).positionAbsolute;return M.createElement(o,{key:p.id,x:m,y:g,width:p.width,height:p.height,style:p.style,selected:p.selected,className:d(p),color:c(p),borderRadius:r,strokeColor:u(p),strokeWidth:s,shapeRendering:h,onClick:i,id:p.id})}))}var Pde=y.memo(Nde);const Ade=200,Tde=150,Rde=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?zce(Cv(t,e.nodeOrigin),n):n,rfId:e.rfId}},jde="react-flow__minimap-desc";function QF({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:s="",nodeBorderRadius:o=5,nodeStrokeWidth:i=2,nodeComponent:a,maskColor:l="rgb(240, 240, 240, 0.6)",maskStrokeColor:c="none",maskStrokeWidth:u=1,position:d="bottom-right",onClick:h,onNodeClick:p,pannable:m=!1,zoomable:g=!1,ariaLabel:v="React Flow mini map",inversePan:x=!1,zoomStep:w=10,offsetScale:b=5}){const S=Vt(),C=y.useRef(null),{boundingRect:E,viewBB:k,rfId:N}=st(Rde,sn),P=(e==null?void 0:e.width)??Ade,T=(e==null?void 0:e.height)??Tde,R=E.width/P,L=E.height/T,z=Math.max(R,L),_=z*P,D=z*T,O=b*z,F=E.x-(_-E.width)/2-O,j=E.y-(D-E.height)/2-O,A=_+O*2,$=D+O*2,B=`${jde}-${N}`,I=y.useRef(0);I.current=z,y.useEffect(()=>{if(C.current){const W=qr(C.current),Y=se=>{const{transform:re,d3Selection:De,d3Zoom:me}=S.getState();if(se.sourceEvent.type!=="wheel"||!De||!me)return;const Ce=-se.sourceEvent.deltaY*(se.sourceEvent.deltaMode===1?.05:se.sourceEvent.deltaMode?1:.002)*w,U=re[2]*Math.pow(2,Ce);me.scaleTo(De,U)},Z=se=>{const{transform:re,d3Selection:De,d3Zoom:me,translateExtent:Ce,width:U,height:q}=S.getState();if(se.sourceEvent.type!=="mousemove"||!De||!me)return;const he=I.current*Math.max(1,re[2])*(x?-1:1),fe={x:re[0]-se.sourceEvent.movementX*he,y:re[1]-se.sourceEvent.movementY*he},Q=[[0,0],[U,q]],Ae=Ro.translate(fe.x,fe.y).scale(re[2]),je=me.constrain()(Ae,Q,Ce);me.transform(De,je)},ae=sF().on("zoom",m?Z:null).on("zoom.wheel",g?Y:null);return W.call(ae),()=>{W.on("zoom",null)}}},[m,g,x,w]);const H=h?W=>{const Y=ms(W);h(W,{x:Y[0],y:Y[1]})}:void 0,V=p?(W,Y)=>{const Z=S.getState().nodeInternals.get(Y);p(W,Z)}:void 0;return M.createElement(ZE,{position:d,style:e,className:Cn(["react-flow__minimap",t]),"data-testid":"rf__minimap"},M.createElement("svg",{width:P,height:T,viewBox:`${F} ${j} ${A} ${$}`,role:"img","aria-labelledby":B,ref:C,onClick:H},v&&M.createElement("title",{id:B},v),M.createElement(Pde,{onClick:V,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:s,nodeStrokeWidth:i,nodeComponent:a}),M.createElement("path",{className:"react-flow__minimap-mask",d:`M${F-O},${j-O}h${A+O*2}v${$+O*2}h${-A-O*2}z
        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fill:l,fillRule:"evenodd",stroke:c,strokeWidth:u,pointerEvents:"none"})))}QF.displayName="MiniMap";var Ode=y.memo(QF);function Mde(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},M.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Ide(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},M.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Dde(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},M.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function $de(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},M.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Lde(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},M.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const hd=({children:e,className:t,...n})=>M.createElement("button",{type:"button",className:Cn(["react-flow__controls-button",t]),...n},e);hd.displayName="ControlButton";const Fde=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),ZF=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:i,onFitView:a,onInteractiveChange:l,className:c,children:u,position:d="bottom-left"})=>{const h=Vt(),[p,m]=y.useState(!1),{isInteractive:g,minZoomReached:v,maxZoomReached:x}=st(Fde,sn),{zoomIn:w,zoomOut:b,fitView:S}=Ev();if(y.useEffect(()=>{m(!0)},[]),!p)return null;const C=()=>{w(),o==null||o()},E=()=>{b(),i==null||i()},k=()=>{S(s),a==null||a()},N=()=>{h.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),l==null||l(!g)};return M.createElement(ZE,{className:Cn(["react-flow__controls",c]),position:d,style:e,"data-testid":"rf__controls"},t&&M.createElement(M.Fragment,null,M.createElement(hd,{onClick:C,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},M.createElement(Mde,null)),M.createElement(hd,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},M.createElement(Ide,null))),n&&M.createElement(hd,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view"},M.createElement(Dde,null)),r&&M.createElement(hd,{className:"react-flow__controls-interactive",onClick:N,title:"toggle interactivity","aria-label":"toggle interactivity"},g?M.createElement(Lde,null):M.createElement($de,null)),u)};ZF.displayName="Controls";var Bde=y.memo(ZF),_s;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(_s||(_s={}));function zde({color:e,dimensions:t,lineWidth:n}){return M.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Ude({color:e,radius:t}){return M.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Hde={[_s.Dots]:"#91919a",[_s.Lines]:"#eee",[_s.Cross]:"#e2e2e2"},Vde={[_s.Dots]:1,[_s.Lines]:1,[_s.Cross]:6},Wde=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function eB({id:e,variant:t=_s.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=2,color:i,style:a,className:l}){const c=y.useRef(null),{transform:u,patternId:d}=st(Wde,sn),h=i||Hde[t],p=r||Vde[t],m=t===_s.Dots,g=t===_s.Cross,v=Array.isArray(n)?n:[n,n],x=[v[0]*u[2]||1,v[1]*u[2]||1],w=p*u[2],b=g?[w,w]:x,S=m?[w/o,w/o]:[b[0]/o,b[1]/o];return M.createElement("svg",{className:Cn(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},M.createElement("pattern",{id:d+e,x:u[0]%x[0],y:u[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${S[0]},-${S[1]})`},m?M.createElement(Ude,{color:h,radius:w/o}):M.createElement(zde,{dimensions:b,color:h,lineWidth:s})),M.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}eB.displayName="Background";var qde=y.memo(eB);function Gde({isOpen:e,onClose:t,pages:n,onConfirm:r,isLoading:s=!1,error:o=null}){const[i,a]=y.useState(new Set),[l,c]=y.useState(""),u=p=>{const m=new Set(i);m.has(p)?m.delete(p):m.add(p),a(m)},d=()=>{const p=n.filter(m=>i.has(m.name));r(p,l.trim()||void 0)},h=()=>{i.size===n.length?a(new Set):a(new Set(n.map(p=>p.name)))};return f.jsx(Et,{open:e,onOpenChange:t,children:f.jsxs(yt,{className:"sm:max-w-[600px]",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Select Pages to Add"}),f.jsx(kt,{children:"Choose which pages you want to add to your user flow diagram. You can also provide additional requirements or modifications below."})]}),o&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg flex items-center gap-2",children:[f.jsx(vn,{className:"w-4 h-4"}),f.jsx("p",{children:o})]}),f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsxs("span",{className:"text-sm text-gray-500",children:[i.size," of ",n.length," pages selected"]}),f.jsx(K,{variant:"outline",size:"sm",onClick:h,children:i.size===n.length?"Deselect All":"Select All"})]}),f.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto py-4",children:n.map(p=>f.jsx("div",{className:`p-4 rounded-lg border transition-colors cursor-pointer ${i.has(p.name)?"border-brand-purple bg-brand-purple/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>u(p.name),children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:`mt-1 w-4 h-4 rounded border flex-shrink-0 ${i.has(p.name)?"bg-brand-purple border-brand-purple text-white":"border-gray-300"}`,children:i.has(p.name)&&f.jsx(ks,{className:"w-3 h-3 mx-auto mt-0.5"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-medium text-gray-900",children:p.name}),f.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.description}),p.features&&p.features.length>0&&f.jsxs("div",{className:"mt-2",children:[f.jsx("h4",{className:"text-xs font-medium text-gray-500",children:"Features:"}),f.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:p.features.map((m,g)=>f.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:m},g))})]}),p.layout_description&&f.jsxs("div",{className:"mt-2",children:[f.jsx("h4",{className:"text-xs font-medium text-gray-500",children:"Layout:"}),f.jsx("p",{className:"text-xs text-gray-600 italic",children:p.layout_description})]})]})]})},p.name))}),f.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Additional Requirements"}),f.jsx(Zt,{value:l,onChange:p=>c(p.target.value),placeholder:"Add any additional requirements or modifications (e.g., 'Add a subscription management page' or 'Include a reports dashboard')",className:"min-h-[80px]"})]}),f.jsxs(Ht,{children:[f.jsx(K,{variant:"outline",onClick:t,disabled:s,children:"Cancel"}),f.jsx(K,{variant:"secondary",onClick:d,disabled:i.size===0||s,children:s?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Generating Layout..."]}):"Add Selected Pages"})]})]})})}const Kde=[{value:"auto",title:"Auto-detect",description:"The AI will analyze your product and automatically determine the best flow pattern.",imageUrl:"https://cdn.jsdelivr.net/gh/lucide-icons/lucide/icons/git-branch.svg",examples:["Complex applications with multiple user journeys","Products that combine different interaction patterns","When you're unsure which pattern best fits your needs"]},{value:"linear",title:"Linear Flow",description:"Pages arranged in a straight line from left to right. Ideal for step-by-step processes like checkouts or onboarding.",imageUrl:"https://cdn.jsdelivr.net/gh/lucide-icons/lucide/icons/arrow-right.svg",examples:["Checkout processes","User onboarding flows","Form wizards","Sequential tutorials"]}];function Jde({isOpen:e,onClose:t,selectedPattern:n,onSelectPattern:r,onConfirm:s,isLoading:o=!1}){return f.jsx(Et,{open:e,onOpenChange:t,children:f.jsxs(yt,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Select Flow Pattern"}),f.jsx(kt,{children:"Choose a flow pattern for your user journey. The AI will generate pages and arrange them according to this pattern."})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-4",children:Kde.map(i=>f.jsxs("div",{className:`p-6 rounded-lg border-2 cursor-pointer transition-all hover:shadow-md ${n===i.value?"border-brand-purple bg-brand-purple/5 shadow-md":"border-gray-200 hover:border-gray-300"}`,onClick:()=>r(i.value),children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:i.imageUrl,alt:"",className:`w-6 h-6 ${n===i.value?"text-brand-purple":"text-gray-600"}`}),f.jsx("h3",{className:"font-medium text-gray-900",children:i.title})]}),n===i.value&&f.jsx(eC,{className:"w-5 h-5 text-brand-purple flex-shrink-0"})]}),f.jsx("p",{className:"text-sm text-gray-600 mt-3",children:i.description}),f.jsxs("div",{className:"mt-4 space-y-2",children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Best for:"}),f.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:i.examples.map((a,l)=>f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-400"}),a]},l))})]}),f.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:f.jsx("div",{className:"aspect-video w-full bg-white rounded border border-gray-300 flex items-center justify-center",children:f.jsx("img",{src:i.imageUrl,alt:`${i.title} layout example`,className:`w-12 h-12 ${n===i.value?"text-brand-purple":"text-gray-400"}`})})})]},i.value))}),f.jsxs(Ht,{children:[f.jsx(K,{variant:"outline",onClick:t,disabled:o,children:"Cancel"}),f.jsx(K,{variant:"secondary",onClick:s,disabled:o,children:o?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):"Generate Flow"})]})]})})}function Yde({isOpen:e,onClose:t,reviewResult:n,isLoading:r,error:s,onAcceptReview:o}){const i=()=>{n&&o(n.pages)};return f.jsx(Et,{open:e,onOpenChange:t,children:f.jsxs(yt,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"AI Review of User Flow"}),f.jsx(kt,{children:"Our AI has analyzed the initial user flow and suggested improvements."})]}),s&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg flex items-center gap-2",children:[f.jsx(vn,{className:"w-4 h-4"}),f.jsx("p",{children:s})]}),r?f.jsxs("div",{className:"py-12 text-center",children:[f.jsx(We,{className:"w-8 h-8 animate-spin text-brand-purple mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Analyzing user flow..."})]}):n?f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h3",{className:"text-lg font-semibold text-red-600 flex items-center gap-2",children:[f.jsx(vn,{className:"w-5 h-5"}),"Problems Identified"]}),f.jsx("div",{className:"space-y-3",children:n.analysis.problems.map((a,l)=>f.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-lg p-4",children:[f.jsx("h4",{className:"font-medium text-red-700 mb-1",children:a.title}),f.jsx("p",{className:"text-red-600 text-sm",children:a.description})]},l))})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h3",{className:"text-lg font-semibold text-green-600 flex items-center gap-2",children:[f.jsx(eC,{className:"w-5 h-5"}),"Suggested Improvements"]}),f.jsx("div",{className:"space-y-3",children:n.analysis.improvements.map((a,l)=>f.jsxs("div",{className:"bg-green-50 border border-green-100 rounded-lg p-4",children:[f.jsx("h4",{className:"font-medium text-green-700 mb-1",children:a.title}),f.jsx("p",{className:"text-green-600 text-sm",children:a.description})]},l))})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Revised Page Structure"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.pages.map((a,l)=>f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[f.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:a.name}),f.jsx("p",{className:"text-gray-600 text-sm mb-3",children:a.description}),a.features&&a.features.length>0&&f.jsxs("div",{className:"mt-2",children:[f.jsx("h5",{className:"text-xs font-medium text-gray-500 mb-1",children:"Features:"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:a.features.map((c,u)=>f.jsx("span",{className:"text-xs bg-brand-purple/10 text-brand-purple px-2 py-0.5 rounded",children:c},u))})]})]},l))})]})]}):f.jsx("div",{className:"py-8 text-center text-gray-500",children:"No review data available."}),f.jsxs(Ht,{children:[f.jsx(K,{variant:"outline",onClick:t,children:"Cancel"}),f.jsx(K,{variant:"secondary",onClick:i,disabled:r||!n,children:"Accept Improvements"})]})]})})}function Xde({isOpen:e,onClose:t,selectedPages:n,onRefinementComplete:r,isRefining:s,refinementError:o,refinedPages:i,error:a,onStartRefinement:l}){const[c,u]=y.useState(!1),d=()=>{r(n),t()},h=()=>{i&&(r(i),t())};return f.jsx(Et,{open:e,onOpenChange:t,children:f.jsxs(yt,{className:"sm:max-w-[600px]",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Optional Flow Refinement"}),f.jsx(kt,{children:"Would you like to further refine your selected pages? Our AI can optimize feature distribution and page organization."})]}),a&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg flex items-center gap-2 my-4",children:[f.jsx(vn,{className:"w-4 h-4"}),f.jsx("p",{children:a})]}),s?f.jsxs("div",{className:"py-8 text-center",children:[f.jsx(We,{className:"w-8 h-8 animate-spin text-brand-purple mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Refining your flow..."})]}):i?f.jsxs("div",{className:"space-y-4 my-4",children:[f.jsxs("div",{className:"bg-green-50 border border-green-100 rounded-lg p-4",children:[f.jsxs("h4",{className:"font-medium text-green-700 mb-1 flex items-center gap-2",children:[f.jsx(eC,{className:"w-4 h-4"}),"Refinement Complete"]}),f.jsx("p",{className:"text-green-600 text-sm",children:"Your flow has been refined with optimized feature distribution and improved page organization."})]}),f.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"font-medium mb-3",children:"Refinement Summary"}),f.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[f.jsx("li",{children:" Optimized feature distribution across pages"}),f.jsx("li",{children:" Improved page organization and flow"}),f.jsx("li",{children:" Enhanced page descriptions for clarity"}),f.jsx("li",{children:" Ensured consistent terminology"})]})]})]}):f.jsxs("div",{className:"py-4 space-y-4",children:[f.jsxs("div",{className:"bg-brand-purple/10 p-4 rounded-lg",children:[f.jsxs("h3",{className:"font-medium text-brand-purple mb-2 flex items-center gap-2",children:[f.jsx(Fa,{className:"w-4 h-4"}),"AI Refinement Benefits"]}),f.jsxs("ul",{className:"space-y-1 text-sm text-gray-700",children:[f.jsx("li",{children:" Optimize feature distribution across pages"}),f.jsx("li",{children:" Ensure logical user flow progression"}),f.jsx("li",{children:" Improve page descriptions and terminology"}),f.jsx("li",{children:" Balance feature complexity across pages"})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",id:"skip-refinement",checked:c,onChange:()=>u(!c),className:"rounded border-gray-300 text-brand-purple focus:ring-brand-purple"}),f.jsx("label",{htmlFor:"skip-refinement",className:"text-sm text-gray-600",children:"Skip refinement and proceed directly to layout generation"})]})]}),f.jsx(Ht,{children:i?f.jsxs(f.Fragment,{children:[f.jsx(K,{variant:"outline",onClick:d,children:"Use Original"}),f.jsx(K,{variant:"secondary",onClick:h,children:"Accept Refinement"})]}):f.jsxs(f.Fragment,{children:[f.jsx(K,{variant:"outline",onClick:d,disabled:s,children:c?"Continue Without Refinement":"Skip"}),f.jsx(K,{variant:"secondary",onClick:l,disabled:s||c,children:s?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Refining..."]}):f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Refine Flow"]})})]})})]})})}function Qde({data:e,isConnectable:t,id:n}){const[r,s]=y.useState(!1),[o,i]=y.useState(!1),[a,l]=y.useState(e),[c,u]=y.useState({saving:!1,error:null}),{setNodes:d,setEdges:h}=Ev(),[p,m]=y.useState(!1),[g,v]=y.useState(!1),[x,w]=y.useState(null),b=y.useRef(null);y.useEffect(()=>{l(e)},[e]);const S=async()=>{try{v(!0),w(null);const{error:N}=await G.from("flow_pages").delete().eq("id",n);if(N)throw N;d(P=>P.filter(T=>T.id!==n)),h(P=>P.filter(T=>T.source!==n&&T.target!==n)),m(!1)}catch(N){console.error("Error deleting page:",N),v(!1),m(!1),w("Failed to delete page. Please try again."),m(!1)}finally{m(!1)}},C=y.useCallback(async()=>{var N,P;if(!a.name.trim()){u({saving:!1,error:"Page name is required"});return}u({saving:!0,error:null});try{const T={name:a.name.trim(),description:a.description.trim(),layout_description:((N=a.layout_description)==null?void 0:N.trim())||null,features:a.features||[]},{error:R}=await G.from("flow_pages").update(T).eq("id",n);if(R)throw R;e.name=a.name.trim(),e.description=a.description.trim(),e.layout_description=((P=a.layout_description)==null?void 0:P.trim())||null,e.features=a.features||[],s(!1),u({saving:!1,error:null})}catch(T){console.error("Error saving page:",T),u({saving:!1,error:"Failed to save changes. Please try again."})}},[e,a,n]);if(!e)return null;const E=()=>{l(e),s(!1),u({saving:!1,error:null})},k=()=>{r||i(!o)};return f.jsxs("div",{className:`bg-white rounded-lg shadow-lg p-4 w-[250px] max-w-[300px] border border-gray-200 transition-all ${o?"min-h-[250px]":""} ${r?"border-brand-purple":"hover:border-gray-300"}`,ref:b,children:[f.jsx(Jc,{type:"target",position:xe.Left,isConnectable:t,className:"w-3 h-3 bg-brand-purple !left-[-7px]"}),f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r?f.jsx("input",{type:"text",value:a.name,onChange:N=>{l(P=>({...P,name:N.target.value})),w(null)},className:"text-lg font-semibold bg-gray-50 border border-gray-200 rounded px-2 py-1 w-full",autoFocus:!0,placeholder:"Enter page name"}):f.jsx("h3",{className:"text-lg font-semibold text-gray-900 cursor-pointer",onClick:k,children:e.name}),r?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(K,{variant:"ghost",size:"sm",onClick:E,disabled:c.saving,children:"Cancel"}),f.jsx(K,{variant:"secondary",size:"sm",onClick:C,disabled:c.saving,children:c.saving?f.jsx(We,{className:"w-4 h-4 animate-spin"}):"Save"})]}):f.jsxs("div",{className:"flex items-center gap-1",children:[o&&f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>s(!0),className:"ml-2 hover:bg-gray-100",children:f.jsx(au,{className:"w-4 h-4"})}),f.jsx(K,{variant:"ghost",size:"sm",onClick:k,className:"hover:bg-gray-100",children:o?f.jsx(WW,{className:"w-4 h-4"}):f.jsx(zm,{className:"w-4 h-4"})})]})]}),f.jsx("div",{className:"mb-3",children:r?f.jsx("textarea",{value:a.description,onChange:N=>{l(P=>({...P,description:N.target.value})),u({saving:!1,error:null})},className:"w-full min-h-[60px] max-h-[120px] text-sm bg-gray-50 border border-gray-200 rounded px-2 py-1 resize-y",placeholder:"Describe the core functionality..."}):f.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap break-words cursor-pointer",onClick:k,children:e.description})}),(o||r)&&f.jsxs("div",{className:"space-y-4 border-t pt-3 mt-2",children:[r&&f.jsx("div",{className:"flex justify-end mb-4",children:f.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>m(!0),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[f.jsx(sa,{className:"w-4 h-4 mr-1"}),"Delete Page"]})}),(x||c.error)&&f.jsxs("div",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[f.jsx(nr,{className:"w-4 h-4"}),x||c.error]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Layout"}),r?f.jsx("textarea",{value:a.layout_description||"",onChange:N=>{l(P=>({...P,layout_description:N.target.value}))},className:"w-full min-h-[60px] text-sm bg-gray-50 border border-gray-200 rounded px-2 py-1 resize-y",placeholder:"Describe the page layout..."}):f.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap break-words",children:e.layout_description||"No layout description available"})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-1 flex items-center",children:[f.jsx(lM,{className:"w-4 h-4 mr-1"}),"Features"]}),r?f.jsxs("div",{className:"space-y-2",children:[(a.features||[]).map((N,P)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"text",value:N,onChange:T=>{const R=[...a.features||[]];R[P]=T.target.value,l(L=>({...L,features:R}))},className:"flex-1 text-sm bg-gray-50 border border-gray-200 rounded px-2 py-1"}),f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{const T=[...a.features||[]];T.splice(P,1),l(R=>({...R,features:T}))},className:"text-red-500 hover:text-red-700 p-1 h-auto",children:f.jsx(Gi,{className:"w-3 h-3"})})]},P)),f.jsxs(K,{variant:"outline",size:"sm",onClick:()=>{l(N=>({...N,features:[...N.features||[],""]}))},className:"text-sm",children:[f.jsx(qi,{className:"w-3 h-3 mr-1"}),"Add Feature"]})]}):f.jsx("ul",{className:"text-sm text-gray-600 list-disc list-inside",children:e.features&&e.features.length>0?e.features.map((N,P)=>f.jsx("li",{children:N},P)):f.jsx("li",{className:"text-gray-400",children:"No features listed"})})]})]}),f.jsx(Jc,{type:"source",position:xe.Right,isConnectable:t,className:"w-3 h-3 bg-brand-purple !right-[-7px]"}),f.jsx(Et,{open:p,onOpenChange:m,children:f.jsxs(yt,{children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Delete Page"}),f.jsx(kt,{children:"Are you sure you want to delete this page? This action cannot be undone."})]}),f.jsxs(Ht,{className:"flex gap-2",children:[f.jsx(K,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),f.jsx(K,{variant:"destructive",onClick:S,disabled:g,children:g?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})}const Pe=y.forwardRef(({className:e,...t},n)=>f.jsx(CD,{ref:n,className:Le("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));Pe.displayName=CD.displayName;function tB({isOpen:e,onClose:t,onAddPage:n,isLoading:r,error:s}){const[o,i]=y.useState({name:"",description:"",layout_description:"",features:[]}),[a,l]=y.useState(""),c=p=>{const{name:m,value:g}=p.target;i(v=>({...v,[m]:g}))},u=p=>{l(p.target.value)},d=async()=>{const p=a.split(",").map(m=>m.trim()).filter(m=>m!=="");await n({...o,features:p})},h=()=>{i({name:"",description:"",layout_description:"",features:[]}),l("")};return f.jsx(Et,{open:e,onOpenChange:p=>{p||h(),t()},children:f.jsxs(yt,{className:"sm:max-w-[500px]",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Add New Page"}),f.jsx(kt,{children:"Create a new page to add to your user flow."})]}),s&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg flex items-center gap-2",children:[f.jsx(vn,{className:"w-4 h-4"}),f.jsx("p",{children:s})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"name",children:"Page Name"}),f.jsx(At,{id:"name",name:"name",value:o.name,onChange:c,placeholder:"e.g., Login Page",required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"description",children:"Description"}),f.jsx(Zt,{id:"description",name:"description",value:o.description,onChange:c,placeholder:"Describe the purpose and functionality of this page...",rows:3})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"layout_description",children:"Layout Description"}),f.jsx(Zt,{id:"layout_description",name:"layout_description",value:o.layout_description,onChange:c,placeholder:"Describe the layout structure using design terminology...",rows:3})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"features",children:"Features (comma-separated)"}),f.jsx(Zt,{id:"features",value:a,onChange:u,placeholder:"Login Form, Remember Me, Forgot Password...",rows:2})]})]}),f.jsxs(Ht,{children:[f.jsx(K,{variant:"outline",onClick:t,disabled:r,children:"Cancel"}),f.jsx(K,{variant:"secondary",onClick:d,disabled:r||!o.name.trim(),children:r?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):"Add Page"})]})]})})}function Zde({id:e,sourceX:t,sourceY:n,targetX:r,targetY:s,sourcePosition:o,targetPosition:i,style:a={},markerEnd:l,selected:c,data:u}){const[d,h,p]=ok({sourceX:t,sourceY:n,sourcePosition:o,targetX:r,targetY:s,targetPosition:i}),[m,g]=y.useState(!1),v=u==null?void 0:u.onDelete;return f.jsxs(f.Fragment,{children:[f.jsx("path",{id:e,style:{...a,strokeWidth:c?3:2,stroke:c?"#5D4A8C":"#7056A4"},className:"react-flow__edge-path",d,markerEnd:l,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1)}),(c||m)&&f.jsx("foreignObject",{width:20,height:20,x:h-10,y:p-10,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml",children:f.jsx("div",{className:"absolute -top-2 -left-2 w-6 h-6 bg-white rounded-full shadow-md flex items-center justify-center cursor-pointer hover:bg-red-50 transition-colors border border-gray-200",onClick:x=>{x.stopPropagation(),v&&v(e)},children:f.jsx(sa,{className:"w-3 h-3 text-red-500"})})})]})}const efe={page:Qde},tfe={default:Zde};function nfe(){const e=bn(),{user:t}=qn(),{productSlug:n}=ao(),[r,s]=y.useState(!0),[o,i]=y.useState(null),[a,l]=y.useState(null),[c,u]=y.useState(!1),[d,h]=y.useState([]),[p,m]=y.useState(!1),[g,v]=y.useState(!1),[x,w]=y.useState("auto"),[b,S]=y.useState(!1),[C,E]=y.useState(!1),[k,N]=y.useState(null),[P,T]=y.useState(null),[R,L,z]=Sde([]),[_,D,O]=Cde([]),[F,j]=y.useState([]),[A,$]=y.useState([]),[B,I]=y.useState(null),[H,V]=y.useState(!1),[W,Y]=y.useState([]),[Z,ae]=y.useState(null),[se,re]=y.useState(!1),[De,me]=y.useState(!1),[Ce,U]=y.useState(!1);y.useEffect(()=>{async function ue(){if(!n){e("/"),s(!1);return}if(!t){e("/");return}try{s(!0),i(null);const{data:ie,error:Se}=await G.from("products").select("id, name, description").eq("slug",n).eq("user_id",t.id).single();if(Se||!ie){console.error("Error loading product:",Se),e("/");return}l(ie.id);const{data:Ee,error:J}=await G.from("prds").select("problem, solution").eq("product_id",ie.id).single();if(J)throw new Error("Failed to load PRD data");if(!Ee)throw new Error("PRD not found");I({description:ie.description||"",problem:Ee.problem||"",solution:Ee.solution||""});const{data:X,error:ge}=await G.from("flow_pages").select("*").eq("product_id",ie.id);if(ge)throw new Error("Failed to load flow pages");const{data:be,error:Fe}=await G.from("flow_connections").select("id, source_id, target_id").eq("product_id",ie.id);if(Fe)throw new Error("Failed to load flow connections");const Ge=(X==null?void 0:X.map(Ye=>({id:Ye.id,type:"page",position:{x:Ye.position_x,y:Ye.position_y},data:{name:Ye.name,description:Ye.description||"",layout_description:Ye.layout_description||"",features:Ye.features||[]}})))||[],ke=(be==null?void 0:be.map(Ye=>({id:Ye.id,source:Ye.source_id,target:Ye.target_id})))||[];L(Ge),D(ke)}catch(ie){console.error("Error loading flow data:",ie),i(ie instanceof Error?ie.message:"An unknown error occurred")}finally{s(!1)}}ue()},[n,t,e]);const q=y.useCallback(async ue=>{try{if(!ue.source||!ue.target||!a)return;j(Ee=>[...Ee,{nodes:R,edges:_}]),$([]);const ie={...ue,id:`e${Date.now()}`,type:"default",markerEnd:{type:Kc.ArrowClosed,color:"#7056A4"},animated:!1},{error:Se}=await G.from("flow_connections").insert([{product_id:a,source_id:ue.source,target_id:ue.target}]).select().single();if(Se){console.error("Error creating connection:",Se),i("Failed to create connection. Please try again.");return}D(Ee=>mF(ie,Ee))}catch(ie){console.error("Error in onConnect:",ie),i("Failed to create connection. Please try again.")}},[R,_,a,D]),he=ue=>{ue.some(Se=>Se.type!=="select")&&(j(Se=>[...Se,{nodes:R,edges:_}]),$([])),z(ue);const ie=ue.filter(Se=>Se.type==="position"&&Se.position);ie.length>0&&a&&fe(ie)},fe=async ue=>{if(a)try{for(const ie of ue)ie.type==="position"&&ie.position&&await G.from("flow_pages").update({position_x:ie.position.x,position_y:ie.position.y}).eq("id",ie.id)}catch(ie){console.error("Error updating node positions:",ie)}},Q=async ue=>{ue.some(Se=>Se.type!=="select")&&(j(Se=>[...Se,{nodes:R,edges:_}]),$([])),O(ue);const ie=ue.filter(Se=>Se.type==="remove");if(ie.length>0&&a)try{for(const Se of ie){const{error:Ee}=await G.from("flow_connections").delete().eq("id",Se.id);if(Ee){console.error("Error deleting connection:",Ee),i("Failed to delete connection. Please try again."),D(J=>[...J,_.find(X=>X.id===Se.id)]);return}}}catch(Se){console.error("Error deleting connections:",Se),i("Failed to delete connections. Please try again.")}},Ae=()=>{if(F.length===0)return;const ue=F[F.length-1];$(ie=>[...ie,{nodes:R,edges:_}]),j(ie=>ie.slice(0,-1)),L(ue.nodes),D(ue.edges)},je=()=>{if(A.length===0)return;const ue=A[A.length-1];j(ie=>[...ie,{nodes:R,edges:_}]),$(ie=>ie.slice(0,-1)),L(ue.nodes),D(ue.edges)},ut=()=>{v(!0)},Mn=ue=>{w(ue)},Wt=async()=>{if(!(!a||!B))try{u(!0),i(null);const{data:ue,error:ie}=await G.from("features").select("*").eq("product_id",a);if(ie)throw new Error("Failed to load features");const Se=await _P({productDescription:B.description,problemStatement:B.problem,solutionDescription:B.solution,features:ue||[],flowPattern:x});h(Se.pages),v(!1),m(!0)}catch(ue){ue instanceof wr?i(ue.message):i("Failed to generate flow. Please try again.")}finally{u(!1)}},ln=async(ue,ie)=>{if(!(!a||!B))try{if(u(!0),i(null),ie){const{data:Se,error:Ee}=await G.from("features").select("*").eq("product_id",a);if(Ee)throw new Error("Failed to load features");ue=(await _P({productDescription:B.description,problemStatement:B.problem,solutionDescription:B.solution,features:Se||[],flowPattern:x,additionalRequirements:ie})).pages}Y(ue),m(!1),V(!0)}catch(Se){Se instanceof wr?i(Se.message):i("Failed to process flow. Please try again.")}finally{u(!1)}},Or=async()=>{if(!a||!B){i("Missing product information. Please try again.");return}try{re(!0),i(null),ae(null);const{data:ue,error:ie}=await G.from("features").select("*").eq("product_id",a);if(ie)throw new Error("Failed to load features for refinement");await new Promise(Se=>setTimeout(Se,1500)),ae(W)}catch(ue){console.error("Refinement error:",ue),ue instanceof wr?i(ue.message):i("Failed to refine flow. Please try again later."),ae(null)}finally{re(!1)}},ur=async ue=>{if(a)try{u(!0),i(null);const ie=await AY(ue,x),{error:Se}=await G.from("flow_pages").delete().eq("product_id",a);if(Se)throw Se;const Ee=new Map;for(const ke of ie.pages){const Ye=ue.find(_t=>_t.name===ke.name),{data:Mr,error:as}=await G.from("flow_pages").insert({product_id:a,name:ke.name,description:(Ye==null?void 0:Ye.description)||"",layout_description:(Ye==null?void 0:Ye.layout_description)||"",features:(Ye==null?void 0:Ye.features)||[],position_x:ke.position.x,position_y:ke.position.y}).select().single();if(as)throw as;Ee.set(ke.id,Mr.id)}for(const ke of ie.connections){const Ye=Ee.get(ke.source),Mr=Ee.get(ke.target);if(!Ye||!Mr)continue;const{error:as}=await G.from("flow_connections").insert({product_id:a,source_id:Ye,target_id:Mr});if(as)throw as}const{data:J,error:X}=await G.from("flow_pages").select("*").eq("product_id",a);if(X)throw X;const{data:ge,error:be}=await G.from("flow_connections").select("id, source_id, target_id").eq("product_id",a);if(be)throw be;const Fe=J.map(ke=>({id:ke.id,type:"page",position:{x:ke.position_x,y:ke.position_y},data:{name:ke.name,description:ke.description||"",layout_description:ke.layout_description||"",features:ke.features||[]}})),Ge=ge.map(ke=>({id:ke.id,source:ke.source_id,target:ke.target_id}));L(Fe),D(Ge),V(!1)}catch(ie){console.error("Error finalizing flow:",ie),ie instanceof wr?i(ie.message):i("Failed to generate flow. Please try again.")}finally{u(!1)}},qt=async ue=>{if(a)try{U(!0),i(null);const ie=100,Se=100,Ee=R.map(ke=>({x:ke.position.x,y:ke.position.y}));let J=ie,X=Se,ge=0;for(;Ee.some(ke=>Math.abs(ke.x-J)<250&&Math.abs(ke.y-X)<150);)ge+=50,J=ie+ge,X=Se+ge;const{data:be,error:Fe}=await G.from("flow_pages").insert({product_id:a,name:ue.name,description:ue.description,layout_description:ue.layout_description,features:ue.features,position_x:J,position_y:X}).select().single();if(Fe)throw Fe;const Ge={id:be.id,type:"page",position:{x:J,y:X},data:{name:ue.name,description:ue.description,layout_description:ue.layout_description,features:ue.features}};j(ke=>[...ke,{nodes:R,edges:_}]),$([]),L(ke=>[...ke,Ge]),me(!1)}catch(ie){console.error("Error adding page:",ie),i("Failed to add page. Please try again.")}finally{U(!1)}};return r?f.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:f.jsxs("div",{className:"text-center",children:[f.jsx(We,{className:"w-8 h-8 animate-spin text-brand-purple mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading user flows..."})]})}):f.jsxs("div",{className:"h-[calc(100vh-16rem)]",children:[f.jsx(gl,{title:"User Flows"}),o&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-4 mb-4 rounded-lg flex items-center gap-2",children:[f.jsx(nr,{className:"w-5 h-5 flex-shrink-0"}),f.jsx("p",{children:o})]}),f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Flows"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(K,{variant:"outline",size:"sm",onClick:Ae,disabled:F.length===0,children:f.jsx(w7,{className:"w-4 h-4"})}),f.jsx(K,{variant:"outline",size:"sm",onClick:je,disabled:A.length===0,children:f.jsx(p7,{className:"w-4 h-4"})}),f.jsxs(K,{variant:"outline",size:"sm",onClick:()=>me(!0),children:[f.jsx(qi,{className:"w-4 h-4 mr-2"}),"Add Page"]}),f.jsx(K,{variant:"secondary",onClick:ut,disabled:c,children:c?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Generate Flow"]})})]})]}),f.jsx("div",{className:"w-full h-full border rounded-lg overflow-hidden",children:f.jsxs(JF,{nodes:R,edges:_.map(ue=>({...ue,type:"default",markerEnd:{type:Kc.ArrowClosed,color:ue.selected?"#5D4A8C":"#7056A4"},animated:!1,data:{onDelete:ie=>{Q([{type:"remove",id:ie}])}}})),onNodesChange:he,onEdgesChange:Q,onConnect:q,nodeTypes:efe,edgeTypes:tfe,deleteKeyCode:"Delete",fitView:!0,snapToGrid:!0,snapGrid:[15,15],defaultEdgeOptions:{type:"default",animated:!1,style:{stroke:"#7056A4"}},connectionMode:"loose",elevateNodesOnSelect:!0,selectNodesOnDrag:!1,children:[f.jsx(qde,{}),f.jsx(Bde,{}),f.jsx(Ode,{})]})}),f.jsx(Jde,{isOpen:g,onClose:()=>v(!1),selectedPattern:x,onSelectPattern:Mn,onConfirm:Wt,isLoading:c}),f.jsx(Gde,{isOpen:p,onClose:()=>m(!1),pages:d,onConfirm:ln,isLoading:c,error:o}),f.jsx(Yde,{isOpen:b,onClose:()=>S(!1),reviewResult:P,isLoading:C,error:k,onAcceptReview:ln}),f.jsx(Xde,{isOpen:H,onClose:()=>V(!1),selectedPages:W,onRefinementComplete:ur,isRefining:se,refinementError:o,refinedPages:Z,error:o,onStartRefinement:Or}),f.jsx(tB,{isOpen:De,onClose:()=>me(!1),onAddPage:qt,isLoading:Ce,error:o})]})}function rfe(){return f.jsx(uk,{children:f.jsx(nfe,{})})}var nB="https://js.stripe.com/v3",sfe=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ZT="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",ofe=function(){for(var t=document.querySelectorAll('script[src^="'.concat(nB,'"]')),n=0;n<t.length;n++){var r=t[n];if(sfe.test(r.src))return r}return null},e2=function(t){var n="",r=document.createElement("script");r.src="".concat(nB).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},ife=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:n})},Vu=null,Ep=null,kp=null,afe=function(t){return function(){t(new Error("Failed to load Stripe.js"))}},lfe=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},cfe=function(t){return Vu!==null?Vu:(Vu=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&t&&console.warn(ZT),window.Stripe){n(window.Stripe);return}try{var s=ofe();if(s&&t)console.warn(ZT);else if(!s)s=e2(t);else if(s&&kp!==null&&Ep!==null){var o;s.removeEventListener("load",kp),s.removeEventListener("error",Ep),(o=s.parentNode)===null||o===void 0||o.removeChild(s),s=e2(t)}kp=lfe(n,r),Ep=afe(r),s.addEventListener("load",kp),s.addEventListener("error",Ep)}catch(i){r(i);return}}),Vu.catch(function(n){return Vu=null,Promise.reject(n)}))},ufe=function(t,n,r){if(t===null)return null;var s=t.apply(void 0,n);return ife(s,r),s},Wu,rB=!1,sB=function(){return Wu||(Wu=cfe(null).catch(function(t){return Wu=null,Promise.reject(t)}),Wu)};Promise.resolve().then(function(){return sB()}).catch(function(e){rB||console.warn(e)});var oB=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];rB=!0;var s=Date.now();return sB().then(function(o){return ufe(o,n,s)})};oB("pk_live_51Qx9ApGrxtYDuhPGnvjvKGoruG7VZj18gFUv2x5snirALCUyf4DQfiigbFLYc1AhjgIHzD68C4d6jIpnggNLSlXR00sZj6cmh4");function dfe(){var _,D,O,F;bn();const{user:e}=qn(),[t,n]=y.useState(!0),[r,s]=y.useState(!1),[o,i]=y.useState(null),[a,l]=y.useState(null),[c,u]=y.useState({full_name:"",avatar_url:null}),[d,h]=y.useState(null),[p,m]=y.useState(!1),[g,v]=y.useState("");y.useState("");const[x,w]=y.useState(""),[b,S]=y.useState(""),[C,E]=y.useState(!1),[k,N]=y.useState(!1);y.useEffect(()=>{async function j(){try{n(!0),i(null);const{data:A,error:$}=await G.from("users").select("full_name, avatar_url").eq("id",e==null?void 0:e.id).single();if($)throw $;u(A);const{data:B,error:I}=await G.from("user_subscriptions").select("status, current_period_end, stripe_customer_id").eq("user_id",e==null?void 0:e.id).single();if(I&&I.code!=="PGRST116")throw I;h(B)}catch(A){console.error("Error loading profile:",A),i("Failed to load profile data")}finally{n(!1)}}e&&j()},[e]);const P=async()=>{if(e)try{s(!0),i(null);const{error:j}=await G.from("users").update({full_name:c.full_name,updated_at:new Date().toISOString()}).eq("id",e.id);if(j)throw j;l("Profile updated successfully"),setTimeout(()=>l(null),3e3)}catch(j){console.error("Error updating profile:",j),i("Failed to update profile")}finally{s(!1)}},T=async j=>{var A;try{m(!0),i(null);const $=(A=j.target.files)==null?void 0:A[0];if(!$)return;if(!$.type.startsWith("image/")){i("Please upload an image file");return}if($.size>5*1024*1024){i("File size must be less than 5MB");return}const B=$.name.split(".").pop(),I=`${e==null?void 0:e.id}-${Math.random()}.${B}`,H=`${e==null?void 0:e.id}/${I}`,{error:V}=await G.storage.from("avatars").upload(H,$);if(V)throw V;if(c.avatar_url){const Z=c.avatar_url.split("/").slice(-2).join("/");await G.storage.from("avatars").remove([Z])}const{data:{publicUrl:W}}=G.storage.from("avatars").getPublicUrl(H),{error:Y}=await G.from("users").update({avatar_url:W}).eq("id",e==null?void 0:e.id);if(Y)throw Y;u(Z=>({...Z,avatar_url:W})),l("Avatar updated successfully"),setTimeout(()=>l(null),3e3)}catch($){console.error("Error uploading avatar:",$),i("Failed to upload avatar")}finally{m(!1)}},R=async()=>{if(e)try{if(s(!0),i(null),!/\S+@\S+\.\S+/.test(g)){i("Please enter a valid email address");return}const{error:j}=await G.auth.updateUser({email:g});if(j)throw j;l("Verification email sent. Please check your inbox."),E(!1),v(""),setTimeout(()=>l(null),5e3)}catch(j){console.error("Error updating email:",j),i("Failed to update email. Please try again.")}finally{s(!1)}},L=async()=>{if(e)try{if(s(!0),i(null),x.length<8){i("Password must be at least 8 characters long");return}if(x!==b){i("Passwords do not match");return}const{error:j}=await G.auth.updateUser({password:x});if(j)throw j;l("Password updated successfully"),N(!1),w(""),S(""),setTimeout(()=>l(null),3e3)}catch(j){console.error("Error updating password:",j),i("Failed to update password. Please try again.")}finally{s(!1)}},z=async()=>{if(d!=null&&d.stripe_customer_id)try{i(null);const{data:{session:j},error:A}=await G.auth.getSession();if(A)throw A;const $=await fetch("https://lmomfddmypameoffnbcq.supabase.co/functions/v1/create-portal-session",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j.access_token}`},body:JSON.stringify({customer_id:d.stripe_customer_id,return_url:window.location.href})});if(!$.ok)throw new Error("Failed to create portal session");const{url:B}=await $.json();window.location.href=B}catch(j){console.error("Error opening billing portal:",j),i("Failed to open billing portal")}};return t?f.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:f.jsx(We,{className:"w-8 h-8 animate-spin text-brand-purple"})}):f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsx(gl,{title:"Profile Settings"}),f.jsxs("div",{className:"space-y-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"}),o&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg flex items-center gap-2",children:[f.jsx(nr,{className:"w-5 h-5 flex-shrink-0"}),o]}),a&&f.jsxs("div",{className:"bg-green-50 text-green-700 p-4 rounded-lg flex items-center gap-2",children:[f.jsx(ks,{className:"w-5 h-5 flex-shrink-0"}),a]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:c.avatar_url?f.jsx("img",{src:c.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):f.jsx("div",{className:"text-2xl font-bold text-gray-400",children:((D=(_=c.full_name)==null?void 0:_[0])==null?void 0:D.toUpperCase())||((F=(O=e==null?void 0:e.email)==null?void 0:O[0])==null?void 0:F.toUpperCase())})}),f.jsx("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 bg-brand-purple text-white p-2 rounded-full cursor-pointer hover:bg-brand-purple/90 transition-colors",children:f.jsx(UW,{className:"w-4 h-4"})}),f.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:T,className:"hidden",disabled:p})]}),f.jsx("div",{className:"flex-1",children:f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"email",children:"Email"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{children:f.jsx(At,{id:"email",type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"bg-gray-50"})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(K,{variant:"outline",size:"sm",onClick:()=>E(!C),children:"Change Email"}),f.jsx(K,{variant:"outline",size:"sm",onClick:()=>N(!k),children:"Change Password"})]})]}),C&&f.jsxs("div",{className:"mt-4 space-y-4 p-4 bg-gray-50 rounded-lg",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"newEmail",children:"New Email"}),f.jsx(At,{id:"newEmail",type:"email",value:g,onChange:j=>v(j.target.value),placeholder:"Enter new email"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(K,{variant:"outline",onClick:()=>{E(!1),v("")},children:"Cancel"}),f.jsx(K,{onClick:R,disabled:r||!g,children:r?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):"Update Email"})]})]})]})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"full_name",children:"Full Name"}),f.jsx(At,{id:"full_name",value:c.full_name||"",onChange:j=>u(A=>({...A,full_name:j.target.value})),placeholder:"Enter your full name"})]}),f.jsx(K,{onClick:P,disabled:r,className:"w-full",children:r?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Subscription"}),d?f.jsx("div",{className:"space-y-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-gray-900",children:d.status==="lifetime"?"Lifetime Access":"Active Subscription"}),d.current_period_end&&f.jsxs("p",{className:"text-sm text-gray-500",children:["Next billing date: ",new Date(d.current_period_end).toLocaleDateString()]})]}),d.stripe_customer_id&&f.jsxs(K,{variant:"outline",onClick:z,className:"flex items-center gap-2",children:[f.jsx(YW,{className:"w-4 h-4"}),"Manage Billing"]})]})}):f.jsx("p",{className:"text-gray-600",children:"No active subscription"}),k&&f.jsxs("div",{className:"mt-4 space-y-4 p-4 bg-gray-50 rounded-lg border-t",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"newPassword",children:"New Password"}),f.jsx(At,{id:"newPassword",type:"password",value:x,onChange:j=>w(j.target.value),placeholder:"Enter new password"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"confirmPassword",children:"Confirm Password"}),f.jsx(At,{id:"confirmPassword",type:"password",value:b,onChange:j=>S(j.target.value),placeholder:"Confirm new password"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(K,{variant:"outline",onClick:()=>{N(!1),w(""),S("")},children:"Cancel"}),f.jsx(K,{onClick:L,disabled:r||!x||!b,children:r?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):"Update Password"})]})]})]})]})]})}function Kx({score:e,label:t,total:n=5}){const r=Array(n).fill(0);return f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("span",{className:"text-sm text-gray-600 w-32",children:[t,":"]}),f.jsx("div",{className:"flex gap-1",children:r.map((s,o)=>f.jsx("div",{className:`w-2 h-2 rounded-full ${o<e?"bg-brand-purple":"bg-gray-200"}`},o))}),f.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:[e,"/",n]})]})}function t2({profile:e,isSelected:t,isRecommended:n=!1,onSelect:r}){return f.jsxs("div",{className:`bg-white rounded-lg shadow-lg p-6 space-y-6 relative ${t?"ring-2 ring-brand-purple":""}`,children:[n&&f.jsxs("div",{className:"bg-brand-purple/5 -mx-6 -mt-6 px-6 py-4 rounded-t-lg border-b border-brand-purple/20",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(ks,{className:"w-5 h-5 text-brand-purple"}),f.jsx("h3",{className:"text-lg font-semibold text-brand-purple",children:"Recommended Persona"})]}),f.jsx("p",{className:"text-gray-700",children:e.scoring.explanation})]}),f.jsx("div",{className:"absolute top-4 right-4",children:f.jsx(K,{variant:t?"secondary":"outline",onClick:r,children:t?"Selected":"Select Profile"})}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e.name}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("p",{className:"text-gray-600",children:e.overview.paragraph1}),f.jsx("p",{className:"text-gray-600",children:e.overview.paragraph2}),f.jsx("p",{className:"text-gray-600",children:e.overview.paragraph3})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("h4",{className:"flex items-center text-lg font-semibold text-gray-900 mb-3",children:[f.jsx(y7,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Profile Score"]}),f.jsx(Kx,{score:e.scoring.problemMatch,label:"Problem Match"}),f.jsx(Kx,{score:e.scoring.urgencyToSolve,label:"Urgency to Solve"}),f.jsx(Kx,{score:e.scoring.abilityToPay,label:"Ability to Pay"})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"flex items-center text-lg font-semibold text-gray-900 mb-3",children:[f.jsx(BW,{className:"w-5 h-5 mr-2 text-brand-purple"}),"Background"]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Role:"}),f.jsx("p",{className:"text-gray-700",children:e.background.role})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Industry:"}),f.jsx("p",{className:"text-gray-700",children:e.background.industry})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Company:"}),f.jsxs("p",{className:"text-gray-700",children:[e.background.companySize,"  ",e.background.companyType]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Daily Responsibilities:"}),f.jsx("ul",{className:"list-disc list-inside text-gray-700 ml-2",children:e.background.dailyResponsibilities.map((s,o)=>f.jsx("li",{children:s},o))})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Current Tools:"}),f.jsx("ul",{className:"list-disc list-inside text-gray-700 ml-2",children:e.background.currentTools.map((s,o)=>f.jsx("li",{children:s},o))})]})]})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"flex items-center text-lg font-semibold text-gray-900 mb-3",children:[f.jsx(uM,{className:"w-5 h-5 mr-2 text-red-500"}),"Problems"]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Biggest Frustration:"}),f.jsx("p",{className:"text-gray-700",children:e.problems.biggestFrustration})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Manual Tasks:"}),f.jsx("ul",{className:"list-disc list-inside text-gray-700 ml-2",children:e.problems.manualTasks.map((s,o)=>f.jsx("li",{children:s},o))})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Pain Points:"}),f.jsx("p",{className:"text-gray-700",children:e.problems.painPoints})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Inefficiencies:"}),f.jsx("ul",{className:"list-disc list-inside text-gray-700 ml-2",children:e.problems.inefficiencies.map((s,o)=>f.jsx("li",{children:s},o))})]})]})]})]})}function ffe(){var g;const e=bn(),t=Vo(),{productSlug:n}=ao(),[r,s]=y.useState(null),[o,i]=y.useState(!1),[a,l]=y.useState(null),{customerProfiles:c,recommendation:u}=((g=t.state)==null?void 0:g.profiles)||{customerProfiles:[],recommendation:null};if(!n||c.length===0)return e("/"),null;const d=c.find(v=>v.name===(u==null?void 0:u.selectedProfile)),h=c.findIndex(v=>v.name===(u==null?void 0:u.selectedProfile)),p=c.filter(v=>v.name!==(u==null?void 0:u.selectedProfile)),m=async()=>{var x;if(r===null)return;const v=c[r];i(!0),l(null);try{const{data:w,error:b}=await G.from("products").select("id, description").eq("slug",n).single();if(b)throw b;if(!w)throw new Error("Product not found");const{data:S,error:C}=await G.from("customer_profiles").insert({product_id:w.id,name:v.name,overview:v.overview,background:v.background,problems:v.problems,scoring:v.scoring,is_selected:!0}).select().single();if(C)throw C;if(S){const{error:P}=await G.from("customer_profiles").update({is_selected:!1}).eq("product_id",w.id).neq("id",S.id);P&&console.error("Error updating other profiles:",P)}const E=await RY({customerProfile:v,productDescription:w.description||"",problems:v.problems}),k=JSON.parse(E);if((x=k.prd)!=null&&x.features&&Array.isArray(k.prd.features)){const P=k.prd.features.map(L=>({product_id:w.id,name:L.name,description:L.description,priority:L.priority||"not-prioritized",implementation_status:L.implementation_status||"not_started",position:0})),{data:T,error:R}=await G.from("features").insert(P).select();R&&console.error("Error inserting features:",R)}const{error:N}=await G.from("prds").update({problem:k.prd.problem,solution:k.prd.solution,target_audience:k.prd.targetAudience,tech_stack:JSON.stringify(k.prd.technologyStack),success_metrics:JSON.stringify(k.prd.successMetrics)}).eq("product_id",w.id);if(N)throw N;e(`/product/${n}/prd`,{state:{mvpData:k}})}catch(w){w instanceof wr?l(w.message):l("Failed to generate MVP PRD. Please try again.")}finally{i(!1)}};return f.jsxs("div",{children:[f.jsxs("button",{onClick:()=>e(`/product/${n}/prd`),className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[f.jsx(jy,{className:"w-4 h-4 mr-2"}),"Back to PRD Editor"]}),f.jsxs("div",{className:"mb-8",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Customer Profiles"}),f.jsx("p",{className:"text-gray-600 mt-2",children:"Based on your product description, we've identified these key customer personas. Select one profile to generate an MVP PRD."})]}),a&&f.jsxs("div",{className:"mt-4 p-4 bg-red-50 rounded-lg border border-red-200 text-red-700 flex items-center gap-2 mb-6",children:[f.jsx(vn,{className:"w-5 h-5 flex-shrink-0"}),f.jsx("p",{children:a})]}),d&&f.jsx("div",{className:"mb-8",children:f.jsx(t2,{profile:d,isSelected:r===h,isRecommended:!0,onSelect:()=>s(h)})}),p.length>0&&f.jsxs(f.Fragment,{children:[f.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Other Personas"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:p.map((v,x)=>{const w=x>=h?x+1:x;return f.jsx(t2,{profile:v,isSelected:r===w,onSelect:()=>s(w)},x)})})]}),f.jsx("div",{className:"flex justify-center",children:f.jsx(K,{variant:"secondary",size:"lg",disabled:r===null||o,onClick:m,children:o?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Generating MVP PRD..."]}):"Generate MVP PRD for Selected Profile"})})]})}function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function hfe(e,t){if(Bf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pfe(e){var t=hfe(e,"string");return Bf(t)=="symbol"?t:t+""}function mfe(e,t,n){return(t=pfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function r2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n2(Object(n),!0).forEach(function(r){mfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qn(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var s2=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Jx=function(){return Math.random().toString(36).substring(7).split("").join(".")},o2={INIT:"@@redux/INIT"+Jx(),REPLACE:"@@redux/REPLACE"+Jx(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Jx()}};function gfe(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function iB(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Qn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Qn(1));return n(iB)(e,t)}if(typeof e!="function")throw new Error(Qn(2));var s=e,o=t,i=[],a=i,l=!1;function c(){a===i&&(a=i.slice())}function u(){if(l)throw new Error(Qn(3));return o}function d(g){if(typeof g!="function")throw new Error(Qn(4));if(l)throw new Error(Qn(5));var v=!0;return c(),a.push(g),function(){if(v){if(l)throw new Error(Qn(6));v=!1,c();var w=a.indexOf(g);a.splice(w,1),i=null}}}function h(g){if(!gfe(g))throw new Error(Qn(7));if(typeof g.type>"u")throw new Error(Qn(8));if(l)throw new Error(Qn(9));try{l=!0,o=s(o,g)}finally{l=!1}for(var v=i=a,x=0;x<v.length;x++){var w=v[x];w()}return g}function p(g){if(typeof g!="function")throw new Error(Qn(10));s=g,h({type:o2.REPLACE})}function m(){var g,v=d;return g={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Qn(11));function b(){w.next&&w.next(u())}b();var S=v(b);return{unsubscribe:S}}},g[s2]=function(){return this},g}return h({type:o2.INIT}),r={dispatch:h,subscribe:d,getState:u,replaceReducer:p},r[s2]=m,r}function i2(e,t){return function(){return t(e.apply(this,arguments))}}function a2(e,t){if(typeof e=="function")return i2(e,t);if(typeof e!="object"||e===null)throw new Error(Qn(16));var n={};for(var r in e){var s=e[r];typeof s=="function"&&(n[r]=i2(s,t))}return n}function aB(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function yfe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),o=function(){throw new Error(Qn(15))},i={getState:s.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=t.map(function(l){return l(i)});return o=aB.apply(void 0,a)(s.dispatch),r2(r2({},s),{},{dispatch:o})}}}function vfe(e){e()}let lB=vfe;const xfe=e=>lB=e,wfe=()=>lB,l2=Symbol.for("react-redux-context"),c2=typeof globalThis<"u"?globalThis:{};function bfe(){var e;if(!y.createContext)return{};const t=(e=c2[l2])!=null?e:c2[l2]=new Map;let n=t.get(y.createContext);return n||(n=y.createContext(null),t.set(y.createContext,n)),n}const cB=bfe(),Sfe=()=>{throw new Error("uSES not initialized!")};function zi(){return zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zi.apply(null,arguments)}function uB(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var dB={exports:{}},Qe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var an=typeof Symbol=="function"&&Symbol.for,dk=an?Symbol.for("react.element"):60103,fk=an?Symbol.for("react.portal"):60106,kv=an?Symbol.for("react.fragment"):60107,_v=an?Symbol.for("react.strict_mode"):60108,Nv=an?Symbol.for("react.profiler"):60114,Pv=an?Symbol.for("react.provider"):60109,Av=an?Symbol.for("react.context"):60110,hk=an?Symbol.for("react.async_mode"):60111,Tv=an?Symbol.for("react.concurrent_mode"):60111,Rv=an?Symbol.for("react.forward_ref"):60112,jv=an?Symbol.for("react.suspense"):60113,Cfe=an?Symbol.for("react.suspense_list"):60120,Ov=an?Symbol.for("react.memo"):60115,Mv=an?Symbol.for("react.lazy"):60116,Efe=an?Symbol.for("react.block"):60121,kfe=an?Symbol.for("react.fundamental"):60117,_fe=an?Symbol.for("react.responder"):60118,Nfe=an?Symbol.for("react.scope"):60119;function jr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case dk:switch(e=e.type,e){case hk:case Tv:case kv:case Nv:case _v:case jv:return e;default:switch(e=e&&e.$$typeof,e){case Av:case Rv:case Mv:case Ov:case Pv:return e;default:return t}}case fk:return t}}}function fB(e){return jr(e)===Tv}Qe.AsyncMode=hk;Qe.ConcurrentMode=Tv;Qe.ContextConsumer=Av;Qe.ContextProvider=Pv;Qe.Element=dk;Qe.ForwardRef=Rv;Qe.Fragment=kv;Qe.Lazy=Mv;Qe.Memo=Ov;Qe.Portal=fk;Qe.Profiler=Nv;Qe.StrictMode=_v;Qe.Suspense=jv;Qe.isAsyncMode=function(e){return fB(e)||jr(e)===hk};Qe.isConcurrentMode=fB;Qe.isContextConsumer=function(e){return jr(e)===Av};Qe.isContextProvider=function(e){return jr(e)===Pv};Qe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===dk};Qe.isForwardRef=function(e){return jr(e)===Rv};Qe.isFragment=function(e){return jr(e)===kv};Qe.isLazy=function(e){return jr(e)===Mv};Qe.isMemo=function(e){return jr(e)===Ov};Qe.isPortal=function(e){return jr(e)===fk};Qe.isProfiler=function(e){return jr(e)===Nv};Qe.isStrictMode=function(e){return jr(e)===_v};Qe.isSuspense=function(e){return jr(e)===jv};Qe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===kv||e===Tv||e===Nv||e===_v||e===jv||e===Cfe||typeof e=="object"&&e!==null&&(e.$$typeof===Mv||e.$$typeof===Ov||e.$$typeof===Pv||e.$$typeof===Av||e.$$typeof===Rv||e.$$typeof===kfe||e.$$typeof===_fe||e.$$typeof===Nfe||e.$$typeof===Efe)};Qe.typeOf=jr;dB.exports=Qe;var Pfe=dB.exports,pk=Pfe,Afe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Tfe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Rfe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},hB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},mk={};mk[pk.ForwardRef]=Rfe;mk[pk.Memo]=hB;function u2(e){return pk.isMemo(e)?hB:mk[e.$$typeof]||Afe}var jfe=Object.defineProperty,Ofe=Object.getOwnPropertyNames,d2=Object.getOwnPropertySymbols,Mfe=Object.getOwnPropertyDescriptor,Ife=Object.getPrototypeOf,f2=Object.prototype;function pB(e,t,n){if(typeof t!="string"){if(f2){var r=Ife(t);r&&r!==f2&&pB(e,r,n)}var s=Ofe(t);d2&&(s=s.concat(d2(t)));for(var o=u2(e),i=u2(t),a=0;a<s.length;++a){var l=s[a];if(!Tfe[l]&&!(n&&n[l])&&!(i&&i[l])&&!(o&&o[l])){var c=Mfe(t,l);try{jfe(e,l,c)}catch{}}}}return e}var Dfe=pB;const h2=zo(Dfe);var mB={exports:{}},Ze={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gk=Symbol.for("react.element"),yk=Symbol.for("react.portal"),Iv=Symbol.for("react.fragment"),Dv=Symbol.for("react.strict_mode"),$v=Symbol.for("react.profiler"),Lv=Symbol.for("react.provider"),Fv=Symbol.for("react.context"),$fe=Symbol.for("react.server_context"),Bv=Symbol.for("react.forward_ref"),zv=Symbol.for("react.suspense"),Uv=Symbol.for("react.suspense_list"),Hv=Symbol.for("react.memo"),Vv=Symbol.for("react.lazy"),Lfe=Symbol.for("react.offscreen"),gB;gB=Symbol.for("react.module.reference");function is(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case gk:switch(e=e.type,e){case Iv:case $v:case Dv:case zv:case Uv:return e;default:switch(e=e&&e.$$typeof,e){case $fe:case Fv:case Bv:case Vv:case Hv:case Lv:return e;default:return t}}case yk:return t}}}Ze.ContextConsumer=Fv;Ze.ContextProvider=Lv;Ze.Element=gk;Ze.ForwardRef=Bv;Ze.Fragment=Iv;Ze.Lazy=Vv;Ze.Memo=Hv;Ze.Portal=yk;Ze.Profiler=$v;Ze.StrictMode=Dv;Ze.Suspense=zv;Ze.SuspenseList=Uv;Ze.isAsyncMode=function(){return!1};Ze.isConcurrentMode=function(){return!1};Ze.isContextConsumer=function(e){return is(e)===Fv};Ze.isContextProvider=function(e){return is(e)===Lv};Ze.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===gk};Ze.isForwardRef=function(e){return is(e)===Bv};Ze.isFragment=function(e){return is(e)===Iv};Ze.isLazy=function(e){return is(e)===Vv};Ze.isMemo=function(e){return is(e)===Hv};Ze.isPortal=function(e){return is(e)===yk};Ze.isProfiler=function(e){return is(e)===$v};Ze.isStrictMode=function(e){return is(e)===Dv};Ze.isSuspense=function(e){return is(e)===zv};Ze.isSuspenseList=function(e){return is(e)===Uv};Ze.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Iv||e===$v||e===Dv||e===zv||e===Uv||e===Lfe||typeof e=="object"&&e!==null&&(e.$$typeof===Vv||e.$$typeof===Hv||e.$$typeof===Lv||e.$$typeof===Fv||e.$$typeof===Bv||e.$$typeof===gB||e.getModuleId!==void 0)};Ze.typeOf=is;mB.exports=Ze;var Ffe=mB.exports;const Bfe=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function zfe(e,t,n,r,{areStatesEqual:s,areOwnPropsEqual:o,areStatePropsEqual:i}){let a=!1,l,c,u,d,h;function p(w,b){return l=w,c=b,u=e(l,c),d=t(r,c),h=n(u,d,c),a=!0,h}function m(){return u=e(l,c),t.dependsOnOwnProps&&(d=t(r,c)),h=n(u,d,c),h}function g(){return e.dependsOnOwnProps&&(u=e(l,c)),t.dependsOnOwnProps&&(d=t(r,c)),h=n(u,d,c),h}function v(){const w=e(l,c),b=!i(w,u);return u=w,b&&(h=n(u,d,c)),h}function x(w,b){const S=!o(b,c),C=!s(w,l,b,c);return l=w,c=b,S&&C?m():S?g():C?v():h}return function(b,S){return a?x(b,S):p(b,S)}}function Ufe(e,t){let{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:s}=t,o=uB(t,Bfe);const i=n(e,o),a=r(e,o),l=s(e,o);return zfe(i,a,l,e,o)}function Hfe(e,t){const n={};for(const r in e){const s=e[r];typeof s=="function"&&(n[r]=(...o)=>t(s(...o)))}return n}function z1(e){return function(n){const r=e(n);function s(){return r}return s.dependsOnOwnProps=!1,s}}function p2(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function yB(e,t){return function(r,{displayName:s}){const o=function(a,l){return o.dependsOnOwnProps?o.mapToProps(a,l):o.mapToProps(a,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(a,l){o.mapToProps=e,o.dependsOnOwnProps=p2(e);let c=o(a,l);return typeof c=="function"&&(o.mapToProps=c,o.dependsOnOwnProps=p2(c),c=o(a,l)),c},o}}function vk(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function Vfe(e){return e&&typeof e=="object"?z1(t=>Hfe(e,t)):e?typeof e=="function"?yB(e):vk(e,"mapDispatchToProps"):z1(t=>({dispatch:t}))}function Wfe(e){return e?typeof e=="function"?yB(e):vk(e,"mapStateToProps"):z1(()=>({}))}function qfe(e,t,n){return zi({},n,e,t)}function Gfe(e){return function(n,{displayName:r,areMergedPropsEqual:s}){let o=!1,i;return function(l,c,u){const d=e(l,c,u);return o?s(d,i)||(i=d):(o=!0,i=d),i}}}function Kfe(e){return e?typeof e=="function"?Gfe(e):vk(e,"mergeProps"):()=>qfe}function Jfe(){const e=wfe();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=t;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,o=n={callback:r,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){!s||t===null||(s=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}const m2={notify(){},get:()=>[]};function vB(e,t){let n,r=m2,s=0,o=!1;function i(g){u();const v=r.subscribe(g);let x=!1;return()=>{x||(x=!0,v(),d())}}function a(){r.notify()}function l(){m.onStateChange&&m.onStateChange()}function c(){return o}function u(){s++,n||(n=t?t.addNestedSub(l):e.subscribe(l),r=Jfe())}function d(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=m2)}function h(){o||(o=!0,u())}function p(){o&&(o=!1,d())}const m={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>r};return m}const Yfe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ey=Yfe?y.useLayoutEffect:y.useEffect;function g2(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Yx(e,t){if(g2(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!g2(e[n[s]],t[n[s]]))return!1;return!0}const Xfe=["reactReduxForwardedRef"];let xB=Sfe;const Qfe=e=>{xB=e},Zfe=[null,null];function ehe(e,t,n){ey(()=>e(...t),n)}function the(e,t,n,r,s,o){e.current=r,n.current=!1,s.current&&(s.current=null,o())}function nhe(e,t,n,r,s,o,i,a,l,c,u){if(!e)return()=>{};let d=!1,h=null;const p=()=>{if(d||!a.current)return;const g=t.getState();let v,x;try{v=r(g,s.current)}catch(w){x=w,h=w}x||(h=null),v===o.current?i.current||c():(o.current=v,l.current=v,i.current=!0,u())};return n.onStateChange=p,n.trySubscribe(),p(),()=>{if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}function rhe(e,t){return e===t}function wB(e,t,n,{pure:r,areStatesEqual:s=rhe,areOwnPropsEqual:o=Yx,areStatePropsEqual:i=Yx,areMergedPropsEqual:a=Yx,forwardRef:l=!1,context:c=cB}={}){const u=c,d=Wfe(e),h=Vfe(t),p=Kfe(n),m=!!e;return v=>{const x=v.displayName||v.name||"Component",w=`Connect(${x})`,b={shouldHandleStateChanges:m,displayName:w,wrappedComponentName:x,WrappedComponent:v,initMapStateToProps:d,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:s,areStatePropsEqual:i,areOwnPropsEqual:o,areMergedPropsEqual:a};function S(k){const[N,P,T]=y.useMemo(()=>{const{reactReduxForwardedRef:me}=k,Ce=uB(k,Xfe);return[k.context,me,Ce]},[k]),R=y.useMemo(()=>N&&N.Consumer&&Ffe.isContextConsumer(y.createElement(N.Consumer,null))?N:u,[N,u]),L=y.useContext(R),z=!!k.store&&!!k.store.getState&&!!k.store.dispatch,_=!!L&&!!L.store,D=z?k.store:L.store,O=_?L.getServerState:D.getState,F=y.useMemo(()=>Ufe(D.dispatch,b),[D]),[j,A]=y.useMemo(()=>{if(!m)return Zfe;const me=vB(D,z?void 0:L.subscription),Ce=me.notifyNestedSubs.bind(me);return[me,Ce]},[D,z,L]),$=y.useMemo(()=>z?L:zi({},L,{subscription:j}),[z,L,j]),B=y.useRef(),I=y.useRef(T),H=y.useRef(),V=y.useRef(!1);y.useRef(!1);const W=y.useRef(!1),Y=y.useRef();ey(()=>(W.current=!0,()=>{W.current=!1}),[]);const Z=y.useMemo(()=>()=>H.current&&T===I.current?H.current:F(D.getState(),T),[D,T]),ae=y.useMemo(()=>Ce=>j?nhe(m,D,j,F,I,B,V,W,H,A,Ce):()=>{},[j]);ehe(the,[I,B,V,T,H,A]);let se;try{se=xB(ae,Z,O?()=>F(O(),T):Z)}catch(me){throw Y.current&&(me.message+=`
The error may be correlated with this previous error:
${Y.current.stack}

`),me}ey(()=>{Y.current=void 0,H.current=void 0,B.current=se});const re=y.useMemo(()=>y.createElement(v,zi({},se,{ref:P})),[P,v,se]);return y.useMemo(()=>m?y.createElement(R.Provider,{value:$},re):re,[R,re,$])}const E=y.memo(S);if(E.WrappedComponent=v,E.displayName=S.displayName=w,l){const N=y.forwardRef(function(T,R){return y.createElement(E,zi({},T,{reactReduxForwardedRef:R}))});return N.displayName=w,N.WrappedComponent=v,h2(N,v)}return h2(E,v)}}function she({store:e,context:t,children:n,serverState:r,stabilityCheck:s="once",noopCheck:o="once"}){const i=y.useMemo(()=>{const c=vB(e);return{store:e,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:o}},[e,r,s,o]),a=y.useMemo(()=>e.getState(),[e]);ey(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==e.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,a]);const l=t||cB;return y.createElement(l.Provider,{value:i},n)}Qfe(A3.useSyncExternalStore);xfe(Kr.unstable_batchedUpdates);function ohe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function bB(e,t){var n=y.useState(function(){return{inputs:t,result:e()}})[0],r=y.useRef(!0),s=y.useRef(n),o=r.current||!!(t&&s.current.inputs&&ohe(t,s.current.inputs)),i=o?s.current:{inputs:t,result:e()};return y.useEffect(function(){r.current=!1,s.current=i},[i]),i.result}function ihe(e,t){return bB(function(){return e},t)}var Ve=bB,ye=ihe,ahe="Invariant failed";function lhe(e,t){throw new Error(ahe)}var Ss=function(t){var n=t.top,r=t.right,s=t.bottom,o=t.left,i=r-o,a=s-n,l={top:n,right:r,bottom:s,left:o,width:i,height:a,x:o,y:n,center:{x:(r+o)/2,y:(s+n)/2}};return l},xk=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},y2=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},che=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},Xx={top:0,right:0,bottom:0,left:0},wk=function(t){var n=t.borderBox,r=t.margin,s=r===void 0?Xx:r,o=t.border,i=o===void 0?Xx:o,a=t.padding,l=a===void 0?Xx:a,c=Ss(xk(n,s)),u=Ss(y2(n,i)),d=Ss(y2(u,l));return{marginBox:c,borderBox:Ss(n),paddingBox:u,contentBox:d,margin:s,border:i,padding:l}},Lr=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var s=Number(n);return isNaN(s)&&lhe(),s},uhe=function(){return{x:window.pageXOffset,y:window.pageYOffset}},ty=function(t,n){var r=t.borderBox,s=t.border,o=t.margin,i=t.padding,a=che(r,n);return wk({borderBox:a,border:s,margin:o,padding:i})},ny=function(t,n){return n===void 0&&(n=uhe()),ty(t,n)},SB=function(t,n){var r={top:Lr(n.marginTop),right:Lr(n.marginRight),bottom:Lr(n.marginBottom),left:Lr(n.marginLeft)},s={top:Lr(n.paddingTop),right:Lr(n.paddingRight),bottom:Lr(n.paddingBottom),left:Lr(n.paddingLeft)},o={top:Lr(n.borderTopWidth),right:Lr(n.borderRightWidth),bottom:Lr(n.borderBottomWidth),left:Lr(n.borderLeftWidth)};return wk({borderBox:t,margin:r,padding:s,border:o})},CB=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return SB(n,r)},v2=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function dhe(e,t){return!!(e===t||v2(e)&&v2(t))}function fhe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!dhe(e[n],t[n]))return!1;return!0}function nn(e,t){t===void 0&&(t=fhe);var n=null;function r(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;var i=e.apply(this,s);return n={lastResult:i,lastArgs:s,lastThis:this},i}return r.clear=function(){n=null},r}var zf=function(t){var n=[],r=null,s=function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];n=a,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return s.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},s};function EB(e,t){}EB.bind(null,"warn");EB.bind(null,"error");function Ui(){}function hhe(e,t){return{...e,...t}}function Xr(e,t,n){const r=t.map(s=>{const o=hhe(n,s.options);return e.addEventListener(s.eventName,s.fn,o),function(){e.removeEventListener(s.eventName,s.fn,o)}});return function(){r.forEach(o=>{o()})}}const phe="Invariant failed";class ry extends Error{}ry.prototype.toString=function(){return this.message};function oe(e,t){throw new ry(phe)}class mhe extends M.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Ui,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof ry&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Xr(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof ry){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const ghe=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,sy=e=>e+1,yhe=e=>`
  You have lifted an item in position ${sy(e.source.index)}
`,kB=(e,t)=>{const n=e.droppableId===t.droppableId,r=sy(e.index),s=sy(t.index);return n?`
      You have moved the item from position ${r}
      to position ${s}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},_B=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,vhe=e=>{const t=e.destination;if(t)return kB(e.source,t);const n=e.combine;return n?_B(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},x2=e=>`
  The item has returned to its starting position
  of ${sy(e.index)}
`,xhe=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${x2(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${kB(e.source,t)}
    `:n?`
      You have dropped the item.
      ${_B(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${x2(e.source)}
  `},whe={dragHandleUsageInstructions:ghe,onDragStart:yhe,onDragUpdate:vhe,onDragEnd:xhe};var cm=whe;const on={x:0,y:0},mn=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),br=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Hi=(e,t)=>e.x===t.x&&e.y===t.y,xu=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),cl=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Uf=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),w2=(e,t)=>Math.min(...t.map(n=>Uf(e,n))),NB=e=>t=>({x:e(t.x),y:e(t.y)});var bhe=(e,t)=>{const n=Ss({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const xh=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),b2=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],She={top:0,right:0,bottom:0,left:0},Che=(e,t)=>t?xh(e,t.scroll.diff.displacement):e,Ehe=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,khe=(e,t)=>t&&t.shouldClipSubject?bhe(t.pageMarginBox,e):Ss(e);var Yc=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const s=Che(e.marginBox,r),o=Ehe(s,n,t),i=khe(o,r);return{page:e,withPlaceholder:t,active:i}},bk=(e,t)=>{e.frame||oe();const n=e.frame,r=br(t,n.scroll.initial),s=xu(r),o={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:s},max:n.scroll.max}},i=Yc({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o});return{...e,frame:o,subject:i}};const PB=nn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),AB=nn(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Wv=nn(e=>Object.values(e)),_he=nn(e=>Object.values(e));var wu=nn((e,t)=>_he(t).filter(r=>e===r.descriptor.droppableId).sort((r,s)=>r.descriptor.index-s.descriptor.index));function Sk(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function qv(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Gv=nn((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),Nhe=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:s})=>{if(!n.isCombineEnabled||!Sk(s))return null;function i(p){const m={type:"COMBINE",combine:{draggableId:p,droppableId:n.descriptor.id}};return{...s,at:m}}const a=s.displaced.all,l=a.length?a[0]:null;if(e)return l?i(l):null;const c=Gv(t,r);if(!l){if(!c.length)return null;const p=c[c.length-1];return i(p.descriptor.id)}const u=c.findIndex(p=>p.descriptor.id===l);u===-1&&oe();const d=u-1;if(d<0)return null;const h=c[d];return i(h.descriptor.id)},bu=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const TB={point:on,value:0},Hf={invisible:{},visible:{},all:[]},Phe={displaced:Hf,displacedBy:TB,at:null};var Ahe=Phe,ns=(e,t)=>n=>e<=n&&n<=t,RB=e=>{const t=ns(e.top,e.bottom),n=ns(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const o=t(r.top)||t(r.bottom),i=n(r.left)||n(r.right);if(o&&i)return!0;const l=r.top<e.top&&r.bottom>e.bottom,c=r.left<e.left&&r.right>e.right;return l&&c?!0:l&&i||c&&o}},The=e=>{const t=ns(e.top,e.bottom),n=ns(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const Ck={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},jB={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Rhe=e=>t=>{const n=ns(t.top,t.bottom),r=ns(t.left,t.right);return s=>e===Ck?n(s.top)&&n(s.bottom):r(s.left)&&r(s.right)};const jhe=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:on;return xh(e,n)},Ohe=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,Mhe=(e,t,n)=>n(t)(e),Ek=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:s})=>{const o=r?jhe(e,t):e;return Ohe(o,t,s)&&Mhe(o,n,s)},Ihe=e=>Ek({...e,isVisibleThroughFrameFn:RB}),OB=e=>Ek({...e,isVisibleThroughFrameFn:The}),Dhe=e=>Ek({...e,isVisibleThroughFrameFn:Rhe(e.destination.axis)}),$he=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:s}=t;if(r[e])return!1;const o=s[e];return o?o.shouldAnimate:!0};function Lhe(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Ss(xk(n,r))}function Vf({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:s,last:o}){return e.reduce(function(a,l){const c=Lhe(l,n),u=l.descriptor.id;if(a.all.push(u),!Ihe({target:c,destination:t,viewport:r,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const h=$he(u,o,s),p={draggableId:u,shouldAnimate:h};return a.visible[u]=p,a},{all:[],visible:{},invisible:{}})}function Fhe(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function S2({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const s=Fhe(e,{inHomeList:t});return{displaced:Hf,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function oy({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:s,last:o,index:i,forceShouldAnimate:a}){const l=bu(e,n);if(i==null)return S2({insideDestination:t,inHomeList:l,displacedBy:s,destination:n});const c=t.find(m=>m.descriptor.index===i);if(!c)return S2({insideDestination:t,inHomeList:l,displacedBy:s,destination:n});const u=Gv(e,t),d=t.indexOf(c),h=u.slice(d);return{displaced:Vf({afterDragging:h,destination:n,displacedBy:s,last:o,viewport:r.frame,forceShouldAnimate:a}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function Zi(e,t){return!!t.effected[e]}var Bhe=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const o=r.draggableId,a=n[o].descriptor.index;return Zi(o,s)?e?a:a-1:e?a+1:a},zhe=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const s=r.index,o=e?s+1:s-1,i=n[0].descriptor.index,a=n[n.length-1].descriptor.index,l=t?a:a+1;return o<i||o>l?null:o},Uhe=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:s,insideDestination:o,previousImpact:i,viewport:a,afterCritical:l})=>{const c=i.at;if(c||oe(),c.type==="REORDER"){const d=zhe({isMovingForward:e,isInHomeList:t,location:c.destination,insideDestination:o});return d==null?null:oy({draggable:n,insideDestination:o,destination:s,viewport:a,last:i.displaced,displacedBy:i.displacedBy,index:d})}const u=Bhe({isMovingForward:e,destination:s,displaced:i.displaced,draggables:r,combine:c.combine,afterCritical:l});return u==null?null:oy({draggable:n,insideDestination:o,destination:s,viewport:a,last:i.displaced,displacedBy:i.displacedBy,index:u})},Hhe=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const s=!!(e.visible[n]||e.invisible[n]);return Zi(n,t)?s?on:xu(r.point):s?r.point:on},Vhe=({afterCritical:e,impact:t,draggables:n})=>{const r=qv(t);r||oe();const s=r.draggableId,o=n[s].page.borderBox.center,i=Hhe({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return mn(o,i)};const MB=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Whe=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,kk=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,C2=({axis:e,moveRelativeTo:t,isMoving:n})=>cl(e.line,t.marginBox[e.end]+MB(e,n),kk(e,t.marginBox,n)),E2=({axis:e,moveRelativeTo:t,isMoving:n})=>cl(e.line,t.marginBox[e.start]-Whe(e,n),kk(e,t.marginBox,n)),qhe=({axis:e,moveInto:t,isMoving:n})=>cl(e.line,t.contentBox[e.start]+MB(e,n),kk(e,t.contentBox,n));var Ghe=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s})=>{const o=wu(r.descriptor.id,n),i=t.page,a=r.axis;if(!o.length)return qhe({axis:a,moveInto:r.page,isMoving:i});const{displaced:l,displacedBy:c}=e,u=l.all[0];if(u){const h=n[u];if(Zi(u,s))return E2({axis:a,moveRelativeTo:h.page,isMoving:i});const p=ty(h.page,c.point);return E2({axis:a,moveRelativeTo:p,isMoving:i})}const d=o[o.length-1];if(d.descriptor.id===t.descriptor.id)return i.borderBox.center;if(Zi(d.descriptor.id,s)){const h=ty(d.page,xu(s.displacedBy.point));return C2({axis:a,moveRelativeTo:h,isMoving:i})}return C2({axis:a,moveRelativeTo:d.page,isMoving:i})},U1=(e,t)=>{const n=e.frame;return n?mn(t,n.scroll.diff.displacement):t};const Khe=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:s})=>{const o=t.page.borderBox.center,i=e.at;return!n||!i?o:i.type==="REORDER"?Ghe({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s}):Vhe({impact:e,draggables:r,afterCritical:s})};var Kv=e=>{const t=Khe(e),n=e.droppable;return n?U1(n,t):t},IB=(e,t)=>{const n=br(t,e.scroll.initial),r=xu(n);return{frame:Ss({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function k2(e,t){return e.map(n=>t[n])}function Jhe(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var Yhe=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:s})=>{const o=IB(t,mn(t.scroll.current,s)),i=n.frame?bk(n,mn(n.frame.scroll.current,s)):n,a=e.displaced,l=Vf({afterDragging:k2(a.all,r),destination:n,displacedBy:e.displacedBy,viewport:o.frame,last:a,forceShouldAnimate:!1}),c=Vf({afterDragging:k2(a.all,r),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),u={},d={},h=[a,l,c];return a.all.forEach(m=>{const g=Jhe(m,h);if(g){d[m]=g;return}u[m]=!0}),{...e,displaced:{all:a.all,invisible:u,visible:d}}},Xhe=(e,t)=>mn(e.scroll.diff.displacement,t),_k=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=Xhe(n,e),s=br(r,t.page.borderBox.center);return mn(t.client.borderBox.center,s)},DB=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:s,onlyOnMainAxis:o=!1})=>{const i=br(n,e.page.borderBox.center),l={target:xh(e.page.borderBox,i),destination:t,withDroppableDisplacement:s,viewport:r};return o?Dhe(l):OB(l)},Qhe=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:s,viewport:o,previousPageBorderBoxCenter:i,previousClientSelection:a,afterCritical:l})=>{if(!n.isEnabled)return null;const c=wu(n.descriptor.id,r),u=bu(t,n),d=Nhe({isMovingForward:e,draggable:t,destination:n,insideDestination:c,previousImpact:s})||Uhe({isMovingForward:e,isInHomeList:u,draggable:t,draggables:r,destination:n,insideDestination:c,previousImpact:s,viewport:o,afterCritical:l});if(!d)return null;const h=Kv({impact:d,draggable:t,droppable:n,draggables:r,afterCritical:l});if(DB({draggable:t,destination:n,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:_k({pageBorderBoxCenter:h,draggable:t,viewport:o}),impact:d,scrollJumpRequest:null};const m=br(h,i),g=Yhe({impact:d,viewport:o,destination:n,draggables:r,maxScrollChange:m});return{clientSelection:a,impact:g,scrollJumpRequest:m}};const $n=e=>{const t=e.subject.active;return t||oe(),t};var Zhe=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:s})=>{const o=n.subject.active;if(!o)return null;const i=n.axis,a=ns(o[i.start],o[i.end]),l=Wv(r).filter(u=>u!==n).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>RB(s.frame)($n(u))).filter(u=>{const d=$n(u);return e?o[i.crossAxisEnd]<d[i.crossAxisEnd]:d[i.crossAxisStart]<o[i.crossAxisStart]}).filter(u=>{const d=$n(u),h=ns(d[i.start],d[i.end]);return a(d[i.start])||a(d[i.end])||h(o[i.start])||h(o[i.end])}).sort((u,d)=>{const h=$n(u)[i.crossAxisStart],p=$n(d)[i.crossAxisStart];return e?h-p:p-h}).filter((u,d,h)=>$n(u)[i.crossAxisStart]===$n(h[0])[i.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const c=l.filter(u=>ns($n(u)[i.start],$n(u)[i.end])(t[i.line]));return c.length===1?c[0]:c.length>1?c.sort((u,d)=>$n(u)[i.start]-$n(d)[i.start])[0]:l.sort((u,d)=>{const h=w2(t,b2($n(u))),p=w2(t,b2($n(d)));return h!==p?h-p:$n(u)[i.start]-$n(d)[i.start]})[0]};const _2=(e,t)=>{const n=e.page.borderBox.center;return Zi(e.descriptor.id,t)?br(n,t.displacedBy.point):n},epe=(e,t)=>{const n=e.page.borderBox;return Zi(e.descriptor.id,t)?xh(n,xu(t.displacedBy.point)):n};var tpe=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:s})=>r.filter(i=>OB({target:epe(i,s),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,a)=>{const l=Uf(e,U1(n,_2(i,s))),c=Uf(e,U1(n,_2(a,s)));return l<c?-1:c<l?1:i.descriptor.index-a.descriptor.index})[0]||null,wh=nn(function(t,n){const r=n[t.line];return{value:r,point:cl(t.line,r)}});const npe=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return cl(r.line,t[r.line]);const s=e.subject.page.contentBox[r.size],l=wu(e.descriptor.id,n).reduce((c,u)=>c+u.client.marginBox[r.size],0)+t[r.line]-s;return l<=0?null:cl(r.line,l)},$B=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),LB=(e,t,n)=>{const r=e.frame;bu(t,e)&&oe(),e.subject.withPlaceholder&&oe();const s=wh(e.axis,t.displaceBy).point,o=npe(e,s,n),i={placeholderSize:s,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const u=Yc({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:u}}const a=o?mn(r.scroll.max,o):r.scroll.max,l=$B(r,a),c=Yc({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:l});return{...e,subject:c,frame:l}},rpe=e=>{const t=e.subject.withPlaceholder;t||oe();const n=e.frame;if(!n){const i=Yc({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const r=t.oldFrameMaxScroll;r||oe();const s=$B(n,r),o=Yc({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:o,frame:s}};var spe=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:s,destination:o,viewport:i,afterCritical:a})=>{if(!t){if(n.length)return null;const d={displaced:Hf,displacedBy:TB,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=Kv({impact:d,draggable:r,droppable:o,draggables:s,afterCritical:a}),p=bu(r,o)?o:LB(o,r,s);return DB({draggable:r,destination:p,newPageBorderBoxCenter:h,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const l=e[o.axis.line]<=t.page.borderBox.center[o.axis.line],c=(()=>{const d=t.descriptor.index;return t.descriptor.id===r.descriptor.id||l?d:d+1})(),u=wh(o.axis,r.displaceBy);return oy({draggable:r,insideDestination:n,destination:o,viewport:i,displacedBy:u,last:Hf,index:c})},ope=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:s,droppables:o,viewport:i,afterCritical:a})=>{const l=Zhe({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:o,viewport:i});if(!l)return null;const c=wu(l.descriptor.id,s),u=tpe({pageBorderBoxCenter:t,viewport:i,destination:l,insideDestination:c,afterCritical:a}),d=spe({previousPageBorderBoxCenter:t,destination:l,draggable:n,draggables:s,moveRelativeTo:u,insideDestination:c,viewport:i,afterCritical:a});if(!d)return null;const h=Kv({impact:d,draggable:n,droppable:l,draggables:s,afterCritical:a});return{clientSelection:_k({pageBorderBoxCenter:h,draggable:n,viewport:i}),impact:d,scrollJumpRequest:null}},Er=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const ipe=(e,t)=>{const n=Er(e);return n?t[n]:null};var ape=({state:e,type:t})=>{const n=ipe(e.impact,e.dimensions.droppables),r=!!n,s=e.dimensions.droppables[e.critical.droppable.id],o=n||s,i=o.axis.direction,a=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(a&&!r)return null;const l=t==="MOVE_DOWN"||t==="MOVE_RIGHT",c=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:d,droppables:h}=e.dimensions;return a?Qhe({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,destination:o,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):ope({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,isOver:o,draggables:d,droppables:h,viewport:e.viewport,afterCritical:e.afterCritical})};function ba(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function FB(e){const t=ns(e.top,e.bottom),n=ns(e.left,e.right);return function(s){return t(s.y)&&n(s.x)}}function lpe(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function cpe({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,s=n.map(o=>{const i=o.axis,a=cl(o.axis.line,e.center[i.line],o.page.borderBox.center[i.crossAxisLine]);return{id:o.descriptor.id,distance:Uf(r,a)}}).sort((o,i)=>i.distance-o.distance);return s[0]?s[0].id:null}function upe({pageBorderBox:e,draggable:t,droppables:n}){const r=Wv(n).filter(s=>{if(!s.isEnabled)return!1;const o=s.subject.active;if(!o||!lpe(e,o))return!1;if(FB(o)(e.center))return!0;const i=s.axis,a=o.center[i.crossAxisLine],l=e[i.crossAxisStart],c=e[i.crossAxisEnd],u=ns(o[i.crossAxisStart],o[i.crossAxisEnd]),d=u(l),h=u(c);return!d&&!h?!0:d?l<a:c>a});return r.length?r.length===1?r[0].descriptor.id:cpe({pageBorderBox:e,draggable:t,candidates:r}):null}const BB=(e,t)=>Ss(xh(e,t));var dpe=(e,t)=>{const n=e.frame;return n?BB(t,n.scroll.diff.value):t};function zB({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function fpe({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var hpe=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:s,viewport:o,afterCritical:i})=>{const a=n.axis,l=wh(n.axis,t.displaceBy),c=l.value,u=e[a.start],d=e[a.end],p=Gv(t,r).find(g=>{const v=g.descriptor.id,x=g.page.borderBox.center[a.line],w=Zi(v,i),b=zB({displaced:s,id:v});return w?b?d<=x:u<x-c:b?d<=x+c:u<x})||null,m=fpe({draggable:t,closest:p,inHomeList:bu(t,n)});return oy({draggable:t,insideDestination:r,destination:n,viewport:o,last:s,displacedBy:l,index:m})};const ppe=4;var mpe=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:s,afterCritical:o})=>{if(!r.isCombineEnabled)return null;const i=r.axis,a=wh(r.axis,e.displaceBy),l=a.value,c=t[i.start],u=t[i.end],h=Gv(e,s).find(m=>{const g=m.descriptor.id,v=m.page.borderBox,w=v[i.size]/ppe,b=Zi(g,o),S=zB({displaced:n.displaced,id:g});return b?S?u>v[i.start]+w&&u<v[i.end]-w:c>v[i.start]-l+w&&c<v[i.end]-l-w:S?u>v[i.start]+l+w&&u<v[i.end]+l-w:c>v[i.start]+w&&c<v[i.end]-w});return h?{displacedBy:a,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:r.descriptor.id}}}:null},UB=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:s,viewport:o,afterCritical:i})=>{const a=BB(t.page.borderBox,e),l=upe({pageBorderBox:a,draggable:t,droppables:r});if(!l)return Ahe;const c=r[l],u=wu(c.descriptor.id,n),d=dpe(c,a);return mpe({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:s,destination:c,insideDestination:u,afterCritical:i})||hpe({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:c,insideDestination:u,last:s.displaced,viewport:o,afterCritical:i})},Nk=(e,t)=>({...e,[t.descriptor.id]:t});const gpe=({previousImpact:e,impact:t,droppables:n})=>{const r=Er(e),s=Er(t);if(!r||r===s)return n;const o=n[r];if(!o.subject.withPlaceholder)return n;const i=rpe(o);return Nk(n,i)};var ype=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:s})=>{const o=gpe({previousImpact:r,impact:s,droppables:n}),i=Er(s);if(!i)return o;const a=n[i];if(bu(e,a)||a.subject.withPlaceholder)return o;const l=LB(a,e,t);return Nk(o,l)},Bd=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:s,scrollJumpRequest:o})=>{const i=r||e.viewport,a=n||e.dimensions,l=t||e.current.client.selection,c=br(l,e.initial.client.selection),u={offset:c,selection:l,borderBoxCenter:mn(e.initial.client.borderBoxCenter,c)},d={selection:mn(u.selection,i.scroll.current),borderBoxCenter:mn(u.borderBoxCenter,i.scroll.current),offset:mn(u.offset,i.scroll.diff.value)},h={client:u,page:d};if(e.phase==="COLLECTING")return{...e,dimensions:a,viewport:i,current:h};const p=a.draggables[e.critical.draggable.id],m=s||UB({pageOffset:d.offset,draggable:p,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),g=ype({draggable:p,impact:m,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:h,dimensions:{draggables:a.draggables,droppables:g},impact:m,viewport:i,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function vpe(e,t){return e.map(n=>t[n])}var HB=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:s})=>{const o=e.displaced,i=vpe(o.all,n),a=Vf({afterDragging:i,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:o});return{...e,displaced:a}},VB=({impact:e,draggable:t,droppable:n,draggables:r,viewport:s,afterCritical:o})=>{const i=Kv({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:o});return _k({pageBorderBoxCenter:i,draggable:t,viewport:s})},WB=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&oe();const r=e.impact,s=n||e.viewport,o=t||e.dimensions,{draggables:i,droppables:a}=o,l=i[e.critical.draggable.id],c=Er(r);c||oe();const u=a[c],d=HB({impact:r,viewport:s,destination:u,draggables:i}),h=VB({impact:d,draggable:l,droppable:u,draggables:i,viewport:s,afterCritical:e.afterCritical});return Bd({impact:d,clientSelection:h,state:e,dimensions:o,viewport:s})},xpe=e=>({index:e.index,droppableId:e.droppableId}),qB=({draggable:e,home:t,draggables:n,viewport:r})=>{const s=wh(t.axis,e.displaceBy),o=wu(t.descriptor.id,n),i=o.indexOf(e);i===-1&&oe();const a=o.slice(i+1),l=a.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),c={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:l};return{impact:{displaced:Vf({afterDragging:a,destination:t,displacedBy:s,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:xpe(e.descriptor)}},afterCritical:c}},wpe=(e,t)=>({draggables:e.draggables,droppables:Nk(e.droppables,t)}),bpe=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=ty(e.client,t),s=ny(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:s}},Spe=e=>{const t=e.frame;return t||oe(),t},Cpe=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(s=>{const o=s.descriptor.droppableId,i=t[o],l=Spe(i).scroll.diff.value,c=mn(r,l);return bpe({draggable:s,offset:c,initialWindowScroll:n.scroll.initial})})},Epe=({state:e,published:t})=>{const n=t.modified.map(x=>{const w=e.dimensions.droppables[x.droppableId];return bk(w,x.scroll)}),r={...e.dimensions.droppables,...PB(n)},s=AB(Cpe({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),o={...e.dimensions.draggables,...s};t.removals.forEach(x=>{delete o[x]});const i={droppables:r,draggables:o},a=Er(e.impact),l=a?i.droppables[a]:null,c=i.draggables[e.critical.draggable.id],u=i.droppables[e.critical.droppable.id],{impact:d,afterCritical:h}=qB({draggable:c,home:u,draggables:o,viewport:e.viewport}),p=l&&l.isCombineEnabled?e.impact:d,m=UB({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:p,viewport:e.viewport,afterCritical:h}),g={...e,phase:"DRAGGING",impact:m,onLiftImpact:d,dimensions:i,afterCritical:h,forceShouldAnimate:!1};return e.phase==="COLLECTING"?g:{...g,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const H1=e=>e.movementMode==="SNAP",Qx=(e,t,n)=>{const r=wpe(e.dimensions,t);return!H1(e)||n?Bd({state:e,dimensions:r}):WB({state:e,dimensions:r})};function Zx(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const N2={phase:"IDLE",completed:null,shouldFlush:!1};var kpe=(e=N2,t)=>{if(t.type==="FLUSH")return{...N2,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&oe();const{critical:n,clientSelection:r,viewport:s,dimensions:o,movementMode:i}=t.payload,a=o.draggables[n.draggable.id],l=o.droppables[n.droppable.id],c={selection:r,borderBoxCenter:a.client.borderBox.center,offset:on},u={client:c,page:{selection:mn(c.selection,s.scroll.initial),borderBoxCenter:mn(c.selection,s.scroll.initial),offset:mn(c.selection,s.scroll.diff.value)}},d=Wv(o.droppables).every(g=>!g.isFixedOnPage),{impact:h,afterCritical:p}=qB({draggable:a,home:l,draggables:o.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:i,dimensions:o,initial:u,current:u,isWindowScrollAllowed:d,impact:h,afterCritical:p,onLiftImpact:h,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&oe(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||oe(),Epe({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;ba(e)||oe();const{client:n}=t.payload;return Hi(n,e.current.client.selection)?e:Bd({state:e,clientSelection:n,impact:H1(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Zx(e);ba(e)||oe();const{id:n,newScroll:r}=t.payload,s=e.dimensions.droppables[n];if(!s)return e;const o=bk(s,r);return Qx(e,o,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;ba(e)||oe();const{id:n,isEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||oe(),s.isEnabled===r&&oe();const o={...s,isEnabled:r};return Qx(e,o,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;ba(e)||oe();const{id:n,isCombineEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||oe(),s.isCombineEnabled===r&&oe();const o={...s,isCombineEnabled:r};return Qx(e,o,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;ba(e)||oe(),e.isWindowScrollAllowed||oe();const n=t.payload.newScroll;if(Hi(e.viewport.scroll.current,n))return Zx(e);const r=IB(e.viewport,n);return H1(e)?WB({state:e,viewport:r}):Bd({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ba(e))return e;const n=t.payload.maxScroll;if(Hi(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&oe();const n=ape({state:e,type:t.type});return n?Bd({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&oe(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||oe(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};const _pe=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Npe=e=>({type:"LIFT",payload:e}),Ppe=e=>({type:"INITIAL_PUBLISH",payload:e}),Ape=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Tpe=()=>({type:"COLLECTION_STARTING",payload:null}),Rpe=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),jpe=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Ope=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),GB=e=>({type:"MOVE",payload:e}),Mpe=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),Ipe=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Dpe=()=>({type:"MOVE_UP",payload:null}),$pe=()=>({type:"MOVE_DOWN",payload:null}),Lpe=()=>({type:"MOVE_RIGHT",payload:null}),Fpe=()=>({type:"MOVE_LEFT",payload:null}),Pk=()=>({type:"FLUSH",payload:null}),Bpe=e=>({type:"DROP_ANIMATE",payload:e}),Ak=e=>({type:"DROP_COMPLETE",payload:e}),KB=e=>({type:"DROP",payload:e}),zpe=e=>({type:"DROP_PENDING",payload:e}),JB=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Upe=e=>({getState:t,dispatch:n})=>r=>s=>{if(s.type!=="LIFT"){r(s);return}const{id:o,clientSelection:i,movementMode:a}=s.payload,l=t();l.phase==="DROP_ANIMATING"&&n(Ak({completed:l.completed})),t().phase!=="IDLE"&&oe(),n(Pk()),n(_pe({draggableId:o,movementMode:a}));const u={draggableId:o,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:d,dimensions:h,viewport:p}=e.startPublishing(u);n(Ppe({critical:d,dimensions:h,clientSelection:i,movementMode:a,viewport:p}))},Hpe=e=>()=>t=>n=>{n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)};const Tk={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Wf={opacity:{drop:0,combining:.7},scale:{drop:.75}},YB={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},ga=`${YB.outOfTheWay}s ${Tk.outOfTheWay}`,zd={fluid:`opacity ${ga}`,snap:`transform ${ga}, opacity ${ga}`,drop:e=>{const t=`${e}s ${Tk.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${ga}`,placeholder:`height ${ga}, width ${ga}, margin ${ga}`},P2=e=>Hi(e,on)?void 0:`translate(${e.x}px, ${e.y}px)`,V1={moveTo:P2,drop:(e,t)=>{const n=P2(e);if(n)return t?`${n} scale(${Wf.scale.drop})`:n}},{minDropTime:W1,maxDropTime:XB}=YB,Vpe=XB-W1,A2=1500,Wpe=.6;var qpe=({current:e,destination:t,reason:n})=>{const r=Uf(e,t);if(r<=0)return W1;if(r>=A2)return XB;const s=r/A2,o=W1+Vpe*s,i=n==="CANCEL"?o*Wpe:o;return Number(i.toFixed(2))},Gpe=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:s})=>{const{draggables:o,droppables:i}=n,a=Er(e),l=a?i[a]:null,c=i[t.descriptor.droppableId],u=VB({impact:e,draggable:t,draggables:o,afterCritical:s,droppable:l||c,viewport:r});return br(u,t.client.borderBox.center)},Kpe=({draggables:e,reason:t,lastImpact:n,home:r,viewport:s,onLiftImpact:o})=>!n.at||t!=="DROP"?{impact:HB({draggables:e,impact:o,destination:r,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Hf},didDropInsideDroppable:!0};const Jpe=({getState:e,dispatch:t})=>n=>r=>{if(r.type!=="DROP"){n(r);return}const s=e(),o=r.payload.reason;if(s.phase==="COLLECTING"){t(zpe({reason:o}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&oe(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||oe();const a=s.critical,l=s.dimensions,c=l.draggables[s.critical.draggable.id],{impact:u,didDropInsideDroppable:d}=Kpe({reason:o,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),h=d?Sk(u):null,p=d?qv(u):null,m={index:a.draggable.index,droppableId:a.droppable.id},g={draggableId:c.descriptor.id,type:c.descriptor.type,source:m,reason:o,mode:s.movementMode,destination:h,combine:p},v=Gpe({impact:u,draggable:c,dimensions:l,viewport:s.viewport,afterCritical:s.afterCritical}),x={critical:s.critical,afterCritical:s.afterCritical,result:g,impact:u};if(!(!Hi(s.current.client.offset,v)||!!g.combine)){t(Ak({completed:x}));return}const b=qpe({current:s.current.client.offset,destination:v,reason:o});t(Bpe({newHomeClientOffset:v,dropDuration:b,completed:x}))};var Ype=Jpe,QB=()=>({x:window.pageXOffset,y:window.pageYOffset});function Xpe(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function Qpe({onWindowScroll:e}){function t(){e(QB())}const n=zf(t),r=Xpe(n);let s=Ui;function o(){return s!==Ui}function i(){o()&&oe(),s=Xr(window,[r])}function a(){o()||oe(),n.cancel(),s(),s=Ui}return{start:i,stop:a,isActive:o}}const Zpe=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH",eme=e=>{const t=Qpe({onWindowScroll:n=>{e.dispatch(Mpe({newScroll:n}))}});return n=>r=>{!t.isActive()&&r.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Zpe(r)&&t.stop(),n(r)}};var tme=eme,nme=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),s=o=>{t||n||(t=!0,e(o),clearTimeout(r))};return s.wasCalled=()=>t,s},rme=()=>{const e=[],t=s=>{const o=e.findIndex(a=>a.timerId===s);o===-1&&oe();const[i]=e.splice(o,1);i.callback()};return{add:s=>{const o=setTimeout(()=>t(o)),i={timerId:o,callback:s};e.push(i)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const sme=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,ome=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,ime=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},qu=(e,t)=>{t()},_p=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function ew(e,t,n,r){if(!e){n(r(t));return}const s=nme(n);e(t,{announce:s}),s.wasCalled()||n(r(t))}var ame=(e,t)=>{const n=rme();let r=null;const s=(d,h)=>{r&&oe(),qu("onBeforeCapture",()=>{const p=e().onBeforeCapture;p&&p({draggableId:d,mode:h})})},o=(d,h)=>{r&&oe(),qu("onBeforeDragStart",()=>{const p=e().onBeforeDragStart;p&&p(_p(d,h))})},i=(d,h)=>{r&&oe();const p=_p(d,h);r={mode:h,lastCritical:d,lastLocation:p.source,lastCombine:null},n.add(()=>{qu("onDragStart",()=>ew(e().onDragStart,p,t,cm.onDragStart))})},a=(d,h)=>{const p=Sk(h),m=qv(h);r||oe();const g=!ime(d,r.lastCritical);g&&(r.lastCritical=d);const v=!sme(r.lastLocation,p);v&&(r.lastLocation=p);const x=!ome(r.lastCombine,m);if(x&&(r.lastCombine=m),!g&&!v&&!x)return;const w={..._p(d,r.mode),combine:m,destination:p};n.add(()=>{qu("onDragUpdate",()=>ew(e().onDragUpdate,w,t,cm.onDragUpdate))})},l=()=>{r||oe(),n.flush()},c=d=>{r||oe(),r=null,qu("onDragEnd",()=>ew(e().onDragEnd,d,t,cm.onDragEnd))};return{beforeCapture:s,beforeStart:o,start:i,update:a,flush:l,drop:c,abort:()=>{if(!r)return;const d={..._p(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};c(d)}}},lme=(e,t)=>{const n=ame(e,t);return r=>s=>o=>{if(o.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){const a=o.payload.critical;n.beforeStart(a,o.payload.movementMode),s(o),n.start(a,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){const a=o.payload.completed.result;n.flush(),s(o),n.drop(a);return}if(s(o),o.type==="FLUSH"){n.abort();return}const i=r.getState();i.phase==="DRAGGING"&&n.update(i.critical,i.impact)}};const cme=e=>t=>n=>{if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&oe(),e.dispatch(Ak({completed:r.completed}))};var ume=cme;const dme=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return s=>o=>{if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&r(),s(o),o.type!=="DROP_ANIMATE")return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(JB())}};n=requestAnimationFrame(()=>{n=null,t=Xr(window,[i])})}};var fme=dme,hme=e=>()=>t=>n=>{(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)},pme=e=>{let t=!1;return()=>n=>r=>{if(r.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(r.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){t=!1;const s=r.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const mme=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH";var gme=e=>t=>n=>r=>{if(mme(r)){e.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);const s=t.getState();s.phase!=="DRAGGING"&&oe(),e.start(s);return}n(r),e.scroll(t.getState())};const yme=e=>t=>n=>{if(t(n),n.type!=="PUBLISH_WHILE_DRAGGING")return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(KB({reason:r.reason})))};var vme=yme;const xme=aB;var wme=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:s,autoScroller:o})=>iB(kpe,xme(yfe(Hpe(n),hme(e),Upe(e),Ype,ume,fme,vme,gme(o),tme,pme(t),lme(r,s))));const tw=()=>({additions:{},removals:{},modified:{}});function bme({registry:e,callbacks:t}){let n=tw(),r=null;const s=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:l,removals:c,modified:u}=n,d=Object.keys(l).map(m=>e.draggable.getById(m).getDimension(on)).sort((m,g)=>m.descriptor.index-g.descriptor.index),h=Object.keys(u).map(m=>{const v=e.droppable.getById(m).callbacks.getScrollWhileDragging();return{droppableId:m,scroll:v}}),p={additions:d,removals:Object.keys(c),modified:h};n=tw(),t.publish(p)}))};return{add:l=>{const c=l.descriptor.id;n.additions[c]=l,n.modified[l.descriptor.droppableId]=!0,n.removals[c]&&delete n.removals[c],s()},remove:l=>{const c=l.descriptor;n.removals[c.id]=!0,n.modified[c.droppableId]=!0,n.additions[c.id]&&delete n.additions[c.id],s()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=tw())}}}var ZB=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const s=br({x:t,y:e},{x:r,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},ez=()=>{const e=document.documentElement;return e||oe(),e},tz=()=>{const e=ez();return ZB({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Sme=()=>{const e=QB(),t=tz(),n=e.y,r=e.x,s=ez(),o=s.clientWidth,i=s.clientHeight,a=r+o,l=n+i;return{frame:Ss({top:n,left:r,right:a,bottom:l}),scroll:{initial:e,current:e,max:t,diff:{value:on,displacement:on}}}},Cme=({critical:e,scrollOptions:t,registry:n})=>{const r=Sme(),s=r.scroll.current,o=e.droppable,i=n.droppable.getAllByType(o.type).map(u=>u.callbacks.getDimensionAndWatchScroll(s,t)),a=n.draggable.getAllByType(e.draggable.type).map(u=>u.getDimension(s));return{dimensions:{draggables:AB(a),droppables:PB(i)},critical:e,viewport:r}};function T2(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Eme=(e,t)=>{let n=null;const r=bme({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(h,p)=>{e.droppable.exists(h)||oe(),n&&t.updateDroppableIsEnabled({id:h,isEnabled:p})},o=(h,p)=>{n&&(e.droppable.exists(h)||oe(),t.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},i=(h,p)=>{n&&(e.droppable.exists(h)||oe(),t.updateDroppableScroll({id:h,newScroll:p}))},a=(h,p)=>{n&&e.droppable.getById(h).callbacks.scroll(p)},l=()=>{if(!n)return;r.stop();const h=n.critical.droppable;e.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),n.unsubscribe(),n=null},c=h=>{n||oe();const p=n.critical.draggable;h.type==="ADDITION"&&T2(e,p,h.value)&&r.add(h.value),h.type==="REMOVAL"&&T2(e,p,h.value)&&r.remove(h.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:o,scrollDroppable:a,updateDroppableScroll:i,startPublishing:h=>{n&&oe();const p=e.draggable.getById(h.draggableId),m=e.droppable.getById(p.descriptor.droppableId),g={draggable:p.descriptor,droppable:m.descriptor},v=e.subscribe(c);return n={critical:g,unsubscribe:v},Cme({critical:g,registry:e,scrollOptions:h.scrollOptions})},stopPublishing:l}},nz=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",kme=e=>{window.scrollBy(e.x,e.y)};const _me=nn(e=>Wv(e).filter(t=>!(!t.isEnabled||!t.frame))),Nme=(e,t)=>_me(t).find(r=>(r.frame||oe(),FB(r.frame.pageMarginBox)(e)))||null;var Pme=({center:e,destination:t,droppables:n})=>{if(t){const s=n[t];return s.frame?s:null}return Nme(e,n)};const qf={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Ame=(e,t,n=()=>qf)=>{const r=n(),s=e[t.size]*r.startFromPercentage,o=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:o}},rz=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},Rk=1,Tme=(e,t,n=()=>qf)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return Rk;const o=1-rz({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=r.maxPixelScroll*r.ease(o);return Math.ceil(i)},Rme=(e,t,n)=>{const r=n(),s=r.durationDampening.accelerateAt,o=r.durationDampening.stopDampeningAt,i=t,a=o,c=Date.now()-i;if(c>=o)return e;if(c<s)return Rk;const u=rz({startOfRange:s,endOfRange:a,current:c}),d=e*r.ease(u);return Math.ceil(d)},R2=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const o=Tme(e,t,s);return o===0?0:r?Math.max(Rme(o,n,s),Rk):o},j2=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=Ame(e,r,o);return t[r.end]<t[r.start]?R2({distanceToEdge:t[r.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o}):-1*R2({distanceToEdge:t[r.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o})},jme=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,s=t.width>e.width;return!s&&!r?n:s&&r?null:{x:s?0:n.x,y:r?0:n.y}};const Ome=NB(e=>e===0?0:e);var sz=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},a=j2({container:t,distanceToEdges:i,dragStartTime:e,axis:Ck,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),l=j2({container:t,distanceToEdges:i,dragStartTime:e,axis:jB,shouldUseTimeDampening:s,getAutoScrollerOptions:o}),c=Ome({x:l,y:a});if(Hi(c,on))return null;const u=jme({container:t,subject:n,proposedScroll:c});return u?Hi(u,on)?null:u:null};const Mme=NB(e=>e===0?0:e>0?1:-1),jk=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const s=mn(t,r),o={x:e(s.x,n.x),y:e(s.y,n.y)};return Hi(o,on)?null:o}})(),oz=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=Mme(n),o=jk({max:r,current:t,change:s});return!o||s.x!==0&&o.x===0||s.y!==0&&o.y===0},Ok=(e,t)=>oz({current:e.scroll.current,max:e.scroll.max,change:t}),Ime=(e,t)=>{if(!Ok(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return jk({current:r,max:n,change:t})},Mk=(e,t)=>{const n=e.frame;return n?oz({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Dme=(e,t)=>{const n=e.frame;return!n||!Mk(e,t)?null:jk({current:n.scroll.current,max:n.scroll.max,change:t})};var $me=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=sz({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return i&&Ok(e,i)?i:null},Lme=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:o})=>{const i=e.frame;if(!i)return null;const a=sz({dragStartTime:r,container:i.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:o});return a&&Mk(e,a)?a:null},O2=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:s,getAutoScrollerOptions:o})=>{const i=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const d=e.viewport,h=$me({dragStartTime:t,viewport:d,subject:l,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:o});if(h){r(h);return}}const c=Pme({center:i,destination:Er(e.impact),droppables:e.dimensions.droppables});if(!c)return;const u=Lme({dragStartTime:t,droppable:c,subject:l,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:o});u&&s(c.descriptor.id,u)},Fme=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>qf})=>{const r=zf(e),s=zf(t);let o=null;const i=c=>{o||oe();const{shouldUseTimeDampening:u,dragStartTime:d}=o;O2({state:c,scrollWindow:r,scrollDroppable:s,dragStartTime:d,shouldUseTimeDampening:u,getAutoScrollerOptions:n})};return{start:c=>{o&&oe();const u=Date.now();let d=!1;const h=()=>{d=!0};O2({state:c,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:n}),o={dragStartTime:u,shouldUseTimeDampening:d},d&&i(c)},stop:()=>{o&&(r.cancel(),s.cancel(),o=null)},scroll:i}},Bme=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(a,l)=>{const c=mn(a.current.client.selection,l);e({client:c})},s=(a,l)=>{if(!Mk(a,l))return l;const c=Dme(a,l);if(!c)return t(a.descriptor.id,l),null;const u=br(l,c);return t(a.descriptor.id,u),br(l,u)},o=(a,l,c)=>{if(!a||!Ok(l,c))return c;const u=Ime(l,c);if(!u)return n(c),null;const d=br(c,u);return n(d),br(c,d)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const c=Er(a.impact);c||oe();const u=s(a.dimensions.droppables[c],l);if(!u)return;const d=a.viewport,h=o(a.isWindowScrollAllowed,d,u);h&&r(a,h)}},zme=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const s=Fme({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),o=Bme({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:l=>{if(!(r().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){s.scroll(l);return}l.scrollJumpRequest&&o(l)}},start:s.start,stop:s.stop}};const Xc="data-rfd",Qc=(()=>{const e=`${Xc}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),q1=(()=>{const e=`${Xc}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Ume=(()=>{const e=`${Xc}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),M2={contextId:`${Xc}-scroll-container-context-id`},Hme=e=>t=>`[${t}="${e}"]`,Gu=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),Vme="pointer-events: none;";var Wme=e=>{const t=Hme(e),n=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Qc.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:Vme,dropAnimating:a}}})(),r=(()=>{const a=`
      transition: ${zd.outOfTheWay};
    `;return{selector:t(q1.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),s={selector:t(Ume.contextId),styles:{always:"overflow-anchor: none;"}},i=[r,n,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Gu(i,"always"),resting:Gu(i,"resting"),dragging:Gu(i,"dragging"),dropAnimating:Gu(i,"dropAnimating"),userCancel:Gu(i,"userCancel")}};const qme=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect;var kr=qme;const nw=()=>{const e=document.querySelector("head");return e||oe(),e},I2=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Gme(e,t){const n=Ve(()=>Wme(e),[e]),r=y.useRef(null),s=y.useRef(null),o=ye(nn(d=>{const h=s.current;h||oe(),h.textContent=d}),[]),i=ye(d=>{const h=r.current;h||oe(),h.textContent=d},[]);kr(()=>{!r.current&&!s.current||oe();const d=I2(t),h=I2(t);return r.current=d,s.current=h,d.setAttribute(`${Xc}-always`,e),h.setAttribute(`${Xc}-dynamic`,e),nw().appendChild(d),nw().appendChild(h),i(n.always),o(n.resting),()=>{const p=m=>{const g=m.current;g||oe(),nw().removeChild(g),m.current=null};p(r),p(s)}},[t,i,o,n.always,n.resting,e]);const a=ye(()=>o(n.dragging),[o,n.dragging]),l=ye(d=>{if(d==="DROP"){o(n.dropAnimating);return}o(n.userCancel)},[o,n.dropAnimating,n.userCancel]),c=ye(()=>{s.current&&o(n.resting)},[o,n.resting]);return Ve(()=>({dragging:a,dropping:l,resting:c}),[a,l,c])}function iz(e,t){return Array.from(e.querySelectorAll(t))}var az=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Jv(e){return e instanceof az(e).HTMLElement}function Kme(e,t){const n=`[${Qc.contextId}="${e}"]`,r=iz(document,n);if(!r.length)return null;const s=r.find(o=>o.getAttribute(Qc.draggableId)===t);return!s||!Jv(s)?null:s}function Jme(e){const t=y.useRef({}),n=y.useRef(null),r=y.useRef(null),s=y.useRef(!1),o=ye(function(h,p){const m={id:h,focus:p};return t.current[h]=m,function(){const v=t.current;v[h]!==m&&delete v[h]}},[]),i=ye(function(h){const p=Kme(e,h);p&&p!==document.activeElement&&p.focus()},[e]),a=ye(function(h,p){n.current===h&&(n.current=p)},[]),l=ye(function(){r.current||s.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const h=n.current;h&&i(h)}))},[i]),c=ye(function(h){n.current=null;const p=document.activeElement;p&&p.getAttribute(Qc.draggableId)===h&&(n.current=h)},[]);return kr(()=>(s.current=!0,function(){s.current=!1;const h=r.current;h&&cancelAnimationFrame(h)}),[]),Ve(()=>({register:o,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[o,c,l,a])}function Yme(){const e={draggables:{},droppables:{}},t=[];function n(d){return t.push(d),function(){const p=t.indexOf(d);p!==-1&&t.splice(p,1)}}function r(d){t.length&&t.forEach(h=>h(d))}function s(d){return e.draggables[d]||null}function o(d){const h=s(d);return h||oe(),h}const i={register:d=>{e.draggables[d.descriptor.id]=d,r({type:"ADDITION",value:d})},update:(d,h)=>{const p=e.draggables[h.descriptor.id];p&&p.uniqueId===d.uniqueId&&(delete e.draggables[h.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:d=>{const h=d.descriptor.id,p=s(h);p&&d.uniqueId===p.uniqueId&&(delete e.draggables[h],e.droppables[d.descriptor.droppableId]&&r({type:"REMOVAL",value:d}))},getById:o,findById:s,exists:d=>!!s(d),getAllByType:d=>Object.values(e.draggables).filter(h=>h.descriptor.type===d)};function a(d){return e.droppables[d]||null}function l(d){const h=a(d);return h||oe(),h}const c={register:d=>{e.droppables[d.descriptor.id]=d},unregister:d=>{const h=a(d.descriptor.id);h&&d.uniqueId===h.uniqueId&&delete e.droppables[d.descriptor.id]},getById:l,findById:a,exists:d=>!!a(d),getAllByType:d=>Object.values(e.droppables).filter(h=>h.descriptor.type===d)};function u(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:c,subscribe:n,clean:u}}function Xme(){const e=Ve(Yme,[]);return y.useEffect(()=>function(){M.version.startsWith("16")||M.version.startsWith("17")?requestAnimationFrame(e.clean):e.clean()},[e]),e}var Ik=M.createContext(null),iy=()=>{const e=document.body;return e||oe(),e};const Qme={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var Zme=Qme;const ege=e=>`rfd-announcement-${e}`;function tge(e){const t=Ve(()=>ege(e),[e]),n=y.useRef(null);return y.useEffect(function(){const o=document.createElement("div");return n.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),zi(o.style,Zme),iy().appendChild(o),function(){setTimeout(function(){const l=iy();l.contains(o)&&l.removeChild(o),o===n.current&&(n.current=null)})}},[t]),ye(s=>{const o=n.current;if(o){o.textContent=s;return}},[])}let nge=0;const lz={separator:"::"};function rge(e,t=lz){return Ve(()=>`${e}${t.separator}${nge++}`,[t.separator,e])}function sge(e,t=lz){const n=M.useId();return Ve(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}var Dk="useId"in M?sge:rge;function oge({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function ige({contextId:e,text:t}){const n=Dk("hidden-text",{separator:"-"}),r=Ve(()=>oge({contextId:e,uniqueId:n}),[n,e]);return y.useEffect(function(){const o=document.createElement("div");return o.id=r,o.textContent=t,o.style.display="none",iy().appendChild(o),function(){const a=iy();a.contains(o)&&a.removeChild(o)}},[r,t]),r}var Yv=M.createContext(null);function cz(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),t}function age(){let e=null;function t(){return!!e}function n(i){return i===e}function r(i){e&&oe();const a={abandon:i};return e=a,a}function s(){e||oe(),e=null}function o(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:n,claim:r,release:s,tryAbandon:o}}function Gf(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const lge=9,cge=13,$k=27,uz=32,uge=33,dge=34,fge=35,hge=36,pge=37,mge=38,gge=39,yge=40,vge={[cge]:!0,[lge]:!0};var dz=e=>{vge[e.keyCode]&&e.preventDefault()};const xge=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})();var Xv=xge;const fz=0,D2=5;function wge(e,t){return Math.abs(t.x-e.x)>=D2||Math.abs(t.y-e.y)>=D2}const $2={type:"IDLE"};function bge({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:s=>{const{button:o,clientX:i,clientY:a}=s;if(o!==fz)return;const l={x:i,y:a},c=n();if(c.type==="DRAGGING"){s.preventDefault(),c.actions.move(l);return}c.type!=="PENDING"&&oe();const u=c.point;if(!wge(u,l))return;s.preventDefault();const d=c.actions.fluidLift(l);r({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:s=>{const o=n();if(o.type!=="DRAGGING"){e();return}s.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{n().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(n().type==="PENDING"){e();return}if(s.keyCode===$k){s.preventDefault(),e();return}dz(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const o=n();if(o.type==="IDLE"&&oe(),o.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:Xv,fn:e}]}function Sge(e){const t=y.useRef($2),n=y.useRef(Ui),r=Ve(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==fz||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const h=e.findClosestDraggableId(d);if(!h)return;const p=e.tryGetLock(h,i,{sourceEvent:d});if(!p)return;d.preventDefault();const m={x:d.clientX,y:d.clientY};n.current(),c(p,m)}}),[e]),s=Ve(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const d=e.findClosestDraggableId(u);if(!d)return;const h=e.findOptionsForDraggable(d);h&&(h.shouldRespectForcePress||e.canGetLock(d)&&u.preventDefault())}}),[e]),o=ye(function(){const d={passive:!1,capture:!0};n.current=Xr(window,[s,r],d)},[s,r]),i=ye(()=>{t.current.type!=="IDLE"&&(t.current=$2,n.current(),o())},[o]),a=ye(()=>{const u=t.current;i(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[i]),l=ye(function(){const d={capture:!0,passive:!1},h=bge({cancel:a,completed:i,getPhase:()=>t.current,setPhase:p=>{t.current=p}});n.current=Xr(window,h,d)},[a,i]),c=ye(function(d,h){t.current.type!=="IDLE"&&oe(),t.current={type:"PENDING",point:h,actions:d},l()},[l]);kr(function(){return o(),function(){n.current()}},[o])}function Cge(){}const Ege={[dge]:!0,[uge]:!0,[hge]:!0,[fge]:!0};function kge(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===$k){s.preventDefault(),n();return}if(s.keyCode===uz){s.preventDefault(),r();return}if(s.keyCode===yge){s.preventDefault(),e.moveDown();return}if(s.keyCode===mge){s.preventDefault(),e.moveUp();return}if(s.keyCode===gge){s.preventDefault(),e.moveRight();return}if(s.keyCode===pge){s.preventDefault(),e.moveLeft();return}if(Ege[s.keyCode]){s.preventDefault();return}dz(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Xv,fn:n}]}function _ge(e){const t=y.useRef(Cge),n=Ve(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==uz)return;const i=e.findClosestDraggableId(o);if(!i)return;const a=e.tryGetLock(i,u,{sourceEvent:o});if(!a)return;o.preventDefault();let l=!0;const c=a.snapLift();t.current();function u(){l||oe(),l=!1,t.current(),r()}t.current=Xr(window,kge(c,u),{capture:!0,passive:!1})}}),[e]),r=ye(function(){const o={passive:!1,capture:!0};t.current=Xr(window,[n],o)},[n]);kr(function(){return r(),function(){t.current()}},[r])}const rw={type:"IDLE"},Nge=120,Pge=.15;function Age({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===$k&&n.preventDefault(),e()}},{eventName:Xv,fn:e}]}function Tge({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:o,clientY:i}=r.touches[0],a={x:o,y:i};r.preventDefault(),s.actions.move(a)}},{eventName:"touchend",fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}r.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const s=n();s.type==="IDLE"&&oe();const o=r.touches[0];if(!o||!(o.force>=Pge))return;const a=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){a&&e();return}if(a){if(s.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:Xv,fn:e}]}function Rge(e){const t=y.useRef(rw),n=y.useRef(Ui),r=ye(function(){return t.current},[]),s=ye(function(p){t.current=p},[]),o=Ve(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const m=e.findClosestDraggableId(p);if(!m)return;const g=e.tryGetLock(m,a,{sourceEvent:p});if(!g)return;const v=p.touches[0],{clientX:x,clientY:w}=v,b={x,y:w};n.current(),d(g,b)}}),[e]),i=ye(function(){const p={capture:!0,passive:!1};n.current=Xr(window,[o],p)},[o]),a=ye(()=>{const h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),s(rw),n.current(),i())},[i,s]),l=ye(()=>{const h=t.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),c=ye(function(){const p={capture:!0,passive:!1},m={cancel:l,completed:a,getPhase:r},g=Xr(window,Tge(m),p),v=Xr(window,Age(m),p);n.current=function(){g(),v()}},[l,r,a]),u=ye(function(){const p=r();p.type!=="PENDING"&&oe();const m=p.actions.fluidLift(p.point);s({type:"DRAGGING",actions:m,hasMoved:!1})},[r,s]),d=ye(function(p,m){r().type!=="IDLE"&&oe();const g=setTimeout(u,Nge);s({type:"PENDING",point:m,actions:p,longPressTimerId:g}),c()},[c,r,s,u]);kr(function(){return i(),function(){n.current();const m=r();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),s(rw))}},[r,i,s]),kr(function(){return Xr(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const jge=["input","button","textarea","select","option","optgroup","video","audio"];function hz(e,t){if(t==null)return!1;if(jge.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:hz(e,t.parentElement)}function Oge(e,t){const n=t.target;return Jv(n)?hz(e,n):!1}var Mge=e=>Ss(e.getBoundingClientRect()).center;function Ige(e){return e instanceof az(e).Element}const Dge=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function pz(e,t){return e==null?null:e[Dge](t)?e:pz(e.parentElement,t)}function $ge(e,t){return e.closest?e.closest(t):pz(e,t)}function Lge(e){return`[${Qc.contextId}="${e}"]`}function Fge(e,t){const n=t.target;if(!Ige(n))return null;const r=Lge(e),s=$ge(n,r);return!s||!Jv(s)?null:s}function Bge(e,t){const n=Fge(e,t);return n?n.getAttribute(Qc.draggableId):null}function zge(e,t){const n=`[${q1.contextId}="${e}"]`,s=iz(document,n).find(o=>o.getAttribute(q1.id)===t);return!s||!Jv(s)?null:s}function Uge(e){e.preventDefault()}function Np({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function mz({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const s=n.draggable.findById(r);return!(!s||!s.options.isEnabled||!nz(t.getState(),r))}function Hge({lockAPI:e,contextId:t,store:n,registry:r,draggableId:s,forceSensorStop:o,sourceEvent:i}){if(!mz({lockAPI:e,store:n,registry:r,draggableId:s}))return null;const l=r.draggable.getById(s),c=zge(t,l.descriptor.id);if(!c||i&&!l.options.canDragInteractiveElements&&Oge(c,i))return null;const u=e.claim(o||Ui);let d="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function p(){return e.isActive(u)}function m(C,E){Np({expected:C,phase:d,isLockActive:p,shouldWarn:!0})&&n.dispatch(E())}const g=m.bind(null,"DRAGGING");function v(C){function E(){e.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(E(),oe()),n.dispatch(Npe(C.liftActionArgs)),d="DRAGGING";function k(N,P={shouldBlockNextClick:!1}){if(C.cleanup(),P.shouldBlockNextClick){const T=Xr(window,[{eventName:"click",fn:Uge,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}E(),n.dispatch(KB({reason:N}))}return{isActive:()=>Np({expected:"DRAGGING",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:N=>k("DROP",N),cancel:N=>k("CANCEL",N),...C.actions}}function x(C){const E=zf(N=>{g(()=>GB({client:N}))});return{...v({liftActionArgs:{id:s,clientSelection:C,movementMode:"FLUID"},cleanup:()=>E.cancel(),actions:{move:E}}),move:E}}function w(){const C={moveUp:()=>g(Dpe),moveRight:()=>g(Lpe),moveDown:()=>g($pe),moveLeft:()=>g(Fpe)};return v({liftActionArgs:{id:s,clientSelection:Mge(c),movementMode:"SNAP"},cleanup:Ui,actions:C})}function b(){Np({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!0})&&e.release()}return{isActive:()=>Np({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:x,snapLift:w,abort:b}}const Vge=[Sge,_ge,Rge];function Wge({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:s}){const o=[...s?Vge:[],...r||[]],i=y.useState(()=>age())[0],a=ye(function(v,x){Gf(v)&&!Gf(x)&&i.tryAbandon()},[i]);kr(function(){let v=t.getState();return t.subscribe(()=>{const w=t.getState();a(v,w),v=w})},[i,t,a]),kr(()=>i.tryAbandon,[i.tryAbandon]);const l=ye(g=>mz({lockAPI:i,registry:n,store:t,draggableId:g}),[i,n,t]),c=ye((g,v,x)=>Hge({lockAPI:i,registry:n,contextId:e,store:t,draggableId:g,forceSensorStop:v||null,sourceEvent:x&&x.sourceEvent?x.sourceEvent:null}),[e,i,n,t]),u=ye(g=>Bge(e,g),[e]),d=ye(g=>{const v=n.draggable.findById(g);return v?v.options:null},[n.draggable]),h=ye(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Pk()))},[i,t]),p=ye(()=>i.isClaimed(),[i]),m=Ve(()=>({canGetLock:l,tryGetLock:c,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:h,isLockClaimed:p}),[l,c,u,d,h,p]);for(let g=0;g<o.length;g++)o[g](m)}const qge=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};M.version.startsWith("16")||M.version.startsWith("17")?n():Kr.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),Gge=e=>({...qf,...e.autoScrollerOptions,durationDampening:{...qf.durationDampening,...e.autoScrollerOptions}});function Ku(e){return e.current||oe(),e.current}function Kge(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:s,dragHandleUsageInstructions:o}=e,i=y.useRef(null),a=cz(e),l=ye(()=>qge(a.current),[a]),c=ye(()=>Gge(a.current),[a]),u=tge(t),d=ige({contextId:t,text:o}),h=Gme(t,s),p=ye(T=>{Ku(i).dispatch(T)},[]),m=Ve(()=>a2({publishWhileDragging:Ape,updateDroppableScroll:Rpe,updateDroppableIsEnabled:jpe,updateDroppableIsCombineEnabled:Ope,collectionStarting:Tpe},p),[p]),g=Xme(),v=Ve(()=>Eme(g,m),[g,m]),x=Ve(()=>zme({scrollWindow:kme,scrollDroppable:v.scrollDroppable,getAutoScrollerOptions:c,...a2({move:GB},p)}),[v.scrollDroppable,p,c]),w=Jme(t),b=Ve(()=>wme({announce:u,autoScroller:x,dimensionMarshal:v,focusMarshal:w,getResponders:l,styleMarshal:h}),[u,x,v,w,l,h]);i.current=b;const S=ye(()=>{const T=Ku(i);T.getState().phase!=="IDLE"&&T.dispatch(Pk())},[]),C=ye(()=>{const T=Ku(i).getState();return T.phase==="DROP_ANIMATING"?!0:T.phase==="IDLE"?!1:T.isDragging},[]),E=Ve(()=>({isDragging:C,tryAbort:S}),[C,S]);n(E);const k=ye(T=>nz(Ku(i).getState(),T),[]),N=ye(()=>ba(Ku(i).getState()),[]),P=Ve(()=>({marshal:v,focus:w,contextId:t,canLift:k,isMovementAllowed:N,dragHandleUsageInstructionsId:d,registry:g}),[t,v,d,w,k,N,g]);return Wge({contextId:t,store:b,registry:g,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),y.useEffect(()=>S,[S]),M.createElement(Yv.Provider,{value:P},M.createElement(she,{context:Ik,store:b},e.children))}let Jge=0;function Yge(){return Ve(()=>`${Jge++}`,[])}function Xge(){return M.useId()}var Qge="useId"in M?Xge:Yge;function Zge(e){const t=Qge(),n=e.dragHandleUsageInstructions||cm.dragHandleUsageInstructions;return M.createElement(mhe,null,r=>M.createElement(Kge,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const L2={dragging:5e3,dropAnimating:4500},eye=(e,t)=>t?zd.drop(t.duration):e?zd.snap:zd.fluid,tye=(e,t)=>{if(e)return t?Wf.opacity.drop:Wf.opacity.combining},nye=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function rye(e){const n=e.dimension.client,{offset:r,combineWith:s,dropping:o}=e,i=!!s,a=nye(e),l=!!o,c=l?V1.drop(r,i):V1.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:eye(a,o),transform:c,opacity:tye(i,l),zIndex:l?L2.dropAnimating:L2.dragging,pointerEvents:"none"}}function sye(e){return{transform:V1.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function oye(e){return e.type==="DRAGGING"?rye(e):sye(e)}function iye(e,t,n=on){const r=window.getComputedStyle(t),s=t.getBoundingClientRect(),o=SB(s,r),i=ny(o,n),a={client:o,tagName:t.tagName.toLowerCase(),display:r.display},l={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:e,placeholder:a,displaceBy:l,client:o,page:i}}function aye(e){const t=Dk("draggable"),{descriptor:n,registry:r,getDraggableRef:s,canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:a}=e,l=Ve(()=>({canDragInteractiveElements:o,shouldRespectForcePress:i,isEnabled:a}),[o,a,i]),c=ye(p=>{const m=s();return m||oe(),iye(n,m,p)},[n,s]),u=Ve(()=>({uniqueId:t,descriptor:n,options:l,getDimension:c}),[n,c,l,t]),d=y.useRef(u),h=y.useRef(!0);kr(()=>(r.draggable.register(d.current),()=>r.draggable.unregister(d.current)),[r.draggable]),kr(()=>{if(h.current){h.current=!1;return}const p=d.current;d.current=u,r.draggable.update(u,p)},[u,r.draggable])}var Lk=M.createContext(null);function ay(e){const t=y.useContext(e);return t||oe(),t}function lye(e){e.preventDefault()}const cye=e=>{const t=y.useRef(null),n=ye((E=null)=>{t.current=E},[]),r=ye(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:o,registry:i}=ay(Yv),{type:a,droppableId:l}=ay(Lk),c=Ve(()=>({id:e.draggableId,index:e.index,type:a,droppableId:l}),[e.draggableId,e.index,a,l]),{children:u,draggableId:d,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:m,isClone:g,mapped:v,dropAnimationFinished:x}=e;if(!g){const E=Ve(()=>({descriptor:c,registry:i,getDraggableRef:r,canDragInteractiveElements:m,shouldRespectForcePress:p,isEnabled:h}),[c,i,r,m,p,h]);aye(E)}const w=Ve(()=>h?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:lye}:null,[s,o,d,h]),b=ye(E=>{v.type==="DRAGGING"&&v.dropping&&E.propertyName==="transform"&&(M.version.startsWith("16")||M.version.startsWith("17")?x():Kr.flushSync(x))},[x,v]),S=Ve(()=>{const E=oye(v),k=v.type==="DRAGGING"&&v.dropping?b:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":d,style:E,onTransitionEnd:k},dragHandleProps:w}},[s,w,d,v,b,n]),C=Ve(()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}),[c.droppableId,c.id,c.index,c.type]);return M.createElement(M.Fragment,null,u(S,v.snapshot,C))};var uye=cye,gz=(e,t)=>e===t,yz=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const dye=e=>e.combine?e.combine.draggableId:null,fye=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function hye(){const e=nn((s,o)=>({x:s,y:o})),t=nn((s,o,i=null,a=null,l=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!l,dropAnimation:l,mode:s,draggingOver:i,combineWith:a,combineTargetFor:null})),n=nn((s,o,i,a,l=null,c=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:c,mode:o,offset:s,dimension:i,forceShouldAnimate:u,snapshot:t(o,a,l,c,null)}}));return(s,o)=>{if(Gf(s)){if(s.critical.draggable.id!==o.draggableId)return null;const i=s.current.client.offset,a=s.dimensions.draggables[o.draggableId],l=Er(s.impact),c=fye(s.impact),u=s.forceShouldAnimate;return n(e(i.x,i.y),s.movementMode,a,o.isClone,l,c,u)}if(s.phase==="DROP_ANIMATING"){const i=s.completed;if(i.result.draggableId!==o.draggableId)return null;const a=o.isClone,l=s.dimensions.draggables[o.draggableId],c=i.result,u=c.mode,d=yz(c),h=dye(c),m={duration:s.dropDuration,curve:Tk.drop,moveTo:s.newHomeClientOffset,opacity:h?Wf.opacity.drop:null,scale:h?Wf.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:l,dropping:m,draggingOver:d,combineWith:h,mode:u,forceShouldAnimate:null,snapshot:t(u,a,d,h,m)}}}return null}}function vz(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const pye={mapped:{type:"SECONDARY",offset:on,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:vz(null)}};function mye(){const e=nn((i,a)=>({x:i,y:a})),t=nn(vz),n=nn((i,a=null,l)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:t(a)}})),r=i=>i?n(on,i,!0):null,s=(i,a,l,c)=>{const u=l.displaced.visible[i],d=!!(c.inVirtualList&&c.effected[i]),h=qv(l),p=h&&h.draggableId===i?a:null;if(!u){if(!d)return r(p);if(l.displaced.invisible[i])return null;const v=xu(c.displacedBy.point),x=e(v.x,v.y);return n(x,p,!0)}if(d)return r(p);const m=l.displacedBy.point,g=e(m.x,m.y);return n(g,p,u.shouldAnimate)};return(i,a)=>{if(Gf(i))return i.critical.draggable.id===a.draggableId?null:s(a.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const l=i.completed;return l.result.draggableId===a.draggableId?null:s(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const gye=()=>{const e=hye(),t=mye();return(r,s)=>e(r,s)||t(r,s)||pye},yye={dropAnimationFinished:JB},vye=wB(gye,yye,null,{context:Ik,areStatePropsEqual:gz})(uye);var xye=vye;function xz(e){return ay(Lk).isUsingCloneFor===e.draggableId&&!e.isClone?null:M.createElement(xye,e)}function wye(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return M.createElement(xz,zi({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const wz=e=>t=>e===t,bye=wz("scroll"),Sye=wz("auto"),F2=(e,t)=>t(e.overflowX)||t(e.overflowY),Cye=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return F2(n,bye)||F2(n,Sye)},Eye=()=>!1,bz=e=>e==null?null:e===document.body?Eye()?e:null:e===document.documentElement?null:Cye(e)?e:bz(e.parentElement);var G1=e=>({x:e.scrollLeft,y:e.scrollTop});const Sz=e=>e?window.getComputedStyle(e).position==="fixed"?!0:Sz(e.parentElement):!1;var kye=e=>{const t=bz(e),n=Sz(e);return{closestScrollable:t,isFixedOnPage:n}},_ye=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:s,client:o,page:i,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:h,client:p}=a,m=ZB({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:m,diff:{value:on,displacement:on}}}})(),c=s==="vertical"?Ck:jB,u=Yc({page:i,withPlaceholder:null,axis:c,frame:l});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:c,isEnabled:t,client:o,page:i,frame:l,subject:u}};const Nye=(e,t)=>{const n=CB(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,s=n.paddingBox.left-t.scrollLeft,o=r+t.scrollHeight,i=s+t.scrollWidth,l=xk({top:r,right:i,bottom:o,left:s},n.border);return wk({borderBox:l,margin:n.margin,border:n.border,padding:n.padding})};var Pye=({ref:e,descriptor:t,env:n,windowScroll:r,direction:s,isDropDisabled:o,isCombineEnabled:i,shouldClipSubject:a})=>{const l=n.closestScrollable,c=Nye(e,l),u=ny(c,r),d=(()=>{if(!l)return null;const p=CB(l),m={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:p,page:ny(p,r),scroll:G1(l),scrollSize:m,shouldClipSubject:a}})();return _ye({descriptor:t,isEnabled:!o,isCombineEnabled:i,isFixedOnPage:n.isFixedOnPage,direction:s,client:c,page:u,closest:d})};const Aye={passive:!1},Tye={passive:!0};var B2=e=>e.shouldPublishImmediately?Aye:Tye;const Pp=e=>e&&e.env.closestScrollable||null;function Rye(e){const t=y.useRef(null),n=ay(Yv),r=Dk("droppable"),{registry:s,marshal:o}=n,i=cz(e),a=Ve(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),l=y.useRef(a),c=Ve(()=>nn((S,C)=>{t.current||oe();const E={x:S,y:C};o.updateDroppableScroll(a.id,E)}),[a.id,o]),u=ye(()=>{const S=t.current;return!S||!S.env.closestScrollable?on:G1(S.env.closestScrollable)},[]),d=ye(()=>{const S=u();c(S.x,S.y)},[u,c]),h=Ve(()=>zf(d),[d]),p=ye(()=>{const S=t.current,C=Pp(S);if(S&&C||oe(),S.scrollOptions.shouldPublishImmediately){d();return}h()},[h,d]),m=ye((S,C)=>{t.current&&oe();const E=i.current,k=E.getDroppableRef();k||oe();const N=kye(k),P={ref:k,descriptor:a,env:N,scrollOptions:C};t.current=P;const T=Pye({ref:k,descriptor:a,env:N,windowScroll:S,direction:E.direction,isDropDisabled:E.isDropDisabled,isCombineEnabled:E.isCombineEnabled,shouldClipSubject:!E.ignoreContainerClipping}),R=N.closestScrollable;return R&&(R.setAttribute(M2.contextId,n.contextId),R.addEventListener("scroll",p,B2(P.scrollOptions))),T},[n.contextId,a,p,i]),g=ye(()=>{const S=t.current,C=Pp(S);return S&&C||oe(),G1(C)},[]),v=ye(()=>{const S=t.current;S||oe();const C=Pp(S);t.current=null,C&&(h.cancel(),C.removeAttribute(M2.contextId),C.removeEventListener("scroll",p,B2(S.scrollOptions)))},[p,h]),x=ye(S=>{const C=t.current;C||oe();const E=Pp(C);E||oe(),E.scrollTop+=S.y,E.scrollLeft+=S.x},[]),w=Ve(()=>({getDimensionAndWatchScroll:m,getScrollWhileDragging:g,dragStopped:v,scroll:x}),[v,m,g,x]),b=Ve(()=>({uniqueId:r,descriptor:a,callbacks:w}),[w,a,r]);kr(()=>(l.current=b.descriptor,s.droppable.register(b),()=>{t.current&&v(),s.droppable.unregister(b)}),[w,a,v,b,o,s.droppable]),kr(()=>{t.current&&o.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),kr(()=>{t.current&&o.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function sw(){}const z2={width:0,height:0,margin:She},jye=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?z2:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Oye=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=jye({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?zd.placeholder:null}},Mye=e=>{const t=y.useRef(null),n=ye(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:s,onClose:o,contextId:i}=e,[a,l]=y.useState(e.animate==="open");y.useEffect(()=>a?r!=="open"?(n(),l(!1),sw):t.current?sw:(t.current=setTimeout(()=>{t.current=null,l(!1)}),n):sw,[r,a,n]);const c=ye(d=>{d.propertyName==="height"&&(s(),r==="close"&&o())},[r,o,s]),u=Oye({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return M.createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":i,onTransitionEnd:c,ref:e.innerRef})};var Iye=M.memo(Mye);class Dye extends M.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const $ye=e=>{const t=y.useContext(Yv);t||oe();const{contextId:n,isMovementAllowed:r}=t,s=y.useRef(null),o=y.useRef(null),{children:i,droppableId:a,type:l,mode:c,direction:u,ignoreContainerClipping:d,isDropDisabled:h,isCombineEnabled:p,snapshot:m,useClone:g,updateViewportMaxScroll:v,getContainerForClone:x}=e,w=ye(()=>s.current,[]),b=ye((R=null)=>{s.current=R},[]);ye(()=>o.current,[]);const S=ye((R=null)=>{o.current=R},[]),C=ye(()=>{r()&&v({maxScroll:tz()})},[r,v]);Rye({droppableId:a,type:l,mode:c,direction:u,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:w});const E=Ve(()=>M.createElement(Dye,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:R,data:L,animate:z})=>M.createElement(Iye,{placeholder:L,onClose:R,innerRef:S,animate:z,contextId:n,onTransitionEnd:C})),[n,C,e.placeholder,e.shouldAnimatePlaceholder,S]),k=Ve(()=>({innerRef:b,placeholder:E,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":n}}),[n,a,E,b]),N=g?g.dragging.draggableId:null,P=Ve(()=>({droppableId:a,type:l,isUsingCloneFor:N}),[a,N,l]);function T(){if(!g)return null;const{dragging:R,render:L}=g,z=M.createElement(xz,{draggableId:R.draggableId,index:R.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(_,D)=>L(_,D,R));return US.createPortal(z,x())}return M.createElement(Lk.Provider,{value:P},i(k,m),T())};var Lye=$ye;function Fye(){return document.body||oe(),document.body}const U2={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Fye},Cz=e=>{let t={...e},n;for(n in U2)e[n]===void 0&&(t={...t,[n]:U2[n]});return t},ow=(e,t)=>e===t.droppable.type,H2=(e,t)=>t.draggables[e.draggable.id],Bye=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=nn(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),r=nn((o,i,a,l,c,u)=>{const d=c.descriptor.id;if(c.descriptor.droppableId===o){const m=u?{render:u,dragging:n(c.descriptor)}:null,g={isDraggingOver:a,draggingOverWith:a?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:m}}if(!i)return t;if(!l)return e;const p={isDraggingOver:a,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(o,i)=>{const a=Cz(i),l=a.droppableId,c=a.type,u=!a.isDropDisabled,d=a.renderClone;if(Gf(o)){const h=o.critical;if(!ow(c,h))return t;const p=H2(h,o.dimensions),m=Er(o.impact)===l;return r(l,u,m,m,p,d)}if(o.phase==="DROP_ANIMATING"){const h=o.completed;if(!ow(c,h.critical))return t;const p=H2(h.critical,o.dimensions);return r(l,u,yz(h.result)===l,Er(h.impact)===l,p,d)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const h=o.completed;if(!ow(c,h.critical))return t;const p=Er(h.impact)===l,m=!!(h.impact.at&&h.impact.at.type==="COMBINE"),g=h.critical.droppable.id===l;return p?m?e:t:g?e:t}return t}},zye={updateViewportMaxScroll:Ipe},Uye=wB(Bye,zye,(e,t,n)=>({...Cz(n),...e,...t}),{context:Ik,areStatePropsEqual:gz})(Lye);var Hye=Uye;function Vye({isOpen:e,onClose:t,onSave:n,isLoading:r,error:s,initialData:o}){const[i,a]=y.useState(o),[l,c]=y.useState(o.features.join(", ")),u=m=>{const{name:g,value:v}=m.target;a(x=>({...x,[g]:v}))},d=m=>{c(m.target.value)},h=async()=>{const m=l.split(",").map(g=>g.trim()).filter(g=>g!=="");await n({...i,features:m})},p=()=>{a(o),c(o.features.join(", "))};return f.jsx(Et,{open:e,onOpenChange:m=>{m||p(),t()},children:f.jsxs(yt,{className:"sm:max-w-[500px]",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Edit Page"}),f.jsx(kt,{children:"Update the page details below."})]}),s&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg flex items-center gap-2",children:[f.jsx(vn,{className:"w-4 h-4"}),f.jsx("p",{children:s})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"name",children:"Page Name"}),f.jsx(At,{id:"name",name:"name",value:i.name,onChange:u,placeholder:"e.g., Login Page",required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"description",children:"Description"}),f.jsx(Zt,{id:"description",name:"description",value:i.description,onChange:u,placeholder:"Describe the purpose and functionality of this page...",rows:3})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"layout_description",children:"Layout Description"}),f.jsx(Zt,{id:"layout_description",name:"layout_description",value:i.layout_description,onChange:u,placeholder:"Describe the layout structure using design terminology...",rows:3})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"features",children:"Features (comma-separated)"}),f.jsx(Zt,{id:"features",value:l,onChange:d,placeholder:"Login Form, Remember Me, Forgot Password...",rows:2})]})]}),f.jsxs(Ht,{children:[f.jsx(K,{variant:"outline",onClick:t,disabled:r,children:"Cancel"}),f.jsx(K,{variant:"secondary",onClick:h,disabled:r||!i.name.trim(),children:r?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})}const Wye={"must-have":"text-red-600","nice-to-have":"text-yellow-600","not-prioritized":"text-gray-600"},qye={feature:"bg-blue-100 text-blue-800",page:"bg-purple-100 text-purple-800",task:"bg-green-100 text-green-800",bug:"bg-red-100 text-red-800"};function V2({feature:e,index:t,onUpdate:n}){const[r,s]=y.useState(!1),[o,i]=y.useState(e||{}),[a,l]=y.useState(!1),[c,u]=y.useState(null),d=(e==null?void 0:e.type)||"feature",h=d==="page",p=async()=>{var v;if(!o.name.trim()){u("Name is required");return}l(!0),u(null);try{if(h){const{error:x}=await G.from("flow_pages").update({name:o.name.trim(),description:o.description.trim(),layout_description:((v=o.layout_description)==null?void 0:v.trim())||""}).eq("id",e.id);if(x)throw x}else{const{error:x}=await G.from("features").update({name:o.name.trim(),description:o.description.trim(),priority:o.priority,type:o.type||"feature"}).eq("id",e.id);if(x)throw x}s(!1),n()}catch(x){console.error("Error updating item:",x),u("Failed to save changes. Please try again.")}finally{l(!1)}},m=async v=>{var x;l(!0),u(null);try{const{error:w}=await G.from("flow_pages").update({name:v.name.trim(),description:v.description.trim(),layout_description:((x=v.layout_description)==null?void 0:x.trim())||""}).eq("id",e.id);if(w)throw w;s(!1),n()}catch(w){console.error("Error updating page:",w),u("Failed to save changes. Please try again.")}finally{l(!1)}},g=f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("h4",{className:"font-medium text-gray-900 line-clamp-2",children:e.name}),f.jsx(K,{variant:"ghost",size:"sm",onClick:()=>s(!0),className:"hover:bg-gray-100 ml-2 flex-shrink-0",children:f.jsx(au,{className:"w-4 h-4"})})]}),e.description&&f.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-3 min-h-[3em]",children:e.description}),f.jsxs("div",{className:"flex items-center gap-2 text-sm flex-wrap mt-2",children:[!h&&f.jsx("span",{className:`${Wye[e.priority]} px-2 py-0.5 rounded-full text-xs font-medium bg-opacity-10`,children:e.priority.replace(/-/g," ")}),d&&f.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${qye[d]||"bg-gray-100 text-gray-800"}`,children:[f.jsx(cf,{className:"w-3 h-3 mr-1"}),d.charAt(0).toUpperCase()+d.slice(1)]})]}),h?f.jsx(Vye,{isOpen:r,onClose:()=>s(!1),onSave:m,isLoading:a,error:c,initialData:{name:e.name,description:e.description,layout_description:e.layout_description||"",features:[]}}):f.jsx(Et,{open:r,onOpenChange:s,children:f.jsxs(yt,{children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Edit Feature"}),f.jsx(kt,{children:"Update the feature details below."})]}),c&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg flex items-center gap-2",children:[f.jsx(nr,{className:"w-4 h-4"}),c]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),f.jsx("input",{type:"text",value:o.name,onChange:v=>i(x=>({...x,name:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),f.jsx("textarea",{value:o.description,onChange:v=>i(x=>({...x,description:v.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),f.jsxs("select",{value:o.priority,onChange:v=>i(x=>({...x,priority:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent",children:[f.jsx("option",{value:"must-have",children:"Must Have"}),f.jsx("option",{value:"nice-to-have",children:"Nice to Have"}),f.jsx("option",{value:"not-prioritized",children:"Not Prioritized"})]})]})]}),f.jsxs(Ht,{children:[f.jsx(K,{variant:"outline",onClick:()=>s(!1),type:"button",children:"Cancel"}),f.jsx(K,{variant:"secondary",onClick:p,disabled:a||!o.name.trim(),children:a?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})]});return f.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200 hover:shadow-md transition-shadow",children:g})}async function Ez(e,t,n){try{const r=e.name.split(".").pop(),s=`${Math.random().toString(36).substring(2)}.${r}`,o=`${n}/${s}`,{error:i}=await G.storage.from(t).upload(o,e);if(i)throw i;const a=60*60*24*365*2,{data:l,error:c}=await G.storage.from(t).createSignedUrl(o,a);if(c)throw c;return l.signedUrl}catch(r){return console.error("Error uploading file:",r),null}}function Gye({isOpen:e,onClose:t,onSave:n,isLoading:r,error:s,bug:o}){var g;const[i,a]=y.useState(o),[l,c]=y.useState(null),[u,d]=y.useState(!1),h=v=>{const{name:x,value:w}=v.target;a(b=>({...b,[x]:w}))},p=v=>{v.target.files&&v.target.files[0]&&c(v.target.files[0])},m=async()=>{d(!0);let v=o.screenshot_url;if(l){const x=await Ez(l,"bug-screenshots","bugs");x&&(v=x)}await n({...i,screenshot_url:v}),c(null),d(!1)};return f.jsx(Et,{open:e,onOpenChange:v=>{v||(a(o),c(null)),t()},children:f.jsxs(yt,{className:"sm:max-w-[600px]",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Edit Bug"}),f.jsx(kt,{children:"Update the bug details below."})]}),s&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg flex items-center gap-2",children:[f.jsx(vn,{className:"w-4 h-4"}),f.jsx("p",{children:s})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"name",children:"Bug Name"}),f.jsx(At,{id:"name",name:"name",value:i.name,onChange:h,placeholder:"e.g., Login Form Validation Error",required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"description",children:"Description"}),f.jsx(Zt,{id:"description",name:"description",value:i.description,onChange:h,placeholder:"Describe the bug in detail...",rows:3})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"bug_url",children:"Bug URL"}),f.jsx(At,{id:"bug_url",name:"bug_url",value:i.bug_url,onChange:h,placeholder:"URL where the bug can be reproduced"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{children:"Screenshot"}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs(K,{type:"button",variant:"outline",onClick:()=>{var v;return(v=document.getElementById("screenshot"))==null?void 0:v.click()},className:"w-full",children:[f.jsx(tC,{className:"w-4 h-4 mr-2"}),l?l.name:o.screenshot_url?"Change Screenshot":"Upload Screenshot"]}),(l||o.screenshot_url)&&f.jsx(K,{type:"button",variant:"ghost",size:"icon",onClick:()=>{c(null),a(v=>({...v,screenshot_url:void 0}))},children:f.jsx(Gi,{className:"w-4 h-4"})})]}),f.jsx("input",{type:"file",id:"screenshot",accept:"image/*",onChange:p,className:"hidden"}),o.screenshot_url&&!l&&f.jsx("div",{className:"mt-2",children:f.jsx("img",{src:o.screenshot_url,alt:"Current screenshot",className:"max-h-40 rounded-lg border border-gray-200"})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"priority",children:"Priority"}),f.jsxs("select",{id:"priority",name:"priority",value:i.priority,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent",children:[f.jsx("option",{value:"must-have",children:"Must Have"}),f.jsx("option",{value:"nice-to-have",children:"Nice to Have"}),f.jsx("option",{value:"not-prioritized",children:"Not Prioritized"})]})]})]}),f.jsxs(Ht,{children:[f.jsx(K,{variant:"outline",onClick:t,disabled:r||u,children:"Cancel"}),f.jsx(K,{variant:"secondary",onClick:m,disabled:r||u||!((g=i.name)!=null&&g.trim()),children:r||u?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),u?"Uploading...":"Saving..."]}):"Save Changes"})]})]})})}function Kye({bug:e,index:t,onStatusChange:n,onDelete:r,onEdit:s,isLoading:o,error:i}){const[a,l]=y.useState(!1),[c,u]=y.useState(!1),d={"must-have":"bg-red-100 text-red-800","nice-to-have":"bg-yellow-100 text-yellow-800","not-prioritized":"bg-gray-100 text-gray-800"},h=async p=>{s&&(await s(p),l(!1))};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"bg-white rounded-lg shadow p-4 space-y-2 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>u(!0),children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),f.jsxs("div",{className:"flex space-x-1",children:[f.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:p=>{p.stopPropagation(),l(!0)},children:f.jsx(au,{className:"h-4 w-4"})}),e.bug_url&&f.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:p=>{p.stopPropagation(),window.open(e.bug_url,"_blank")},children:f.jsx(XW,{className:"h-4 w-4"})}),r&&f.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600 hover:text-red-700",onClick:p=>{p.stopPropagation(),r(e.id)},children:f.jsx(sa,{className:"h-4 w-4"})})]})]}),f.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d[e.priority]}`,children:e.priority.replace(/-/g," ")}),f.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[f.jsx(cf,{className:"w-3 h-3 mr-1"}),"Bug"]}),e.screenshot_url&&f.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:p=>{p.stopPropagation(),window.open(e.screenshot_url,"_blank")},children:f.jsx(r7,{className:"h-3 w-3"})})]})]}),f.jsx(Gye,{isOpen:a,onClose:()=>l(!1),onSave:h,isLoading:o,error:i,bug:e}),f.jsx(Et,{open:c,onOpenChange:u,children:f.jsxs(yt,{className:"sm:max-w-[600px]",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:e.name}),f.jsx(kt,{children:"Bug Details"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Description"}),f.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:e.description})]}),e.bug_url&&f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Bug URL"}),f.jsx("a",{href:e.bug_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-brand-purple hover:underline",children:e.bug_url})]}),e.screenshot_url&&f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Screenshot"}),f.jsx("img",{src:e.screenshot_url,alt:"Bug screenshot",className:"max-h-96 rounded-lg border border-gray-200"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d[e.priority]}`,children:e.priority.replace(/-/g," ")}),f.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[f.jsx(cf,{className:"w-3 h-3 mr-1"}),"Bug"]}),f.jsxs("span",{className:"text-sm text-gray-600",children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]})]})]})})]})}function Jye({isOpen:e,onClose:t,onSave:n,isLoading:r,error:s,productId:o}){const[i,a]=y.useState({name:"",description:"",bug_url:"",priority:"not-prioritized",status:"not_started",product_id:o}),[l,c]=y.useState(null),[u,d]=y.useState(!1),h=g=>{const{name:v,value:x}=g.target;a(w=>({...w,[v]:x}))},p=g=>{g.target.files&&g.target.files[0]&&c(g.target.files[0])},m=async()=>{d(!0);let g="";if(l){const v=await Ez(l,"bug-screenshots","bugs");v&&(g=v)}await n({...i,screenshot_url:g||void 0}),a({name:"",description:"",bug_url:"",priority:"not-prioritized",status:"not_started",product_id:o}),c(null),d(!1)};return f.jsx(Et,{open:e,onOpenChange:g=>{g||(a({name:"",description:"",bug_url:"",priority:"not-prioritized",status:"not_started",product_id:o}),c(null)),t()},children:f.jsxs(yt,{className:"sm:max-w-[600px]",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Report Bug"}),f.jsx(kt,{children:"Create a new bug report by filling out the details below."})]}),s&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg flex items-center gap-2",children:[f.jsx(vn,{className:"w-4 h-4"}),f.jsx("p",{children:s})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"name",children:"Bug Name"}),f.jsx(At,{id:"name",name:"name",value:i.name,onChange:h,placeholder:"e.g., Login Form Validation Error",required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"description",children:"Description"}),f.jsx(Zt,{id:"description",name:"description",value:i.description,onChange:h,placeholder:"Describe the bug in detail...",rows:3})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"bug_url",children:"Bug URL"}),f.jsx(At,{id:"bug_url",name:"bug_url",value:i.bug_url,onChange:h,placeholder:"URL where the bug can be reproduced"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{children:"Screenshot"}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs(K,{type:"button",variant:"outline",onClick:()=>{var g;return(g=document.getElementById("screenshot"))==null?void 0:g.click()},className:"w-full",children:[f.jsx(tC,{className:"w-4 h-4 mr-2"}),l?l.name:"Upload Screenshot"]}),l&&f.jsx(K,{type:"button",variant:"ghost",size:"icon",onClick:()=>c(null),children:f.jsx(Gi,{className:"w-4 h-4"})})]}),f.jsx("input",{type:"file",id:"screenshot",accept:"image/*",onChange:p,className:"hidden"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"priority",children:"Priority"}),f.jsxs("select",{id:"priority",name:"priority",value:i.priority,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent",children:[f.jsx("option",{value:"must-have",children:"Must Have"}),f.jsx("option",{value:"nice-to-have",children:"Nice to Have"}),f.jsx("option",{value:"not-prioritized",children:"Not Prioritized"})]})]})]}),f.jsxs(Ht,{children:[f.jsx(K,{variant:"outline",onClick:t,disabled:r||u,children:"Cancel"}),f.jsx(K,{variant:"secondary",onClick:m,disabled:r||u||!i.name.trim(),children:r||u?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),u?"Uploading...":"Creating..."]}):"Create Bug"})]})]})})}async function Yye(e,t){var n;try{const{data:r}=await G.from("bugs").select("position").order("position",{ascending:!1}).limit(1),s=(((n=r==null?void 0:r[0])==null?void 0:n.position)||0)+1e3,{data:o,error:i}=await G.from("bugs").insert([{...e,position:s}]).select().single();if(i)throw i;return o}catch(r){return console.error("Error creating bug:",r),null}}async function iw(e,t,n){try{const{data:r,error:s}=await G.from("bugs").update(t).eq("id",e).select().single();if(s)throw s;return r}catch(r){return console.error("Error updating bug:",r),null}}async function Xye(e){try{const{error:t}=await G.from("bugs").delete().eq("id",e);if(t)throw t;return!0}catch(t){return console.error("Error deleting bug:",t),!1}}async function Qye(){try{const{data:e,error:t}=await G.from("bugs").select("*").order("position");if(t)throw t;return e.map(n=>({...n,affected_items:[]}))}catch(e){return console.error("Error fetching all bugs:",e),[]}}function Zye({isOpen:e,onClose:t,onSave:n,isLoading:r,error:s,task:o}){var u;const[i,a]=y.useState(o),l=d=>{const{name:h,value:p}=d.target;a(m=>({...m,[h]:p}))},c=async()=>{await n(i)};return f.jsx(Et,{open:e,onOpenChange:d=>{d||a(o),t()},children:f.jsxs(yt,{className:"sm:max-w-[600px]",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Edit Task"}),f.jsx(kt,{children:"Update the task details below."})]}),s&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg flex items-center gap-2",children:[f.jsx(vn,{className:"w-4 h-4"}),f.jsx("p",{children:s})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"name",children:"Task Name"}),f.jsx(At,{id:"name",name:"name",value:i.name,onChange:l,placeholder:"Enter task name",required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"description",children:"Description"}),f.jsx(Zt,{id:"description",name:"description",value:i.description,onChange:l,placeholder:"Describe the task...",rows:3})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"priority",children:"Priority"}),f.jsxs("select",{id:"priority",name:"priority",value:i.priority,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent",children:[f.jsx("option",{value:"must-have",children:"Must Have"}),f.jsx("option",{value:"nice-to-have",children:"Nice to Have"}),f.jsx("option",{value:"not-prioritized",children:"Not Prioritized"})]})]})]}),f.jsxs(Ht,{children:[f.jsx(K,{variant:"outline",onClick:t,disabled:r,children:"Cancel"}),f.jsx(K,{variant:"secondary",onClick:c,disabled:r||!((u=i.name)!=null&&u.trim()),children:r?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})}const eve={"must-have":"bg-red-100 text-red-800","nice-to-have":"bg-yellow-100 text-yellow-800","not-prioritized":"bg-gray-100 text-gray-800"};function tve({task:e,index:t,onStatusChange:n,onDelete:r,onEdit:s,isLoading:o,error:i}){const[a,l]=y.useState(!1),[c,u]=y.useState(!1),d=async m=>{s&&(await s(e.id,m),l(!1))},h=e.priority.replace(/-/g," "),p=eve[e.priority];return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-2 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>u(!0),children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("h3",{className:"font-medium text-gray-900 flex-grow",children:e.name}),f.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[f.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:m=>{m.stopPropagation(),l(!0)},children:f.jsx(au,{className:"h-4 w-4"})}),r&&f.jsx(K,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600 hover:text-red-700",onClick:m=>{m.stopPropagation(),r(e.id)},children:f.jsx(sa,{className:"h-4 w-4"})})]})]}),f.jsx("div",{className:"text-sm text-gray-500 mb-3 line-clamp-2",children:e.description}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${p}`,children:h}),f.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[f.jsx(cf,{className:"w-3 h-3 mr-1"}),"Task"]})]})]}),f.jsx(Et,{open:c,onOpenChange:u,children:f.jsxs(yt,{className:"sm:max-w-[600px]",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:e.name}),f.jsxs(kt,{children:["Created on ",new Date(e.created_at).toLocaleDateString()]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium mb-2",children:"Description"}),f.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:e.description})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${p}`,children:h}),f.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[f.jsx(cf,{className:"w-3 h-3 mr-1"}),"Task"]})]})]})]})}),f.jsx(Zye,{isOpen:a,onClose:()=>l(!1),onSave:d,isLoading:o||!1,error:i||null,task:e})]})}function nve({isOpen:e,onClose:t,onSave:n,isLoading:r,error:s,productId:o}){const[i,a]=y.useState({name:"",description:"",status:"not_started",priority:"not-prioritized",product_id:o}),l=c=>{c.preventDefault(),i.name&&i.description&&n(i)};return f.jsx(Et,{open:e,onOpenChange:t,children:f.jsxs(yt,{children:[f.jsx(vt,{children:f.jsx(xt,{children:"Add New Task"})}),f.jsxs("form",{onSubmit:l,className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"name",children:"Task Name"}),f.jsx(At,{id:"name",value:i.name,onChange:c=>a({...i,name:c.target.value}),placeholder:"Enter task name",required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"description",children:"Description"}),f.jsx(Zt,{id:"description",value:i.description,onChange:c=>a({...i,description:c.target.value}),placeholder:"Enter task description",required:!0})]}),s&&f.jsx("div",{className:"text-sm text-red-500",children:s}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx(K,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),f.jsxs(K,{type:"submit",disabled:r,children:[r&&f.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Add Task"]})]})]})]})})}async function rve(e){try{const{data:t,error:n}=await G.from("tasks").insert(e).select().single();if(n)throw n;return t}catch(t){return console.error("Error creating task:",t),null}}async function sve(){try{const{data:e,error:t}=await G.from("tasks").select("*").order("position",{ascending:!0});if(t)throw t;return e||[]}catch(e){return console.error("Error loading tasks:",e),[]}}async function aw(e,t){try{const{data:n,error:r}=await G.from("tasks").update(t).eq("id",e).select().single();if(r)throw r;return n}catch(n){return console.error("Error updating task:",n),null}}async function ove(e){try{const{error:t}=await G.from("tasks").delete().eq("id",e);if(t)throw t;return!0}catch(t){return console.error("Error deleting task:",t),!1}}const ive=[{id:"not_started",title:"Not Started",color:"bg-gray-100 border-gray-200 border"},{id:"in_progress",title:"In Progress",color:"bg-blue-50 border-blue-200 border"},{id:"completed",title:"Completed",color:"bg-green-50 border-green-200 border"}],W2=[{value:"feature",label:"Feature"},{value:"page",label:"Page"},{value:"task",label:"Task"},{value:"bug",label:"Bug"}],q2=[{value:"must-have",label:"Must Have"},{value:"nice-to-have",label:"Nice to Have"},{value:"not-prioritized",label:"Not Prioritized"}];function ave({isOpen:e,onClose:t,onAdd:n,isLoading:r}){const[s,o]=y.useState({name:"",description:"",priority:"not-prioritized",implementation_status:"not_started",type:"feature"}),i=async a=>{a.preventDefault(),await n(s),o({name:"",description:"",priority:"not-prioritized",implementation_status:"not_started",type:"feature"})};return f.jsx(Et,{open:e,onOpenChange:t,children:f.jsxs(yt,{children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Add New Feature"}),f.jsx(kt,{children:"Add a new feature to your development board and PRD. This feature will be available in both places for tracking and documentation."})]}),f.jsxs("form",{onSubmit:i,children:[f.jsxs("div",{className:"space-y-4 py-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"name",children:"Feature Name"}),f.jsx(At,{id:"name",value:s.name,onChange:a=>o(l=>({...l,name:a.target.value})),placeholder:"Enter feature name",required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"description",children:"Description"}),f.jsx(Zt,{id:"description",value:s.description,onChange:a=>o(l=>({...l,description:a.target.value})),placeholder:"Describe the feature and its benefits",required:!0})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"priority",children:"Priority"}),f.jsxs("select",{id:"priority",value:s.priority,onChange:a=>o(l=>({...l,priority:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent",required:!0,children:[f.jsx("option",{value:"must-have",children:"Must Have"}),f.jsx("option",{value:"nice-to-have",children:"Nice to Have"}),f.jsx("option",{value:"not-prioritized",children:"Not Prioritized"})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"implementation_status",children:"Implementation Status"}),f.jsxs("select",{id:"implementation_status",value:s.implementation_status,onChange:a=>o(l=>({...l,implementation_status:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-purple focus:border-transparent",required:!0,children:[f.jsx("option",{value:"not_started",children:"Not Started"}),f.jsx("option",{value:"in_progress",children:"In Progress"}),f.jsx("option",{value:"completed",children:"Completed"})]})]})]}),f.jsxs(Ht,{children:[f.jsx(K,{variant:"outline",onClick:t,type:"button",children:"Cancel"}),f.jsx(K,{variant:"secondary",type:"submit",disabled:r||!s.name.trim()||!s.description.trim(),children:r?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):"Add Feature"})]})]})]})})}function lve(){const e=bn(),{user:t}=qn(),{productSlug:n}=ao(),[r,s]=y.useState(!0),[o,i]=y.useState(null),[a,l]=y.useState([]),[c,u]=y.useState([]),[d,h]=y.useState(null),[p,m]=y.useState({types:new Set,priorities:new Set}),[g,v]=y.useState(0),[x,w]=y.useState(!1),[b,S]=y.useState(!1),[C,E]=y.useState(!1),[k,N]=y.useState(!1),[P,T]=y.useState(null),[R,L]=y.useState([]),[z,_]=y.useState(!1),[D,O]=y.useState(!1),[F,j]=y.useState(null),[A,$]=y.useState([]),[B,I]=y.useState(!1),[H,V]=y.useState(!1),[W,Y]=y.useState(null),[Z,ae]=y.useState(!1),[se,re]=y.useState(null),De=y.useMemo(()=>{const J=[];return a&&J.push(...a.map(X=>({...X,type:"feature"}))),c&&J.push(...c.map(X=>({...X,type:"page"}))),R&&J.push(...R.map(X=>({...X,type:"bug"}))),A&&J.push(...A.map(X=>({...X,type:"task"}))),J},[a,c,R,A]),me=y.useMemo(()=>De.filter(J=>{if(p.types.size===0&&p.priorities.size===0)return!0;const X=p.types.size===0||J.type&&p.types.has(J.type)||(!J.type||J.type==="feature")&&p.types.has("feature"),ge=p.priorities.size===0||J.priority&&p.priorities.has(J.priority);return X&&ge}),[De,p]),Ce=async()=>{if(d)try{const{data:J,error:X}=await G.from("features").select("*").eq("product_id",d).order("position",{ascending:!0});if(X)throw X;const ge=(J||[]).map(be=>({...be,type:be.type||"feature"}));l(ge)}catch(J){console.error("Error loading features:",J)}},U=async()=>{if(d)try{const{data:J,error:X}=await G.from("flow_pages").select("*").eq("product_id",d);if(X)throw X;u(J||[])}catch(J){console.error("Error loading pages:",J)}},q=async()=>{V(!0);try{const J=await sve();$(J)}catch(J){Y("Failed to load tasks"),console.error("Error loading tasks:",J)}finally{V(!1)}};y.useEffect(()=>{async function J(){if(!n){e("/");return}if(!t){e("/");return}try{s(!0),i(null);const{data:X,error:ge}=await G.from("products").select("id").eq("slug",n).eq("user_id",t.id).single();if(ge||!X){console.error("Error loading product:",ge),e("/");return}h(X.id);const[be,Fe]=await Promise.all([G.from("features").select("*").eq("product_id",X.id).order("position",{ascending:!0}),G.from("flow_pages").select("*").eq("product_id",X.id)]);if(be.error)throw console.error("Error loading features:",be.error),be.error;if(Fe.error)throw console.error("Error loading pages:",Fe.error),Fe.error;const Ge=(be.data||[]).map(ke=>({...ke,type:ke.type||"feature"}));l(Ge),u(Fe.data||[])}catch(X){console.error("Error loading data:",X),i("Failed to load data. Please try again.")}finally{s(!1)}}J()},[n,t,e]),y.useEffect(()=>{if(!d)return;const J=G.channel("features-changes-kanban").on("postgres_changes",{event:"*",schema:"public",table:"features",filter:`product_id=eq.${d}`},()=>{Ce()}).subscribe(),X=G.channel("pages-changes-kanban").on("postgres_changes",{event:"*",schema:"public",table:"flow_pages",filter:`product_id=eq.${d}`},()=>{U()}).subscribe();return()=>{G.removeChannel(J),G.removeChannel(X)}},[d]),y.useEffect(()=>{v(p.types.size+p.priorities.size)},[p]);const he=J=>{re(J.draggableId)},fe=async J=>{re(null);const{destination:X,source:ge,draggableId:be}=J;if(X&&!(X.droppableId===ge.droppableId&&X.index===ge.index))try{const Fe=De.find(Ge=>Ge.id===be);if(!Fe)return;if(Fe.type==="page"){const{error:Ge}=await G.from("flow_pages").update({implementation_status:X.droppableId}).eq("id",be);if(Ge)throw Ge;await U()}else if(Fe.type==="bug")await iw(be,{status:X.droppableId}),await Wt();else if(Fe.type==="task")await aw(be,{status:X.droppableId}),await q();else{const{error:Ge}=await G.from("features").update({implementation_status:X.droppableId,position:X.index}).eq("id",be);if(Ge)throw Ge;await Ce()}}catch(Fe){console.error("Error updating item:",Fe),i("Failed to update item position. Please try again."),await Promise.all([Ce(),U(),Wt(),q()])}},Q=J=>{m(X=>{const ge=new Set(X.types);return ge.has(J)?ge.delete(J):ge.add(J),{...X,types:ge}})},Ae=J=>{m(X=>{const ge=new Set(X.priorities);return ge.has(J)?ge.delete(J):ge.add(J),{...X,priorities:ge}})},je=()=>{m({types:new Set,priorities:new Set})},ut=async J=>{if(d)try{E(!0);const{data:X,error:ge}=await G.from("features").insert({product_id:d,...J,position:a.length}).select().single();if(ge)throw ge;if(!X)throw new Error("Failed to create feature");w(!1),E(!1),await Ce()}catch(X){console.error("Error adding feature:",X),i("Failed to add feature"),E(!1)}},Mn=async J=>{if(d)try{N(!0),T(null);const{data:X,error:ge}=await G.from("flow_pages").insert({product_id:d,name:J.name,description:J.description,layout_description:J.layout_description,implementation_status:"not_started"}).select().single();if(ge)throw ge;if(!X)throw new Error("Failed to create page");S(!1),N(!1),await U()}catch(X){console.error("Error adding page:",X),T("Failed to add page. Please try again."),N(!1)}},Wt=async()=>{O(!0);try{const J=await Qye();L(J)}catch(J){j("Failed to load bugs"),console.error("Error loading bugs:",J)}finally{O(!1)}},ln=async J=>{try{const X=await Yye(J,[]);X&&(L(ge=>[...ge,X]),_(!1))}catch(X){j("Failed to create bug"),console.error("Error creating bug:",X)}},Or=async J=>{try{await iw(J.id,J),await Wt()}catch(X){j("Failed to update bug"),console.error("Error updating bug:",X)}},ur=async J=>{try{await Xye(J),await Wt()}catch(X){console.error("Error deleting bug:",X)}},qt=async(J,X)=>{try{await iw(J,{status:X}),await Wt()}catch(ge){console.error("Error updating bug status:",ge)}},ue=async J=>{try{const X=await rve(J);X&&($(ge=>[...ge,X]),I(!1))}catch(X){Y("Failed to create task"),console.error("Error creating task:",X)}},ie=async J=>{try{await ove(J),await q()}catch(X){console.error("Error deleting task:",X)}},Se=async(J,X)=>{try{await aw(J,{status:X}),await q()}catch(ge){console.error("Error updating task status:",ge)}},Ee=async(J,X)=>{ae(!0),Y(null);try{await aw(J,X),await q()}catch(ge){Y(ge instanceof Error?ge.message:"Failed to update task")}finally{ae(!1)}};return y.useEffect(()=>{d&&(Wt(),q())},[d]),r?f.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:f.jsxs("div",{className:"text-center",children:[f.jsx(We,{className:"w-8 h-8 animate-spin text-brand-purple mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading development board..."})]})}):o?f.jsxs("div",{className:"max-w-lg mx-auto text-center py-12",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),f.jsx("p",{className:"text-red-600 mb-6",children:o}),f.jsx(K,{onClick:()=>e("/"),variant:"secondary",className:"mx-auto",children:"Go to Dashboard"})]}):f.jsxs("div",{className:"space-y-6 max-w-[1600px] mx-auto px-4 pb-12",children:[f.jsx(gl,{title:"Development"}),f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Development"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs(Km,{children:[f.jsx(Jm,{asChild:!0,children:f.jsxs(K,{variant:"outline",size:"sm",className:g>0?"border-brand-purple text-brand-purple":"",children:[f.jsx(oM,{className:"w-4 h-4 mr-2"}),"Filters",g>0&&f.jsx("span",{className:"ml-2 bg-brand-purple text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:g}),f.jsx(zm,{className:"w-4 h-4 ml-2"})]})}),f.jsxs(pf,{align:"end",className:"w-56",children:[f.jsx("div",{className:"px-2 py-1.5 text-sm font-semibold",children:"Card Type"}),W2.map(J=>f.jsx(Pb,{checked:p.types.has(J.value),onCheckedChange:()=>Q(J.value),children:J.label},J.value)),f.jsx(Ab,{}),f.jsx("div",{className:"px-2 py-1.5 text-sm font-semibold",children:"Priority"}),q2.map(J=>f.jsx(Pb,{checked:p.priorities.has(J.value),onCheckedChange:()=>Ae(J.value),children:J.label},J.value)),g>0&&f.jsxs(f.Fragment,{children:[f.jsx(Ab,{}),f.jsx("div",{className:"px-2 py-1.5",children:f.jsx(K,{variant:"outline",size:"sm",className:"w-full text-xs h-8",onClick:je,children:"Clear Filters"})})]})]})]}),f.jsxs(Km,{children:[f.jsx(Jm,{asChild:!0,children:f.jsxs(K,{variant:"secondary",className:"flex items-center gap-2",children:[f.jsx(qi,{className:"w-4 h-4"}),"Add",f.jsx(zm,{className:"w-4 h-4 ml-1"})]})}),f.jsxs(pf,{align:"end",className:"w-48",children:[f.jsx(Ys,{onClick:()=>w(!0),children:f.jsx("div",{className:"flex items-center gap-2",children:"Feature"})}),f.jsx(Ys,{onClick:()=>S(!0),children:f.jsx("div",{className:"flex items-center gap-2",children:"Page"})}),f.jsx(Ys,{onClick:()=>_(!0),children:f.jsx("div",{className:"flex items-center gap-2",children:"Bug"})}),f.jsx(Ys,{onClick:()=>I(!0),children:f.jsx("div",{className:"flex items-center gap-2",children:"Task"})})]})]})]})]}),g>0&&f.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200 flex items-center justify-between",children:[f.jsxs("div",{className:"text-sm text-gray-600",children:[f.jsx("strong",{children:"Active filters:"})," "," ",p.types.size>0&&f.jsxs("span",{className:"mr-2",children:["Types: ",Array.from(p.types).map(J=>{var X;return(X=W2.find(ge=>ge.value===J))==null?void 0:X.label}).join(", ")]}),p.priorities.size>0&&f.jsxs("span",{children:["Priorities: ",Array.from(p.priorities).map(J=>{var X;return(X=q2.find(ge=>ge.value===J))==null?void 0:X.label}).join(", ")]})]}),f.jsx(K,{variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700",onClick:je,children:"Clear All"})]}),f.jsx(Zge,{onDragStart:he,onDragEnd:fe,children:f.jsx("div",{className:"flex gap-6 pb-6 overflow-x-auto",children:ive.map(J=>f.jsxs("div",{className:`${J.color} rounded-lg shadow-md p-4 min-h-[500px] flex flex-col w-80 flex-shrink-0`,children:[f.jsx("h3",{className:"font-semibold text-lg mb-2",children:J.title}),f.jsx("span",{className:"text-sm font-medium bg-white/50 px-2 py-1 rounded-full mb-4 w-fit",children:me.filter(X=>X.implementation_status===J.id||X.status===J.id).length||0}),f.jsx(Hye,{droppableId:J.id,children:(X,ge)=>f.jsxs("div",{ref:X.innerRef,...X.droppableProps,className:`flex flex-col gap-3 flex-grow ${ge.isDraggingOver?"bg-white/30 rounded-lg p-2":""}`,children:[me.filter(be=>be.implementation_status===J.id||be.status===J.id).map((be,Fe)=>f.jsx(wye,{draggableId:be.id,index:Fe,children:(Ge,ke)=>f.jsx("div",{ref:Ge.innerRef,...Ge.draggableProps,...Ge.dragHandleProps,style:{...Ge.draggableProps.style},className:`${ke.isDragging?"z-10":""}`,children:be.type==="bug"?f.jsx(Kye,{bug:be,index:Fe,onStatusChange:qt,onDelete:ur,onEdit:Or,isLoading:D,error:F}):be.type==="task"?f.jsx(tve,{task:be,index:Fe,onStatusChange:Se,onDelete:ie,onEdit:Ee,isLoading:Z,error:W}):be.type==="page"?f.jsx(V2,{feature:be,index:Fe,onUpdate:()=>onPageStatusChange==null?void 0:onPageStatusChange(be.id,be.implementation_status||"not_started")}):f.jsx(V2,{feature:be,index:Fe,onUpdate:()=>onFeatureStatusChange==null?void 0:onFeatureStatusChange(be.id,be.implementation_status||"not_started")})})},be.id)),X.placeholder]})})]},J.id))})}),f.jsx(ave,{isOpen:x,onClose:()=>w(!1),onAdd:ut,isLoading:C}),f.jsx(tB,{isOpen:b,onClose:()=>S(!1),onAddPage:Mn,isLoading:k,error:P}),f.jsx(Jye,{isOpen:z,onClose:()=>_(!1),onSave:ln,isLoading:D,error:F,productId:d||""}),f.jsx(nve,{isOpen:B,onClose:()=>I(!1),onSave:ue,isLoading:H,error:W,productId:d||""})]})}var Fk="Tabs",[cve,y0e]=oa(Fk,[Fy]),kz=Fy(),[uve,Bk]=cve(Fk),_z=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=sC(a),[d,h]=My({prop:r,onChange:s,defaultProp:o});return f.jsx(uve,{scope:n,baseId:Ba(),value:d,onValueChange:h,orientation:i,dir:u,activationMode:l,children:f.jsx(ct.div,{dir:u,"data-orientation":i,...c,ref:t})})});_z.displayName=Fk;var Nz="TabsList",Pz=y.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,o=Bk(Nz,n),i=kz(n);return f.jsx(XM,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:r,children:f.jsx(ct.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});Pz.displayName=Nz;var Az="TabsTrigger",Tz=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=e,i=Bk(Az,n),a=kz(n),l=Oz(i.baseId,r),c=Mz(i.baseId,r),u=r===i.value;return f.jsx(QM,{asChild:!0,...a,focusable:!s,active:u,children:f.jsx(ct.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...o,ref:t,onMouseDown:Ne(e.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?i.onValueChange(r):d.preventDefault()}),onKeyDown:Ne(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(r)}),onFocus:Ne(e.onFocus,()=>{const d=i.activationMode!=="manual";!u&&!s&&d&&i.onValueChange(r)})})})});Tz.displayName=Az;var Rz="TabsContent",jz=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...i}=e,a=Bk(Rz,n),l=Oz(a.baseId,r),c=Mz(a.baseId,r),u=r===a.value,d=y.useRef(u);return y.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),f.jsx(Wo,{present:s||u,children:({present:h})=>f.jsx(ct.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&o})})});jz.displayName=Rz;function Oz(e,t){return`${e}-trigger-${t}`}function Mz(e,t){return`${e}-content-${t}`}var dve=_z,Iz=Pz,Dz=Tz,$z=jz;const fve=dve,Lz=y.forwardRef(({className:e,...t},n)=>f.jsx(Iz,{ref:n,className:Le("inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500",e),...t}));Lz.displayName=Iz.displayName;const um=y.forwardRef(({className:e,...t},n)=>f.jsx(Dz,{ref:n,className:Le("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-brand-purple data-[state=active]:shadow-sm",e),...t}));um.displayName=Dz.displayName;const dm=y.forwardRef(({className:e,...t},n)=>f.jsx($z,{ref:n,className:Le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));dm.displayName=$z.displayName;function lw({prompt:e,onEdit:t,onDelete:n,onDuplicate:r,showProductSave:s=!1,onSaveToProduct:o,onSaveToPersonal:i,onTogglePublic:a,isPersonal:l,isProductPrompt:c=!1}){const[u,d]=y.useState(!1),[h,p]=y.useState(!1),m=()=>{navigator.clipboard.writeText(e.template),d(!0),setTimeout(()=>d(!1),2e3)},g=()=>{console.log("Edit button clicked in PromptCard, onEdit function exists:",!!t),p(!0),t&&t(),setTimeout(()=>p(!1),500)},v=new Date(e.created_at).toLocaleDateString(),x=w=>({first:"First Prompts",system:"System Prompts",page:"Page Prompts",feature:"Feature Prompts",debugging:"Debugging Prompts",database:"Database Prompts",authentication:"Authentication Prompts"})[w]||w;return f.jsxs("div",{className:`bg-white rounded-lg shadow-md p-4 border ${c?"border-brand-purple/30":"border-gray-200"}`,children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("h3",{className:"text-lg font-semibold",children:e.name}),f.jsxs("div",{className:"flex items-center gap-1",children:[(l||c)&&t&&f.jsx(K,{variant:"ghost",size:"sm",onClick:g,className:`h-8 w-8 p-0 ${h?"text-brand-purple animate-pulse":""} ${c?"text-brand-purple":""}`,title:c?"Edit product prompt":"Edit prompt",children:f.jsx(au,{className:"h-4 w-4"})}),f.jsx(K,{variant:"ghost",size:"sm",onClick:m,className:"h-8 w-8 p-0",title:"Copy to clipboard",children:f.jsx(JW,{className:"h-4 w-4"})}),r&&f.jsx(K,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0 text-purple-500 hover:text-purple-700",title:"Duplicate to personal library",children:f.jsx(KW,{className:"h-4 w-4"})}),l&&a&&f.jsx(K,{variant:"ghost",size:"sm",onClick:a,className:`h-8 w-8 p-0 ${e.is_public?"text-green-600":"text-gray-400"} hover:text-green-700`,title:e.is_public?"Make private":"Share with community",children:f.jsx(g7,{className:"h-4 w-4"})}),(l||c)&&n&&f.jsx(K,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",title:"Delete prompt",children:f.jsx(sa,{className:"h-4 w-4"})})]})]}),f.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.description}),f.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[f.jsx("span",{className:"text-xs px-2 py-1 bg-brand-purple/10 text-brand-purple rounded-full",children:x(e.category)}),e.is_public&&f.jsxs("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full flex items-center gap-1",children:[f.jsx(yb,{className:"h-3 w-3"}),"Public"]}),c&&f.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full flex items-center gap-1",children:[f.jsx(FW,{className:"h-3 w-3"}),"Product"]}),l&&e.is_public&&f.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full flex items-center gap-1",children:[f.jsx("span",{className:"h-3 w-3",children:""}),"Your Prompt"]}),f.jsxs("span",{className:"text-xs text-gray-500",children:["Created: ",v]})]}),f.jsx("div",{className:"bg-gray-50 p-3 rounded-md max-h-32 overflow-y-auto mb-3",children:f.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:e.template})}),f.jsxs("div",{className:"flex justify-between items-center",children:[u&&f.jsx("span",{className:"text-xs text-green-600",children:"Copied to clipboard!"}),f.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[!l&&i&&f.jsxs(K,{variant:"outline",size:"sm",onClick:i,className:"flex items-center gap-2",title:"Save a copy to your personal library",children:[f.jsx(cM,{className:"w-4 h-4"}),"Save to Personal"]}),s&&o&&f.jsxs(K,{variant:l?"default":"outline",size:"sm",onClick:o,className:"flex items-center gap-2",title:"Add to product library",children:[f.jsx(sM,{className:"w-4 h-4"}),"Add to Product"]})]})]})]})}function G2({prompt:e,onSave:t,onCancel:n,isAddingToProduct:r=!1,isEditingCommunityPrompt:s=!1}){console.log("PromptForm rendered with prompt:",e),console.log("isAddingToProduct:",r),console.log("isEditingCommunityPrompt:",s);const[o,i]=y.useState({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",template:(e==null?void 0:e.template)||"",category:(e==null?void 0:e.category)||"system",is_public:(e==null?void 0:e.is_public)||!1});console.log("Initial form data:",o);const[a,l]=y.useState({}),c=p=>{const{name:m,value:g}=p.target;i(v=>({...v,[m]:g})),a[m]&&l(v=>{const x={...v};return delete x[m],x})},u=p=>{const{name:m,checked:g}=p.target;i(v=>({...v,[m]:g}))},d=()=>{const p={};return o.name.trim()||(p.name="Name is required"),o.description.trim()||(p.description="Description is required"),o.template.trim()||(p.template="Prompt template is required"),l(p),Object.keys(p).length===0},h=p=>{if(p.preventDefault(),!d())return;const m={...o,id:e==null?void 0:e.id};console.log("PromptForm submitting with data:",m),console.log("Is this a product prompt?",r),t(m)};return f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-xl font-bold",children:e?r?"Edit Product Prompt":s?"Edit Community Prompt":"Edit Prompt":r?"Create New Product Prompt":"Create New Prompt"}),f.jsx(K,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0",children:f.jsx(Gi,{className:"h-4 w-4"})})]}),f.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r&&f.jsxs("div",{className:"bg-blue-50 p-3 rounded-md mb-4 text-sm text-blue-700 flex items-center gap-2",children:[f.jsx(sM,{className:"h-4 w-4"}),f.jsx("span",{children:e?"You are editing a prompt in the product library.":"This prompt will be added directly to the product prompt library."})]}),s&&f.jsxs("div",{className:"bg-green-50 p-3 rounded-md mb-4 text-sm text-green-700 flex items-center gap-2",children:[f.jsx(yb,{className:"h-4 w-4"}),f.jsx("span",{children:"You are editing a prompt that is shared with the community."})]}),f.jsxs("div",{children:[f.jsx(Pe,{htmlFor:"name",children:"Prompt Name"}),f.jsx(At,{id:"name",name:"name",value:o.name,onChange:c,className:a.name?"border-red-500":""}),a.name&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.name})]}),f.jsxs("div",{children:[f.jsx(Pe,{htmlFor:"description",children:"Description"}),f.jsx(Zt,{id:"description",name:"description",value:o.description,onChange:c,rows:2,className:a.description?"border-red-500":""}),a.description&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.description})]}),f.jsxs("div",{children:[f.jsx(Pe,{htmlFor:"category",children:"Category"}),f.jsxs("select",{id:"category",name:"category",value:o.category,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-brand-purple focus:border-transparent",children:[f.jsx("option",{value:"first",children:"First Prompts"}),f.jsx("option",{value:"system",children:"System Prompts"}),f.jsx("option",{value:"page",children:"Page Prompts"}),f.jsx("option",{value:"feature",children:"Feature Prompts"}),f.jsx("option",{value:"debugging",children:"Debugging Prompts"}),f.jsx("option",{value:"database",children:"Database Prompts"}),f.jsx("option",{value:"authentication",children:"Authentication Prompts"})]})]}),f.jsxs("div",{children:[f.jsx(Pe,{htmlFor:"template",children:"Prompt Template"}),f.jsx("div",{className:"mb-2",children:f.jsxs("span",{className:"text-xs text-gray-500",children:["Use natural language with clear instructions. You can include placeholders like ","{product_name}"," or ","{user_goal}","."]})}),f.jsx(Zt,{id:"template",name:"template",value:o.template,onChange:c,rows:10,className:a.template?"border-red-500":"",placeholder:"Write your prompt template here..."}),a.template&&f.jsx("p",{className:"text-sm text-red-500 mt-1",children:a.template})]}),f.jsx("div",{className:"flex items-center gap-2",children:!r&&f.jsxs(f.Fragment,{children:[f.jsx("input",{type:"checkbox",id:"is_public",name:"is_public",checked:o.is_public,onChange:u,className:"h-4 w-4 rounded border-gray-300 text-brand-purple focus:ring-brand-purple"}),f.jsxs(Pe,{htmlFor:"is_public",className:"flex items-center gap-2 text-sm cursor-pointer",children:[f.jsx(yb,{className:"w-4 h-4 text-brand-purple"}),"Share with community"]})]})}),f.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[f.jsx(K,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),f.jsxs(K,{type:"submit",variant:"secondary",className:"flex items-center gap-2",children:[f.jsx(cM,{className:"w-4 h-4"}),e?"Update Prompt":r?"Save to Product Library":"Save Prompt"]})]})]})]})})}function hve(){var Ce;const{user:e}=qn(),{productSlug:t}=ao(),[n,r]=y.useState([]),[s,o]=y.useState([]),[i,a]=y.useState([]),[l,c]=y.useState(!0),[u,d]=y.useState(null),[h,p]=y.useState(null),[m,g]=y.useState(!1),[v,x]=y.useState(null),[w,b]=y.useState(null),[S,C]=y.useState(null),[E,k]=y.useState("all"),[N,P]=y.useState("all"),[T,R]=y.useState(null),[L,z]=y.useState(0),[_,D]=y.useState(t?"product":"personal"),[O,F]=y.useState(!1),[j,A]=y.useState(!1);y.useEffect(()=>{const U=()=>F(!1),q=()=>F(!0);return window.addEventListener("online",U),window.addEventListener("offline",q),F(!navigator.onLine),()=>{window.removeEventListener("online",U),window.removeEventListener("offline",q)}},[]),y.useEffect(()=>{async function U(){if(e)try{if(c(!0),d(null),t)try{const{data:q,error:he}=await G.from("products").select("id").eq("slug",t).single();if(he)throw he;R(q.id);const{data:fe,error:Q}=await G.from("product_prompts").select("*").eq("product_id",q.id).order("created_at",{ascending:!1});if(Q)throw Q;a(fe||[])}catch(q){console.error("Error loading product prompts:",q)}try{const{data:q,error:he}=await G.from("prompt_templates").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(he)throw he;r(q||[])}catch(q){throw console.error("Error loading personal prompts:",q),q}try{if(navigator.onLine){const{data:q,error:he}=await G.from("prompt_templates").select("*").eq("is_public",!0).order("created_at",{ascending:!1});if(he)throw he;o(q||[])}else o(q=>q.length>0?q:[])}catch(q){console.error("Error loading community prompts:",q),o([])}}catch(q){console.error("Error loading prompts:",q),d(dn(q).message)}finally{c(!1)}}U()},[e,t,L]),y.useEffect(()=>{T&&_!=="product"&&D("product")},[T]),y.useEffect(()=>{console.log("selectedPrompt changed:",v==null?void 0:v.id)},[v]),y.useEffect(()=>{console.log("selectedProductPrompt changed:",w==null?void 0:w.id)},[w]),y.useEffect(()=>{console.log("showPromptForm changed:",m)},[m]),y.useEffect(()=>{var U;console.log("editingPrompt changed:",S==null?void 0:S.type,(U=S==null?void 0:S.data)==null?void 0:U.id)},[S]);const $=async U=>{if(e)try{if(d(null),(S==null?void 0:S.type)==="product"&&T){const Q={product_id:T,template_id:null,name:U.name,description:U.description,prompt:U.template},{data:Ae,error:je}=await G.from("product_prompts").insert(Q).select().single();if(je)throw je;a(ut=>[Ae,...ut]),C(null),p(`"${U.name}" added to product prompts`),setTimeout(()=>p(null),3e3);return}const q={...U,user_id:e.id,is_public:U.is_public||!1},{data:he,error:fe}=await G.from("prompt_templates").insert(q).select().single();if(fe)throw fe;r(Q=>[he,...Q]),C(null),he.is_public?p(`"${he.name}" has been created and shared with the community`):p(`"${he.name}" has been created`),setTimeout(()=>p(null),3e3),he.is_public&&z(Q=>Q+1)}catch(q){console.error("Error creating prompt:",q),d(dn(q).message)}},B=async U=>{try{if(d(null),!U.id)throw new Error("Missing prompt ID");const q=n.find(je=>je.id===U.id)||s.find(je=>je.id===U.id);if(!q)throw new Error("Prompt not found");const he=q.is_public!==U.is_public,fe=_==="community",Q={name:U.name,description:U.description,template:U.template,category:U.category,is_public:U.is_public},{error:Ae}=await G.from("prompt_templates").update(Q).eq("id",U.id);if(Ae)throw Ae;r(je=>je.map(ut=>ut.id===U.id?{...ut,...Q}:ut)),o(je=>je.map(ut=>ut.id===U.id?{...ut,...Q}:ut)),C(null),he?U.is_public?p(`"${U.name}" is now shared with the community`):p(`"${U.name}" is no longer shared with the community`):p(`"${U.name}" has been updated`),setTimeout(()=>p(null),3e3),he&&z(je=>je+1),fe&&U.is_public?D("community"):D("personal")}catch(q){console.error("Error updating prompt:",q),d(dn(q).message)}},I=async U=>{try{d(null);const q=n.find(Q=>Q.id===U),he=q==null?void 0:q.is_public,{error:fe}=await G.from("prompt_templates").delete().eq("id",U);if(fe)throw fe;r(Q=>Q.filter(Ae=>Ae.id!==U)),he&&z(Q=>Q+1)}catch(q){console.error("Error deleting prompt:",q),d(dn(q).message)}},H=async U=>{try{d(null);const q=!U.is_public,{error:he}=await G.from("prompt_templates").update({is_public:q}).eq("id",U.id);if(he)throw he;r(fe=>fe.map(Q=>Q.id===U.id?{...Q,is_public:q}:Q)),p(q?`"${U.name}" is now shared with the community`:`"${U.name}" is no longer shared with the community`),setTimeout(()=>p(null),3e3),z(fe=>fe+1)}catch(q){console.error("Error toggling prompt visibility:",q),d(dn(q).message)}},V=async U=>{if(T)try{d(null);const{data:q,error:he}=await G.from("product_prompts").select("id").eq("product_id",T).eq("template_id",U.id);if(he)throw he;if(q&&q.length>0){d("This prompt is already in the product library");return}const fe={product_id:T,template_id:U.id,name:U.name,description:U.description,prompt:U.template},{data:Q,error:Ae}=await G.from("product_prompts").insert(fe).select().single();if(Ae)throw Ae;a(je=>[Q,...je]),p(`"${U.name}" added to product prompts`),setTimeout(()=>p(null),3e3),D("product")}catch(q){console.error("Error saving prompt to product:",q),d(dn(q).message)}},W=async U=>{try{d(null);const{error:q}=await G.from("product_prompts").delete().eq("id",U);if(q)throw q;a(he=>he.filter(fe=>fe.id!==U)),p("Product prompt deleted successfully"),setTimeout(()=>p(null),3e3)}catch(q){console.error("Error deleting product prompt:",q),d(dn(q).message)}},Y=async U=>{console.log("handleUpdateProductPrompt called with:",U);try{if(d(null),!U.id)throw new Error("Missing prompt ID");const q={name:U.name,description:U.description,prompt:U.template};console.log("Updating product prompt with data:",q);const{error:he}=await G.from("product_prompts").update(q).eq("id",U.id);if(he)throw he;a(fe=>fe.map(Q=>Q.id===U.id?{...Q,name:q.name||Q.name,description:q.description||Q.description,prompt:q.prompt||Q.prompt}:Q)),C(null),p("Product prompt updated successfully"),setTimeout(()=>p(null),3e3)}catch(q){console.error("Error updating product prompt:",q),d(dn(q).message)}},Z=async U=>{if(e)try{d(null);const{data:q,error:he}=await G.from("prompt_templates").select("id").eq("user_id",e.id).eq("template",U.template);if(he)throw he;if(q&&q.length>0){d("A similar prompt already exists in your personal library");return}const fe={user_id:e.id,name:`${U.name} (Saved)`,description:U.description,template:U.template,category:U.category,is_public:!1},{data:Q,error:Ae}=await G.from("prompt_templates").insert(fe).select().single();if(Ae)throw Ae;r(je=>[Q,...je]),p(`"${U.name}" saved to your personal library`),setTimeout(()=>p(null),3e3),D("personal")}catch(q){console.error("Error saving to personal library:",q),d(dn(q).message)}},ae=U=>i.some(q=>q.template_id===U),se=n.filter(U=>!(E!=="all"&&U.category!==E)),re=s.filter(U=>!(E!=="all"&&U.category!==E)),De=async U=>{if(e)try{d(null);const q={user_id:e.id,name:`${U.name} (Copy)`,description:U.description,template:U.template,category:U.category,is_public:!1},{data:he,error:fe}=await G.from("prompt_templates").insert(q).select().single();if(fe)throw fe;r(Q=>[he,...Q]),p(`"${U.name}" has been duplicated to your personal library`),setTimeout(()=>p(null),3e3),D("personal")}catch(q){console.error("Error duplicating prompt:",q),d(dn(q).message)}},me=async U=>{if(e)try{d(null);const q={user_id:e.id,name:`${U.name} (Copy)`,description:U.description,template:U.prompt,category:"system",is_public:!1},{data:he,error:fe}=await G.from("prompt_templates").insert(q).select().single();if(fe)throw fe;r(Q=>[he,...Q]),p(`"${U.name}" has been duplicated to your personal library`),setTimeout(()=>p(null),3e3),D("personal")}catch(q){console.error("Error duplicating product prompt:",q),d(dn(q).message)}};return l?f.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:f.jsxs("div",{className:"text-center",children:[f.jsx(We,{className:"w-8 h-8 animate-spin text-brand-purple mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading prompts..."})]})}):f.jsxs("div",{className:"space-y-6",children:[f.jsx(gl,{title:"Prompt Library"}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Prompt Library"}),f.jsxs(K,{onClick:()=>{C({type:_==="product"?"product":"personal",data:null})},variant:"secondary",className:"flex items-center gap-2",children:[f.jsx(qi,{className:"w-4 h-4"}),"Create New Prompt"]})]}),u&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg flex items-center gap-2",children:[f.jsx(vn,{className:"w-5 h-5 flex-shrink-0"}),f.jsx("span",{children:u})]}),h&&f.jsxs("div",{className:"bg-green-50 text-green-700 p-4 rounded-lg flex items-center gap-2",children:[f.jsx("span",{className:"w-5 h-5 flex-shrink-0",children:""}),f.jsx("span",{children:h})]}),O&&_==="community"&&f.jsxs("div",{className:"bg-yellow-50 text-yellow-700 p-4 rounded-lg flex items-center gap-2",children:[f.jsx(vn,{className:"w-5 h-5 flex-shrink-0"}),f.jsx("span",{children:"You're offline. Community prompts are not available."})]}),f.jsxs(fve,{defaultValue:t?"product":"personal",value:_,className:"w-full",onValueChange:U=>{D(U),A(U==="product")},children:[f.jsxs(Lz,{className:"mb-4",children:[f.jsx(um,{value:"personal",children:"Personal Prompts"}),f.jsx(um,{value:"community",children:"Community Prompts"}),T&&f.jsx(um,{value:"product",children:"Product Prompts"})]}),f.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(oM,{className:"w-4 h-4 text-gray-500"}),f.jsx("span",{className:"text-sm text-gray-700",children:"Filter by:"})]}),f.jsxs("select",{value:E,onChange:U=>k(U.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-brand-purple focus:border-transparent",children:[f.jsx("option",{value:"all",children:"All Categories"}),f.jsx("option",{value:"first",children:"First Prompts"}),f.jsx("option",{value:"system",children:"System Prompts"}),f.jsx("option",{value:"page",children:"Page Prompts"}),f.jsx("option",{value:"feature",children:"Feature Prompts"}),f.jsx("option",{value:"debugging",children:"Debugging Prompts"}),f.jsx("option",{value:"database",children:"Database Prompts"}),f.jsx("option",{value:"authentication",children:"Authentication Prompts"})]}),f.jsxs("select",{value:N,onChange:U=>P(U.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-brand-purple focus:border-transparent",children:[f.jsx("option",{value:"all",children:"All Tools"}),f.jsx("option",{value:"replit",children:"Replit"}),f.jsx("option",{value:"v0",children:"v0"}),f.jsx("option",{value:"bolt",children:"Bolt.new"})]})]}),f.jsx(dm,{value:"personal",className:"space-y-4",children:se.length===0?f.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[f.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't created any prompts yet."}),f.jsx(K,{onClick:()=>{C({type:"personal",data:null})},variant:"secondary",children:"Create Your First Prompt"})]}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:se.map(U=>f.jsx(lw,{prompt:U,onEdit:()=>{console.log("Edit button clicked for prompt:",U.id),C({type:"personal",data:U})},onDelete:()=>I(U.id),onTogglePublic:()=>H(U),onDuplicate:()=>De(U),showProductSave:!!T&&!ae(U.id),onSaveToProduct:T&&!ae(U.id)?()=>V(U):void 0,isPersonal:!0},U.id))})}),f.jsx(dm,{value:"community",className:"space-y-4",children:O?f.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:f.jsx("p",{className:"text-gray-600",children:"You're offline. Community prompts will be available when you reconnect."})}):re.length===0?f.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:f.jsx("p",{className:"text-gray-600",children:"No community prompts available with the selected filters."})}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:re.map(U=>f.jsx(lw,{prompt:U,showProductSave:!!T&&!ae(U.id),onSaveToProduct:T&&!ae(U.id)?()=>V(U):void 0,onSaveToPersonal:U.user_id!==(e==null?void 0:e.id)?()=>Z(U):void 0,onDuplicate:()=>De(U),isPersonal:U.user_id===(e==null?void 0:e.id),onEdit:U.user_id===(e==null?void 0:e.id)?()=>{console.log("Edit button clicked for community prompt:",U.id),C({type:"personal",data:U})}:void 0,onDelete:U.user_id===(e==null?void 0:e.id)?()=>I(U.id):void 0,onTogglePublic:U.user_id===(e==null?void 0:e.id)?()=>H(U):void 0},U.id))})}),T&&f.jsx(dm,{value:"product",className:"space-y-4",children:i.length===0?f.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[f.jsx("p",{className:"text-gray-600 mb-4",children:"No prompts added to this product yet."}),f.jsx(K,{onClick:()=>{C({type:"product",data:null})},variant:"secondary",children:"Create New Prompt"})]}):f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(U=>{const q={id:U.id,user_id:(e==null?void 0:e.id)||"",name:U.name,description:U.description,template:U.prompt,category:"system",created_at:U.created_at,is_public:!1};return f.jsx(lw,{prompt:q,isPersonal:!1,isProductPrompt:!0,onDelete:()=>W(U.id),onEdit:()=>{console.log("Edit button clicked for product prompt:",U.id),C({type:"product",data:U})},onDuplicate:()=>me(U)},U.id)})})})]}),S&&(S.type==="personal"?f.jsx(G2,{prompt:S.data,onSave:S.data?B:$,onCancel:()=>C(null),isAddingToProduct:!1,isEditingCommunityPrompt:((Ce=S.data)==null?void 0:Ce.is_public)||!1}):S.data&&f.jsxs(f.Fragment,{children:[console.log("Rendering PromptForm for product prompt:",S.data),f.jsx(G2,{prompt:S.data?{id:S.data.id,user_id:(e==null?void 0:e.id)||"",name:S.data.name,description:S.data.description,template:S.data.prompt,category:"system",created_at:S.data.created_at}:null,onSave:S.data?Y:$,onCancel:()=>C(null),isAddingToProduct:!0})]}))]})}function pve(){const e=bn(),{user:t}=qn(),{productSlug:n}=ao(),[r,s]=y.useState(!0),[o,i]=y.useState(null),[a,l]=y.useState(""),[c,u]=y.useState(null),[d,h]=y.useState(""),[p,m]=y.useState(null),[g,v]=y.useState(!1),x=y.useCallback(qp(async(b,S,C)=>{try{if(v(!0),b){const{error:E}=await G.from("notes").update({content:S}).eq("id",b);if(E)throw E}else if(C){const{data:E,error:k}=await G.from("notes").insert({title:`${d} Notes`,content:S,product_id:C}).select().single();if(k)throw k;m(E.id)}}catch(E){console.error("Error saving note:",E),i("Failed to save note. Your changes may be lost.")}finally{v(!1)}},1e3),[d]);y.useEffect(()=>{async function b(){if(!t){e("/");return}try{if(s(!0),i(null),n){const{data:S,error:C}=await G.from("products").select("id, name").eq("slug",n).single();if(C)throw C;if(!S)throw new Error("Product not found");u(S.id),h(S.name);const{data:E,error:k}=await G.from("notes").select("*").eq("product_id",S.id).order("created_at",{ascending:!1}).limit(1);if(k)throw k;E&&E.length>0?(m(E[0].id),l(E[0].content)):(m(null),l(""))}else{e("/");return}}catch(S){console.error("Error loading note:",S),i("Failed to load note. Please try again.")}finally{s(!1)}}b()},[n,t,e]),y.useEffect(()=>()=>{x.cancel()},[x]);const w=async b=>{l(b),i(null),!(!t||!c)&&x(p,b,c)};return r?f.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:f.jsxs("div",{className:"text-center",children:[f.jsx(We,{className:"w-8 h-8 animate-spin text-brand-purple mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Loading notes..."})]})}):f.jsxs("div",{className:"space-y-6",children:[f.jsx(gl,{title:n?"Product Notes":"Personal Notes"}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[d," Notes"]}),g&&f.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Saving..."]})]}),o&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg flex items-center gap-2",children:[f.jsx(nr,{className:"w-4 h-4"}),o]}),f.jsx(N4,{content:a,onChange:w})]})}const K2=[{label:"At least 8 characters",regex:/.{8,}/},{label:"Contains a number",regex:/\d/},{label:"Contains an uppercase letter",regex:/[A-Z]/},{label:"Contains a lowercase letter",regex:/[a-z]/},{label:"Contains a special character",regex:/[!@#$%^&*(),.?":{}|<>]/}];function mve({isOpen:e,onClose:t}){const n=bn(),[r,s]=y.useState(!1),[o,i]=y.useState(!1),[a,l]=y.useState(!1),[c,u]=y.useState({email:"",password:"",confirmPassword:"",fullName:"",rememberMe:!1}),[d,h]=y.useState({}),[p,m]=y.useState(""),[g,v]=y.useState(""),{signIn:x,signUp:w,resetPassword:b,error:S}=qn();y.useEffect(()=>{S&&e&&v(S)},[S,e]),y.useEffect(()=>{e||(u({email:"",password:"",confirmPassword:"",fullName:"",rememberMe:!1}),h({}),m(""),v(""),l(!1),s(!1))},[e]);const C=()=>{const P={};return c.email?/\S+@\S+\.\S+/.test(c.email)||(P.email="Please enter a valid email address"):P.email="Email is required",c.password?r&&K2.filter(R=>!R.regex.test(c.password)).length>0&&(P.password="Password does not meet requirements"):P.password="Password is required",r&&(c.fullName||(P.fullName="Full name is required"),c.confirmPassword?c.password!==c.confirmPassword&&(P.confirmPassword="Passwords do not match"):P.confirmPassword="Please confirm your password"),h(P),Object.keys(P).length===0},E=P=>{const{name:T,value:R,type:L,checked:z}=P.target;u(_=>({..._,[T]:L==="checkbox"?z:R})),d[T]&&h(_=>({..._,[T]:void 0})),v("")},k=async P=>{if(P.preventDefault(),m(""),v(""),!!C()){i(!0);try{a?(await b(c.email),m("Password reset instructions have been sent to your email"),setTimeout(()=>t(),2e3)):r?(await w(c.email,c.password,c.fullName),m("Account created successfully! You can now sign in."),setTimeout(()=>{n("/")},2e3)):(await x(c.email,c.password,c.rememberMe),m("Sign in successful! Redirecting..."),setTimeout(()=>{t(),n("/")},1e3))}catch(T){const R=T;v(R.message),console.error("Authentication error:",R)}finally{i(!1)}}},N=g.includes("unavailable")||g.includes("connection")||g.includes("offline");return f.jsx(Et,{open:e,onOpenChange:t,children:f.jsxs(yt,{className:"sm:max-w-[425px]",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{children:a?"Reset Password":r?"Join Fluxr":"Sign in to Fluxr"}),f.jsx("span",{className:"text-xs bg-brand-purple/10 text-brand-purple px-2 py-0.5 rounded-full font-medium",children:"BETA"})]})}),f.jsx(kt,{children:a?"Enter your email to receive password reset instructions":r?"Create a new account to get started":"Sign in to your account to continue"})]}),f.jsxs("form",{onSubmit:k,className:"space-y-4",children:[p&&f.jsxs("div",{className:"bg-green-50 text-green-700 p-3 rounded-lg flex items-center gap-2",children:[f.jsx(ks,{className:"w-4 h-4"}),p]}),g&&f.jsxs("div",{className:`${N?"bg-yellow-50 text-yellow-700":"bg-red-50 text-red-700"} p-3 rounded-lg flex items-center gap-2`,children:[N?f.jsx(S7,{className:"w-4 h-4"}):f.jsx(vn,{className:"w-4 h-4"}),g]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"email",children:"Email"}),f.jsx(At,{id:"email",name:"email",type:"email",value:c.email,onChange:E,className:d.email?"border-red-500":"",disabled:o,autoComplete:"email"}),d.email&&f.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[f.jsx(nr,{className:"w-4 h-4"}),d.email]})]}),!a&&f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"password",children:"Password"}),f.jsx(At,{id:"password",name:"password",type:"password",value:c.password,onChange:E,className:d.password?"border-red-500":"",disabled:o,autoComplete:r?"new-password":"current-password"}),d.password&&f.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[f.jsx(nr,{className:"w-4 h-4"}),d.password]})]}),r&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"confirmPassword",children:"Confirm Password"}),f.jsx(At,{id:"confirmPassword",name:"confirmPassword",type:"password",value:c.confirmPassword,onChange:E,className:d.confirmPassword?"border-red-500":"",disabled:o,autoComplete:"new-password"}),d.confirmPassword&&f.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[f.jsx(nr,{className:"w-4 h-4"}),d.confirmPassword]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Pe,{htmlFor:"fullName",children:"Full Name"}),f.jsx(At,{id:"fullName",name:"fullName",type:"text",value:c.fullName,onChange:E,className:d.fullName?"border-red-500":"",disabled:o,autoComplete:"name"}),d.fullName&&f.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[f.jsx(nr,{className:"w-4 h-4"}),d.fullName]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Password Requirements:"}),f.jsx("ul",{className:"text-sm space-y-1",children:K2.map((P,T)=>f.jsxs("li",{className:`flex items-center gap-1 ${P.regex.test(c.password)?"text-green-600":"text-gray-500"}`,children:[P.regex.test(c.password)?f.jsx(ks,{className:"w-4 h-4"}):f.jsx(nr,{className:"w-4 h-4"}),P.label]},T))})]})]}),!r&&!a&&f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",checked:c.rememberMe,onChange:E,className:"h-4 w-4 rounded border-gray-300 text-brand-purple focus:ring-brand-purple"}),f.jsx(Pe,{htmlFor:"rememberMe",className:"ml-2 text-sm",children:"Remember me"})]}),f.jsx("button",{type:"button",onClick:()=>l(!0),className:"text-sm text-brand-purple hover:underline",children:"Forgot password?"})]}),f.jsx(K,{type:"submit",className:"w-full",disabled:o,children:o?f.jsxs("span",{className:"flex items-center justify-center",children:[f.jsx(We,{className:"w-4 h-4 animate-spin mr-2"}),a?"Sending...":r?"Creating Account...":"Signing In..."]}):f.jsx("span",{children:a?"Send Reset Instructions":r?"Create Account":"Sign In"})}),f.jsx("div",{className:"text-center",children:f.jsx("button",{type:"button",onClick:()=>{a?l(!1):s(!r),v("")},className:"text-sm text-brand-purple hover:underline",children:a?"Back to sign in":r?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})}var Fz={exports:{}},gve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yve=gve,vve=yve;function Bz(){}function zz(){}zz.resetWarningCache=Bz;var xve=function(){function e(r,s,o,i,a,l){if(l!==vve){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:zz,resetWarningCache:Bz};return n.PropTypes=n,n};Fz.exports=xve();var wve=Fz.exports;const ht=zo(wve);function J2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Y2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J2(Object(n),!0).forEach(function(r){Uz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fm(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fm=function(t){return typeof t}:fm=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fm(e)}function Uz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zk(e,t){return bve(e)||Sve(e,t)||Cve(e,t)||Eve()}function bve(e){if(Array.isArray(e))return e}function Sve(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],s=!0,o=!1,i,a;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));s=!0);}catch(l){o=!0,a=l}finally{try{!s&&n.return!=null&&n.return()}finally{if(o)throw a}}return r}}function Cve(e,t){if(e){if(typeof e=="string")return X2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X2(e,t)}}function X2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Eve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fr=function(t,n,r){var s=!!r,o=M.useRef(r);M.useEffect(function(){o.current=r},[r]),M.useEffect(function(){if(!s||!t)return function(){};var i=function(){o.current&&o.current.apply(o,arguments)};return t.on(n,i),function(){t.off(n,i)}},[s,n,t,o])},Kf=function(t){var n=M.useRef(t);return M.useEffect(function(){n.current=t},[t]),n.current},Zc=function(t){return t!==null&&fm(t)==="object"},kve=function(t){return Zc(t)&&typeof t.then=="function"},_ve=function(t){return Zc(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},Q2="[object Object]",Nve=function e(t,n){if(!Zc(t)||!Zc(n))return t===n;var r=Array.isArray(t),s=Array.isArray(n);if(r!==s)return!1;var o=Object.prototype.toString.call(t)===Q2,i=Object.prototype.toString.call(n)===Q2;if(o!==i)return!1;if(!o&&!r)return t===n;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(var c={},u=0;u<a.length;u+=1)c[a[u]]=!0;for(var d=0;d<l.length;d+=1)c[l[d]]=!0;var h=Object.keys(c);if(h.length!==a.length)return!1;var p=t,m=n,g=function(x){return e(p[x],m[x])};return h.every(g)},Hz=function(t,n,r){return Zc(t)?Object.keys(t).reduce(function(s,o){var i=!Zc(n)||!Nve(t[o],n[o]);return r.includes(o)?(i&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),s):i?Y2(Y2({},s||{}),{},Uz({},o,t[o])):s},null):null},Vz="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Z2=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vz;if(t===null||_ve(t))return t;throw new Error(n)},Wz=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vz;if(kve(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(s){return Z2(s,n)})};var r=Z2(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},qz=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),t.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},Uk=M.createContext(null);Uk.displayName="ElementsContext";var Pve=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},Gz=function(t){var n=t.stripe,r=t.options,s=t.children,o=M.useMemo(function(){return Wz(n)},[n]),i=M.useState(function(){return{stripe:o.tag==="sync"?o.stripe:null,elements:o.tag==="sync"?o.stripe.elements(r):null}}),a=zk(i,2),l=a[0],c=a[1];M.useEffect(function(){var h=!0,p=function(g){c(function(v){return v.stripe?v:{stripe:g,elements:g.elements(r)}})};return o.tag==="async"&&!l.stripe?o.stripePromise.then(function(m){m&&h&&p(m)}):o.tag==="sync"&&!l.stripe&&p(o.stripe),function(){h=!1}},[o,l,r]);var u=Kf(n);M.useEffect(function(){u!==null&&u!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,n]);var d=Kf(r);return M.useEffect(function(){if(l.elements){var h=Hz(r,d,["clientSecret","fonts"]);h&&l.elements.update(h)}},[r,d,l.elements]),M.useEffect(function(){qz(l.stripe)},[l.stripe]),M.createElement(Uk.Provider,{value:l},s)};Gz.propTypes={stripe:ht.any,options:ht.object};ht.func.isRequired;var Kz=M.createContext(null);Kz.displayName="CustomCheckoutSdkContext";var Ave=function(t,n){if(!t)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return t},Tve=M.createContext(null);Tve.displayName="CustomCheckoutContext";ht.any,ht.shape({clientSecret:ht.string.isRequired,elementsOptions:ht.object}).isRequired;var eR=function(t){var n=M.useContext(Kz),r=M.useContext(Uk);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CustomCheckoutProvider> and <Elements> providers."));return n?Ave(n,t):Pve(r,t)},Rve=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Mt=function(t,n){var r="".concat(Rve(t),"Element"),s=function(l){var c=l.id,u=l.className,d=l.options,h=d===void 0?{}:d,p=l.onBlur,m=l.onFocus,g=l.onReady,v=l.onChange,x=l.onEscape,w=l.onClick,b=l.onLoadError,S=l.onLoaderStart,C=l.onNetworksChange,E=l.onConfirm,k=l.onCancel,N=l.onShippingAddressChange,P=l.onShippingRateChange,T=eR("mounts <".concat(r,">")),R="elements"in T?T.elements:null,L="customCheckoutSdk"in T?T.customCheckoutSdk:null,z=M.useState(null),_=zk(z,2),D=_[0],O=_[1],F=M.useRef(null),j=M.useRef(null);fr(D,"blur",p),fr(D,"focus",m),fr(D,"escape",x),fr(D,"click",w),fr(D,"loaderror",b),fr(D,"loaderstart",S),fr(D,"networkschange",C),fr(D,"confirm",E),fr(D,"cancel",k),fr(D,"shippingaddresschange",N),fr(D,"shippingratechange",P),fr(D,"change",v);var A;g&&(t==="expressCheckout"?A=g:A=function(){g(D)}),fr(D,"ready",A),M.useLayoutEffect(function(){if(F.current===null&&j.current!==null&&(R||L)){var B=null;L?B=L.createElement(t,h):R&&(B=R.create(t,h)),F.current=B,O(B),B&&B.mount(j.current)}},[R,L,h]);var $=Kf(h);return M.useEffect(function(){if(F.current){var B=Hz(h,$,["paymentRequest"]);B&&"update"in F.current&&F.current.update(B)}},[h,$]),M.useLayoutEffect(function(){return function(){if(F.current&&typeof F.current.destroy=="function")try{F.current.destroy(),F.current=null}catch{}}},[]),M.createElement("div",{id:c,className:u,ref:j})},o=function(l){eR("mounts <".concat(r,">"));var c=l.id,u=l.className;return M.createElement("div",{id:c,className:u})},i=n?o:s;return i.propTypes={id:ht.string,className:ht.string,onChange:ht.func,onBlur:ht.func,onFocus:ht.func,onReady:ht.func,onEscape:ht.func,onClick:ht.func,onLoadError:ht.func,onLoaderStart:ht.func,onNetworksChange:ht.func,onConfirm:ht.func,onCancel:ht.func,onShippingAddressChange:ht.func,onShippingRateChange:ht.func,options:ht.object},i.displayName=r,i.__elementType=t,i},Rt=typeof window>"u",Hk=M.createContext(null);Hk.displayName="EmbeddedCheckoutProviderContext";var Jz=function(){var t=M.useContext(Hk);if(!t)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return t},jve="Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Ove=function(t){var n=t.stripe,r=t.options,s=t.children,o=M.useMemo(function(){return Wz(n,jve)},[n]),i=M.useRef(null),a=M.useRef(null),l=M.useState({embeddedCheckout:null}),c=zk(l,2),u=c[0],d=c[1];M.useEffect(function(){if(!(a.current||i.current)){var m=function(v){a.current||i.current||(a.current=v,i.current=a.current.initEmbeddedCheckout(r).then(function(x){d({embeddedCheckout:x})}))};o.tag==="async"&&!a.current&&(r.clientSecret||r.fetchClientSecret)?o.stripePromise.then(function(g){g&&m(g)}):o.tag==="sync"&&!a.current&&(r.clientSecret||r.fetchClientSecret)&&m(o.stripe)}},[o,r,u,a]),M.useEffect(function(){return function(){u.embeddedCheckout?(i.current=null,u.embeddedCheckout.destroy()):i.current&&i.current.then(function(){i.current=null,u.embeddedCheckout&&u.embeddedCheckout.destroy()})}},[u.embeddedCheckout]),M.useEffect(function(){qz(a)},[a]);var h=Kf(n);M.useEffect(function(){h!==null&&h!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[h,n]);var p=Kf(r);return M.useEffect(function(){if(p!=null){if(r==null){console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them.");return}r.clientSecret===void 0&&r.fetchClientSecret===void 0&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),p.clientSecret!=null&&r.clientSecret!==p.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),p.fetchClientSecret!=null&&r.fetchClientSecret!==p.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),p.onComplete!=null&&r.onComplete!==p.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),p.onShippingDetailsChange!=null&&r.onShippingDetailsChange!==p.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),p.onLineItemsChange!=null&&r.onLineItemsChange!==p.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")}},[p,r]),M.createElement(Hk.Provider,{value:u},s)},Mve=function(t){var n=t.id,r=t.className,s=Jz(),o=s.embeddedCheckout,i=M.useRef(!1),a=M.useRef(null);return M.useLayoutEffect(function(){return!i.current&&o&&a.current!==null&&(o.mount(a.current),i.current=!0),function(){if(i.current&&o)try{o.unmount(),i.current=!1}catch{}}},[o]),M.createElement("div",{ref:a,id:n,className:r})},Ive=function(t){var n=t.id,r=t.className;return Jz(),M.createElement("div",{id:n,className:r})},Dve=Rt?Ive:Mve;Mt("auBankAccount",Rt);Mt("card",Rt);Mt("cardNumber",Rt);Mt("cardExpiry",Rt);Mt("cardCvc",Rt);Mt("fpxBank",Rt);Mt("iban",Rt);Mt("idealBank",Rt);Mt("p24Bank",Rt);Mt("epsBank",Rt);Mt("payment",Rt);Mt("expressCheckout",Rt);Mt("currencySelector",Rt);Mt("paymentRequestButton",Rt);Mt("linkAuthentication",Rt);Mt("address",Rt);Mt("shippingAddress",Rt);Mt("paymentMethodMessaging",Rt);Mt("affirmMessage",Rt);Mt("afterpayClearpayMessage",Rt);function Yz(){console.log("Clearing subscription cache")}const $ve="pk_live_51Qx9ApGrxtYDuhPGnvjvKGoruG7VZj18gFUv2x5snirALCUyf4DQfiigbFLYc1AhjgIHzD68C4d6jIpnggNLSlXR00sZj6cmh4",Xz=oB($ve);function Lve(){const e=bn(),{signOut:t}=qn(),[n,r]=y.useState(null),[s,o]=y.useState(!1),[i,a]=y.useState(null),[l,c]=y.useState(!1),[u,d]=y.useState("initial"),h=async()=>{try{c(!0),await t(),e("/")}catch(m){a(dn(m).message)}finally{c(!1)}};y.useEffect(()=>{(async()=>{try{o(!0),a(null),d("loading");const{data:{session:g},error:v}=await G.auth.getSession();if(v)throw v;if(!g){e("/");return}const x=await fetch("https://lmomfddmypameoffnbcq.supabase.co/functions/v1/create-checkout-session",{method:"POST",headers:{Authorization:`Bearer ${g.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({mode:"embedded"})});if(!x.ok){const b=await x.json();throw new Error(b.error||"Failed to create checkout session")}const w=await x.json();if(w.clientSecret)Yz(),r(w.clientSecret),d("ready");else throw new Error("Invalid checkout session response")}catch(g){console.error("Payment error:",g),a(g instanceof Error?g.message:"Failed to initiate payment. Please try again."),d("error")}finally{o(!1)}})()},[e]);const p=m=>{m.status==="complete"?e("/payment/return?session_id="+m.sessionId):m.error&&(console.error("Checkout error:",m.error),a(`Payment error: ${m.error.message}`))};return f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Complete Your Purchase"}),f.jsx(K,{variant:"ghost",size:"sm",onClick:h,disabled:l,className:"text-gray-500 hover:text-gray-700",children:l?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(We,{className:"w-4 h-4 animate-spin"}),"Signing Out..."]}):"Sign Out"})]}),i&&f.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg mb-6 flex items-center gap-2",children:[f.jsx(nr,{className:"w-5 h-5 flex-shrink-0"}),f.jsx("p",{children:i})]}),(u==="initial"||u==="loading")&&f.jsxs("div",{className:"space-y-4 mb-6",children:[f.jsx("p",{className:"text-gray-600",children:"Get lifetime access to all features for a one-time payment of $15."}),f.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx(ks,{className:"w-4 h-4 text-green-600"}),"Unlimited products and PRDs"]}),f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx(ks,{className:"w-4 h-4 text-green-600"}),"AI-powered content generation"]}),f.jsxs("li",{className:"flex items-center gap-2",children:[f.jsx(ks,{className:"w-4 h-4 text-green-600"}),"All future updates included"]})]}),f.jsx("div",{className:"flex justify-center mt-4",children:f.jsx(We,{className:"w-6 h-6 animate-spin text-brand-purple"})})]}),n&&u==="ready"&&f.jsx("div",{className:"mb-4 rounded-lg overflow-hidden border border-gray-200",children:f.jsx(Ove,{stripe:Xz,options:{clientSecret:n},children:f.jsx(Dve,{onComplete:p})})}),u==="error"&&!n&&f.jsx(K,{onClick:()=>window.location.reload(),className:"w-full",variant:"secondary",children:"Retry Payment"})]})})}function Fve({isOpen:e,onClose:t}){return f.jsx(Et,{open:e,onOpenChange:t,children:f.jsxs(yt,{className:"sm:max-w-md",children:[f.jsxs(vt,{children:[f.jsx(xt,{children:"Welcome to Fluxr"}),f.jsx(kt,{children:"Let's bring your MVP to life"})]}),f.jsxs("div",{className:"space-y-4 py-4",children:[f.jsx("p",{className:"text-sm text-gray-600",children:"Thanks for joining! I'm Steve, the founder of Fluxr. I built this tool to help you define, design, and track your MVP development with AI assistance."}),f.jsx("p",{className:"text-sm text-gray-600",children:"Please reach out if you have any feedback or run into issues: steve@fluxr.ai"})]}),f.jsx(Ht,{children:f.jsx(K,{onClick:t,variant:"secondary",children:"Get Started"})})]})})}function Bve(){const e=bn(),[t,n]=y.useState(null),[r,s]=y.useState(!0),[o,i]=y.useState("loading"),[a,l]=y.useState(3),c=async u=>{try{i("verifying");const{data:{session:d},error:h}=await G.auth.getSession();if(h)throw h;if(!d)throw new Error("No active session");const p=await fetch("https://lmomfddmypameoffnbcq.supabase.co/functions/v1/verify-session",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d.access_token}`},body:JSON.stringify({session_id:u})});if(!p.ok)throw new Error("Failed to verify session");if((await p.json()).status!=="complete")throw new Error("Payment not completed");i("success");let g=3;const v=setInterval(()=>{g--,l(g),g===0&&(clearInterval(v),e("/"))},1e3);return!0}catch{throw i("error"),new Error("Payment verification failed")}};return y.useEffect(()=>{(async()=>{try{const h=new URLSearchParams(window.location.search).get("session_id");if(!h||h==="{CHECKOUT_SESSION_ID}")throw new Error("Invalid return URL");await c(h),Yz()}catch(d){n(d.message),i("error")}finally{s(!1)}})()},[e]),t?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsxs("div",{className:"bg-red-50 text-red-700 p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[f.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[f.jsx(vn,{className:"w-6 h-6"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold mb-1",children:"Payment Error"}),f.jsx("p",{children:t})]})]}),f.jsx(K,{variant:"outline",onClick:()=>e("/payment"),className:"w-full",children:"Return to Payment"})]})}):f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:f.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full mx-4 text-center",children:o==="success"?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:f.jsx(ks,{className:"w-8 h-8 text-green-600"})}),f.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),f.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for your purchase. You now have lifetime access to all features."}),f.jsxs("p",{className:"text-sm text-gray-500",children:["Redirecting to dashboard in ",a," seconds..."]})]}):f.jsxs(f.Fragment,{children:[f.jsx(We,{className:"w-12 h-12 animate-spin text-brand-purple mx-auto mb-6"}),f.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:o==="verifying"?"Verifying Payment":"Processing Payment"}),f.jsx("p",{className:"text-gray-600",children:o==="verifying"?"Please wait while we verify your payment...":"Please wait while we process your payment..."})]})})})}function Qz(){const{error:e,clearError:t}=qn();return!e||!(e.includes("unavailable")||e.includes("connection")||e.includes("offline"))?null:f.jsxs("div",{className:"bg-yellow-50 text-yellow-800 px-4 py-2 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(vn,{className:"h-5 w-5 mr-2"}),f.jsx("span",{children:e})]}),f.jsx("button",{onClick:t,className:"text-yellow-700 hover:text-yellow-900 text-sm font-medium",children:"Dismiss"})]})}function vo({children:e}){const{user:t,loading:n,isWelcomePopupVisible:r,setWelcomePopupVisible:s}=qn();return bn(),n?f.jsx("div",{className:"flex items-center justify-center min-h-screen",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-purple"})}):t?f.jsxs(f.Fragment,{children:[f.jsx(Qz,{}),f.jsx(Fve,{isOpen:r,onClose:()=>s(!1)}),e]}):f.jsx(kO,{to:"/"})}function zve(){const{user:e,loading:t}=qn(),[n,r]=y.useState(!0);return t?f.jsx("div",{className:"flex items-center justify-center min-h-screen",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-purple"})}):e?f.jsx(kO,{to:"/"}):f.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center",children:[f.jsx(Qz,{}),f.jsx(mve,{isOpen:n,onClose:()=>{}})]})}function tR(){const e=bn();return y.useEffect(()=>{(async()=>{try{const{error:n}=await G.auth.getSession();n&&console.error("Auth callback error:",n)}catch(n){console.error("Exception during auth callback:",n)}finally{e("/")}})()},[e]),f.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-purple"}),f.jsx("p",{className:"ml-2 text-gray-600",children:"Completing authentication..."})]})}function Uve(){const{user:e,isWelcomePopupVisible:t,setWelcomePopupVisible:n}=qn();return f.jsx(JK,{children:f.jsxs(M8,{children:[f.jsx(Yn,{path:"/",element:e?f.jsx(vo,{children:f.jsx(aJ,{})}):f.jsx(zve,{})}),f.jsx(Yn,{path:"/product/new",element:f.jsx(vo,{children:f.jsx(lJ,{})})}),f.jsx(Yn,{path:"/product/:productSlug/prd",element:f.jsx(vo,{children:f.jsx(Ooe,{})})}),f.jsx(Yn,{path:"/product/:productSlug/customer-profiles",element:f.jsx(vo,{children:f.jsx(ffe,{})})}),f.jsx(Yn,{path:"/product/:productSlug/flows",element:f.jsx(vo,{children:f.jsx(rfe,{})})}),f.jsx(Yn,{path:"/product/:productSlug/development",element:f.jsx(vo,{children:f.jsx(lve,{})})}),f.jsx(Yn,{path:"/product/:productSlug/prompts",element:f.jsx(vo,{children:f.jsx(hve,{})})}),f.jsx(Yn,{path:"/product/:productSlug/notes",element:f.jsx(vo,{children:f.jsx(pve,{})})}),f.jsx(Yn,{path:"/auth/callback",element:f.jsx(tR,{})}),f.jsx(Yn,{path:"/auth/reset-password",element:f.jsx(tR,{})}),f.jsx(Yn,{path:"/payment/return",element:f.jsx(Bve,{})}),f.jsx(Yn,{path:"/profile",element:f.jsx(vo,{children:f.jsx(dfe,{})})}),f.jsx(Yn,{path:"/payment",element:f.jsx(Lve,{})})]})})}function Hve(){return f.jsx(jO,{children:f.jsx(z8,{children:f.jsx(Gz,{stripe:Xz,children:f.jsx(RW,{children:f.jsx(jW,{children:f.jsx(Uve,{})})})})})})}mO(document.getElementById("root")).render(f.jsx(M.StrictMode,{children:f.jsx(Hve,{})}));export{zo as g};
